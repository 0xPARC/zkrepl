import{l as f,R as N,w as $,a as e,e as R,K as v,b as y,_ as S,c as C}from"./vendor.bfb6eff5.js";const L=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function m(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerpolicy&&(t.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?t.credentials="include":o.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(o){if(o.ep)return;o.ep=!0;const t=m(o);fetch(o.href,t)}};L();f.register({id:"circom"});let w=d=>{};f.registerHoverProvider("circom",{provideHover:async function(d,r){if(k.running)return null;const m=d.getLineContent(r.lineNumber),l=/([a-z$_][a-z0-9$_]*)(\.[a-z$_][a-z0-9$_]*)*(\[\d+\])?/g,o=r.column;let t;if(t=/(include\s+)"([^"]+)"/g.exec(m),t){let i=[];return t[2].startsWith("circomlib/")?i.push({value:`[View Source](https://github.com/iden3/circomlib/blob/master/circuits/${t[2].replace("circomlib/","")})`}):t[2].startsWith("gist:")&&i.push({value:`[View Source](https://gist.github.com/${t[2].replace("gist:","")})`}),{range:new N(r.lineNumber,1+t.index+t[1].length,r.lineNumber,1+t.index+t[0].length),contents:i}}for(;(t=l.exec(m))&&!(t.index>o);){if(t.index+t[0].length<o)continue;const i=t[0],s=await new Promise(u=>{w=g=>{u(g.text),w=()=>{}},k.postMessage({type:"hover",symbol:i})});return{range:new N(r.lineNumber,1+t.index,r.lineNumber,1+t.index+t[0].length),contents:[{value:s}]}}return null}});f.setLanguageConfiguration("circom",{wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:f.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:f.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|(\ \ ))*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:f.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|(\ \ ))*\ \*\/\s*$/,action:{indentAction:f.IndentAction.None,removeText:1}}],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/**",close:" */",notIn:["string"]}],folding:{markers:{start:new RegExp("^\\s*//\\s*#?region\\b"),end:new RegExp("^\\s*//\\s*#?endregion\\b")}}});f.setMonarchTokensProvider("circom",{keywords:["signal","input","output","public","template","component","var","function","return","if","else","for","while","do","log","assert","include","pragma"],typeKeywords:["input","output","public"],operators:["!","~","-","||","&&","==","!=","<",">","<=",">=","|","&","<<",">>","+","-","*","/","\\","%","**","^","=","<--","<=="],escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/@\s*[a-zA-Z_\$][\w\$]*/,{token:"annotation",log:"annotation token: $0"}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[[/[^\/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[\/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]}});var T=`pragma circom 2.0.1;

include "circomlib/poseidon.circom";

template Example () {
    signal input a;
    signal input b;
    signal output c;
    
    c <== a * b;

    assert(a > 2);
    
    component hash = Poseidon(2);
    hash.inputs[0] <== a;
    hash.inputs[1] <== b;

    log(hash.out);
}

component main { public [ a ] } = Example();

/* INPUT = {
    "a": "5",
    "b": "77"
} */`;function I(){return new Worker("worker.d6c1c469.js",{type:"module"})}var P="circomlib.acbc52cb.zip";console.log(P,$);var k;function z(){const[d,r]=e.useState(!1),[m,l]=e.useState([]),[o,t]=e.useState(null),i=e.useRef(null),s=e.useRef(null);return e.useEffect(()=>{if(i&&!o){const u=new URLSearchParams(location.search).get("code");u&&(history.replaceState(null,"","/"),fetch("https://kikks470wl.execute-api.us-west-1.amazonaws.com/access_token?code="+u,{method:"POST"}).then(n=>n.formData()).then(n=>{n.get("access_token")?(localStorage.GithubAccessToken=n.get("access_token"),c.getModel().setValue(localStorage.GithubNavigationCodeSnapshot),E()):alert("Failed to get access token")}));const g=new URLSearchParams(location.search).get("gist");g&&fetch("https://api.github.com/gists/"+g).then(n=>n.json()).then(n=>{var a,p;c.getModel().setValue(((p=(a=n==null?void 0:n.files)==null?void 0:a["main.circom"])==null?void 0:p.content)||"// Unable to load gist"),h()});const c=R.create(i.current,{value:g?"// Loading from Github...":T,language:"circom",theme:"vs",automaticLayout:!0,hover:{enabled:!0}}),h=()=>{(!s.current||s.current.running)&&(s.current&&(s.current.terminate(),s.current=null),s.current=new I,k=s.current,s.current.onmessage=n=>{const a=n.data;if(a.type==="fail")r(!1),s.current.running=!1;else if(a.type==="done")r(!1),s.current.running=!1;else{if(a.type==="hover")return w(a);a.type==="debug"&&console.log(a.text)}l(p=>[...p,a])},s.current.onerror=n=>{console.error(n),l(a=>[...a,{type:"error",text:n.message}])}),s.current.running=!0,r(Math.random()+1),l([]),s.current.postMessage({type:"run",code:c.getValue()})},E=()=>{const n=new URLSearchParams(location.search).get("gist"),a=()=>{localStorage.GithubNavigationCodeSnapshot=c.getValue(),location.href="https://github.com/login/oauth/authorize?client_id=85123c5a3a8a8f73f015&scope=gist"},p=c.getValue();if(history.state===p)console.log("Already saved!");else if(localStorage.GithubAccessToken){r(Math.random()+1);const x={"main.circom":{content:p}};n&&(x["about_zkrepl.md"]={content:`Open this in [zkREPL \u2192](https://zkrepl.dev/?gist=${n})

This file can be included into other zkREPLs with \`\`\`include "gist:`+n+'";```'}),fetch(n?"https://api.github.com/gists/"+n:"https://api.github.com/gists",{method:"POST",body:JSON.stringify({files:x}),headers:{Authorization:"token "+localStorage.GithubAccessToken}}).then(b=>b.json()).then(b=>{b.id?(history.replaceState(p,"","/?gist="+b.id),l(A=>[...A,{type:"save",url:`https://gist.github.com/${b.id}`,text:"Saved to Github"}])):b.message==="Bad credentials"?a():b.message==="Not Found"&&n&&(history.replaceState(null,"","/"),E()),r(!1)})}else a()};c.addCommand(v.CtrlCmd|y.KeyS,E),c.addCommand(v.CtrlCmd|y.Enter,h),c.addCommand(v.Shift|y.Enter,h),c.addCommand(v.CtrlCmd|y.Period,function(){console.log("Abort kernel!"),r(!1),l(n=>[...n,{type:"abort",text:"Execution manually interrupted"}]),s.current&&(s.current.terminate(),s.current=null)}),g||h(),t(c)}return()=>o==null?void 0:o.dispose()},[i.current]),e.createElement("div",{className:"layout"},e.createElement("div",{className:"editor",ref:i}),e.createElement("div",{className:"sidebar"},e.createElement("div",{className:"output"},e.createElement("div",{className:"heading"},e.createElement("div",{className:"description"},"Shift-Enter to run. ",e.createElement("br",null),"Cmd-S to save to Github Gists."),e.createElement("img",{className:"logo",src:new URL("logo.effa8f98.png",self.location).toString(),alt:"zkrepl"})),e.createElement("br",null),m.map((u,g)=>e.createElement("div",{key:g,className:"message"},e.createElement("div",{className:"label"},u.type,": "),u.url?e.createElement("a",{href:u.url},e.createElement(S,null,u.text)):e.createElement(S,null,u.text),u.files&&e.createElement("div",{className:"files"},Object.entries(u.files).map(([c,h])=>e.createElement("li",{key:c},e.createElement("a",{href:URL.createObjectURL(new Blob([h],{type:"application/octet-stream"})),download:c},c)," ","(",(h.length/1e3).toFixed(2),"KB)"))))),d?e.createElement(O,{key:d}):null)))}function O(){const[d,r]=e.useState(0);return e.useEffect(()=>{const m=Date.now(),l=setInterval(()=>{r(Date.now()-m)},16);return()=>clearInterval(l)},[]),e.createElement("div",{className:"loading"},e.createElement("div",{className:"lds-ellipsis"},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null)),d>200&&e.createElement("div",{className:"time"},(d/1e3).toFixed(2),"s"))}C.createRoot(document.getElementById("root")).render(e.createElement(z,null));
