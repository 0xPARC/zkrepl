var v3=Object.defineProperty,C3=Object.defineProperties;var b3=Object.getOwnPropertyDescriptors;var cu=Object.getOwnPropertySymbols;var F3=Object.prototype.hasOwnProperty,B3=Object.prototype.propertyIsEnumerable;var pa=(Ee,he,we)=>he in Ee?v3(Ee,he,{enumerable:!0,configurable:!0,writable:!0,value:we}):Ee[he]=we,Bo=(Ee,he)=>{for(var we in he||(he={}))F3.call(he,we)&&pa(Ee,we,he[we]);if(cu)for(var we of cu(he))B3.call(he,we)&&pa(Ee,we,he[we]);return Ee},ma=(Ee,he)=>C3(Ee,b3(he));var Kn=(Ee,he,we)=>(pa(Ee,typeof he!="symbol"?he+"":he,we),we);(function(Ee){"use strict";function he(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}async function we(e,t){t=t||{};const n=await WebAssembly.compile(e);let i;const o=await WebAssembly.instantiate(n,{runtime:{exceptionHandler:function(g){let f;throw g==1?f="Signal not found. ":g==2?f="Too many signals set. ":g==3?f="Signal already set. ":g==4?f="Assert Failed. ":g==5?f="Not enough memory. ":f=`Unknown error
`,f+=s(),new Error(f)},showSharedRWMemory:function(){d()}}}),a=!0;return i=new lu(o,a),i;function s(){for(var g="",f=o.exports.getMessageChar();f!=0;)g+=String.fromCharCode(f),f=o.exports.getMessageChar();return g}function d(){const g=o.exports.getFieldNumLen32(),f=new Uint32Array(g);for(let l=0;l<g;l++)f[g-1-l]=o.exports.readSharedRWMemory(l);t.log(To(f))}}class lu{constructor(t,n){Kn(this,"instance");Kn(this,"version");Kn(this,"n32");Kn(this,"witnessSize");Kn(this,"prime");Kn(this,"sanityCheck");this.instance=t,this.version=this.instance.exports.getVersion(),this.n32=this.instance.exports.getFieldNumLen32(),this.instance.exports.getRawPrime();const i=new Array(this.n32);for(let o=0;o<this.n32;o++)i[this.n32-1-o]=this.instance.exports.readSharedRWMemory(o);this.prime=To(i),this.witnessSize=this.instance.exports.getWitnessSize(),this.sanityCheck=n}circom_version(){return this.instance.exports.getVersion()}async _doCalculateWitness(t,n){this.instance.exports.init(this.sanityCheck||n?1:0);const i=Object.keys(t);var o=0;if(i.forEach(a=>{const s=du(a),d=parseInt(s.slice(0,8),16),g=parseInt(s.slice(8,16),16),f=fu(t[a]);for(let l=0;l<f.length;l++){const m=uu(f[l],this.n32);for(let A=0;A<this.n32;A++)this.instance.exports.writeSharedRWMemory(A,m[this.n32-1-A]);try{this.instance.exports.setInputSignal(d,g,l),o++}catch(A){throw A.message.includes("Signal not found.")?new Error(`Unexpected input signal "${a}".`):new Error(A)}}}),o<this.instance.exports.getInputSize())throw new Error(`Not all inputs have been set. Only ${o} out of ${this.instance.exports.getInputSize()}`)}async calculateWitness(t,n){const i=[];await this._doCalculateWitness(t,n);for(let o=0;o<this.witnessSize;o++){this.instance.exports.getWitness(o);const a=new Uint32Array(this.n32);for(let s=0;s<this.n32;s++)a[this.n32-1-s]=this.instance.exports.readSharedRWMemory(s);i.push(To(a))}return i}async calculateBinWitness(t,n){const i=new Uint32Array(this.witnessSize*this.n32),o=new Uint8Array(i.buffer);await this._doCalculateWitness(t,n);for(let a=0;a<this.witnessSize;a++){this.instance.exports.getWitness(a);const s=a*this.n32;for(let d=0;d<this.n32;d++)i[s+d]=this.instance.exports.readSharedRWMemory(d)}return o}async calculateWTNSBin(t,n){const i=new Uint32Array(this.witnessSize*this.n32+this.n32+11),o=new Uint8Array(i.buffer);await this._doCalculateWitness(t,n),o[0]="w".charCodeAt(0),o[1]="t".charCodeAt(0),o[2]="n".charCodeAt(0),o[3]="s".charCodeAt(0),i[1]=2,i[2]=2,i[3]=1;const a=this.n32*4,d=(8+a).toString(16);i[4]=parseInt(d.slice(0,8),16),i[5]=parseInt(d.slice(8,16),16),i[6]=a,this.instance.exports.getRawPrime();var g=7;for(let m=0;m<this.n32;m++)i[g+m]=this.instance.exports.readSharedRWMemory(m);g+=this.n32,i[g]=this.witnessSize,g++,i[g]=2,g++;const l=(a*this.witnessSize).toString(16);i[g]=parseInt(l.slice(0,8),16),i[g+1]=parseInt(l.slice(8,16),16),g+=2;for(let m=0;m<this.witnessSize;m++){this.instance.exports.getWitness(m);for(let A=0;A<this.n32;A++)i[g+A]=this.instance.exports.readSharedRWMemory(A);g+=this.n32}return o}}function uu(e,t){const n=[];let i=BigInt(e);const o=BigInt(4294967296);for(;i;)n.unshift(Number(i%o)),i=i/o;if(t)for(var a=t-n.length;a>0;)n.unshift(0),a--;return n}function To(e){var t=BigInt(0);const n=BigInt(4294967296);for(let i=0;i<e.length;i++)t=t*n+BigInt(e[i]);return t}function fu(e){var t=[];return n(t,e),t;function n(i,o){if(Array.isArray(o))for(let a=0;a<o.length;a++)n(i,o[a]);else i.push(o)}}function du(e){const t=BigInt(2)**BigInt(64);let n=BigInt("0xCBF29CE484222325");for(var i=0;i<e.length;i++)n^=BigInt(e[i].charCodeAt(0)),n*=BigInt(1099511628211),n%=t;let o=n.toString(16),a=16-o.length;return o="0".repeat(a).concat(o),o}var Ye=[],We=[],hu=typeof Uint8Array!="undefined"?Uint8Array:Array,Ro=!1;function ya(){Ro=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)Ye[t]=e[t],We[e.charCodeAt(t)]=t;We["-".charCodeAt(0)]=62,We["_".charCodeAt(0)]=63}function _u(e){Ro||ya();var t,n,i,o,a,s,d=e.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a=e[d-2]==="="?2:e[d-1]==="="?1:0,s=new hu(d*3/4-a),i=a>0?d-4:d;var g=0;for(t=0,n=0;t<i;t+=4,n+=3)o=We[e.charCodeAt(t)]<<18|We[e.charCodeAt(t+1)]<<12|We[e.charCodeAt(t+2)]<<6|We[e.charCodeAt(t+3)],s[g++]=o>>16&255,s[g++]=o>>8&255,s[g++]=o&255;return a===2?(o=We[e.charCodeAt(t)]<<2|We[e.charCodeAt(t+1)]>>4,s[g++]=o&255):a===1&&(o=We[e.charCodeAt(t)]<<10|We[e.charCodeAt(t+1)]<<4|We[e.charCodeAt(t+2)]>>2,s[g++]=o>>8&255,s[g++]=o&255),s}function gu(e){return Ye[e>>18&63]+Ye[e>>12&63]+Ye[e>>6&63]+Ye[e&63]}function pu(e,t,n){for(var i,o=[],a=t;a<n;a+=3)i=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(gu(i));return o.join("")}function Aa(e){Ro||ya();for(var t,n=e.length,i=n%3,o="",a=[],s=16383,d=0,g=n-i;d<g;d+=s)a.push(pu(e,d,d+s>g?g:d+s));return i===1?(t=e[n-1],o+=Ye[t>>2],o+=Ye[t<<4&63],o+="=="):i===2&&(t=(e[n-2]<<8)+e[n-1],o+=Ye[t>>10],o+=Ye[t>>4&63],o+=Ye[t<<2&63],o+="="),a.push(o),a.join("")}function Ki(e,t,n,i,o){var a,s,d=o*8-i-1,g=(1<<d)-1,f=g>>1,l=-7,m=n?o-1:0,A=n?-1:1,_=e[t+m];for(m+=A,a=_&(1<<-l)-1,_>>=-l,l+=d;l>0;a=a*256+e[t+m],m+=A,l-=8);for(s=a&(1<<-l)-1,a>>=-l,l+=i;l>0;s=s*256+e[t+m],m+=A,l-=8);if(a===0)a=1-f;else{if(a===g)return s?NaN:(_?-1:1)*(1/0);s=s+Math.pow(2,i),a=a-f}return(_?-1:1)*s*Math.pow(2,a-i)}function La(e,t,n,i,o,a){var s,d,g,f=a*8-o-1,l=(1<<f)-1,m=l>>1,A=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=i?0:a-1,R=i?1:-1,x=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(d=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(g=Math.pow(2,-s))<1&&(s--,g*=2),s+m>=1?t+=A/g:t+=A*Math.pow(2,1-m),t*g>=2&&(s++,g/=2),s+m>=l?(d=0,s=l):s+m>=1?(d=(t*g-1)*Math.pow(2,o),s=s+m):(d=t*Math.pow(2,m-1)*Math.pow(2,o),s=0));o>=8;e[n+_]=d&255,_+=R,d/=256,o-=8);for(s=s<<o|d,f+=o;f>0;e[n+_]=s&255,_+=R,s/=256,f-=8);e[n+_-R]|=x*128}var mu={}.toString,Ia=Array.isArray||function(e){return mu.call(e)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var yu=50;St.TYPED_ARRAY_SUPPORT=!0;function Oo(){return St.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function cn(e,t){if(Oo()<t)throw new RangeError("Invalid typed array length");return St.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=St.prototype):(e===null&&(e=new St(t)),e.length=t),e}function St(e,t,n){if(!St.TYPED_ARRAY_SUPPORT&&!(this instanceof St))return new St(e,t,n);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return Po(this,e)}return Ea(this,e,t,n)}St.poolSize=8192,St._augment=function(e){return e.__proto__=St.prototype,e};function Ea(e,t,n,i){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer?Iu(e,t,n,i):typeof t=="string"?Lu(e,t,n):Eu(e,t)}St.from=function(e,t,n){return Ea(null,e,t,n)},St.TYPED_ARRAY_SUPPORT&&(St.prototype.__proto__=Uint8Array.prototype,St.__proto__=Uint8Array);function wa(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Au(e,t,n,i){return wa(t),t<=0?cn(e,t):n!==void 0?typeof i=="string"?cn(e,t).fill(n,i):cn(e,t).fill(n):cn(e,t)}St.alloc=function(e,t,n){return Au(null,e,t,n)};function Po(e,t){if(wa(t),e=cn(e,t<0?0:No(t)|0),!St.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}St.allocUnsafe=function(e){return Po(null,e)},St.allocUnsafeSlow=function(e){return Po(null,e)};function Lu(e,t,n){if((typeof n!="string"||n==="")&&(n="utf8"),!St.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=Sa(t,n)|0;e=cn(e,i);var o=e.write(t,n);return o!==i&&(e=e.slice(0,o)),e}function xo(e,t){var n=t.length<0?0:No(t.length)|0;e=cn(e,n);for(var i=0;i<n;i+=1)e[i]=t[i]&255;return e}function Iu(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return n===void 0&&i===void 0?t=new Uint8Array(t):i===void 0?t=new Uint8Array(t,n):t=new Uint8Array(t,n,i),St.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=St.prototype):e=xo(e,t),e}function Eu(e,t){if(je(t)){var n=No(t.length)|0;return e=cn(e,n),e.length===0||t.copy(e,0,0,n),e}if(t){if(typeof ArrayBuffer!="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||Wu(t.length)?cn(e,0):xo(e,t);if(t.type==="Buffer"&&Ia(t.data))return xo(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function No(e){if(e>=Oo())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Oo().toString(16)+" bytes");return e|0}St.isBuffer=qu;function je(e){return!!(e!=null&&e._isBuffer)}St.compare=function(t,n){if(!je(t)||!je(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var i=t.length,o=n.length,a=0,s=Math.min(i,o);a<s;++a)if(t[a]!==n[a]){i=t[a],o=n[a];break}return i<o?-1:o<i?1:0},St.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},St.concat=function(t,n){if(!Ia(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return St.alloc(0);var i;if(n===void 0)for(n=0,i=0;i<t.length;++i)n+=t[i].length;var o=St.allocUnsafe(n),a=0;for(i=0;i<t.length;++i){var s=t[i];if(!je(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,a),a+=s.length}return o};function Sa(e,t){if(je(e))return e.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var n=e.length;if(n===0)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Ji(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return Pa(e).length;default:if(i)return Ji(e).length;t=(""+t).toLowerCase(),i=!0}}St.byteLength=Sa;function wu(e,t,n){var i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Pu(this,t,n);case"utf8":case"utf-8":return Fa(this,t,n);case"ascii":return Ru(this,t,n);case"latin1":case"binary":return Ou(this,t,n);case"base64":return Bu(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xu(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}St.prototype._isBuffer=!0;function Pn(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}St.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)Pn(this,n,n+1);return this},St.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)Pn(this,n,n+3),Pn(this,n+1,n+2);return this},St.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)Pn(this,n,n+7),Pn(this,n+1,n+6),Pn(this,n+2,n+5),Pn(this,n+3,n+4);return this},St.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?Fa(this,0,t):wu.apply(this,arguments)},St.prototype.equals=function(t){if(!je(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:St.compare(this,t)===0},St.prototype.inspect=function(){var t="",n=yu;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},St.prototype.compare=function(t,n,i,o,a){if(!je(t))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),i===void 0&&(i=t?t.length:0),o===void 0&&(o=0),a===void 0&&(a=this.length),n<0||i>t.length||o<0||a>this.length)throw new RangeError("out of range index");if(o>=a&&n>=i)return 0;if(o>=a)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,o>>>=0,a>>>=0,this===t)return 0;for(var s=a-o,d=i-n,g=Math.min(s,d),f=this.slice(o,a),l=t.slice(n,i),m=0;m<g;++m)if(f[m]!==l[m]){s=f[m],d=l[m];break}return s<d?-1:d<s?1:0};function va(e,t,n,i,o){if(e.length===0)return-1;if(typeof n=="string"?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0)if(o)n=0;else return-1;if(typeof t=="string"&&(t=St.from(t,i)),je(t))return t.length===0?-1:Ca(e,t,n,i,o);if(typeof t=="number")return t=t&255,St.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Ca(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function Ca(e,t,n,i,o){var a=1,s=e.length,d=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(e.length<2||t.length<2)return-1;a=2,s/=2,d/=2,n/=2}function g(_,R){return a===1?_[R]:_.readUInt16BE(R*a)}var f;if(o){var l=-1;for(f=n;f<s;f++)if(g(e,f)===g(t,l===-1?0:f-l)){if(l===-1&&(l=f),f-l+1===d)return l*a}else l!==-1&&(f-=f-l),l=-1}else for(n+d>s&&(n=s-d),f=n;f>=0;f--){for(var m=!0,A=0;A<d;A++)if(g(e,f+A)!==g(t,A)){m=!1;break}if(m)return f}return-1}St.prototype.includes=function(t,n,i){return this.indexOf(t,n,i)!==-1},St.prototype.indexOf=function(t,n,i){return va(this,t,n,i,!0)},St.prototype.lastIndexOf=function(t,n,i){return va(this,t,n,i,!1)};function Su(e,t,n,i){n=Number(n)||0;var o=e.length-n;i?(i=Number(i),i>o&&(i=o)):i=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var s=0;s<i;++s){var d=parseInt(t.substr(s*2,2),16);if(isNaN(d))return s;e[n+s]=d}return s}function vu(e,t,n,i){return Xi(Ji(t,e.length-n),e,n,i)}function ba(e,t,n,i){return Xi(Gu(t),e,n,i)}function Cu(e,t,n,i){return ba(e,t,n,i)}function bu(e,t,n,i){return Xi(Pa(t),e,n,i)}function Fu(e,t,n,i){return Xi(ku(t,e.length-n),e,n,i)}St.prototype.write=function(t,n,i,o){if(n===void 0)o="utf8",i=this.length,n=0;else if(i===void 0&&typeof n=="string")o=n,i=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(i)?(i=i|0,o===void 0&&(o="utf8")):(o=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-n;if((i===void 0||i>a)&&(i=a),t.length>0&&(i<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var s=!1;;)switch(o){case"hex":return Su(this,t,n,i);case"utf8":case"utf-8":return vu(this,t,n,i);case"ascii":return ba(this,t,n,i);case"latin1":case"binary":return Cu(this,t,n,i);case"base64":return bu(this,t,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fu(this,t,n,i);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}},St.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Bu(e,t,n){return t===0&&n===e.length?Aa(e):Aa(e.slice(t,n))}function Fa(e,t,n){n=Math.min(e.length,n);for(var i=[],o=t;o<n;){var a=e[o],s=null,d=a>239?4:a>223?3:a>191?2:1;if(o+d<=n){var g,f,l,m;switch(d){case 1:a<128&&(s=a);break;case 2:g=e[o+1],(g&192)==128&&(m=(a&31)<<6|g&63,m>127&&(s=m));break;case 3:g=e[o+1],f=e[o+2],(g&192)==128&&(f&192)==128&&(m=(a&15)<<12|(g&63)<<6|f&63,m>2047&&(m<55296||m>57343)&&(s=m));break;case 4:g=e[o+1],f=e[o+2],l=e[o+3],(g&192)==128&&(f&192)==128&&(l&192)==128&&(m=(a&15)<<18|(g&63)<<12|(f&63)<<6|l&63,m>65535&&m<1114112&&(s=m))}}s===null?(s=65533,d=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),o+=d}return Tu(i)}var Ba=4096;function Tu(e){var t=e.length;if(t<=Ba)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=Ba));return n}function Ru(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(e[o]&127);return i}function Ou(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(e[o]);return i}function Pu(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",a=t;a<n;++a)o+=Du(e[a]);return o}function xu(e,t,n){for(var i=e.slice(t,n),o="",a=0;a<i.length;a+=2)o+=String.fromCharCode(i[a]+i[a+1]*256);return o}St.prototype.slice=function(t,n){var i=this.length;t=~~t,n=n===void 0?i:~~n,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),n<0?(n+=i,n<0&&(n=0)):n>i&&(n=i),n<t&&(n=t);var o;if(St.TYPED_ARRAY_SUPPORT)o=this.subarray(t,n),o.__proto__=St.prototype;else{var a=n-t;o=new St(a,void 0);for(var s=0;s<a;++s)o[s]=this[s+t]}return o};function _e(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}St.prototype.readUIntLE=function(t,n,i){t=t|0,n=n|0,i||_e(t,n,this.length);for(var o=this[t],a=1,s=0;++s<n&&(a*=256);)o+=this[t+s]*a;return o},St.prototype.readUIntBE=function(t,n,i){t=t|0,n=n|0,i||_e(t,n,this.length);for(var o=this[t+--n],a=1;n>0&&(a*=256);)o+=this[t+--n]*a;return o},St.prototype.readUInt8=function(t,n){return n||_e(t,1,this.length),this[t]},St.prototype.readUInt16LE=function(t,n){return n||_e(t,2,this.length),this[t]|this[t+1]<<8},St.prototype.readUInt16BE=function(t,n){return n||_e(t,2,this.length),this[t]<<8|this[t+1]},St.prototype.readUInt32LE=function(t,n){return n||_e(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},St.prototype.readUInt32BE=function(t,n){return n||_e(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},St.prototype.readIntLE=function(t,n,i){t=t|0,n=n|0,i||_e(t,n,this.length);for(var o=this[t],a=1,s=0;++s<n&&(a*=256);)o+=this[t+s]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*n)),o},St.prototype.readIntBE=function(t,n,i){t=t|0,n=n|0,i||_e(t,n,this.length);for(var o=n,a=1,s=this[t+--o];o>0&&(a*=256);)s+=this[t+--o]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*n)),s},St.prototype.readInt8=function(t,n){return n||_e(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},St.prototype.readInt16LE=function(t,n){n||_e(t,2,this.length);var i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i},St.prototype.readInt16BE=function(t,n){n||_e(t,2,this.length);var i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i},St.prototype.readInt32LE=function(t,n){return n||_e(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},St.prototype.readInt32BE=function(t,n){return n||_e(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},St.prototype.readFloatLE=function(t,n){return n||_e(t,4,this.length),Ki(this,t,!0,23,4)},St.prototype.readFloatBE=function(t,n){return n||_e(t,4,this.length),Ki(this,t,!1,23,4)},St.prototype.readDoubleLE=function(t,n){return n||_e(t,8,this.length),Ki(this,t,!0,52,8)},St.prototype.readDoubleBE=function(t,n){return n||_e(t,8,this.length),Ki(this,t,!1,52,8)};function Re(e,t,n,i,o,a){if(!je(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}St.prototype.writeUIntLE=function(t,n,i,o){if(t=+t,n=n|0,i=i|0,!o){var a=Math.pow(2,8*i)-1;Re(this,t,n,i,a,0)}var s=1,d=0;for(this[n]=t&255;++d<i&&(s*=256);)this[n+d]=t/s&255;return n+i},St.prototype.writeUIntBE=function(t,n,i,o){if(t=+t,n=n|0,i=i|0,!o){var a=Math.pow(2,8*i)-1;Re(this,t,n,i,a,0)}var s=i-1,d=1;for(this[n+s]=t&255;--s>=0&&(d*=256);)this[n+s]=t/d&255;return n+i},St.prototype.writeUInt8=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,1,255,0),St.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=t&255,n+1};function Vi(e,t,n,i){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-n,2);o<a;++o)e[n+o]=(t&255<<8*(i?o:1-o))>>>(i?o:1-o)*8}St.prototype.writeUInt16LE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,2,65535,0),St.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8):Vi(this,t,n,!0),n+2},St.prototype.writeUInt16BE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,2,65535,0),St.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t&255):Vi(this,t,n,!1),n+2};function Zi(e,t,n,i){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-n,4);o<a;++o)e[n+o]=t>>>(i?o:3-o)*8&255}St.prototype.writeUInt32LE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,4,4294967295,0),St.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255):Zi(this,t,n,!0),n+4},St.prototype.writeUInt32BE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,4,4294967295,0),St.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255):Zi(this,t,n,!1),n+4},St.prototype.writeIntLE=function(t,n,i,o){if(t=+t,n=n|0,!o){var a=Math.pow(2,8*i-1);Re(this,t,n,i,a-1,-a)}var s=0,d=1,g=0;for(this[n]=t&255;++s<i&&(d*=256);)t<0&&g===0&&this[n+s-1]!==0&&(g=1),this[n+s]=(t/d>>0)-g&255;return n+i},St.prototype.writeIntBE=function(t,n,i,o){if(t=+t,n=n|0,!o){var a=Math.pow(2,8*i-1);Re(this,t,n,i,a-1,-a)}var s=i-1,d=1,g=0;for(this[n+s]=t&255;--s>=0&&(d*=256);)t<0&&g===0&&this[n+s+1]!==0&&(g=1),this[n+s]=(t/d>>0)-g&255;return n+i},St.prototype.writeInt8=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,1,127,-128),St.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=t&255,n+1},St.prototype.writeInt16LE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,2,32767,-32768),St.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8):Vi(this,t,n,!0),n+2},St.prototype.writeInt16BE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,2,32767,-32768),St.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t&255):Vi(this,t,n,!1),n+2},St.prototype.writeInt32LE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,4,2147483647,-2147483648),St.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):Zi(this,t,n,!0),n+4},St.prototype.writeInt32BE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),St.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255):Zi(this,t,n,!1),n+4};function Ta(e,t,n,i,o,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Ra(e,t,n,i,o){return o||Ta(e,t,n,4),La(e,t,n,i,23,4),n+4}St.prototype.writeFloatLE=function(t,n,i){return Ra(this,t,n,!0,i)},St.prototype.writeFloatBE=function(t,n,i){return Ra(this,t,n,!1,i)};function Oa(e,t,n,i,o){return o||Ta(e,t,n,8),La(e,t,n,i,52,8),n+8}St.prototype.writeDoubleLE=function(t,n,i){return Oa(this,t,n,!0,i)},St.prototype.writeDoubleBE=function(t,n,i){return Oa(this,t,n,!1,i)},St.prototype.copy=function(t,n,i,o){if(i||(i=0),!o&&o!==0&&(o=this.length),n>=t.length&&(n=t.length),n||(n=0),o>0&&o<i&&(o=i),o===i||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-n<o-i&&(o=t.length-n+i);var a=o-i,s;if(this===t&&i<n&&n<o)for(s=a-1;s>=0;--s)t[s+n]=this[s+i];else if(a<1e3||!St.TYPED_ARRAY_SUPPORT)for(s=0;s<a;++s)t[s+n]=this[s+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+a),n);return a},St.prototype.fill=function(t,n,i,o){if(typeof t=="string"){if(typeof n=="string"?(o=n,n=0,i=this.length):typeof i=="string"&&(o=i,i=this.length),t.length===1){var a=t.charCodeAt(0);a<256&&(t=a)}if(o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!St.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else typeof t=="number"&&(t=t&255);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;n=n>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);var s;if(typeof t=="number")for(s=n;s<i;++s)this[s]=t;else{var d=je(t)?t:Ji(new St(t,o).toString()),g=d.length;for(s=0;s<i-n;++s)this[s+n]=d[s%g]}return this};var Nu=/[^+\/0-9A-Za-z-_]/g;function Mu(e){if(e=Uu(e).replace(Nu,""),e.length<2)return"";for(;e.length%4!=0;)e=e+"=";return e}function Uu(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Du(e){return e<16?"0"+e.toString(16):e.toString(16)}function Ji(e,t){t=t||1/0;for(var n,i=e.length,o=null,a=[],s=0;s<i;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(s+1===i){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return a}function Gu(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function ku(e,t){for(var n,i,o,a=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),i=n>>8,o=n%256,a.push(o),a.push(i);return a}function Pa(e){return _u(Mu(e))}function Xi(e,t,n,i){for(var o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function Wu(e){return e!==e}function qu(e){return e!=null&&(!!e._isBuffer||xa(e)||Qu(e))}function xa(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Qu(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&xa(e.slice(0,0))}var Mo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Na(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),t}var Vn={},Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});const Hu=typeof globalThis!="undefined"?globalThis:typeof Mo!="undefined"?Mo:{};Ii.BigIntPolyfill=typeof BigInt!="undefined"?BigInt:Hu.BigInt||Number;var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});const zu=Ii;let to=DataView;to.prototype.setBigUint64||(to.prototype.setBigUint64=function(e,t,n){let i,o;if(t<2**32)i=Number(t),o=0;else{for(var a=t.toString(2),s="",d=0;d<64-a.length;d++)s+="0";s+=a,o=parseInt(s.substring(0,32),2),i=parseInt(s.substring(32),2)}this.setUint32(e+(n?0:4),i,n),this.setUint32(e+(n?4:0),o,n)},to.prototype.getBigUint64=function(e,t){let n=this.getUint32(e+(t?0:4),t),i=this.getUint32(e+(t?4:0),t);for(var o=n.toString(2),a=i.toString(2),s="",d=0;d<32-o.length;d++)s+="0";return s+=o,zu.BigIntPolyfill("0b"+a+s)}),Uo.DataViewPolyfill=to;var $u=Object.freeze({__proto__:null,default:St}),Yu=Na($u),Ma={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ii;e.WASI_ESUCCESS=0,e.WASI_E2BIG=1,e.WASI_EACCES=2,e.WASI_EADDRINUSE=3,e.WASI_EADDRNOTAVAIL=4,e.WASI_EAFNOSUPPORT=5,e.WASI_EAGAIN=6,e.WASI_EALREADY=7,e.WASI_EBADF=8,e.WASI_EBADMSG=9,e.WASI_EBUSY=10,e.WASI_ECANCELED=11,e.WASI_ECHILD=12,e.WASI_ECONNABORTED=13,e.WASI_ECONNREFUSED=14,e.WASI_ECONNRESET=15,e.WASI_EDEADLK=16,e.WASI_EDESTADDRREQ=17,e.WASI_EDOM=18,e.WASI_EDQUOT=19,e.WASI_EEXIST=20,e.WASI_EFAULT=21,e.WASI_EFBIG=22,e.WASI_EHOSTUNREACH=23,e.WASI_EIDRM=24,e.WASI_EILSEQ=25,e.WASI_EINPROGRESS=26,e.WASI_EINTR=27,e.WASI_EINVAL=28,e.WASI_EIO=29,e.WASI_EISCONN=30,e.WASI_EISDIR=31,e.WASI_ELOOP=32,e.WASI_EMFILE=33,e.WASI_EMLINK=34,e.WASI_EMSGSIZE=35,e.WASI_EMULTIHOP=36,e.WASI_ENAMETOOLONG=37,e.WASI_ENETDOWN=38,e.WASI_ENETRESET=39,e.WASI_ENETUNREACH=40,e.WASI_ENFILE=41,e.WASI_ENOBUFS=42,e.WASI_ENODEV=43,e.WASI_ENOENT=44,e.WASI_ENOEXEC=45,e.WASI_ENOLCK=46,e.WASI_ENOLINK=47,e.WASI_ENOMEM=48,e.WASI_ENOMSG=49,e.WASI_ENOPROTOOPT=50,e.WASI_ENOSPC=51,e.WASI_ENOSYS=52,e.WASI_ENOTCONN=53,e.WASI_ENOTDIR=54,e.WASI_ENOTEMPTY=55,e.WASI_ENOTRECOVERABLE=56,e.WASI_ENOTSOCK=57,e.WASI_ENOTSUP=58,e.WASI_ENOTTY=59,e.WASI_ENXIO=60,e.WASI_EOVERFLOW=61,e.WASI_EOWNERDEAD=62,e.WASI_EPERM=63,e.WASI_EPIPE=64,e.WASI_EPROTO=65,e.WASI_EPROTONOSUPPORT=66,e.WASI_EPROTOTYPE=67,e.WASI_ERANGE=68,e.WASI_EROFS=69,e.WASI_ESPIPE=70,e.WASI_ESRCH=71,e.WASI_ESTALE=72,e.WASI_ETIMEDOUT=73,e.WASI_ETXTBSY=74,e.WASI_EXDEV=75,e.WASI_ENOTCAPABLE=76,e.WASI_SIGABRT=0,e.WASI_SIGALRM=1,e.WASI_SIGBUS=2,e.WASI_SIGCHLD=3,e.WASI_SIGCONT=4,e.WASI_SIGFPE=5,e.WASI_SIGHUP=6,e.WASI_SIGILL=7,e.WASI_SIGINT=8,e.WASI_SIGKILL=9,e.WASI_SIGPIPE=10,e.WASI_SIGQUIT=11,e.WASI_SIGSEGV=12,e.WASI_SIGSTOP=13,e.WASI_SIGTERM=14,e.WASI_SIGTRAP=15,e.WASI_SIGTSTP=16,e.WASI_SIGTTIN=17,e.WASI_SIGTTOU=18,e.WASI_SIGURG=19,e.WASI_SIGUSR1=20,e.WASI_SIGUSR2=21,e.WASI_SIGVTALRM=22,e.WASI_SIGXCPU=23,e.WASI_SIGXFSZ=24,e.WASI_FILETYPE_UNKNOWN=0,e.WASI_FILETYPE_BLOCK_DEVICE=1,e.WASI_FILETYPE_CHARACTER_DEVICE=2,e.WASI_FILETYPE_DIRECTORY=3,e.WASI_FILETYPE_REGULAR_FILE=4,e.WASI_FILETYPE_SOCKET_DGRAM=5,e.WASI_FILETYPE_SOCKET_STREAM=6,e.WASI_FILETYPE_SYMBOLIC_LINK=7,e.WASI_FDFLAG_APPEND=1,e.WASI_FDFLAG_DSYNC=2,e.WASI_FDFLAG_NONBLOCK=4,e.WASI_FDFLAG_RSYNC=8,e.WASI_FDFLAG_SYNC=16,e.WASI_RIGHT_FD_DATASYNC=t.BigIntPolyfill(1),e.WASI_RIGHT_FD_READ=t.BigIntPolyfill(2),e.WASI_RIGHT_FD_SEEK=t.BigIntPolyfill(4),e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS=t.BigIntPolyfill(8),e.WASI_RIGHT_FD_SYNC=t.BigIntPolyfill(16),e.WASI_RIGHT_FD_TELL=t.BigIntPolyfill(32),e.WASI_RIGHT_FD_WRITE=t.BigIntPolyfill(64),e.WASI_RIGHT_FD_ADVISE=t.BigIntPolyfill(128),e.WASI_RIGHT_FD_ALLOCATE=t.BigIntPolyfill(256),e.WASI_RIGHT_PATH_CREATE_DIRECTORY=t.BigIntPolyfill(512),e.WASI_RIGHT_PATH_CREATE_FILE=t.BigIntPolyfill(1024),e.WASI_RIGHT_PATH_LINK_SOURCE=t.BigIntPolyfill(2048),e.WASI_RIGHT_PATH_LINK_TARGET=t.BigIntPolyfill(4096),e.WASI_RIGHT_PATH_OPEN=t.BigIntPolyfill(8192),e.WASI_RIGHT_FD_READDIR=t.BigIntPolyfill(16384),e.WASI_RIGHT_PATH_READLINK=t.BigIntPolyfill(32768),e.WASI_RIGHT_PATH_RENAME_SOURCE=t.BigIntPolyfill(65536),e.WASI_RIGHT_PATH_RENAME_TARGET=t.BigIntPolyfill(131072),e.WASI_RIGHT_PATH_FILESTAT_GET=t.BigIntPolyfill(262144),e.WASI_RIGHT_PATH_FILESTAT_SET_SIZE=t.BigIntPolyfill(524288),e.WASI_RIGHT_PATH_FILESTAT_SET_TIMES=t.BigIntPolyfill(1048576),e.WASI_RIGHT_FD_FILESTAT_GET=t.BigIntPolyfill(2097152),e.WASI_RIGHT_FD_FILESTAT_SET_SIZE=t.BigIntPolyfill(4194304),e.WASI_RIGHT_FD_FILESTAT_SET_TIMES=t.BigIntPolyfill(8388608),e.WASI_RIGHT_PATH_SYMLINK=t.BigIntPolyfill(16777216),e.WASI_RIGHT_PATH_REMOVE_DIRECTORY=t.BigIntPolyfill(33554432),e.WASI_RIGHT_PATH_UNLINK_FILE=t.BigIntPolyfill(67108864),e.WASI_RIGHT_POLL_FD_READWRITE=t.BigIntPolyfill(134217728),e.WASI_RIGHT_SOCK_SHUTDOWN=t.BigIntPolyfill(268435456),e.RIGHTS_ALL=e.WASI_RIGHT_FD_DATASYNC|e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_SEEK|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_SYNC|e.WASI_RIGHT_FD_TELL|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_ADVISE|e.WASI_RIGHT_FD_ALLOCATE|e.WASI_RIGHT_PATH_CREATE_DIRECTORY|e.WASI_RIGHT_PATH_CREATE_FILE|e.WASI_RIGHT_PATH_LINK_SOURCE|e.WASI_RIGHT_PATH_LINK_TARGET|e.WASI_RIGHT_PATH_OPEN|e.WASI_RIGHT_FD_READDIR|e.WASI_RIGHT_PATH_READLINK|e.WASI_RIGHT_PATH_RENAME_SOURCE|e.WASI_RIGHT_PATH_RENAME_TARGET|e.WASI_RIGHT_PATH_FILESTAT_GET|e.WASI_RIGHT_PATH_FILESTAT_SET_SIZE|e.WASI_RIGHT_PATH_FILESTAT_SET_TIMES|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_FD_FILESTAT_SET_TIMES|e.WASI_RIGHT_FD_FILESTAT_SET_SIZE|e.WASI_RIGHT_PATH_SYMLINK|e.WASI_RIGHT_PATH_UNLINK_FILE|e.WASI_RIGHT_PATH_REMOVE_DIRECTORY|e.WASI_RIGHT_POLL_FD_READWRITE|e.WASI_RIGHT_SOCK_SHUTDOWN,e.RIGHTS_BLOCK_DEVICE_BASE=e.RIGHTS_ALL,e.RIGHTS_BLOCK_DEVICE_INHERITING=e.RIGHTS_ALL,e.RIGHTS_CHARACTER_DEVICE_BASE=e.RIGHTS_ALL,e.RIGHTS_CHARACTER_DEVICE_INHERITING=e.RIGHTS_ALL,e.RIGHTS_REGULAR_FILE_BASE=e.WASI_RIGHT_FD_DATASYNC|e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_SEEK|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_SYNC|e.WASI_RIGHT_FD_TELL|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_ADVISE|e.WASI_RIGHT_FD_ALLOCATE|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_FD_FILESTAT_SET_SIZE|e.WASI_RIGHT_FD_FILESTAT_SET_TIMES|e.WASI_RIGHT_POLL_FD_READWRITE,e.RIGHTS_REGULAR_FILE_INHERITING=t.BigIntPolyfill(0),e.RIGHTS_DIRECTORY_BASE=e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_SYNC|e.WASI_RIGHT_FD_ADVISE|e.WASI_RIGHT_PATH_CREATE_DIRECTORY|e.WASI_RIGHT_PATH_CREATE_FILE|e.WASI_RIGHT_PATH_LINK_SOURCE|e.WASI_RIGHT_PATH_LINK_TARGET|e.WASI_RIGHT_PATH_OPEN|e.WASI_RIGHT_FD_READDIR|e.WASI_RIGHT_PATH_READLINK|e.WASI_RIGHT_PATH_RENAME_SOURCE|e.WASI_RIGHT_PATH_RENAME_TARGET|e.WASI_RIGHT_PATH_FILESTAT_GET|e.WASI_RIGHT_PATH_FILESTAT_SET_SIZE|e.WASI_RIGHT_PATH_FILESTAT_SET_TIMES|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_FD_FILESTAT_SET_TIMES|e.WASI_RIGHT_PATH_SYMLINK|e.WASI_RIGHT_PATH_UNLINK_FILE|e.WASI_RIGHT_PATH_REMOVE_DIRECTORY|e.WASI_RIGHT_POLL_FD_READWRITE,e.RIGHTS_DIRECTORY_INHERITING=e.RIGHTS_DIRECTORY_BASE|e.RIGHTS_REGULAR_FILE_BASE,e.RIGHTS_SOCKET_BASE=e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_POLL_FD_READWRITE|e.WASI_RIGHT_SOCK_SHUTDOWN,e.RIGHTS_SOCKET_INHERITING=e.RIGHTS_ALL,e.RIGHTS_TTY_BASE=e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_POLL_FD_READWRITE,e.RIGHTS_TTY_INHERITING=t.BigIntPolyfill(0),e.WASI_CLOCK_REALTIME=0,e.WASI_CLOCK_MONOTONIC=1,e.WASI_CLOCK_PROCESS_CPUTIME_ID=2,e.WASI_CLOCK_THREAD_CPUTIME_ID=3,e.WASI_EVENTTYPE_CLOCK=0,e.WASI_EVENTTYPE_FD_READ=1,e.WASI_EVENTTYPE_FD_WRITE=2,e.WASI_FILESTAT_SET_ATIM=1<<0,e.WASI_FILESTAT_SET_ATIM_NOW=1<<1,e.WASI_FILESTAT_SET_MTIM=1<<2,e.WASI_FILESTAT_SET_MTIM_NOW=1<<3,e.WASI_O_CREAT=1<<0,e.WASI_O_DIRECTORY=1<<1,e.WASI_O_EXCL=1<<2,e.WASI_O_TRUNC=1<<3,e.WASI_PREOPENTYPE_DIR=0,e.WASI_DIRCOOKIE_START=0,e.WASI_STDIN_FILENO=0,e.WASI_STDOUT_FILENO=1,e.WASI_STDERR_FILENO=2,e.WASI_WHENCE_SET=0,e.WASI_WHENCE_CUR=1,e.WASI_WHENCE_END=2,e.ERROR_MAP={E2BIG:e.WASI_E2BIG,EACCES:e.WASI_EACCES,EADDRINUSE:e.WASI_EADDRINUSE,EADDRNOTAVAIL:e.WASI_EADDRNOTAVAIL,EAFNOSUPPORT:e.WASI_EAFNOSUPPORT,EALREADY:e.WASI_EALREADY,EAGAIN:e.WASI_EAGAIN,EBADF:e.WASI_EBADF,EBADMSG:e.WASI_EBADMSG,EBUSY:e.WASI_EBUSY,ECANCELED:e.WASI_ECANCELED,ECHILD:e.WASI_ECHILD,ECONNABORTED:e.WASI_ECONNABORTED,ECONNREFUSED:e.WASI_ECONNREFUSED,ECONNRESET:e.WASI_ECONNRESET,EDEADLOCK:e.WASI_EDEADLK,EDESTADDRREQ:e.WASI_EDESTADDRREQ,EDOM:e.WASI_EDOM,EDQUOT:e.WASI_EDQUOT,EEXIST:e.WASI_EEXIST,EFAULT:e.WASI_EFAULT,EFBIG:e.WASI_EFBIG,EHOSTDOWN:e.WASI_EHOSTUNREACH,EHOSTUNREACH:e.WASI_EHOSTUNREACH,EIDRM:e.WASI_EIDRM,EILSEQ:e.WASI_EILSEQ,EINPROGRESS:e.WASI_EINPROGRESS,EINTR:e.WASI_EINTR,EINVAL:e.WASI_EINVAL,EIO:e.WASI_EIO,EISCONN:e.WASI_EISCONN,EISDIR:e.WASI_EISDIR,ELOOP:e.WASI_ELOOP,EMFILE:e.WASI_EMFILE,EMLINK:e.WASI_EMLINK,EMSGSIZE:e.WASI_EMSGSIZE,EMULTIHOP:e.WASI_EMULTIHOP,ENAMETOOLONG:e.WASI_ENAMETOOLONG,ENETDOWN:e.WASI_ENETDOWN,ENETRESET:e.WASI_ENETRESET,ENETUNREACH:e.WASI_ENETUNREACH,ENFILE:e.WASI_ENFILE,ENOBUFS:e.WASI_ENOBUFS,ENODEV:e.WASI_ENODEV,ENOENT:e.WASI_ENOENT,ENOEXEC:e.WASI_ENOEXEC,ENOLCK:e.WASI_ENOLCK,ENOLINK:e.WASI_ENOLINK,ENOMEM:e.WASI_ENOMEM,ENOMSG:e.WASI_ENOMSG,ENOPROTOOPT:e.WASI_ENOPROTOOPT,ENOSPC:e.WASI_ENOSPC,ENOSYS:e.WASI_ENOSYS,ENOTCONN:e.WASI_ENOTCONN,ENOTDIR:e.WASI_ENOTDIR,ENOTEMPTY:e.WASI_ENOTEMPTY,ENOTRECOVERABLE:e.WASI_ENOTRECOVERABLE,ENOTSOCK:e.WASI_ENOTSOCK,ENOTTY:e.WASI_ENOTTY,ENXIO:e.WASI_ENXIO,EOVERFLOW:e.WASI_EOVERFLOW,EOWNERDEAD:e.WASI_EOWNERDEAD,EPERM:e.WASI_EPERM,EPIPE:e.WASI_EPIPE,EPROTO:e.WASI_EPROTO,EPROTONOSUPPORT:e.WASI_EPROTONOSUPPORT,EPROTOTYPE:e.WASI_EPROTOTYPE,ERANGE:e.WASI_ERANGE,EROFS:e.WASI_EROFS,ESPIPE:e.WASI_ESPIPE,ESRCH:e.WASI_ESRCH,ESTALE:e.WASI_ESTALE,ETIMEDOUT:e.WASI_ETIMEDOUT,ETXTBSY:e.WASI_ETXTBSY,EXDEV:e.WASI_EXDEV},e.SIGNAL_MAP={[e.WASI_SIGHUP]:"SIGHUP",[e.WASI_SIGINT]:"SIGINT",[e.WASI_SIGQUIT]:"SIGQUIT",[e.WASI_SIGILL]:"SIGILL",[e.WASI_SIGTRAP]:"SIGTRAP",[e.WASI_SIGABRT]:"SIGABRT",[e.WASI_SIGBUS]:"SIGBUS",[e.WASI_SIGFPE]:"SIGFPE",[e.WASI_SIGKILL]:"SIGKILL",[e.WASI_SIGUSR1]:"SIGUSR1",[e.WASI_SIGSEGV]:"SIGSEGV",[e.WASI_SIGUSR2]:"SIGUSR2",[e.WASI_SIGPIPE]:"SIGPIPE",[e.WASI_SIGALRM]:"SIGALRM",[e.WASI_SIGTERM]:"SIGTERM",[e.WASI_SIGCHLD]:"SIGCHLD",[e.WASI_SIGCONT]:"SIGCONT",[e.WASI_SIGSTOP]:"SIGSTOP",[e.WASI_SIGTSTP]:"SIGTSTP",[e.WASI_SIGTTIN]:"SIGTTIN",[e.WASI_SIGTTOU]:"SIGTTOU",[e.WASI_SIGURG]:"SIGURG",[e.WASI_SIGXCPU]:"SIGXCPU",[e.WASI_SIGXFSZ]:"SIGXFSZ",[e.WASI_SIGVTALRM]:"SIGVTALRM"}})(Ma),Object.defineProperty(Vn,"__esModule",{value:!0});const Qt=Ii,ju=Uo,ne=Yu;let Ua;const Y=Ma,Ku=Y.WASI_RIGHT_FD_DATASYNC|Y.WASI_RIGHT_FD_READ|Y.WASI_RIGHT_FD_SYNC|Y.WASI_RIGHT_FD_ADVISE|Y.WASI_RIGHT_FD_FILESTAT_GET|Y.WASI_RIGHT_POLL_FD_READWRITE,Da=Y.WASI_RIGHT_FD_DATASYNC|Y.WASI_RIGHT_FD_WRITE|Y.WASI_RIGHT_FD_SYNC|Y.WASI_RIGHT_FD_ADVISE|Y.WASI_RIGHT_FD_FILESTAT_GET|Y.WASI_RIGHT_POLL_FD_READWRITE,Vu=Da,xn=e=>{const t=Math.trunc(e),n=Qt.BigIntPolyfill(Math.round((e-t)*1e6));return Qt.BigIntPolyfill(t)*Qt.BigIntPolyfill(1e6)+n},Zn=e=>{typeof e=="number"&&(e=Math.trunc(e));const t=Qt.BigIntPolyfill(e);return Number(t/Qt.BigIntPolyfill(1e6))},Zt=e=>(...t)=>{try{return e(...t)}catch(n){if(n&&n.code&&typeof n.code=="string")return Y.ERROR_MAP[n.code]||Y.WASI_EINVAL;if(n instanceof Jn)return n.errno;throw n}},Ga=(e,t)=>{const n=e.FD_MAP.get(t);if(!n)throw new Jn(Y.WASI_EBADF);if(n.filetype===void 0){const i=e.bindings.fs.fstatSync(n.real),{filetype:o,rightsBase:a,rightsInheriting:s}=ka(e,t,i);n.filetype=o,n.rights||(n.rights={base:a,inheriting:s})}return n},ka=(e,t,n)=>{switch(!0){case n.isBlockDevice():return{filetype:Y.WASI_FILETYPE_BLOCK_DEVICE,rightsBase:Y.RIGHTS_BLOCK_DEVICE_BASE,rightsInheriting:Y.RIGHTS_BLOCK_DEVICE_INHERITING};case n.isCharacterDevice():{const i=Y.WASI_FILETYPE_CHARACTER_DEVICE;return t!==void 0&&e.bindings.isTTY(t)?{filetype:i,rightsBase:Y.RIGHTS_TTY_BASE,rightsInheriting:Y.RIGHTS_TTY_INHERITING}:{filetype:i,rightsBase:Y.RIGHTS_CHARACTER_DEVICE_BASE,rightsInheriting:Y.RIGHTS_CHARACTER_DEVICE_INHERITING}}case n.isDirectory():return{filetype:Y.WASI_FILETYPE_DIRECTORY,rightsBase:Y.RIGHTS_DIRECTORY_BASE,rightsInheriting:Y.RIGHTS_DIRECTORY_INHERITING};case n.isFIFO():return{filetype:Y.WASI_FILETYPE_SOCKET_STREAM,rightsBase:Y.RIGHTS_SOCKET_BASE,rightsInheriting:Y.RIGHTS_SOCKET_INHERITING};case n.isFile():return{filetype:Y.WASI_FILETYPE_REGULAR_FILE,rightsBase:Y.RIGHTS_REGULAR_FILE_BASE,rightsInheriting:Y.RIGHTS_REGULAR_FILE_INHERITING};case n.isSocket():return{filetype:Y.WASI_FILETYPE_SOCKET_STREAM,rightsBase:Y.RIGHTS_SOCKET_BASE,rightsInheriting:Y.RIGHTS_SOCKET_INHERITING};case n.isSymbolicLink():return{filetype:Y.WASI_FILETYPE_SYMBOLIC_LINK,rightsBase:Qt.BigIntPolyfill(0),rightsInheriting:Qt.BigIntPolyfill(0)};default:return{filetype:Y.WASI_FILETYPE_UNKNOWN,rightsBase:Qt.BigIntPolyfill(0),rightsInheriting:Qt.BigIntPolyfill(0)}}};class Jn extends Error{constructor(t){super();this.errno=t,Object.setPrototypeOf(this,Jn.prototype)}}Vn.WASIError=Jn;class Do extends Error{constructor(t){super(`WASI Exit error: ${t}`);this.code=t,Object.setPrototypeOf(this,Do.prototype)}}var Zu=Vn.WASIExitError=Do;class Go extends Error{constructor(t){super(`WASI Kill signal: ${t}`);this.signal=t,Object.setPrototypeOf(this,Go.prototype)}}var Ju=Vn.WASIKillError=Go;class ko{constructor(t){let n={};t&&t.preopens?n=t.preopens:t&&t.preopenDirectories&&(n=t.preopenDirectories);let i={};t&&t.env&&(i=t.env);let o=[];t&&t.args&&(o=t.args);let a=Ua;t&&t.bindings&&(a=t.bindings),this.memory=void 0,this.view=void 0,this.bindings=a,this.FD_MAP=new Map([[Y.WASI_STDIN_FILENO,{real:0,filetype:Y.WASI_FILETYPE_CHARACTER_DEVICE,rights:{base:Ku,inheriting:Qt.BigIntPolyfill(0)},path:void 0}],[Y.WASI_STDOUT_FILENO,{real:1,filetype:Y.WASI_FILETYPE_CHARACTER_DEVICE,rights:{base:Da,inheriting:Qt.BigIntPolyfill(0)},path:void 0}],[Y.WASI_STDERR_FILENO,{real:2,filetype:Y.WASI_FILETYPE_CHARACTER_DEVICE,rights:{base:Vu,inheriting:Qt.BigIntPolyfill(0)},path:void 0}]]);let s=this.bindings.fs,d=this.bindings.path;for(const[A,_]of Object.entries(n)){const R=s.openSync(_,s.constants.O_RDONLY),x=[...this.FD_MAP.keys()].reverse()[0]+1;this.FD_MAP.set(x,{real:R,filetype:Y.WASI_FILETYPE_DIRECTORY,rights:{base:Y.RIGHTS_DIRECTORY_BASE,inheriting:Y.RIGHTS_DIRECTORY_INHERITING},fakePath:A,path:_})}const g=(A,_)=>(this.refreshMemory(),Array.from({length:_},(x,C)=>{const k=A+C*8,O=this.view.getUint32(k,!0),Z=this.view.getUint32(k+4,!0);return new Uint8Array(this.memory.buffer,O,Z)})),f=(A,_)=>{const R=Ga(this,A);if(_!==Qt.BigIntPolyfill(0)&&(R.rights.base&_)===Qt.BigIntPolyfill(0))throw new Jn(Y.WASI_EPERM);return R},l=a.hrtime(),m=A=>{switch(A){case Y.WASI_CLOCK_MONOTONIC:return a.hrtime();case Y.WASI_CLOCK_REALTIME:return xn(Date.now());case Y.WASI_CLOCK_PROCESS_CPUTIME_ID:case Y.WASI_CLOCK_THREAD_CPUTIME_ID:return a.hrtime()-l;default:return null}};this.wasiImport={args_get:(A,_)=>{this.refreshMemory();let R=A,x=_;return o.forEach(C=>{this.view.setUint32(R,x,!0),R+=4,x+=ne.default.from(this.memory.buffer).write(`${C}\0`,x)}),Y.WASI_ESUCCESS},args_sizes_get:(A,_)=>{this.refreshMemory(),this.view.setUint32(A,o.length,!0);const R=o.reduce((x,C)=>x+ne.default.byteLength(C)+1,0);return this.view.setUint32(_,R,!0),Y.WASI_ESUCCESS},environ_get:(A,_)=>{this.refreshMemory();let R=A,x=_;return Object.entries(i).forEach(([C,k])=>{this.view.setUint32(R,x,!0),R+=4,x+=ne.default.from(this.memory.buffer).write(`${C}=${k}\0`,x)}),Y.WASI_ESUCCESS},environ_sizes_get:(A,_)=>{this.refreshMemory();const R=Object.entries(i).map(([C,k])=>`${C}=${k}\0`),x=R.reduce((C,k)=>C+ne.default.byteLength(k),0);return this.view.setUint32(A,R.length,!0),this.view.setUint32(_,x,!0),Y.WASI_ESUCCESS},clock_res_get:(A,_)=>{let R;switch(A){case Y.WASI_CLOCK_MONOTONIC:case Y.WASI_CLOCK_PROCESS_CPUTIME_ID:case Y.WASI_CLOCK_THREAD_CPUTIME_ID:{R=Qt.BigIntPolyfill(1);break}case Y.WASI_CLOCK_REALTIME:{R=Qt.BigIntPolyfill(1e3);break}}return this.view.setBigUint64(_,R),Y.WASI_ESUCCESS},clock_time_get:(A,_,R)=>{this.refreshMemory();const x=m(A);return x===null?Y.WASI_EINVAL:(this.view.setBigUint64(R,Qt.BigIntPolyfill(x),!0),Y.WASI_ESUCCESS)},fd_advise:Zt((A,_,R,x)=>(f(A,Y.WASI_RIGHT_FD_ADVISE),Y.WASI_ENOSYS)),fd_allocate:Zt((A,_,R)=>(f(A,Y.WASI_RIGHT_FD_ALLOCATE),Y.WASI_ENOSYS)),fd_close:Zt(A=>{const _=f(A,Qt.BigIntPolyfill(0));return s.closeSync(_.real),this.FD_MAP.delete(A),Y.WASI_ESUCCESS}),fd_datasync:Zt(A=>{const _=f(A,Y.WASI_RIGHT_FD_DATASYNC);return s.fdatasyncSync(_.real),Y.WASI_ESUCCESS}),fd_fdstat_get:Zt((A,_)=>{const R=f(A,Qt.BigIntPolyfill(0));return this.refreshMemory(),this.view.setUint8(_,R.filetype),this.view.setUint16(_+2,0,!0),this.view.setUint16(_+4,0,!0),this.view.setBigUint64(_+8,Qt.BigIntPolyfill(R.rights.base),!0),this.view.setBigUint64(_+8+8,Qt.BigIntPolyfill(R.rights.inheriting),!0),Y.WASI_ESUCCESS}),fd_fdstat_set_flags:Zt((A,_)=>(f(A,Y.WASI_RIGHT_FD_FDSTAT_SET_FLAGS),Y.WASI_ENOSYS)),fd_fdstat_set_rights:Zt((A,_,R)=>{const x=f(A,Qt.BigIntPolyfill(0));return(x.rights.base|_)>x.rights.base||(x.rights.inheriting|R)>x.rights.inheriting?Y.WASI_EPERM:(x.rights.base=_,x.rights.inheriting=R,Y.WASI_ESUCCESS)}),fd_filestat_get:Zt((A,_)=>{const R=f(A,Y.WASI_RIGHT_FD_FILESTAT_GET),x=s.fstatSync(R.real);return this.refreshMemory(),this.view.setBigUint64(_,Qt.BigIntPolyfill(x.dev),!0),_+=8,this.view.setBigUint64(_,Qt.BigIntPolyfill(x.ino),!0),_+=8,this.view.setUint8(_,R.filetype),_+=8,this.view.setBigUint64(_,Qt.BigIntPolyfill(x.nlink),!0),_+=8,this.view.setBigUint64(_,Qt.BigIntPolyfill(x.size),!0),_+=8,this.view.setBigUint64(_,xn(x.atimeMs),!0),_+=8,this.view.setBigUint64(_,xn(x.mtimeMs),!0),_+=8,this.view.setBigUint64(_,xn(x.ctimeMs),!0),Y.WASI_ESUCCESS}),fd_filestat_set_size:Zt((A,_)=>{const R=f(A,Y.WASI_RIGHT_FD_FILESTAT_SET_SIZE);return s.ftruncateSync(R.real,Number(_)),Y.WASI_ESUCCESS}),fd_filestat_set_times:Zt((A,_,R,x)=>{const C=f(A,Y.WASI_RIGHT_FD_FILESTAT_SET_TIMES),k=s.fstatSync(C.real);let O=k.atime,Z=k.mtime;const z=Zn(m(Y.WASI_CLOCK_REALTIME)),K=Y.WASI_FILESTAT_SET_ATIM|Y.WASI_FILESTAT_SET_ATIM_NOW;if((x&K)===K)return Y.WASI_EINVAL;const T=Y.WASI_FILESTAT_SET_MTIM|Y.WASI_FILESTAT_SET_MTIM_NOW;return(x&T)===T?Y.WASI_EINVAL:((x&Y.WASI_FILESTAT_SET_ATIM)===Y.WASI_FILESTAT_SET_ATIM?O=Zn(_):(x&Y.WASI_FILESTAT_SET_ATIM_NOW)===Y.WASI_FILESTAT_SET_ATIM_NOW&&(O=z),(x&Y.WASI_FILESTAT_SET_MTIM)===Y.WASI_FILESTAT_SET_MTIM?Z=Zn(R):(x&Y.WASI_FILESTAT_SET_MTIM_NOW)===Y.WASI_FILESTAT_SET_MTIM_NOW&&(Z=z),s.futimesSync(C.real,new Date(O),new Date(Z)),Y.WASI_ESUCCESS)}),fd_prestat_get:Zt((A,_)=>{const R=f(A,Qt.BigIntPolyfill(0));return R.path?(this.refreshMemory(),this.view.setUint8(_,Y.WASI_PREOPENTYPE_DIR),this.view.setUint32(_+4,ne.default.byteLength(R.fakePath),!0),Y.WASI_ESUCCESS):Y.WASI_EINVAL}),fd_prestat_dir_name:Zt((A,_,R)=>{const x=f(A,Qt.BigIntPolyfill(0));return x.path?(this.refreshMemory(),ne.default.from(this.memory.buffer).write(x.fakePath,_,R,"utf8"),Y.WASI_ESUCCESS):Y.WASI_EINVAL}),fd_pwrite:Zt((A,_,R,x,C)=>{const k=f(A,Y.WASI_RIGHT_FD_WRITE|Y.WASI_RIGHT_FD_SEEK);let O=0;return g(_,R).forEach(Z=>{let z=0;for(;z<Z.byteLength;)z+=s.writeSync(k.real,Z,z,Z.byteLength-z,Number(x)+O+z);O+=z}),this.view.setUint32(C,O,!0),Y.WASI_ESUCCESS}),fd_write:Zt((A,_,R,x)=>{const C=f(A,Y.WASI_RIGHT_FD_WRITE);let k=0;return g(_,R).forEach(O=>{let Z=0;for(;Z<O.byteLength;){const z=s.writeSync(C.real,O,Z,O.byteLength-Z,C.offset!==void 0?Number(C.offset):null);C.offset!==void 0&&(C.offset+=Qt.BigIntPolyfill(z)),Z+=z}k+=Z}),this.view.setUint32(x,k,!0),Y.WASI_ESUCCESS}),fd_pread:Zt((A,_,R,x,C)=>{const k=f(A,Y.WASI_RIGHT_FD_READ|Y.WASI_RIGHT_FD_SEEK);let O=0;t:for(const Z of g(_,R)){let z=0;for(;z<Z.byteLength;){const K=Z.byteLength-z,T=s.readSync(k.real,Z,z,Z.byteLength-z,Number(x)+O+z);if(z+=T,O+=T,T===0||T<K)break t}O+=z}return this.view.setUint32(C,O,!0),Y.WASI_ESUCCESS}),fd_read:Zt((A,_,R,x)=>{const C=f(A,Y.WASI_RIGHT_FD_READ),k=C.real===0;let O=0;t:for(const Z of g(_,R)){let z=0;for(;z<Z.byteLength;){let K=Z.byteLength-z,T=k||C.offset===void 0?null:Number(C.offset),p=s.readSync(C.real,Z,z,K,T);if(k||(C.offset=(C.offset?C.offset:Qt.BigIntPolyfill(0))+Qt.BigIntPolyfill(p)),z+=p,O+=p,p===0||p<K)break t}}return this.view.setUint32(x,O,!0),Y.WASI_ESUCCESS}),fd_readdir:Zt((A,_,R,x,C)=>{const k=f(A,Y.WASI_RIGHT_FD_READDIR);this.refreshMemory();const O=s.readdirSync(k.path,{withFileTypes:!0}),Z=_;for(let K=Number(x);K<O.length;K+=1){const T=O[K];let p=ne.default.byteLength(T.name);if(_-Z>R||(this.view.setBigUint64(_,Qt.BigIntPolyfill(K+1),!0),_+=8,_-Z>R))break;const w=s.statSync(d.resolve(k.path,T.name));if(this.view.setBigUint64(_,Qt.BigIntPolyfill(w.ino),!0),_+=8,_-Z>R||(this.view.setUint32(_,p,!0),_+=4,_-Z>R))break;let D;switch(!0){case w.isBlockDevice():D=Y.WASI_FILETYPE_BLOCK_DEVICE;break;case w.isCharacterDevice():D=Y.WASI_FILETYPE_CHARACTER_DEVICE;break;case w.isDirectory():D=Y.WASI_FILETYPE_DIRECTORY;break;case w.isFIFO():D=Y.WASI_FILETYPE_SOCKET_STREAM;break;case w.isFile():D=Y.WASI_FILETYPE_REGULAR_FILE;break;case w.isSocket():D=Y.WASI_FILETYPE_SOCKET_STREAM;break;case w.isSymbolicLink():D=Y.WASI_FILETYPE_SYMBOLIC_LINK;break;default:D=Y.WASI_FILETYPE_UNKNOWN;break}if(this.view.setUint8(_,D),_+=1,_+=3,_+p>=Z+R)break;ne.default.from(this.memory.buffer).write(T.name,_),_+=p}const z=_-Z;return this.view.setUint32(C,Math.min(z,R),!0),Y.WASI_ESUCCESS}),fd_renumber:Zt((A,_)=>(f(A,Qt.BigIntPolyfill(0)),f(_,Qt.BigIntPolyfill(0)),s.closeSync(this.FD_MAP.get(A).real),this.FD_MAP.set(A,this.FD_MAP.get(_)),this.FD_MAP.delete(_),Y.WASI_ESUCCESS)),fd_seek:Zt((A,_,R,x)=>{const C=f(A,Y.WASI_RIGHT_FD_SEEK);switch(this.refreshMemory(),R){case Y.WASI_WHENCE_CUR:C.offset=(C.offset?C.offset:Qt.BigIntPolyfill(0))+Qt.BigIntPolyfill(_);break;case Y.WASI_WHENCE_END:const{size:k}=s.fstatSync(C.real);C.offset=Qt.BigIntPolyfill(k)+Qt.BigIntPolyfill(_);break;case Y.WASI_WHENCE_SET:C.offset=Qt.BigIntPolyfill(_);break}return this.view.setBigUint64(x,C.offset,!0),Y.WASI_ESUCCESS}),fd_tell:Zt((A,_)=>{const R=f(A,Y.WASI_RIGHT_FD_TELL);return this.refreshMemory(),R.offset||(R.offset=Qt.BigIntPolyfill(0)),this.view.setBigUint64(_,R.offset,!0),Y.WASI_ESUCCESS}),fd_sync:Zt(A=>{const _=f(A,Y.WASI_RIGHT_FD_SYNC);return s.fsyncSync(_.real),Y.WASI_ESUCCESS}),path_create_directory:Zt((A,_,R)=>{const x=f(A,Y.WASI_RIGHT_PATH_CREATE_DIRECTORY);if(!x.path)return Y.WASI_EINVAL;this.refreshMemory();const C=ne.default.from(this.memory.buffer,_,R).toString();return s.mkdirSync(d.resolve(x.path,C)),Y.WASI_ESUCCESS}),path_filestat_get:Zt((A,_,R,x,C)=>{const k=f(A,Y.WASI_RIGHT_PATH_FILESTAT_GET);if(!k.path)return Y.WASI_EINVAL;this.refreshMemory();const O=ne.default.from(this.memory.buffer,R,x).toString(),Z=s.statSync(d.resolve(k.path,O));return this.view.setBigUint64(C,Qt.BigIntPolyfill(Z.dev),!0),C+=8,this.view.setBigUint64(C,Qt.BigIntPolyfill(Z.ino),!0),C+=8,this.view.setUint8(C,ka(this,void 0,Z).filetype),C+=8,this.view.setBigUint64(C,Qt.BigIntPolyfill(Z.nlink),!0),C+=8,this.view.setBigUint64(C,Qt.BigIntPolyfill(Z.size),!0),C+=8,this.view.setBigUint64(C,xn(Z.atimeMs),!0),C+=8,this.view.setBigUint64(C,xn(Z.mtimeMs),!0),C+=8,this.view.setBigUint64(C,xn(Z.ctimeMs),!0),Y.WASI_ESUCCESS}),path_filestat_set_times:Zt((A,_,R,x,C,k,O)=>{const Z=f(A,Y.WASI_RIGHT_PATH_FILESTAT_SET_TIMES);if(!Z.path)return Y.WASI_EINVAL;this.refreshMemory();const z=s.fstatSync(Z.real);let K=z.atime,T=z.mtime;const p=Zn(m(Y.WASI_CLOCK_REALTIME)),w=Y.WASI_FILESTAT_SET_ATIM|Y.WASI_FILESTAT_SET_ATIM_NOW;if((O&w)===w)return Y.WASI_EINVAL;const D=Y.WASI_FILESTAT_SET_MTIM|Y.WASI_FILESTAT_SET_MTIM_NOW;if((O&D)===D)return Y.WASI_EINVAL;(O&Y.WASI_FILESTAT_SET_ATIM)===Y.WASI_FILESTAT_SET_ATIM?K=Zn(C):(O&Y.WASI_FILESTAT_SET_ATIM_NOW)===Y.WASI_FILESTAT_SET_ATIM_NOW&&(K=p),(O&Y.WASI_FILESTAT_SET_MTIM)===Y.WASI_FILESTAT_SET_MTIM?T=Zn(k):(O&Y.WASI_FILESTAT_SET_MTIM_NOW)===Y.WASI_FILESTAT_SET_MTIM_NOW&&(T=p);const $=ne.default.from(this.memory.buffer,R,x).toString();return s.utimesSync(d.resolve(Z.path,$),new Date(K),new Date(T)),Y.WASI_ESUCCESS}),path_link:Zt((A,_,R,x,C,k,O)=>{const Z=f(A,Y.WASI_RIGHT_PATH_LINK_SOURCE),z=f(C,Y.WASI_RIGHT_PATH_LINK_TARGET);if(!Z.path||!z.path)return Y.WASI_EINVAL;this.refreshMemory();const K=ne.default.from(this.memory.buffer,R,x).toString(),T=ne.default.from(this.memory.buffer,k,O).toString();return s.linkSync(d.resolve(Z.path,K),d.resolve(z.path,T)),Y.WASI_ESUCCESS}),path_open:Zt((A,_,R,x,C,k,O,Z,z)=>{const K=f(A,Y.WASI_RIGHT_PATH_OPEN);k=Qt.BigIntPolyfill(k),O=Qt.BigIntPolyfill(O);const T=(k&(Y.WASI_RIGHT_FD_READ|Y.WASI_RIGHT_FD_READDIR))!==Qt.BigIntPolyfill(0),p=(k&(Y.WASI_RIGHT_FD_DATASYNC|Y.WASI_RIGHT_FD_WRITE|Y.WASI_RIGHT_FD_ALLOCATE|Y.WASI_RIGHT_FD_FILESTAT_SET_SIZE))!==Qt.BigIntPolyfill(0);let w;p&&T?w=s.constants.O_RDWR:T?w=s.constants.O_RDONLY:p&&(w=s.constants.O_WRONLY);let D=k|Y.WASI_RIGHT_PATH_OPEN,$=k|O;(C&Y.WASI_O_CREAT)!=0&&(w|=s.constants.O_CREAT,D|=Y.WASI_RIGHT_PATH_CREATE_FILE),(C&Y.WASI_O_DIRECTORY)!=0&&(w|=s.constants.O_DIRECTORY),(C&Y.WASI_O_EXCL)!=0&&(w|=s.constants.O_EXCL),(C&Y.WASI_O_TRUNC)!=0&&(w|=s.constants.O_TRUNC,D|=Y.WASI_RIGHT_PATH_FILESTAT_SET_SIZE),(Z&Y.WASI_FDFLAG_APPEND)!=0&&(w|=s.constants.O_APPEND),(Z&Y.WASI_FDFLAG_DSYNC)!=0&&(s.constants.O_DSYNC?w|=s.constants.O_DSYNC:w|=s.constants.O_SYNC,$|=Y.WASI_RIGHT_FD_DATASYNC),(Z&Y.WASI_FDFLAG_NONBLOCK)!=0&&(w|=s.constants.O_NONBLOCK),(Z&Y.WASI_FDFLAG_RSYNC)!=0&&(s.constants.O_RSYNC?w|=s.constants.O_RSYNC:w|=s.constants.O_SYNC,$|=Y.WASI_RIGHT_FD_SYNC),(Z&Y.WASI_FDFLAG_SYNC)!=0&&(w|=s.constants.O_SYNC,$|=Y.WASI_RIGHT_FD_SYNC),p&&(w&(s.constants.O_APPEND|s.constants.O_TRUNC))==0&&($|=Y.WASI_RIGHT_FD_SEEK),this.refreshMemory();const U=ne.default.from(this.memory.buffer,R,x).toString(),M=d.resolve(K.path,U);if(d.relative(K.path,M).startsWith(".."))return Y.WASI_ENOTCAPABLE;let S;try{if(S=s.realpathSync(M),d.relative(K.path,S).startsWith(".."))return Y.WASI_ENOTCAPABLE}catch(it){if(it.code==="ENOENT")S=M;else throw it}let q;try{q=s.statSync(S).isDirectory()}catch{}let tt;!p&&q?tt=s.openSync(S,s.constants.O_RDONLY):tt=s.openSync(S,w);const ft=[...this.FD_MAP.keys()].reverse()[0]+1;return this.FD_MAP.set(ft,{real:tt,filetype:void 0,offset:BigInt(0),rights:{base:D,inheriting:$},path:S}),Ga(this,ft),this.view.setUint32(z,ft,!0),Y.WASI_ESUCCESS}),path_readlink:Zt((A,_,R,x,C,k)=>{const O=f(A,Y.WASI_RIGHT_PATH_READLINK);if(!O.path)return Y.WASI_EINVAL;this.refreshMemory();const Z=ne.default.from(this.memory.buffer,_,R).toString(),z=d.resolve(O.path,Z),K=s.readlinkSync(z),T=ne.default.from(this.memory.buffer).write(K,x,C);return this.view.setUint32(k,T,!0),Y.WASI_ESUCCESS}),path_remove_directory:Zt((A,_,R)=>{const x=f(A,Y.WASI_RIGHT_PATH_REMOVE_DIRECTORY);if(!x.path)return Y.WASI_EINVAL;this.refreshMemory();const C=ne.default.from(this.memory.buffer,_,R).toString();return s.rmdirSync(d.resolve(x.path,C)),Y.WASI_ESUCCESS}),path_rename:Zt((A,_,R,x,C,k)=>{const O=f(A,Y.WASI_RIGHT_PATH_RENAME_SOURCE),Z=f(x,Y.WASI_RIGHT_PATH_RENAME_TARGET);if(!O.path||!Z.path)return Y.WASI_EINVAL;this.refreshMemory();const z=ne.default.from(this.memory.buffer,_,R).toString(),K=ne.default.from(this.memory.buffer,C,k).toString();return s.renameSync(d.resolve(O.path,z),d.resolve(Z.path,K)),Y.WASI_ESUCCESS}),path_symlink:Zt((A,_,R,x,C)=>{const k=f(R,Y.WASI_RIGHT_PATH_SYMLINK);if(!k.path)return Y.WASI_EINVAL;this.refreshMemory();const O=ne.default.from(this.memory.buffer,A,_).toString(),Z=ne.default.from(this.memory.buffer,x,C).toString();return s.symlinkSync(O,d.resolve(k.path,Z)),Y.WASI_ESUCCESS}),path_unlink_file:Zt((A,_,R)=>{const x=f(A,Y.WASI_RIGHT_PATH_UNLINK_FILE);if(!x.path)return Y.WASI_EINVAL;this.refreshMemory();const C=ne.default.from(this.memory.buffer,_,R).toString();return s.unlinkSync(d.resolve(x.path,C)),Y.WASI_ESUCCESS}),poll_oneoff:(A,_,R,x)=>{let C=0,k=0;this.refreshMemory();for(let O=0;O<R;O+=1){const Z=this.view.getBigUint64(A,!0);A+=8;const z=this.view.getUint8(A);switch(A+=1,z){case Y.WASI_EVENTTYPE_CLOCK:{A+=7,this.view.getBigUint64(A,!0),A+=8;const K=this.view.getUint32(A,!0);A+=4,A+=4;const T=this.view.getBigUint64(A,!0);A+=8,this.view.getBigUint64(A,!0),A+=8;const p=this.view.getUint16(A,!0);A+=2,A+=6;const w=p===1;let D=Y.WASI_ESUCCESS;const $=Qt.BigIntPolyfill(m(K));if($===null)D=Y.WASI_EINVAL;else{const U=w?T:$+T;k=U>k?U:k}this.view.setBigUint64(_,Z,!0),_+=8,this.view.setUint16(_,D,!0),_+=2,this.view.setUint8(_,Y.WASI_EVENTTYPE_CLOCK),_+=1,_+=5,C+=1;break}case Y.WASI_EVENTTYPE_FD_READ:case Y.WASI_EVENTTYPE_FD_WRITE:{A+=3,this.view.getUint32(A,!0),A+=4,this.view.setBigUint64(_,Z,!0),_+=8,this.view.setUint16(_,Y.WASI_ENOSYS,!0),_+=2,this.view.setUint8(_,z),_+=1,_+=5,C+=1;break}default:return Y.WASI_EINVAL}}for(this.view.setUint32(x,C,!0);a.hrtime()<k;);return Y.WASI_ESUCCESS},proc_exit:A=>(a.exit(A),Y.WASI_ESUCCESS),proc_raise:A=>A in Y.SIGNAL_MAP?(a.kill(Y.SIGNAL_MAP[A]),Y.WASI_ESUCCESS):Y.WASI_EINVAL,random_get:(A,_)=>(this.refreshMemory(),a.randomFillSync(new Uint8Array(this.memory.buffer),A,_),Y.WASI_ESUCCESS),sched_yield(){return Y.WASI_ESUCCESS},sock_recv(){return Y.WASI_ENOSYS},sock_send(){return Y.WASI_ENOSYS},sock_shutdown(){return Y.WASI_ENOSYS}},t.traceSyscalls&&Object.keys(this.wasiImport).forEach(A=>{const _=this.wasiImport[A];this.wasiImport[A]=function(...R){console.log(`WASI: wasiImport called: ${A} (${R})`);try{let x=_(...R);return console.log(`WASI:  => ${x}`),x}catch(x){throw console.log(`Catched error: ${x}`),x}}})}refreshMemory(){(!this.view||this.view.buffer.byteLength===0)&&(this.view=new ju.DataViewPolyfill(this.memory.buffer))}setMemory(t){this.memory=t}start(t){const n=t.exports;if(n===null||typeof n!="object")throw new Error(`instance.exports must be an Object. Received ${n}.`);const{memory:i}=n;if(!(i instanceof WebAssembly.Memory))throw new Error(`instance.exports.memory must be a WebAssembly.Memory. Recceived ${i}.`);this.setMemory(i),n._start&&n._start()}getImportNamespace(t){let n=null;for(let i of WebAssembly.Module.imports(t))if(i.kind==="function"&&!!i.module.startsWith("wasi_")){if(!n)n=i.module;else if(n!==i.module)throw new Error("Multiple namespaces detected.")}return n}getImports(t){switch(this.getImportNamespace(t)){case"wasi_unstable":return{wasi_unstable:this.wasiImport};case"wasi_snapshot_preview1":return{wasi_snapshot_preview1:this.wasiImport};default:throw new Error("Can't detect a WASI namespace for the WebAssembly Module")}}}Vn.default=ko,ko.defaultBindings=Ua;var Xu=Vn.WASI=ko;function Ke(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function Wa(e,t){for(var n="",i=0,o=-1,a=0,s,d=0;d<=e.length;++d){if(d<e.length)s=e.charCodeAt(d);else{if(s===47)break;s=47}if(s===47){if(!(o===d-1||a===1))if(o!==d-1&&a===2){if(n.length<2||i!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var g=n.lastIndexOf("/");if(g!==n.length-1){g===-1?(n="",i=0):(n=n.slice(0,g),i=n.length-1-n.lastIndexOf("/")),o=d,a=0;continue}}else if(n.length===2||n.length===1){n="",i=0,o=d,a=0;continue}}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(o+1,d):n=e.slice(o+1,d),i=d-o-1;o=d,a=0}else s===46&&a!==-1?++a:a=-1}return n}function tf(e,t){var n=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+i:n+e+i:i}var Xn={resolve:function(){for(var t="",n=!1,i,o=arguments.length-1;o>=-1&&!n;o--){var a;o>=0?a=arguments[o]:(i===void 0&&(i=process.cwd()),a=i),Ke(a),a.length!==0&&(t=a+"/"+t,n=a.charCodeAt(0)===47)}return t=Wa(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(Ke(t),t.length===0)return".";var n=t.charCodeAt(0)===47,i=t.charCodeAt(t.length-1)===47;return t=Wa(t,!n),t.length===0&&!n&&(t="."),t.length>0&&i&&(t+="/"),n?"/"+t:t},isAbsolute:function(t){return Ke(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,n=0;n<arguments.length;++n){var i=arguments[n];Ke(i),i.length>0&&(t===void 0?t=i:t+="/"+i)}return t===void 0?".":Xn.normalize(t)},relative:function(t,n){if(Ke(t),Ke(n),t===n||(t=Xn.resolve(t),n=Xn.resolve(n),t===n))return"";for(var i=1;i<t.length&&t.charCodeAt(i)===47;++i);for(var o=t.length,a=o-i,s=1;s<n.length&&n.charCodeAt(s)===47;++s);for(var d=n.length,g=d-s,f=a<g?a:g,l=-1,m=0;m<=f;++m){if(m===f){if(g>f){if(n.charCodeAt(s+m)===47)return n.slice(s+m+1);if(m===0)return n.slice(s+m)}else a>f&&(t.charCodeAt(i+m)===47?l=m:m===0&&(l=0));break}var A=t.charCodeAt(i+m),_=n.charCodeAt(s+m);if(A!==_)break;A===47&&(l=m)}var R="";for(m=i+l+1;m<=o;++m)(m===o||t.charCodeAt(m)===47)&&(R.length===0?R+="..":R+="/..");return R.length>0?R+n.slice(s+l):(s+=l,n.charCodeAt(s)===47&&++s,n.slice(s))},_makeLong:function(t){return t},dirname:function(t){if(Ke(t),t.length===0)return".";for(var n=t.charCodeAt(0),i=n===47,o=-1,a=!0,s=t.length-1;s>=1;--s)if(n=t.charCodeAt(s),n===47){if(!a){o=s;break}}else a=!1;return o===-1?i?"/":".":i&&o===1?"//":t.slice(0,o)},basename:function(t,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');Ke(t);var i=0,o=-1,a=!0,s;if(n!==void 0&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var d=n.length-1,g=-1;for(s=t.length-1;s>=0;--s){var f=t.charCodeAt(s);if(f===47){if(!a){i=s+1;break}}else g===-1&&(a=!1,g=s+1),d>=0&&(f===n.charCodeAt(d)?--d==-1&&(o=s):(d=-1,o=g))}return i===o?o=g:o===-1&&(o=t.length),t.slice(i,o)}else{for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!a){i=s+1;break}}else o===-1&&(a=!1,o=s+1);return o===-1?"":t.slice(i,o)}},extname:function(t){Ke(t);for(var n=-1,i=0,o=-1,a=!0,s=0,d=t.length-1;d>=0;--d){var g=t.charCodeAt(d);if(g===47){if(!a){i=d+1;break}continue}o===-1&&(a=!1,o=d+1),g===46?n===-1?n=d:s!==1&&(s=1):n!==-1&&(s=-1)}return n===-1||o===-1||s===0||s===1&&n===o-1&&n===i+1?"":t.slice(n,o)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return tf("/",t)},parse:function(t){Ke(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return n;var i=t.charCodeAt(0),o=i===47,a;o?(n.root="/",a=1):a=0;for(var s=-1,d=0,g=-1,f=!0,l=t.length-1,m=0;l>=a;--l){if(i=t.charCodeAt(l),i===47){if(!f){d=l+1;break}continue}g===-1&&(f=!1,g=l+1),i===46?s===-1?s=l:m!==1&&(m=1):s!==-1&&(m=-1)}return s===-1||g===-1||m===0||m===1&&s===g-1&&s===d+1?g!==-1&&(d===0&&o?n.base=n.name=t.slice(1,g):n.base=n.name=t.slice(d,g)):(d===0&&o?(n.name=t.slice(1,s),n.base=t.slice(1,g)):(n.name=t.slice(d,s),n.base=t.slice(d,g)),n.ext=t.slice(s,g)),d>0?n.dir=t.slice(0,d-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};Xn.posix=Xn;var Wo=Xn,ef=he({__proto__:null,default:Wo},[Wo]);function nf(e,t,n,i){return new(n||(n=Promise))(function(o,a){function s(f){try{g(i.next(f))}catch(l){a(l)}}function d(f){try{g(i.throw(f))}catch(l){a(l)}}function g(f){f.done?o(f.value):new n(function(l){l(f.value)}).then(s,d)}g((i=i.apply(e,t||[])).next())})}function of(e,t){function n(f){return function(l){return i([f,l])}}function i(f){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,s&&(d=f[0]&2?s.return:f[0]?s.throw||((d=s.return)&&d.call(s),0):s.next)&&!(d=d.call(s,f[1])).done)return d;switch(s=0,d&&(f=[f[0]&2,d.value]),f[0]){case 0:case 1:d=f;break;case 4:return o.label++,{value:f[1],done:!1};case 5:o.label++,s=f[1],f=[0];continue;case 7:f=o.ops.pop(),o.trys.pop();continue;default:if(d=o.trys,!(d=0<d.length&&d[d.length-1])&&(f[0]===6||f[0]===2)){o=0;continue}if(f[0]===3&&(!d||f[1]>d[0]&&f[1]<d[3]))o.label=f[1];else if(f[0]===6&&o.label<d[1])o.label=d[1],d=f;else if(d&&o.label<d[2])o.label=d[2],o.ops.push(f);else{d[2]&&o.ops.pop(),o.trys.pop();continue}}f=t.call(e,o)}catch(l){f=[6,l],s=0}finally{a=d=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}var o={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},a,s,d,g;return g={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g}function qo(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function rf(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;e=n.call(e);var i,o=[];try{for(;(t===void 0||0<t--)&&!(i=e.next()).done;)o.push(i.value)}catch(s){var a={error:s}}finally{try{i&&!i.done&&(n=e.return)&&n.call(e)}finally{if(a)throw a.error}}return o}function af(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(rf(arguments[t]));return e}var se=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Se(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ae(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Yt=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}});Se(Yt);var sf=Ae(function(e,t){t.default=typeof BigInt=="function"?BigInt:function(){throw Error("BigInt is not supported in this environment.")}}),ti=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Yt.constants.S_IFMT,i=Yt.constants.S_IFDIR,o=Yt.constants.S_IFREG,a=Yt.constants.S_IFBLK,s=Yt.constants.S_IFCHR,d=Yt.constants.S_IFLNK,g=Yt.constants.S_IFIFO,f=Yt.constants.S_IFSOCK;e=function(){function l(){}return l.build=function(m,A){A===void 0&&(A=!1);var _=new l,R=m.gid,x=m.atime,C=m.mtime,k=m.ctime;return A=A?sf.default:function(O){return O},_.uid=A(m.uid),_.gid=A(R),_.rdev=A(0),_.blksize=A(4096),_.ino=A(m.ino),_.size=A(m.getSize()),_.blocks=A(1),_.atime=x,_.mtime=C,_.ctime=k,_.birthtime=k,_.atimeMs=A(x.getTime()),_.mtimeMs=A(C.getTime()),R=A(k.getTime()),_.ctimeMs=R,_.birthtimeMs=R,_.dev=A(0),_.mode=A(m.mode),_.nlink=A(m.nlink),_},l.prototype._checkModeProperty=function(m){return(Number(this.mode)&n)===m},l.prototype.isDirectory=function(){return this._checkModeProperty(i)},l.prototype.isFile=function(){return this._checkModeProperty(o)},l.prototype.isBlockDevice=function(){return this._checkModeProperty(a)},l.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},l.prototype.isSymbolicLink=function(){return this._checkModeProperty(d)},l.prototype.isFIFO=function(){return this._checkModeProperty(g)},l.prototype.isSocket=function(){return this._checkModeProperty(f)},l}(),t.Stats=e,t.default=e});Se(ti);var Nn=typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{},Ve=[],qe=[],cf=typeof Uint8Array!="undefined"?Uint8Array:Array,Qo=!1;function qa(){Qo=!0;for(var e=0;64>e;++e)Ve[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e],qe["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;qe[45]=62,qe[95]=63}function lf(e,t,n){for(var i=[],o=t;o<n;o+=3)t=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(Ve[t>>18&63]+Ve[t>>12&63]+Ve[t>>6&63]+Ve[t&63]);return i.join("")}function Qa(e){Qo||qa();for(var t=e.length,n=t%3,i="",o=[],a=0,s=t-n;a<s;a+=16383)o.push(lf(e,a,a+16383>s?s:a+16383));return n===1?(e=e[t-1],i+=Ve[e>>2],i+=Ve[e<<4&63],i+="=="):n===2&&(e=(e[t-2]<<8)+e[t-1],i+=Ve[e>>10],i+=Ve[e>>4&63],i+=Ve[e<<2&63],i+="="),o.push(i),o.join("")}function eo(e,t,n,i,o){var a=8*o-i-1,s=(1<<a)-1,d=s>>1,g=-7;o=n?o-1:0;var f=n?-1:1,l=e[t+o];for(o+=f,n=l&(1<<-g)-1,l>>=-g,g+=a;0<g;n=256*n+e[t+o],o+=f,g-=8);for(a=n&(1<<-g)-1,n>>=-g,g+=i;0<g;a=256*a+e[t+o],o+=f,g-=8);if(n===0)n=1-d;else{if(n===s)return a?NaN:1/0*(l?-1:1);a+=Math.pow(2,i),n-=d}return(l?-1:1)*a*Math.pow(2,n-i)}function no(e,t,n,i,o,a){var s,d=8*a-o-1,g=(1<<d)-1,f=g>>1,l=o===23?Math.pow(2,-24)-Math.pow(2,-77):0;a=i?0:a-1;var m=i?1:-1,A=0>t||t===0&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(t=isNaN(t)?1:0,i=g):(i=Math.floor(Math.log(t)/Math.LN2),1>t*(s=Math.pow(2,-i))&&(i--,s*=2),t=1<=i+f?t+l/s:t+l*Math.pow(2,1-f),2<=t*s&&(i++,s/=2),i+f>=g?(t=0,i=g):1<=i+f?(t=(t*s-1)*Math.pow(2,o),i+=f):(t=t*Math.pow(2,f-1)*Math.pow(2,o),i=0));8<=o;e[n+a]=t&255,a+=m,t/=256,o-=8);for(i=i<<o|t,d+=o;0<d;e[n+a]=i&255,a+=m,i/=256,d-=8);e[n+a-m]|=128*A}var uf={}.toString,Ha=Array.isArray||function(e){return uf.call(e)=="[object Array]"};mt.TYPED_ARRAY_SUPPORT=Nn.TYPED_ARRAY_SUPPORT!==void 0?Nn.TYPED_ARRAY_SUPPORT:!0;var ff=mt.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function ln(e,t){if((mt.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<t)throw new RangeError("Invalid typed array length");return mt.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=mt.prototype):(e===null&&(e=new mt(t)),e.length=t),e}function mt(e,t,n){if(!(mt.TYPED_ARRAY_SUPPORT||this instanceof mt))return new mt(e,t,n);if(typeof e=="number"){if(typeof t=="string")throw Error("If encoding is specified then the first argument must be a string");return Ho(this,e)}return za(this,e,t,n)}mt.poolSize=8192,mt._augment=function(e){return e.__proto__=mt.prototype,e};function za(e,t,n,i){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');if(typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer){if(t.byteLength,0>n||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=n===void 0&&i===void 0?new Uint8Array(t):i===void 0?new Uint8Array(t,n):new Uint8Array(t,n,i),mt.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=mt.prototype):e=zo(e,t),e}if(typeof t=="string"){if(i=e,e=n,(typeof e!="string"||e==="")&&(e="utf8"),!mt.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return n=Ya(t,e)|0,i=ln(i,n),t=i.write(t,e),t!==n&&(i=i.slice(0,t)),i}return df(e,t)}mt.from=function(e,t,n){return za(null,e,t,n)},mt.TYPED_ARRAY_SUPPORT&&(mt.prototype.__proto__=Uint8Array.prototype,mt.__proto__=Uint8Array);function $a(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative')}mt.alloc=function(e,t,n){return $a(e),e=0>=e?ln(null,e):t!==void 0?typeof n=="string"?ln(null,e).fill(t,n):ln(null,e).fill(t):ln(null,e),e};function Ho(e,t){if($a(t),e=ln(e,0>t?0:$o(t)|0),!mt.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}mt.allocUnsafe=function(e){return Ho(null,e)},mt.allocUnsafeSlow=function(e){return Ho(null,e)};function zo(e,t){var n=0>t.length?0:$o(t.length)|0;e=ln(e,n);for(var i=0;i<n;i+=1)e[i]=t[i]&255;return e}function df(e,t){if(Ze(t)){var n=$o(t.length)|0;return e=ln(e,n),e.length===0||t.copy(e,0,0,n),e}if(t){if(typeof ArrayBuffer!="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t)return(n=typeof t.length!="number")||(n=t.length,n=n!==n),n?ln(e,0):zo(e,t);if(t.type==="Buffer"&&Ha(t.data))return zo(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function $o(e){if(e>=(mt.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(mt.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return e|0}mt.isBuffer=un;function Ze(e){return!(e==null||!e._isBuffer)}mt.compare=function(e,t){if(!Ze(e)||!Ze(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},mt.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},mt.concat=function(e,t){if(!Ha(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return mt.alloc(0);var n;if(t===void 0)for(n=t=0;n<e.length;++n)t+=e[n].length;t=mt.allocUnsafe(t);var i=0;for(n=0;n<e.length;++n){var o=e[n];if(!Ze(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(t,i),i+=o.length}return t};function Ya(e,t){if(Ze(e))return e.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var n=e.length;if(n===0)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return ao(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Xa(e).length;default:if(i)return ao(e).length;t=(""+t).toLowerCase(),i=!0}}mt.byteLength=Ya;function hf(e,t,n){var i=!1;if((t===void 0||0>t)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),0>=n)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":for(e=t,t=n,n=this.length,(!e||0>e)&&(e=0),(!t||0>t||t>n)&&(t=n),i="",n=e;n<t;++n)e=i,i=this[n],i=16>i?"0"+i.toString(16):i.toString(16),i=e+i;return i;case"utf8":case"utf-8":return Va(this,t,n);case"ascii":for(e="",n=Math.min(this.length,n);t<n;++t)e+=String.fromCharCode(this[t]&127);return e;case"latin1":case"binary":for(e="",n=Math.min(this.length,n);t<n;++t)e+=String.fromCharCode(this[t]);return e;case"base64":return t=t===0&&n===this.length?Qa(this):Qa(this.slice(t,n)),t;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(t=this.slice(t,n),n="",e=0;e<t.length;e+=2)n+=String.fromCharCode(t[e]+256*t[e+1]);return n;default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}mt.prototype._isBuffer=!0;function Mn(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}mt.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Mn(this,t,t+1);return this},mt.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Mn(this,t,t+3),Mn(this,t+1,t+2);return this},mt.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Mn(this,t,t+7),Mn(this,t+1,t+6),Mn(this,t+2,t+5),Mn(this,t+3,t+4);return this},mt.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Va(this,0,e):hf.apply(this,arguments)},mt.prototype.equals=function(e){if(!Ze(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:mt.compare(this,e)===0},mt.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},mt.prototype.compare=function(e,t,n,i,o){if(!Ze(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),0>t||n>e.length||0>i||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;var a=o-i,s=n-t,d=Math.min(a,s);for(i=this.slice(i,o),e=e.slice(t,n),t=0;t<d;++t)if(i[t]!==e[t]){a=i[t],s=e[t];break}return a<s?-1:s<a?1:0};function ja(e,t,n,i,o){if(e.length===0)return-1;if(typeof n=="string"?(i=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(0>n)if(o)n=0;else return-1;if(typeof t=="string"&&(t=mt.from(t,i)),Ze(t))return t.length===0?-1:Ka(e,t,n,i,o);if(typeof t=="number")return t&=255,mt.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Ka(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function Ka(e,t,n,i,o){function a(f,l){return s===1?f[l]:f.readUInt16BE(l*s)}var s=1,d=e.length,g=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(2>e.length||2>t.length)return-1;s=2,d/=2,g/=2,n/=2}if(o)for(i=-1;n<d;n++)if(a(e,n)===a(t,i===-1?0:n-i)){if(i===-1&&(i=n),n-i+1===g)return i*s}else i!==-1&&(n-=n-i),i=-1;else for(n+g>d&&(n=d-g);0<=n;n--){for(d=!0,i=0;i<g;i++)if(a(e,n+i)!==a(t,i)){d=!1;break}if(d)return n}return-1}mt.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},mt.prototype.indexOf=function(e,t,n){return ja(this,e,t,n,!0)},mt.prototype.lastIndexOf=function(e,t,n){return ja(this,e,t,n,!1)},mt.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((n===void 0||n>o)&&(n=o),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(i||(i="utf8"),o=!1;;)switch(i){case"hex":t:{if(t=Number(t)||0,i=this.length-t,n?(n=Number(n),n>i&&(n=i)):n=i,i=e.length,i%2!=0)throw new TypeError("Invalid hex string");for(n>i/2&&(n=i/2),i=0;i<n;++i){if(o=parseInt(e.substr(2*i,2),16),isNaN(o)){e=i;break t}this[t+i]=o}e=i}return e;case"utf8":case"utf-8":return Ei(ao(e,this.length-t),this,t,n);case"ascii":return Ei(Ja(e),this,t,n);case"latin1":case"binary":return Ei(Ja(e),this,t,n);case"base64":return Ei(Xa(e),this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=e,o=this.length-t;for(var a=[],s=0;s<i.length&&!(0>(o-=2));++s){var d=i.charCodeAt(s);e=d>>8,d%=256,a.push(d),a.push(e)}return Ei(a,this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},mt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Va(e,t,n){n=Math.min(e.length,n);for(var i=[];t<n;){var o=e[t],a=null,s=239<o?4:223<o?3:191<o?2:1;if(t+s<=n)switch(s){case 1:128>o&&(a=o);break;case 2:var d=e[t+1];(d&192)==128&&(o=(o&31)<<6|d&63,127<o&&(a=o));break;case 3:d=e[t+1];var g=e[t+2];(d&192)==128&&(g&192)==128&&(o=(o&15)<<12|(d&63)<<6|g&63,2047<o&&(55296>o||57343<o)&&(a=o));break;case 4:d=e[t+1],g=e[t+2];var f=e[t+3];(d&192)==128&&(g&192)==128&&(f&192)==128&&(o=(o&15)<<18|(d&63)<<12|(g&63)<<6|f&63,65535<o&&1114112>o&&(a=o))}a===null?(a=65533,s=1):65535<a&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|a&1023),i.push(a),t+=s}if(e=i.length,e<=Za)i=String.fromCharCode.apply(String,i);else{for(n="",t=0;t<e;)n+=String.fromCharCode.apply(String,i.slice(t,t+=Za));i=n}return i}var Za=4096;mt.prototype.slice=function(e,t){var n=this.length;if(e=~~e,t=t===void 0?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e),mt.TYPED_ARRAY_SUPPORT)t=this.subarray(e,t),t.__proto__=mt.prototype;else{n=t-e,t=new mt(n,void 0);for(var i=0;i<n;++i)t[i]=this[i+e]}return t};function ge(e,t,n){if(e%1!=0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}mt.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||ge(e,t,this.length),n=this[e];for(var i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},mt.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||ge(e,t,this.length),n=this[e+--t];for(var i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},mt.prototype.readUInt8=function(e,t){return t||ge(e,1,this.length),this[e]},mt.prototype.readUInt16LE=function(e,t){return t||ge(e,2,this.length),this[e]|this[e+1]<<8},mt.prototype.readUInt16BE=function(e,t){return t||ge(e,2,this.length),this[e]<<8|this[e+1]},mt.prototype.readUInt32LE=function(e,t){return t||ge(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},mt.prototype.readUInt32BE=function(e,t){return t||ge(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},mt.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||ge(e,t,this.length),n=this[e];for(var i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=128*i&&(n-=Math.pow(2,8*t)),n},mt.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||ge(e,t,this.length),n=t;for(var i=1,o=this[e+--n];0<n&&(i*=256);)o+=this[e+--n]*i;return o>=128*i&&(o-=Math.pow(2,8*t)),o},mt.prototype.readInt8=function(e,t){return t||ge(e,1,this.length),this[e]&128?-1*(255-this[e]+1):this[e]},mt.prototype.readInt16LE=function(e,t){return t||ge(e,2,this.length),e=this[e]|this[e+1]<<8,e&32768?e|4294901760:e},mt.prototype.readInt16BE=function(e,t){return t||ge(e,2,this.length),e=this[e+1]|this[e]<<8,e&32768?e|4294901760:e},mt.prototype.readInt32LE=function(e,t){return t||ge(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},mt.prototype.readInt32BE=function(e,t){return t||ge(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},mt.prototype.readFloatLE=function(e,t){return t||ge(e,4,this.length),eo(this,e,!0,23,4)},mt.prototype.readFloatBE=function(e,t){return t||ge(e,4,this.length),eo(this,e,!1,23,4)},mt.prototype.readDoubleLE=function(e,t){return t||ge(e,8,this.length),eo(this,e,!0,52,8)},mt.prototype.readDoubleBE=function(e,t){return t||ge(e,8,this.length),eo(this,e,!1,52,8)};function Oe(e,t,n,i,o,a){if(!Ze(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}mt.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||Oe(this,e,t,n,Math.pow(2,8*n)-1,0),i=1;var o=0;for(this[t]=e&255;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},mt.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||Oe(this,e,t,n,Math.pow(2,8*n)-1,0),i=n-1;var o=1;for(this[t+i]=e&255;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},mt.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,1,255,0),mt.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function io(e,t,n,i){0>t&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-n,2);o<a;++o)e[n+o]=(t&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}mt.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,2,65535,0),mt.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):io(this,e,t,!0),t+2},mt.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,2,65535,0),mt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):io(this,e,t,!1),t+2};function oo(e,t,n,i){0>t&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-n,4);o<a;++o)e[n+o]=t>>>8*(i?o:3-o)&255}mt.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,4,4294967295,0),mt.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):oo(this,e,t,!0),t+4},mt.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,4,4294967295,0),mt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):oo(this,e,t,!1),t+4},mt.prototype.writeIntLE=function(e,t,n,i){e=+e,t|=0,i||(i=Math.pow(2,8*n-1),Oe(this,e,t,n,i-1,-i)),i=0;var o=1,a=0;for(this[t]=e&255;++i<n&&(o*=256);)0>e&&a===0&&this[t+i-1]!==0&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},mt.prototype.writeIntBE=function(e,t,n,i){e=+e,t|=0,i||(i=Math.pow(2,8*n-1),Oe(this,e,t,n,i-1,-i)),i=n-1;var o=1,a=0;for(this[t+i]=e&255;0<=--i&&(o*=256);)0>e&&a===0&&this[t+i+1]!==0&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},mt.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,1,127,-128),mt.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e&255,t+1},mt.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,2,32767,-32768),mt.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):io(this,e,t,!0),t+2},mt.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,2,32767,-32768),mt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):io(this,e,t,!1),t+2},mt.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,4,2147483647,-2147483648),mt.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):oo(this,e,t,!0),t+4},mt.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),mt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):oo(this,e,t,!1),t+4};function ro(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}mt.prototype.writeFloatLE=function(e,t,n){return n||ro(this,e,t,4),no(this,e,t,!0,23,4),t+4},mt.prototype.writeFloatBE=function(e,t,n){return n||ro(this,e,t,4),no(this,e,t,!1,23,4),t+4},mt.prototype.writeDoubleLE=function(e,t,n){return n||ro(this,e,t,8),no(this,e,t,!0,52,8),t+8},mt.prototype.writeDoubleBE=function(e,t,n){return n||ro(this,e,t,8),no(this,e,t,!1,52,8),t+8},mt.prototype.copy=function(e,t,n,i){if(n||(n=0),i||i===0||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),0<i&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n;if(this===e&&n<t&&t<i)for(i=o-1;0<=i;--i)e[i+t]=this[i+n];else if(1e3>o||!mt.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},mt.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var o=e.charCodeAt(0);256>o&&(e=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!mt.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0),typeof e=="number")for(i=t;i<n;++i)this[i]=e;else for(e=Ze(e)?e:ao(new mt(e,i).toString()),o=e.length,i=0;i<n-t;++i)this[i+t]=e[i%o];return this};var _f=/[^+\/0-9A-Za-z-_]/g;function ao(e,t){t=t||1/0;for(var n,i=e.length,o=null,a=[],s=0;s<i;++s){if(n=e.charCodeAt(s),55295<n&&57344>n){if(!o){if(56319<n){-1<(t-=3)&&a.push(239,191,189);continue}else if(s+1===i){-1<(t-=3)&&a.push(239,191,189);continue}o=n;continue}if(56320>n){-1<(t-=3)&&a.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&-1<(t-=3)&&a.push(239,191,189);if(o=null,128>n){if(0>--t)break;a.push(n)}else if(2048>n){if(0>(t-=2))break;a.push(n>>6|192,n&63|128)}else if(65536>n){if(0>(t-=3))break;a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(1114112>n){if(0>(t-=4))break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw Error("Invalid code point")}return a}function Ja(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function Xa(e){if(e=(e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(_f,""),2>e.length)e="";else for(;e.length%4!=0;)e+="=";Qo||qa();var t=e.length;if(0<t%4)throw Error("Invalid string. Length must be a multiple of 4");var n=e[t-2]==="="?2:e[t-1]==="="?1:0,i=new cf(3*t/4-n),o=0<n?t-4:t,a=0;for(t=0;t<o;t+=4){var s=qe[e.charCodeAt(t)]<<18|qe[e.charCodeAt(t+1)]<<12|qe[e.charCodeAt(t+2)]<<6|qe[e.charCodeAt(t+3)];i[a++]=s>>16&255,i[a++]=s>>8&255,i[a++]=s&255}return n===2?(s=qe[e.charCodeAt(t)]<<2|qe[e.charCodeAt(t+1)]>>4,i[a++]=s&255):n===1&&(s=qe[e.charCodeAt(t)]<<10|qe[e.charCodeAt(t+1)]<<4|qe[e.charCodeAt(t+2)]>>2,i[a++]=s>>8&255,i[a++]=s&255),i}function Ei(e,t,n,i){for(var o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function un(e){return e!=null&&(!!e._isBuffer||ts(e)||typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&ts(e.slice(0,0)))}function ts(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var wi=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:ff,Buffer:mt,SlowBuffer:function(e){return+e!=e&&(e=0),mt.alloc(+e)},isBuffer:un}),ee=Ae(function(e,t){function n(o){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return new(wi.Buffer.bind.apply(wi.Buffer,i([void 0,o],a)))}var i=se&&se.__spreadArrays||function(){for(var o=0,a=0,s=arguments.length;a<s;a++)o+=arguments[a].length;o=Array(o);var d=0;for(a=0;a<s;a++)for(var g=arguments[a],f=0,l=g.length;f<l;f++,d++)o[d]=g[f];return o};Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=wi.Buffer,t.bufferAllocUnsafe=wi.Buffer.allocUnsafe||n,t.bufferFrom=wi.Buffer.from||n});Se(ee);function es(){throw Error("setTimeout has not been defined")}function ns(){throw Error("clearTimeout has not been defined")}var En=es,wn=ns;typeof Nn.setTimeout=="function"&&(En=setTimeout),typeof Nn.clearTimeout=="function"&&(wn=clearTimeout);function is(e){if(En===setTimeout)return setTimeout(e,0);if((En===es||!En)&&setTimeout)return En=setTimeout,setTimeout(e,0);try{return En(e,0)}catch{try{return En.call(null,e,0)}catch{return En.call(this,e,0)}}}function gf(e){if(wn===clearTimeout)return clearTimeout(e);if((wn===ns||!wn)&&clearTimeout)return wn=clearTimeout,clearTimeout(e);try{return wn(e)}catch{try{return wn.call(null,e)}catch{return wn.call(this,e)}}}var fn=[],ei=!1,Un,so=-1;function pf(){ei&&Un&&(ei=!1,Un.length?fn=Un.concat(fn):so=-1,fn.length&&os())}function os(){if(!ei){var e=is(pf);ei=!0;for(var t=fn.length;t;){for(Un=fn,fn=[];++so<t;)Un&&Un[so].run();so=-1,t=fn.length}Un=null,ei=!1,gf(e)}}function Ne(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];fn.push(new rs(e,t)),fn.length!==1||ei||is(os)}function rs(e,t){this.fun=e,this.array=t}rs.prototype.run=function(){this.fun.apply(null,this.array)};function Dn(){}var ni=Nn.performance||{},mf=ni.now||ni.mozNow||ni.msNow||ni.oNow||ni.webkitNow||function(){return new Date().getTime()},yf=new Date,ii={nextTick:Ne,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Dn,addListener:Dn,once:Dn,off:Dn,removeListener:Dn,removeAllListeners:Dn,emit:Dn,binding:function(){throw Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*mf.call(ni),n=Math.floor(t);return t=Math.floor(t%1*1e9),e&&(n-=e[0],t-=e[1],0>t&&(n--,t+=1e9)),[n,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-yf)/1e3}},Sn=typeof Object.create=="function"?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){function n(){}e.super_=t,n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},Af=/%[sdj%]/g;function Yo(e){if(!Gn(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(Je(arguments[n]));return t.join(" ")}n=1;var i=arguments,o=i.length;t=String(e).replace(Af,function(s){if(s==="%%")return"%";if(n>=o)return s;switch(s){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch{return"[Circular]"}default:return s}});for(var a=i[n];n<o;a=i[++n])t=a!==null&&vn(a)?t+(" "+Je(a)):t+(" "+a);return t}function jo(e,t){if(dn(Nn.process))return function(){return jo(e,t).apply(this,arguments)};if(ii.noDeprecation===!0)return e;var n=!1;return function(){if(!n){if(ii.throwDeprecation)throw Error(t);ii.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}}var co={},Ko;function as(e){return dn(Ko)&&(Ko=ii.env.NODE_DEBUG||""),e=e.toUpperCase(),co[e]||(new RegExp("\\b"+e+"\\b","i").test(Ko)?co[e]=function(){var t=Yo.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:co[e]=function(){}),co[e]}function Je(e,t){var n={seen:[],stylize:If};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),Jo(t)?n.showHidden=t:t&&ls(n,t),dn(n.showHidden)&&(n.showHidden=!1),dn(n.depth)&&(n.depth=2),dn(n.colors)&&(n.colors=!1),dn(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Lf),lo(n,e,n.depth)}Je.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Je.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Lf(e,t){return(t=Je.styles[t])?"["+Je.colors[t][0]+"m"+e+"["+Je.colors[t][1]+"m":e}function If(e){return e}function Ef(e){var t={};return e.forEach(function(n){t[n]=!0}),t}function lo(e,t,n){if(e.customInspect&&t&&ri(t.inspect)&&t.inspect!==Je&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return Gn(i)||(i=lo(e,i,n)),i}if(i=wf(e,t))return i;var o=Object.keys(t),a=Ef(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),vi(t)&&(0<=o.indexOf("message")||0<=o.indexOf("description")))return Vo(t);if(o.length===0){if(ri(t))return e.stylize("[Function"+(t.name?": "+t.name:"")+"]","special");if(oi(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Si(t))return e.stylize(Date.prototype.toString.call(t),"date");if(vi(t))return Vo(t)}i="";var s=!1,d=["{","}"];return ss(t)&&(s=!0,d=["[","]"]),ri(t)&&(i=" [Function"+(t.name?": "+t.name:"")+"]"),oi(t)&&(i=" "+RegExp.prototype.toString.call(t)),Si(t)&&(i=" "+Date.prototype.toUTCString.call(t)),vi(t)&&(i=" "+Vo(t)),o.length===0&&(!s||t.length==0)?d[0]+i+d[1]:0>n?oi(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),o=s?Sf(e,t,n,a,o):o.map(function(g){return Zo(e,t,n,a,g,s)}),e.seen.pop(),vf(o,i,d))}function wf(e,t){if(dn(t))return e.stylize("undefined","undefined");if(Gn(t))return t="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",e.stylize(t,"string");if(cs(t))return e.stylize(""+t,"number");if(Jo(t))return e.stylize(""+t,"boolean");if(t===null)return e.stylize("null","null")}function Vo(e){return"["+Error.prototype.toString.call(e)+"]"}function Sf(e,t,n,i,o){for(var a=[],s=0,d=t.length;s<d;++s)Object.prototype.hasOwnProperty.call(t,String(s))?a.push(Zo(e,t,n,i,String(s),!0)):a.push("");return o.forEach(function(g){g.match(/^\d+$/)||a.push(Zo(e,t,n,i,g,!0))}),a}function Zo(e,t,n,i,o,a){var s,d;if(t=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},t.get?d=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(d=e.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(i,o)||(s="["+o+"]"),d||(0>e.seen.indexOf(t.value)?(d=n===null?lo(e,t.value,null):lo(e,t.value,n-1),-1<d.indexOf(`
`)&&(d=a?d.split(`
`).map(function(g){return"  "+g}).join(`
`).substr(2):`
`+d.split(`
`).map(function(g){return"   "+g}).join(`
`))):d=e.stylize("[Circular]","special")),dn(s)){if(a&&o.match(/^\d+$/))return d;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+d}function vf(e,t,n){return 60<e.reduce(function(i,o){return o.indexOf(`
`),i+o.replace(/\u001b\[\d\d?m/g,"").length+1},0)?n[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function ss(e){return Array.isArray(e)}function Jo(e){return typeof e=="boolean"}function cs(e){return typeof e=="number"}function Gn(e){return typeof e=="string"}function dn(e){return e===void 0}function oi(e){return vn(e)&&Object.prototype.toString.call(e)==="[object RegExp]"}function vn(e){return typeof e=="object"&&e!==null}function Si(e){return vn(e)&&Object.prototype.toString.call(e)==="[object Date]"}function vi(e){return vn(e)&&(Object.prototype.toString.call(e)==="[object Error]"||e instanceof Error)}function ri(e){return typeof e=="function"}function Xo(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e=="undefined"}function tr(e){return 10>e?"0"+e.toString(10):e.toString(10)}var Cf="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");function bf(){var e=new Date,t=[tr(e.getHours()),tr(e.getMinutes()),tr(e.getSeconds())].join(":");return[e.getDate(),Cf[e.getMonth()],t].join(" ")}function ls(e,t){if(!t||!vn(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}var Ci={inherits:Sn,_extend:ls,log:function(){console.log("%s - %s",bf(),Yo.apply(null,arguments))},isBuffer:function(e){return un(e)},isPrimitive:Xo,isFunction:ri,isError:vi,isDate:Si,isObject:vn,isRegExp:oi,isUndefined:dn,isSymbol:function(e){return typeof e=="symbol"},isString:Gn,isNumber:cs,isNullOrUndefined:function(e){return e==null},isNull:function(e){return e===null},isBoolean:Jo,isArray:ss,inspect:Je,deprecate:jo,format:Yo,debuglog:as};function us(e,t){if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0}var Ff=Object.prototype.hasOwnProperty,fs=Object.keys||function(e){var t=[],n;for(n in e)Ff.call(e,n)&&t.push(n);return t},ds=Array.prototype.slice,er;function hs(){return typeof er!="undefined"?er:er=function(){return function(){}.name==="foo"}()}function _s(e){return un(e)||typeof Nn.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e?!!(e instanceof DataView||e.buffer&&e.buffer instanceof ArrayBuffer):!1}function ie(e,t){e||Pe(e,!0,t,"==",ir)}var Bf=/\s*function\s+([^\(\s]*)\s*/;function gs(e){if(ri(e))return hs()?e.name:(e=e.toString().match(Bf))&&e[1]}ie.AssertionError=nr;function nr(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=ps(ms(this.actual),128)+" "+this.operator+" "+ps(ms(this.expected),128),this.generatedMessage=!0);var t=e.stackStartFunction||Pe;Error.captureStackTrace?Error.captureStackTrace(this,t):(e=Error(),e.stack&&(e=e.stack,t=gs(t),t=e.indexOf(`
`+t),0<=t&&(t=e.indexOf(`
`,t+1),e=e.substring(t+1)),this.stack=e))}Sn(nr,Error);function ps(e,t){return typeof e=="string"?e.length<t?e:e.slice(0,t):e}function ms(e){return hs()||!ri(e)?Je(e):(e=gs(e),"[Function"+(e?": "+e:"")+"]")}function Pe(e,t,n,i,o){throw new nr({message:n,actual:e,expected:t,operator:i,stackStartFunction:o})}ie.fail=Pe;function ir(e,t){e||Pe(e,!0,t,"==",ir)}ie.ok=ir,ie.equal=ys;function ys(e,t,n){e!=t&&Pe(e,t,n,"==",ys)}ie.notEqual=As;function As(e,t,n){e==t&&Pe(e,t,n,"!=",As)}ie.deepEqual=Ls;function Ls(e,t,n){ai(e,t,!1)||Pe(e,t,n,"deepEqual",Ls)}ie.deepStrictEqual=Is;function Is(e,t,n){ai(e,t,!0)||Pe(e,t,n,"deepStrictEqual",Is)}function ai(e,t,n,i){if(e===t)return!0;if(un(e)&&un(t))return us(e,t)===0;if(Si(e)&&Si(t))return e.getTime()===t.getTime();if(oi(e)&&oi(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(e!==null&&typeof e=="object"||t!==null&&typeof t=="object"){if(!_s(e)||!_s(t)||Object.prototype.toString.call(e)!==Object.prototype.toString.call(t)||e instanceof Float32Array||e instanceof Float64Array){if(un(e)!==un(t))return!1;i=i||{actual:[],expected:[]};var o=i.actual.indexOf(e);return o!==-1&&o===i.expected.indexOf(t)?!0:(i.actual.push(e),i.expected.push(t),Tf(e,t,n,i))}return us(new Uint8Array(e.buffer),new Uint8Array(t.buffer))===0}return n?e===t:e==t}function Es(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function Tf(e,t,n,i){if(e==null||t===null||t===void 0)return!1;if(Xo(e)||Xo(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=Es(e),a=Es(t);if(o&&!a||!o&&a)return!1;if(o)return e=ds.call(e),t=ds.call(t),ai(e,t,n);o=fs(e);var s=fs(t);if(o.length!==s.length)return!1;for(o.sort(),s.sort(),a=o.length-1;0<=a;a--)if(o[a]!==s[a])return!1;for(a=o.length-1;0<=a;a--)if(s=o[a],!ai(e[s],t[s],n,i))return!1;return!0}ie.notDeepEqual=ws;function ws(e,t,n){ai(e,t,!1)&&Pe(e,t,n,"notDeepEqual",ws)}ie.notDeepStrictEqual=Ss;function Ss(e,t,n){ai(e,t,!0)&&Pe(e,t,n,"notDeepStrictEqual",Ss)}ie.strictEqual=vs;function vs(e,t,n){e!==t&&Pe(e,t,n,"===",vs)}ie.notStrictEqual=Cs;function Cs(e,t,n){e===t&&Pe(e,t,n,"!==",Cs)}function bs(e,t){if(!e||!t)return!1;if(Object.prototype.toString.call(t)=="[object RegExp]")return t.test(e);try{if(e instanceof t)return!0}catch{}return Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function Fs(e,t,n,i){if(typeof t!="function")throw new TypeError('"block" argument must be a function');typeof n=="string"&&(i=n,n=null);try{t()}catch(d){var o=d}t=o,i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),e&&!t&&Pe(t,n,"Missing expected exception"+i),o=typeof i=="string";var a=!e&&vi(t),s=!e&&t&&!n;if((a&&o&&bs(t,n)||s)&&Pe(t,n,"Got unwanted exception"+i),e&&t&&n&&!bs(t,n)||!e&&t)throw t}ie.throws=Rf;function Rf(e,t,n){Fs(!0,e,t,n)}ie.doesNotThrow=Of;function Of(e,t,n){Fs(!1,e,t,n)}ie.ifError=Pf;function Pf(e){if(e)throw e}var bi=Ae(function(e,t){function n(f){return function(l){function m(A){for(var _=[],R=1;R<arguments.length;R++)_[R-1]=arguments[R];return _=l.call(this,i(A,_))||this,_.code=A,_[d]=A,_.name=l.prototype.name+" ["+_[d]+"]",_}return s(m,l),m}(f)}function i(f,l){ie.strictEqual(typeof f,"string");var m=g[f];if(ie(m,"An invalid error message key was used: "+f+"."),typeof m=="function")f=m;else{if(f=Ci.format,l===void 0||l.length===0)return m;l.unshift(m)}return String(f.apply(null,l))}function o(f,l){g[f]=typeof l=="function"?l:String(l)}function a(f,l){if(ie(f,"expected is required"),ie(typeof l=="string","thing is required"),Array.isArray(f)){var m=f.length;return ie(0<m,"At least one expected value needs to be specified"),f=f.map(function(A){return String(A)}),2<m?"one of "+l+" "+f.slice(0,m-1).join(", ")+", or "+f[m-1]:m===2?"one of "+l+" "+f[0]+" or "+f[1]:"of "+l+" "+f[0]}return"of "+l+" "+String(f)}var s=se&&se.__extends||function(){function f(l,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,_){A.__proto__=_}||function(A,_){for(var R in _)_.hasOwnProperty(R)&&(A[R]=_[R])},f(l,m)}return function(l,m){function A(){this.constructor=l}f(l,m),l.prototype=m===null?Object.create(m):(A.prototype=m.prototype,new A)}}();Object.defineProperty(t,"__esModule",{value:!0});var d=typeof Symbol=="undefined"?"_kCode":Symbol("code"),g={};e=function(f){function l(m){if(typeof m!="object"||m===null)throw new t.TypeError("ERR_INVALID_ARG_TYPE","options","object");var A=m.message?f.call(this,m.message)||this:f.call(this,Ci.inspect(m.actual).slice(0,128)+" "+(m.operator+" "+Ci.inspect(m.expected).slice(0,128)))||this;return A.generatedMessage=!m.message,A.name="AssertionError [ERR_ASSERTION]",A.code="ERR_ASSERTION",A.actual=m.actual,A.expected=m.expected,A.operator=m.operator,t.Error.captureStackTrace(A,m.stackStartFunction),A}return s(l,f),l}(se.Error),t.AssertionError=e,t.message=i,t.E=o,t.Error=n(se.Error),t.TypeError=n(se.TypeError),t.RangeError=n(se.RangeError),o("ERR_ARG_NOT_ITERABLE","%s must be iterable"),o("ERR_ASSERTION","%s"),o("ERR_BUFFER_OUT_OF_BOUNDS",function(f,l){return l?"Attempt to write outside buffer bounds":'"'+f+'" is outside of buffer bounds'}),o("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),o("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),o("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),o("ERR_DNS_SET_SERVERS_FAILED",function(f,l){return'c-ares failed to set servers: "'+f+'" ['+l+"]"}),o("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),o("ERR_ENCODING_NOT_SUPPORTED",function(f){return'The "'+f+'" encoding is not supported'}),o("ERR_ENCODING_INVALID_ENCODED_DATA",function(f){return"The encoded data was not valid for encoding "+f}),o("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),o("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),o("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),o("ERR_INDEX_OUT_OF_RANGE","Index out of range"),o("ERR_INVALID_ARG_TYPE",function(f,l,m){if(ie(f,"name is required"),l.includes("not ")){var A="must not be";l=l.split("not ")[1]}else A="must be";if(Array.isArray(f))A="The "+f.map(function(R){return'"'+R+'"'}).join(", ")+" arguments "+A+" "+a(l,"type");else if(f.includes(" argument"))A="The "+f+" "+A+" "+a(l,"type");else{var _=f.includes(".")?"property":"argument";A='The "'+f+'" '+_+" "+A+" "+a(l,"type")}return 3<=arguments.length&&(A+=". Received type "+(m!==null?typeof m:"null")),A}),o("ERR_INVALID_ARRAY_LENGTH",function(f,l,m){return ie.strictEqual(typeof m,"number"),'The array "'+f+'" (length '+m+") must be of length "+l+"."}),o("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),o("ERR_INVALID_CALLBACK","Callback must be a function"),o("ERR_INVALID_CHAR","Invalid character in %s"),o("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),o("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),o("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),o("ERR_INVALID_FILE_URL_PATH","File URL path %s"),o("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),o("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),o("ERR_INVALID_OPT_VALUE",function(f,l){return'The value "'+String(l)+'" is invalid for option "'+f+'"'}),o("ERR_INVALID_OPT_VALUE_ENCODING",function(f){return'The value "'+String(f)+'" is invalid for option "encoding"'}),o("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),o("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),o("ERR_INVALID_THIS",'Value of "this" must be of type %s'),o("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),o("ERR_INVALID_URL","Invalid URL: %s"),o("ERR_INVALID_URL_SCHEME",function(f){return"The URL must be "+a(f,"scheme")}),o("ERR_IPC_CHANNEL_CLOSED","Channel closed"),o("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),o("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),o("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),o("ERR_MISSING_ARGS",function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];ie(0<f.length,"At least one arg needs to be specified"),l="The ";var m=f.length;switch(f=f.map(function(A){return'"'+A+'"'}),m){case 1:l+=f[0]+" argument";break;case 2:l+=f[0]+" and "+f[1]+" arguments";break;default:l+=f.slice(0,m-1).join(", "),l+=", and "+f[m-1]+" arguments"}return l+" must be specified"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),o("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),o("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),o("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),o("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),o("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),o("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),o("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),o("ERR_SOCKET_CANNOT_SEND","Unable to send data"),o("ERR_SOCKET_CLOSED","Socket is closed"),o("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),o("ERR_STDERR_CLOSE","process.stderr cannot be closed"),o("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),o("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),o("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),o("ERR_TLS_DH_PARAM_SIZE",function(f){return"DH parameter size "+f+" is less than 2048"}),o("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),o("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),o("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),o("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),o("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),o("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),o("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),o("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),o("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),o("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),o("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl")});Se(bi);var Qe=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ENCODING_UTF8="utf8",t.assertEncoding=function(n){if(n&&!ee.Buffer.isEncoding(n))throw new bi.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",n)},t.strToEncoding=function(n,i){return i&&i!==t.ENCODING_UTF8?i==="buffer"?new ee.Buffer(n):new ee.Buffer(n).toString(i):n}});Se(Qe);var or=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Yt.constants.S_IFMT,i=Yt.constants.S_IFDIR,o=Yt.constants.S_IFREG,a=Yt.constants.S_IFBLK,s=Yt.constants.S_IFCHR,d=Yt.constants.S_IFLNK,g=Yt.constants.S_IFIFO,f=Yt.constants.S_IFSOCK;e=function(){function l(){this.name="",this.mode=0}return l.build=function(m,A){var _=new l,R=m.getNode().mode;return _.name=Qe.strToEncoding(m.getName(),A),_.mode=R,_},l.prototype._checkModeProperty=function(m){return(this.mode&n)===m},l.prototype.isDirectory=function(){return this._checkModeProperty(i)},l.prototype.isFile=function(){return this._checkModeProperty(o)},l.prototype.isBlockDevice=function(){return this._checkModeProperty(a)},l.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},l.prototype.isSymbolicLink=function(){return this._checkModeProperty(d)},l.prototype.isFIFO=function(){return this._checkModeProperty(g)},l.prototype.isSocket=function(){return this._checkModeProperty(f)},l}(),t.Dirent=e,t.default=e});Se(or);function Bs(e,t){for(var n=0,i=e.length-1;0<=i;i--){var o=e[i];o==="."?e.splice(i,1):o===".."?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var rr=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function ar(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){var i=0<=n?arguments[n]:"/";if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,t=i.charAt(0)==="/")}return e=Bs(lr(e.split("/"),function(o){return!!o}),!t).join("/"),(t?"/":"")+e||"."}function Ts(e){var t=Rs(e),n=xf(e,-1)==="/";return(e=Bs(lr(e.split("/"),function(i){return!!i}),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function Rs(e){return e.charAt(0)==="/"}function sr(e,t){function n(s){for(var d=0;d<s.length&&s[d]==="";d++);for(var g=s.length-1;0<=g&&s[g]==="";g--);return d>g?[]:s.slice(d,g-d+1)}e=ar(e).substr(1),t=ar(t).substr(1),e=n(e.split("/")),t=n(t.split("/"));for(var i=Math.min(e.length,t.length),o=i,a=0;a<i;a++)if(e[a]!==t[a]){o=a;break}for(i=[],a=o;a<e.length;a++)i.push("..");return i=i.concat(t.slice(o)),i.join("/")}var cr={extname:function(e){return rr.exec(e).slice(1)[3]},basename:function(e,t){return e=rr.exec(e).slice(1)[2],t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},dirname:function(e){var t=rr.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.substr(0,t.length-1)),e+t)},sep:"/",delimiter:":",relative:sr,join:function(){var e=Array.prototype.slice.call(arguments,0);return Ts(lr(e,function(t){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},isAbsolute:Rs,normalize:Ts,resolve:ar};function lr(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}var xf="ab".substr(-1)==="b"?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)},si=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),e=typeof setImmediate=="function"?setImmediate.bind(se):setTimeout.bind(se),t.default=e});Se(si);var ve=Ae(function(e,t){function n(){var i=ii||{};return i.getuid||(i.getuid=function(){return 0}),i.getgid||(i.getgid=function(){return 0}),i.cwd||(i.cwd=function(){return"/"}),i.nextTick||(i.nextTick=si.default),i.emitWarning||(i.emitWarning=function(o,a){console.warn(""+a+(a?": ":"")+o)}),i.env||(i.env={}),i}Object.defineProperty(t,"__esModule",{value:!0}),t.createProcess=n,t.default=n()});Se(ve);function Cn(){}Cn.prototype=Object.create(null);function jt(){jt.init.call(this)}jt.EventEmitter=jt,jt.usingDomains=!1,jt.prototype.domain=void 0,jt.prototype._events=void 0,jt.prototype._maxListeners=void 0,jt.defaultMaxListeners=10,jt.init=function(){this.domain=null,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Cn,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},jt.prototype.setMaxListeners=function(e){if(typeof e!="number"||0>e||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},jt.prototype.getMaxListeners=function(){return this._maxListeners===void 0?jt.defaultMaxListeners:this._maxListeners},jt.prototype.emit=function(e){var t,n,i=e==="error";if(t=this._events)i=i&&t.error==null;else if(!i)return!1;var o=this.domain;if(i){if(t=arguments[1],o)t||(t=Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=o,t.domainThrown=!1,o.emit("error",t);else throw t instanceof Error?t:(o=Error('Uncaught, unspecified "error" event. ('+t+")"),o.context=t,o);return!1}if(o=t[e],!o)return!1;t=typeof o=="function";var a=arguments.length;switch(a){case 1:if(t)o.call(this);else for(t=o.length,o=Fi(o,t),i=0;i<t;++i)o[i].call(this);break;case 2:if(i=arguments[1],t)o.call(this,i);else for(t=o.length,o=Fi(o,t),a=0;a<t;++a)o[a].call(this,i);break;case 3:if(i=arguments[1],a=arguments[2],t)o.call(this,i,a);else for(t=o.length,o=Fi(o,t),n=0;n<t;++n)o[n].call(this,i,a);break;case 4:if(i=arguments[1],a=arguments[2],n=arguments[3],t)o.call(this,i,a,n);else{t=o.length,o=Fi(o,t);for(var s=0;s<t;++s)o[s].call(this,i,a,n)}break;default:for(i=Array(a-1),n=1;n<a;n++)i[n-1]=arguments[n];if(t)o.apply(this,i);else for(t=o.length,o=Fi(o,t),a=0;a<t;++a)o[a].apply(this,i)}return!0};function Os(e,t,n,i){var o;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(o=e._events){o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events);var a=o[t]}else o=e._events=new Cn,e._eventsCount=0;return a?(typeof a=="function"?a=o[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),a.warned||(n=e._maxListeners===void 0?jt.defaultMaxListeners:e._maxListeners)&&0<n&&a.length>n&&(a.warned=!0,n=Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit"),n.name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=a.length,typeof console.warn=="function"?console.warn(n):console.log(n))):(o[t]=n,++e._eventsCount),e}jt.prototype.addListener=function(e,t){return Os(this,e,t,!1)},jt.prototype.on=jt.prototype.addListener,jt.prototype.prependListener=function(e,t){return Os(this,e,t,!0)};function Ps(e,t,n){function i(){e.removeListener(t,i),o||(o=!0,n.apply(e,arguments))}var o=!1;return i.listener=n,i}jt.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,Ps(this,e,t)),this},jt.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Ps(this,e,t)),this},jt.prototype.removeListener=function(e,t){var n;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');var i=this._events;if(!i)return this;var o=i[e];if(!o)return this;if(o===t||o.listener&&o.listener===t)--this._eventsCount==0?this._events=new Cn:(delete i[e],i.removeListener&&this.emit("removeListener",e,o.listener||t));else if(typeof o!="function"){var a=-1;for(n=o.length;0<n--;)if(o[n]===t||o[n].listener&&o[n].listener===t){var s=o[n].listener;a=n;break}if(0>a)return this;if(o.length===1){if(o[0]=void 0,--this._eventsCount==0)return this._events=new Cn,this;delete i[e]}else{n=a+1;for(var d=o.length;n<d;a+=1,n+=1)o[a]=o[n];o.pop()}i.removeListener&&this.emit("removeListener",e,s||t)}return this},jt.prototype.removeAllListeners=function(e){var t=this._events;if(!t)return this;if(!t.removeListener)return arguments.length===0?(this._events=new Cn,this._eventsCount=0):t[e]&&(--this._eventsCount==0?this._events=new Cn:delete t[e]),this;if(arguments.length===0){t=Object.keys(t);for(var n=0,i;n<t.length;++n)i=t[n],i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=new Cn,this._eventsCount=0,this}if(t=t[e],typeof t=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this},jt.prototype.listeners=function(e){var t=this._events;if(t)if(e=t[e])if(typeof e=="function")e=[e.listener||e];else{t=Array(e.length);for(var n=0;n<t.length;++n)t[n]=e[n].listener||e[n];e=t}else e=[];else e=[];return e},jt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):xs.call(e,t)},jt.prototype.listenerCount=xs;function xs(e){var t=this._events;if(t){if(e=t[e],typeof e=="function")return 1;if(e)return e.length}return 0}jt.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};function Fi(e,t){for(var n=Array(t);t--;)n[t]=e[t];return n}var Bi=Ae(function(e,t){var n=se&&se.__extends||function(){function g(f,l){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,A){m.__proto__=A}||function(m,A){for(var _ in A)A.hasOwnProperty(_)&&(m[_]=A[_])},g(f,l)}return function(f,l){function m(){this.constructor=f}g(f,l),f.prototype=l===null?Object.create(l):(m.prototype=l.prototype,new m)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=Yt.constants.S_IFMT,o=Yt.constants.S_IFDIR,a=Yt.constants.S_IFREG,s=Yt.constants.S_IFLNK,d=Yt.constants.O_APPEND;t.SEP="/",e=function(g){function f(l,m){m===void 0&&(m=438);var A=g.call(this)||this;return A.uid=ve.default.getuid(),A.gid=ve.default.getgid(),A.atime=new Date,A.mtime=new Date,A.ctime=new Date,A.perm=438,A.mode=a,A.nlink=1,A.perm=m,A.mode|=m,A.ino=l,A}return n(f,g),f.prototype.getString=function(l){return l===void 0&&(l="utf8"),this.getBuffer().toString(l)},f.prototype.setString=function(l){this.buf=ee.bufferFrom(l,"utf8"),this.touch()},f.prototype.getBuffer=function(){return this.buf||this.setBuffer(ee.bufferAllocUnsafe(0)),ee.bufferFrom(this.buf)},f.prototype.setBuffer=function(l){this.buf=ee.bufferFrom(l),this.touch()},f.prototype.getSize=function(){return this.buf?this.buf.length:0},f.prototype.setModeProperty=function(l){this.mode=this.mode&~i|l},f.prototype.setIsFile=function(){this.setModeProperty(a)},f.prototype.setIsDirectory=function(){this.setModeProperty(o)},f.prototype.setIsSymlink=function(){this.setModeProperty(s)},f.prototype.isFile=function(){return(this.mode&i)===a},f.prototype.isDirectory=function(){return(this.mode&i)===o},f.prototype.isSymlink=function(){return(this.mode&i)===s},f.prototype.makeSymlink=function(l){this.symlink=l,this.setIsSymlink()},f.prototype.write=function(l,m,A,_){if(m===void 0&&(m=0),A===void 0&&(A=l.length),_===void 0&&(_=0),this.buf||(this.buf=ee.bufferAllocUnsafe(0)),_+A>this.buf.length){var R=ee.bufferAllocUnsafe(_+A);this.buf.copy(R,0,0,this.buf.length),this.buf=R}return l.copy(this.buf,_,m,m+A),this.touch(),A},f.prototype.read=function(l,m,A,_){return m===void 0&&(m=0),A===void 0&&(A=l.byteLength),_===void 0&&(_=0),this.buf||(this.buf=ee.bufferAllocUnsafe(0)),A>l.byteLength&&(A=l.byteLength),A+_>this.buf.length&&(A=this.buf.length-_),this.buf.copy(l,m,_,_+A),A},f.prototype.truncate=function(l){if(l===void 0&&(l=0),l)if(this.buf||(this.buf=ee.bufferAllocUnsafe(0)),l<=this.buf.length)this.buf=this.buf.slice(0,l);else{var m=ee.bufferAllocUnsafe(0);this.buf.copy(m),m.fill(0,l)}else this.buf=ee.bufferAllocUnsafe(0);this.touch()},f.prototype.chmod=function(l){this.perm=l,this.mode=this.mode&-512|l,this.touch()},f.prototype.chown=function(l,m){this.uid=l,this.gid=m,this.touch()},f.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},f.prototype.canRead=function(l,m){return l===void 0&&(l=ve.default.getuid()),m===void 0&&(m=ve.default.getgid()),!!(this.perm&4||m===this.gid&&this.perm&32||l===this.uid&&this.perm&256)},f.prototype.canWrite=function(l,m){return l===void 0&&(l=ve.default.getuid()),m===void 0&&(m=ve.default.getgid()),!!(this.perm&2||m===this.gid&&this.perm&16||l===this.uid&&this.perm&128)},f.prototype.del=function(){this.emit("delete",this)},f.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},f}(jt.EventEmitter),t.Node=e,e=function(g){function f(l,m,A){var _=g.call(this)||this;return _.children={},_.steps=[],_.ino=0,_.length=0,_.vol=l,_.parent=m,_.steps=m?m.steps.concat([A]):[A],_}return n(f,g),f.prototype.setNode=function(l){this.node=l,this.ino=l.ino},f.prototype.getNode=function(){return this.node},f.prototype.createChild=function(l,m){m===void 0&&(m=this.vol.createNode());var A=new f(this.vol,this,l);return A.setNode(m),m.isDirectory(),this.setChild(l,A),A},f.prototype.setChild=function(l,m){return m===void 0&&(m=new f(this.vol,this,l)),this.children[l]=m,m.parent=this,this.length++,this.emit("child:add",m,this),m},f.prototype.deleteChild=function(l){delete this.children[l.getName()],this.length--,this.emit("child:delete",l,this)},f.prototype.getChild=function(l){if(Object.hasOwnProperty.call(this.children,l))return this.children[l]},f.prototype.getPath=function(){return this.steps.join(t.SEP)},f.prototype.getName=function(){return this.steps[this.steps.length-1]},f.prototype.walk=function(l,m,A){if(m===void 0&&(m=l.length),A===void 0&&(A=0),A>=l.length||A>=m)return this;var _=this.getChild(l[A]);return _?_.walk(l,m,A+1):null},f.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},f}(jt.EventEmitter),t.Link=e,e=function(){function g(f,l,m,A){this.position=0,this.link=f,this.node=l,this.flags=m,this.fd=A}return g.prototype.getString=function(){return this.node.getString()},g.prototype.setString=function(f){this.node.setString(f)},g.prototype.getBuffer=function(){return this.node.getBuffer()},g.prototype.setBuffer=function(f){this.node.setBuffer(f)},g.prototype.getSize=function(){return this.node.getSize()},g.prototype.truncate=function(f){this.node.truncate(f)},g.prototype.seekTo=function(f){this.position=f},g.prototype.stats=function(){return ti.default.build(this.node)},g.prototype.write=function(f,l,m,A){return l===void 0&&(l=0),m===void 0&&(m=f.length),typeof A!="number"&&(A=this.position),this.flags&d&&(A=this.getSize()),f=this.node.write(f,l,m,A),this.position=A+f,f},g.prototype.read=function(f,l,m,A){return l===void 0&&(l=0),m===void 0&&(m=f.byteLength),typeof A!="number"&&(A=this.position),f=this.node.read(f,l,m,A),this.position=A+f,f},g.prototype.chmod=function(f){this.node.chmod(f)},g.prototype.chown=function(f,l){this.node.chown(f,l)},g}(),t.File=e});Se(Bi);var Nf=Bi.Node,Ns=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,i,o){var a=setTimeout.apply(null,arguments);return a&&typeof a=="object"&&typeof a.unref=="function"&&a.unref(),a}});Se(Ns);function kn(){this.tail=this.head=null,this.length=0}kn.prototype.push=function(e){e={data:e,next:null},0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},kn.prototype.unshift=function(e){e={data:e,next:this.head},this.length===0&&(this.tail=e),this.head=e,++this.length},kn.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,e}},kn.prototype.clear=function(){this.head=this.tail=null,this.length=0},kn.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},kn.prototype.concat=function(e){if(this.length===0)return mt.alloc(0);if(this.length===1)return this.head.data;e=mt.allocUnsafe(e>>>0);for(var t=this.head,n=0;t;)t.data.copy(e,n),n+=t.data.length,t=t.next;return e};var Mf=mt.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ti(e){if(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),e&&!Mf(e))throw Error("Unknown encoding: "+e);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Df;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Gf;break;default:this.write=Uf;return}this.charBuffer=new mt(6),this.charLength=this.charReceived=0}Ti.prototype.write=function(e){for(var t="";this.charLength;){if(t=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length,e.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived<this.charLength)return"";e=e.slice(t,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(55296<=n&&56319>=n)this.charLength+=this.surrogateSize,t="";else{if(this.charReceived=this.charLength=0,e.length===0)return t;break}}this.detectIncompleteChar(e);var i=e.length;return this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i),i=t.length-1,n=t.charCodeAt(i),55296<=n&&56319>=n?(n=this.surrogateSize,this.charLength+=n,this.charReceived+=n,this.charBuffer.copy(this.charBuffer,n,0,n),e.copy(this.charBuffer,0,0,n),t.substring(0,i)):t},Ti.prototype.detectIncompleteChar=function(e){for(var t=3<=e.length?3:e.length;0<t;t--){var n=e[e.length-t];if(t==1&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},Ti.prototype.end=function(e){var t="";return e&&e.length&&(t=this.write(e)),this.charReceived&&(e=this.encoding,t+=this.charBuffer.slice(0,this.charReceived).toString(e)),t};function Uf(e){return e.toString(this.encoding)}function Df(e){this.charLength=(this.charReceived=e.length%2)?2:0}function Gf(e){this.charLength=(this.charReceived=e.length%3)?3:0}oe.ReadableState=Ms;var Xt=as("stream");Sn(oe,jt);function kf(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function Ms(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof He&&(this.objectMode=this.objectMode||!!e.readableObjectMode),t=e.highWaterMark;var n=this.objectMode?16:16384;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new kn,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.reading=this.endEmitted=this.ended=!1,this.sync=!0,this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.encoding=this.decoder=null,e.encoding&&(this.decoder=new Ti(e.encoding),this.encoding=e.encoding)}function oe(e){if(!(this instanceof oe))return new oe(e);this._readableState=new Ms(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),jt.call(this)}oe.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||typeof e!="string"||(t=t||n.defaultEncoding,t!==n.encoding&&(e=mt.from(e,t),t="")),Us(this,n,e,t,!1)},oe.prototype.unshift=function(e){return Us(this,this._readableState,e,"",!0)},oe.prototype.isPaused=function(){return this._readableState.flowing===!1};function Us(e,t,n,i,o){var a=n,s=null;if(un(a)||typeof a=="string"||a===null||a===void 0||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),a=s)e.emit("error",a);else if(n===null)t.reading=!1,t.ended||(t.decoder&&(n=t.decoder.end())&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length),t.ended=!0,uo(e));else if(t.objectMode||n&&0<n.length)if(t.ended&&!o)e.emit("error",Error("stream.push() after EOF"));else if(t.endEmitted&&o)e.emit("error",Error("stream.unshift() after end event"));else{if(t.decoder&&!o&&!i){n=t.decoder.write(n);var d=!t.objectMode&&n.length===0}o||(t.reading=!1),d||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&uo(e))),t.readingMore||(t.readingMore=!0,Ne(Wf,e,t))}else o||(t.reading=!1);return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}oe.prototype.setEncoding=function(e){return this._readableState.decoder=new Ti(e),this._readableState.encoding=e,this};function Ds(e,t){if(0>=e||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e)return t.flowing&&t.length?t.buffer.head.data.length:t.length;if(e>t.highWaterMark){var n=e;8388608<=n?n=8388608:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),t.highWaterMark=n}return e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)}oe.prototype.read=function(e){Xt("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return Xt("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?fr(this):uo(this),null;if(e=Ds(e,t),e===0&&t.ended)return t.length===0&&fr(this),null;var i=t.needReadable;return Xt("need readable",i),(t.length===0||t.length-e<t.highWaterMark)&&(i=!0,Xt("length less than watermark",i)),t.ended||t.reading?Xt("reading or ended",!1):i&&(Xt("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Ds(n,t))),i=0<e?ks(e,t):null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&fr(this)),i!==null&&this.emit("data",i),i};function uo(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(Xt("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Ne(Gs,e):Gs(e))}function Gs(e){Xt("emit readable"),e.emit("readable"),ur(e)}function Wf(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(Xt("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}oe.prototype._read=function(){this.emit("error",Error("not implemented"))},oe.prototype.pipe=function(e,t){function n(x){Xt("onunpipe"),x===l&&o()}function i(){Xt("onend"),e.end()}function o(){Xt("cleanup"),e.removeListener("close",d),e.removeListener("finish",g),e.removeListener("drain",A),e.removeListener("error",s),e.removeListener("unpipe",n),l.removeListener("end",i),l.removeListener("end",o),l.removeListener("data",a),_=!0,!m.awaitDrain||e._writableState&&!e._writableState.needDrain||A()}function a(x){Xt("ondata"),R=!1,e.write(x)!==!1||R||((m.pipesCount===1&&m.pipes===e||1<m.pipesCount&&Ws(m.pipes,e)!==-1)&&!_&&(Xt("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,R=!0),l.pause())}function s(x){Xt("onerror",x),f(),e.removeListener("error",s),e.listeners("error").length===0&&e.emit("error",x)}function d(){e.removeListener("finish",g),f()}function g(){Xt("onfinish"),e.removeListener("close",d),f()}function f(){Xt("unpipe"),l.unpipe(e)}var l=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=e;break;case 1:m.pipes=[m.pipes,e];break;default:m.pipes.push(e)}m.pipesCount+=1,Xt("pipe count=%d opts=%j",m.pipesCount,t),t=t&&t.end===!1?o:i,m.endEmitted?Ne(t):l.once("end",t),e.on("unpipe",n);var A=qf(l);e.on("drain",A);var _=!1,R=!1;return l.on("data",a),kf(e,"error",s),e.once("close",d),e.once("finish",g),e.emit("pipe",l),m.flowing||(Xt("pipe resume"),l.resume()),e};function qf(e){return function(){var t=e._readableState;Xt("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,ur(e))}}oe.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){e=t.pipes;var n=t.pipesCount;for(t.pipes=null,t.pipesCount=0,t.flowing=!1,t=0;t<n;t++)e[t].emit("unpipe",this);return this}return n=Ws(t.pipes,e),n===-1?this:(t.pipes.splice(n,1),--t.pipesCount,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},oe.prototype.on=function(e,t){return t=jt.prototype.on.call(this,e,t),e==="data"?this._readableState.flowing!==!1&&this.resume():e==="readable"&&(e=this._readableState,e.endEmitted||e.readableListening||(e.readableListening=e.needReadable=!0,e.emittedReadable=!1,e.reading?e.length&&uo(this):Ne(Qf,this))),t},oe.prototype.addListener=oe.prototype.on;function Qf(e){Xt("readable nexttick read 0"),e.read(0)}oe.prototype.resume=function(){var e=this._readableState;return e.flowing||(Xt("resume"),e.flowing=!0,e.resumeScheduled||(e.resumeScheduled=!0,Ne(Hf,this,e))),this};function Hf(e,t){t.reading||(Xt("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),ur(e),t.flowing&&!t.reading&&e.read(0)}oe.prototype.pause=function(){return Xt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Xt("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function ur(e){var t=e._readableState;for(Xt("flow",t.flowing);t.flowing&&e.read()!==null;);}oe.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(Xt("wrapped end"),t.decoder&&!t.ended){var a=t.decoder.end();a&&a.length&&i.push(a)}i.push(null)}),e.on("data",function(a){Xt("wrapped data"),t.decoder&&(a=t.decoder.write(a)),t.objectMode&&a==null||!(t.objectMode||a&&a.length)||i.push(a)||(n=!0,e.pause())});for(var o in e)this[o]===void 0&&typeof e[o]=="function"&&(this[o]=function(a){return function(){return e[a].apply(e,arguments)}}(o));return $f(["error","close","destroy","pause","resume"],function(a){e.on(a,i.emit.bind(i,a))}),i._read=function(a){Xt("wrapped _read",a),n&&(n=!1,e.resume())},i},oe._fromList=ks;function ks(e,t){if(t.length===0)return null;if(t.objectMode)var n=t.buffer.shift();else if(!e||e>=t.length)n=t.decoder?t.buffer.join(""):t.buffer.length===1?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear();else{if(n=t.buffer,t=t.decoder,e<n.head.data.length)t=n.head.data.slice(0,e),n.head.data=n.head.data.slice(e);else{if(e===n.head.data.length)n=n.shift();else if(t){t=n.head;var i=1,o=t.data;for(e-=o.length;t=t.next;){var a=t.data,s=e>a.length?a.length:e;if(o=s===a.length?o+a:o+a.slice(0,e),e-=s,e===0){s===a.length?(++i,n.head=t.next?t.next:n.tail=null):(n.head=t,t.data=a.slice(s));break}++i}n.length-=i,n=o}else{for(t=mt.allocUnsafe(e),i=n.head,o=1,i.data.copy(t),e-=i.data.length;i=i.next;){if(a=i.data,s=e>a.length?a.length:e,a.copy(t,t.length-e,0,s),e-=s,e===0){s===a.length?(++o,n.head=i.next?i.next:n.tail=null):(n.head=i,i.data=a.slice(s));break}++o}n.length-=o,n=t}t=n}n=t}return n}function fr(e){var t=e._readableState;if(0<t.length)throw Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Ne(zf,t,e))}function zf(e,t){e.endEmitted||e.length!==0||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function $f(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)}function Ws(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}Le.WritableState=dr,Sn(Le,jt);function Yf(){}function jf(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function dr(e,t){Object.defineProperty(this,"buffer",{get:jo(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof He&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||n===0?n:i,this.highWaterMark=~~this.highWaterMark,this.finished=this.ended=this.ending=this.needDrain=!1,this.decodeStrings=e.decodeStrings!==!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){var a=t._writableState,s=a.sync,d=a.writecb;a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0,o?(--a.pendingcb,s?Ne(d,o):d(o),t._writableState.errorEmitted=!0,t.emit("error",o)):((o=Hs(a))||a.corked||a.bufferProcessing||!a.bufferedRequest||Qs(t,a),s?Ne(qs,t,a,o,d):qs(t,a,o,d))},this.writecb=null,this.writelen=0,this.lastBufferedRequest=this.bufferedRequest=null,this.pendingcb=0,this.errorEmitted=this.prefinished=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new $s(this)}dr.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};function Le(e){if(!(this instanceof Le||this instanceof He))return new Le(e);this._writableState=new dr(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),jt.call(this)}Le.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))},Le.prototype.write=function(e,t,n){var i=this._writableState,o=!1;if(typeof t=="function"&&(n=t,t=null),mt.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),typeof n!="function"&&(n=Yf),i.ended)i=n,e=Error("write after end"),this.emit("error",e),Ne(i,e);else{var a=n,s=!0,d=!1;e===null?d=new TypeError("May not write null values to stream"):mt.isBuffer(e)||typeof e=="string"||e===void 0||i.objectMode||(d=new TypeError("Invalid non-string/buffer chunk")),d&&(this.emit("error",d),Ne(a,d),s=!1),s&&(i.pendingcb++,o=t,i.objectMode||i.decodeStrings===!1||typeof e!="string"||(e=mt.from(e,o)),mt.isBuffer(e)&&(o="buffer"),a=i.objectMode?1:e.length,i.length+=a,t=i.length<i.highWaterMark,t||(i.needDrain=!0),i.writing||i.corked?(a=i.lastBufferedRequest,i.lastBufferedRequest=new jf(e,o,n),a?a.next=i.lastBufferedRequest:i.bufferedRequest=i.lastBufferedRequest,i.bufferedRequestCount+=1):hr(this,i,!1,a,e,o,n),o=t)}return o},Le.prototype.cork=function(){this._writableState.corked++},Le.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||Qs(this,e))},Le.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function hr(e,t,n,i,o,a,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,a,t.onwrite),t.sync=!1}function qs(e,t,n,i){!n&&t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain")),t.pendingcb--,i(),zs(e,t)}function Qs(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=Array(t.bufferedRequestCount),o=t.corkedRequestsFree;o.entry=n;for(var a=0;n;)i[a]=n,n=n.next,a+=1;hr(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new $s(t)}else{for(;n&&(i=n.chunk,hr(e,t,!1,t.objectMode?1:i.length,i,n.encoding,n.callback),n=n.next,!t.writing););n===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}Le.prototype._write=function(e,t,n){n(Error("not implemented"))},Le.prototype._writev=null,Le.prototype.end=function(e,t,n){var i=this._writableState;typeof e=="function"?(n=e,t=e=null):typeof t=="function"&&(n=t,t=null),e!=null&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&(e=n,i.ending=!0,zs(this,i),e&&(i.finished?Ne(e):this.once("finish",e)),i.ended=!0,this.writable=!1)};function Hs(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function zs(e,t){var n=Hs(t);return n&&(t.pendingcb===0?(t.prefinished||(t.prefinished=!0,e.emit("prefinish")),t.finished=!0,e.emit("finish")):t.prefinished||(t.prefinished=!0,e.emit("prefinish"))),n}function $s(e){var t=this;this.entry=this.next=null,this.finish=function(n){var i=t.entry;for(t.entry=null;i;){var o=i.callback;e.pendingcb--,o(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}Sn(He,oe);for(var Ys=Object.keys(Le.prototype),_r=0;_r<Ys.length;_r++){var gr=Ys[_r];He.prototype[gr]||(He.prototype[gr]=Le.prototype[gr])}function He(e){if(!(this instanceof He))return new He(e);oe.call(this,e),Le.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Kf)}function Kf(){this.allowHalfOpen||this._writableState.ended||Ne(Vf,this)}function Vf(e){e.end()}Sn(Xe,He);function Zf(e){this.afterTransform=function(t,n){var i=e._transformState;i.transforming=!1;var o=i.writecb;return o?(i.writechunk=null,i.writecb=null,n!=null&&e.push(n),o(t),t=e._readableState,t.reading=!1,(t.needReadable||t.length<t.highWaterMark)&&e._read(t.highWaterMark),t=void 0):t=e.emit("error",Error("no writecb in Transform class")),t},this.transforming=this.needTransform=!1,this.writeencoding=this.writechunk=this.writecb=null}function Xe(e){if(!(this instanceof Xe))return new Xe(e);He.call(this,e),this._transformState=new Zf(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(n){js(t,n)}):js(t)})}Xe.prototype.push=function(e,t){return this._transformState.needTransform=!1,He.prototype.push.call(this,e,t)},Xe.prototype._transform=function(){throw Error("Not implemented")},Xe.prototype._write=function(e,t,n){var i=this._transformState;i.writecb=n,i.writechunk=e,i.writeencoding=t,i.transforming||(e=this._readableState,(i.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark))},Xe.prototype._read=function(){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function js(e,t){if(t)return e.emit("error",t);if(t=e._transformState,e._writableState.length)throw Error("Calling transform done when ws.length != 0");if(t.transforming)throw Error("Calling transform done when still transforming");return e.push(null)}Sn(Ri,Xe);function Ri(e){if(!(this instanceof Ri))return new Ri(e);Xe.call(this,e)}Ri.prototype._transform=function(e,t,n){n(null,e)},Sn(Me,jt),Me.Readable=oe,Me.Writable=Le,Me.Duplex=He,Me.Transform=Xe,Me.PassThrough=Ri,Me.Stream=Me;function Me(){jt.call(this)}Me.prototype.pipe=function(e,t){function n(l){e.writable&&e.write(l)===!1&&g.pause&&g.pause()}function i(){g.readable&&g.resume&&g.resume()}function o(){f||(f=!0,e.end())}function a(){f||(f=!0,typeof e.destroy=="function"&&e.destroy())}function s(l){if(d(),jt.listenerCount(this,"error")===0)throw l}function d(){g.removeListener("data",n),e.removeListener("drain",i),g.removeListener("end",o),g.removeListener("close",a),g.removeListener("error",s),e.removeListener("error",s),g.removeListener("end",d),g.removeListener("close",d),e.removeListener("close",d)}var g=this;g.on("data",n),e.on("drain",i),e._isStdio||t&&t.end===!1||(g.on("end",o),g.on("close",a));var f=!1;return g.on("error",s),e.on("error",s),g.on("end",d),g.on("close",d),e.on("close",d),e.emit("pipe",g),e};var Jf=Array.prototype.slice,Xf={extend:function e(t,n){for(var i in n)t[i]=n[i];return 3>arguments.length?t:e.apply(null,[t].concat(Jf.call(arguments,2)))}},Ks=Ae(function(e,t){function n(a,s,d){return d===void 0&&(d=function(g){return g}),function(){for(var g=[],f=0;f<arguments.length;f++)g[f]=arguments[f];return new Promise(function(l,m){a[s].bind(a).apply(void 0,i(g,[function(A,_){return A?m(A):l(d(_))}]))})}}var i=se&&se.__spreadArrays||function(){for(var a=0,s=0,d=arguments.length;s<d;s++)a+=arguments[s].length;a=Array(a);var g=0;for(s=0;s<d;s++)for(var f=arguments[s],l=0,m=f.length;l<m;l++,g++)a[g]=f[l];return a};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function a(s,d){this.vol=s,this.fd=d}return a.prototype.appendFile=function(s,d){return n(this.vol,"appendFile")(this.fd,s,d)},a.prototype.chmod=function(s){return n(this.vol,"fchmod")(this.fd,s)},a.prototype.chown=function(s,d){return n(this.vol,"fchown")(this.fd,s,d)},a.prototype.close=function(){return n(this.vol,"close")(this.fd)},a.prototype.datasync=function(){return n(this.vol,"fdatasync")(this.fd)},a.prototype.read=function(s,d,g,f){return n(this.vol,"read",function(l){return{bytesRead:l,buffer:s}})(this.fd,s,d,g,f)},a.prototype.readFile=function(s){return n(this.vol,"readFile")(this.fd,s)},a.prototype.stat=function(s){return n(this.vol,"fstat")(this.fd,s)},a.prototype.sync=function(){return n(this.vol,"fsync")(this.fd)},a.prototype.truncate=function(s){return n(this.vol,"ftruncate")(this.fd,s)},a.prototype.utimes=function(s,d){return n(this.vol,"futimes")(this.fd,s,d)},a.prototype.write=function(s,d,g,f){return n(this.vol,"write",function(l){return{bytesWritten:l,buffer:s}})(this.fd,s,d,g,f)},a.prototype.writeFile=function(s,d){return n(this.vol,"writeFile")(this.fd,s,d)},a}();t.FileHandle=o,t.default=function(a){return typeof Promise=="undefined"?null:{FileHandle:o,access:function(s,d){return n(a,"access")(s,d)},appendFile:function(s,d,g){return n(a,"appendFile")(s instanceof o?s.fd:s,d,g)},chmod:function(s,d){return n(a,"chmod")(s,d)},chown:function(s,d,g){return n(a,"chown")(s,d,g)},copyFile:function(s,d,g){return n(a,"copyFile")(s,d,g)},lchmod:function(s,d){return n(a,"lchmod")(s,d)},lchown:function(s,d,g){return n(a,"lchown")(s,d,g)},link:function(s,d){return n(a,"link")(s,d)},lstat:function(s,d){return n(a,"lstat")(s,d)},mkdir:function(s,d){return n(a,"mkdir")(s,d)},mkdtemp:function(s,d){return n(a,"mkdtemp")(s,d)},open:function(s,d,g){return n(a,"open",function(f){return new o(a,f)})(s,d,g)},readdir:function(s,d){return n(a,"readdir")(s,d)},readFile:function(s,d){return n(a,"readFile")(s instanceof o?s.fd:s,d)},readlink:function(s,d){return n(a,"readlink")(s,d)},realpath:function(s,d){return n(a,"realpath")(s,d)},rename:function(s,d){return n(a,"rename")(s,d)},rmdir:function(s){return n(a,"rmdir")(s)},stat:function(s,d){return n(a,"stat")(s,d)},symlink:function(s,d,g){return n(a,"symlink")(s,d,g)},truncate:function(s,d){return n(a,"truncate")(s,d)},unlink:function(s){return n(a,"unlink")(s)},utimes:function(s,d,g){return n(a,"utimes")(s,d,g)},writeFile:function(s,d,g){return n(a,"writeFile")(s instanceof o?s.fd:s,d,g)}}}});Se(Ks);var td=/[^\x20-\x7E]/,ed=/[\x2E\u3002\uFF0E\uFF61]/g,Vs={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ci=Math.floor,pr=String.fromCharCode;function nd(e,t){var n=e.split("@"),i="";1<n.length&&(i=n[0]+"@",e=n[1]),e=e.replace(ed,"."),e=e.split("."),n=e.length;for(var o=[];n--;)o[n]=t(e[n]);return t=o.join("."),i+t}function Zs(e,t){return e+22+75*(26>e)-((t!=0)<<5)}function id(e){return nd(e,function(t){if(td.test(t)){var n,i=[],o=[],a=0;for(n=t.length;a<n;){var s=t.charCodeAt(a++);if(55296<=s&&56319>=s&&a<n){var d=t.charCodeAt(a++);(d&64512)==56320?o.push(((s&1023)<<10)+(d&1023)+65536):(o.push(s),a--)}else o.push(s)}t=o,d=t.length,o=128;var g=0,f=72;for(s=0;s<d;++s){var l=t[s];128>l&&i.push(pr(l))}for((a=n=i.length)&&i.push("-");a<d;){var m=2147483647;for(s=0;s<d;++s)l=t[s],l>=o&&l<m&&(m=l);var A=a+1;if(m-o>ci((2147483647-g)/A))throw new RangeError(Vs.overflow);for(g+=(m-o)*A,o=m,s=0;s<d;++s){if(l=t[s],l<o&&2147483647<++g)throw new RangeError(Vs.overflow);if(l==o){var _=g;for(m=36;l=m<=f?1:m>=f+26?26:m-f,!(_<l);m+=36){var R=_-l;_=36-l,i.push(pr(Zs(l+R%_,0))),_=ci(R/_)}for(i.push(pr(Zs(_,0))),f=A,m=0,g=a==n?ci(g/700):g>>1,g+=ci(g/f);455<g;m+=36)g=ci(g/35);f=ci(m+36*g/(g+38)),g=0,++a}}++g,++o}i="xn--"+i.join("")}else i=t;return i})}var Js=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function Oi(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function od(e,t,n,i){return t=t||"&",n=n||"=",e===null&&(e=void 0),typeof e=="object"?Xs(rd(e),function(o){var a=encodeURIComponent(Oi(o))+n;return Js(e[o])?Xs(e[o],function(s){return a+encodeURIComponent(Oi(s))}).join(t):a+encodeURIComponent(Oi(e[o]))}).join(t):i?encodeURIComponent(Oi(i))+n+encodeURIComponent(Oi(e)):""}function Xs(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var rd=Object.keys||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t};function tc(e,t,n,i){n=n||"=";var o={};if(typeof e!="string"||e.length===0)return o;var a=/\+/g;for(e=e.split(t||"&"),t=1e3,i&&typeof i.maxKeys=="number"&&(t=i.maxKeys),i=e.length,0<t&&i>t&&(i=t),t=0;t<i;++t){var s=e[t].replace(a,"%20"),d=s.indexOf(n);if(0<=d){var g=s.substr(0,d);s=s.substr(d+1)}else g=s,s="";g=decodeURIComponent(g),s=decodeURIComponent(s),Object.prototype.hasOwnProperty.call(o,g)?Js(o[g])?o[g].push(s):o[g]=[o[g],s]:o[g]=s}return o}var ad={parse:fo,resolve:gd,resolveObject:pd,format:_d,Url:tn};function tn(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}var sd=/^([a-z0-9.+-]+:)/i,cd=/:[0-9]*$/,ld=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,ud="{}|\\^`".split("").concat('<>"` \r\n	'.split("")),mr=["'"].concat(ud),ec=["%","/","?",";","#"].concat(mr),nc=["/","?","#"],fd=255,ic=/^[+a-z0-9A-Z_-]{0,63}$/,dd=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,hd={javascript:!0,"javascript:":!0},yr={javascript:!0,"javascript:":!0},li={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function fo(e,t,n){if(e&&vn(e)&&e instanceof tn)return e;var i=new tn;return i.parse(e,t,n),i}tn.prototype.parse=function(e,t,n){return oc(this,e,t,n)};function oc(e,t,n,i){if(!Gn(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?");if(o=o!==-1&&o<t.indexOf("#")?"?":"#",t=t.split(o),t[0]=t[0].replace(/\\/g,"/"),t=t.join(o),o=t.trim(),!i&&t.split("#").length===1&&(t=ld.exec(o)))return e.path=o,e.href=o,e.pathname=t[1],t[2]?(e.search=t[2],e.query=n?tc(e.search.substr(1)):e.search.substr(1)):n&&(e.search="",e.query={}),e;if(t=sd.exec(o)){t=t[0];var a=t.toLowerCase();e.protocol=a,o=o.substr(t.length)}if(i||t||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var s=o.substr(0,2)==="//";!s||t&&yr[t]||(o=o.substr(2),e.slashes=!0)}if(!yr[t]&&(s||t&&!li[t])){for(t=-1,i=0;i<nc.length;i++)s=o.indexOf(nc[i]),s!==-1&&(t===-1||s<t)&&(t=s);for(s=t===-1?o.lastIndexOf("@"):o.lastIndexOf("@",t),s!==-1&&(i=o.slice(0,s),o=o.slice(s+1),e.auth=decodeURIComponent(i)),t=-1,i=0;i<ec.length;i++)s=o.indexOf(ec[i]),s!==-1&&(t===-1||s<t)&&(t=s);if(t===-1&&(t=o.length),e.host=o.slice(0,t),o=o.slice(t),rc(e),e.hostname=e.hostname||"",s=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]",!s){var d=e.hostname.split(/\./);for(i=0,t=d.length;i<t;i++){var g=d[i];if(g&&!g.match(ic)){for(var f="",l=0,m=g.length;l<m;l++)f=127<g.charCodeAt(l)?f+"x":f+g[l];if(!f.match(ic)){t=d.slice(0,i),i=d.slice(i+1),(g=g.match(dd))&&(t.push(g[1]),i.unshift(g[2])),i.length&&(o="/"+i.join(".")+o),e.hostname=t.join(".");break}}}}e.hostname=e.hostname.length>fd?"":e.hostname.toLowerCase(),s||(e.hostname=id(e.hostname)),i=e.port?":"+e.port:"",e.host=(e.hostname||"")+i,e.href+=e.host,s&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!hd[a])for(i=0,t=mr.length;i<t;i++)s=mr[i],o.indexOf(s)!==-1&&(g=encodeURIComponent(s),g===s&&(g=escape(s)),o=o.split(s).join(g));return i=o.indexOf("#"),i!==-1&&(e.hash=o.substr(i),o=o.slice(0,i)),i=o.indexOf("?"),i!==-1?(e.search=o.substr(i),e.query=o.substr(i+1),n&&(e.query=tc(e.query)),o=o.slice(0,i)):n&&(e.search="",e.query={}),o&&(e.pathname=o),li[a]&&e.hostname&&!e.pathname&&(e.pathname="/"),(e.pathname||e.search)&&(i=e.pathname||"",e.path=i+(e.search||"")),e.href=Ar(e),e}function _d(e){return Gn(e)&&(e=oc({},e)),Ar(e)}function Ar(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var n=e.protocol||"",i=e.pathname||"",o=e.hash||"",a=!1,s="";return e.host?a=t+e.host:e.hostname&&(a=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(a+=":"+e.port)),e.query&&vn(e.query)&&Object.keys(e.query).length&&(s=od(e.query)),t=e.search||s&&"?"+s||"",n&&n.substr(-1)!==":"&&(n+=":"),e.slashes||(!n||li[n])&&a!==!1?(a="//"+(a||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):a||(a=""),o&&o.charAt(0)!=="#"&&(o="#"+o),t&&t.charAt(0)!=="?"&&(t="?"+t),i=i.replace(/[?#]/g,function(d){return encodeURIComponent(d)}),t=t.replace("#","%23"),n+a+i+t+o}tn.prototype.format=function(){return Ar(this)};function gd(e,t){return fo(e,!1,!0).resolve(t)}tn.prototype.resolve=function(e){return this.resolveObject(fo(e,!1,!0)).format()};function pd(e,t){return e?fo(e,!1,!0).resolveObject(t):t}tn.prototype.resolveObject=function(e){if(Gn(e)){var t=new tn;t.parse(e,!1,!0),e=t}t=new tn;for(var n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];t[o]=this[o]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(n=Object.keys(e),i=0;i<n.length;i++)o=n[i],o!=="protocol"&&(t[o]=e[o]);return li[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}var a;if(e.protocol&&e.protocol!==t.protocol){if(!li[e.protocol]){for(n=Object.keys(e),i=0;i<n.length;i++)o=n[i],t[o]=e[o];return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||yr[e.protocol])t.pathname=e.pathname;else{for(a=(e.pathname||"").split("/");a.length&&!(e.host=a.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),a[0]!==""&&a.unshift(""),2>a.length&&a.unshift(""),t.pathname=a.join("/")}return t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(t.path=(t.pathname||"")+(t.search||"")),t.slashes=t.slashes||e.slashes,t.href=t.format(),t}n=t.pathname&&t.pathname.charAt(0)==="/";var s=e.host||e.pathname&&e.pathname.charAt(0)==="/",d=n=s||n||t.host&&e.pathname;if(i=t.pathname&&t.pathname.split("/")||[],o=t.protocol&&!li[t.protocol],a=e.pathname&&e.pathname.split("/")||[],o&&(t.hostname="",t.port=null,t.host&&(i[0]===""?i[0]=t.host:i.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(a[0]===""?a[0]=e.host:a.unshift(e.host)),e.host=null),n=n&&(a[0]===""||i[0]==="")),s)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,i=a;else if(a.length)i||(i=[]),i.pop(),i=i.concat(a),t.search=e.search,t.query=e.query;else if(e.search!=null)return o&&(t.hostname=t.host=i.shift(),o=t.host&&0<t.host.indexOf("@")?t.host.split("@"):!1)&&(t.auth=o.shift(),t.host=t.hostname=o.shift()),t.search=e.search,t.query=e.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!i.length)return t.pathname=null,t.path=t.search?"/"+t.search:null,t.href=t.format(),t;s=i.slice(-1)[0],a=(t.host||e.host||1<i.length)&&(s==="."||s==="..")||s==="";for(var g=0,f=i.length;0<=f;f--)s=i[f],s==="."?i.splice(f,1):s===".."?(i.splice(f,1),g++):g&&(i.splice(f,1),g--);if(!n&&!d)for(;g--;g)i.unshift("..");return!n||i[0]===""||i[0]&&i[0].charAt(0)==="/"||i.unshift(""),a&&i.join("/").substr(-1)!=="/"&&i.push(""),d=i[0]===""||i[0]&&i[0].charAt(0)==="/",o&&(t.hostname=t.host=d?"":i.length?i.shift():"",o=t.host&&0<t.host.indexOf("@")?t.host.split("@"):!1)&&(t.auth=o.shift(),t.host=t.hostname=o.shift()),(n=n||t.host&&i.length)&&!d&&i.unshift(""),i.length?t.pathname=i.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},tn.prototype.parseHost=function(){return rc(this)};function rc(e){var t=e.host,n=cd.exec(t);n&&(n=n[0],n!==":"&&(e.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(e.hostname=t)}var ac=Ae(function(e,t){function n(a,s){return a=a[s],0<s&&(a==="/"||o&&a==="\\")}function i(a){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0;if(o){var d=a;if(typeof d!="string")throw new TypeError("expected a string");if(d=d.replace(/[\\\/]+/g,"/"),s!==!1)if(s=d,d=s.length-1,2>d)d=s;else{for(;n(s,d);)d--;d=s.substr(0,d+1)}return d.replace(/^([a-zA-Z]+:|\.\/)/,"")}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.unixify=i,t.correctPath=function(a){return i(a.replace(/^\\\\\?\\.:\\/,"\\"))};var o=ii.platform==="win32"});Se(ac);var Wn=Ae(function(e,t){function n(E,r){return r===void 0&&(r=ve.default.cwd()),tt(r,E)}function i(E,r){return typeof E=="function"?[o(),E]:[o(E),m(r)]}function o(E){return E===void 0&&(E={}),q({},P,E)}function a(E){return typeof E=="number"?q({},Pt,{mode:E}):q({},Pt,E)}function s(E,r,c,y){r===void 0&&(r=""),c===void 0&&(c=""),y===void 0&&(y="");var v="";switch(c&&(v=" '"+c+"'"),y&&(v+=" -> '"+y+"'"),E){case"ENOENT":return"ENOENT: no such file or directory, "+r+v;case"EBADF":return"EBADF: bad file descriptor, "+r+v;case"EINVAL":return"EINVAL: invalid argument, "+r+v;case"EPERM":return"EPERM: operation not permitted, "+r+v;case"EPROTO":return"EPROTO: protocol error, "+r+v;case"EEXIST":return"EEXIST: file already exists, "+r+v;case"ENOTDIR":return"ENOTDIR: not a directory, "+r+v;case"EISDIR":return"EISDIR: illegal operation on a directory, "+r+v;case"EACCES":return"EACCES: permission denied, "+r+v;case"ENOTEMPTY":return"ENOTEMPTY: directory not empty, "+r+v;case"EMFILE":return"EMFILE: too many open files, "+r+v;case"ENOSYS":return"ENOSYS: function not implemented, "+r+v;default:return E+": error occurred, "+r+v}}function d(E,r,c,y,v){return r===void 0&&(r=""),c===void 0&&(c=""),y===void 0&&(y=""),v===void 0&&(v=Error),r=new v(s(E,r,c,y)),r.code=E,r}function g(E){if(typeof E=="number")return E;if(typeof E=="string"){var r=V[E];if(typeof r!="undefined")return r}throw new bi.TypeError("ERR_INVALID_OPT_VALUE","flags",E)}function f(E,r){if(r){var c=typeof r;switch(c){case"string":E=q({},E,{encoding:r});break;case"object":E=q({},E,r);break;default:throw TypeError("Expected options to be either an object or a string, but got "+c+" instead")}}else return E;return E.encoding!=="buffer"&&Qe.assertEncoding(E.encoding),E}function l(E){return function(r){return f(E,r)}}function m(E){if(typeof E!="function")throw TypeError(I.CB);return E}function A(E){return function(r,c){return typeof r=="function"?[E(),r]:[E(r),m(c)]}}function _(E){if(typeof E!="string"&&!ee.Buffer.isBuffer(E)){try{if(!(E instanceof ad.URL))throw new TypeError(I.PATH_STR)}catch{throw new TypeError(I.PATH_STR)}if(E.hostname!=="")throw new bi.TypeError("ERR_INVALID_FILE_URL_HOST",ve.default.platform);E=E.pathname;for(var r=0;r<E.length;r++)if(E[r]==="%"){var c=E.codePointAt(r+2)|32;if(E[r+1]==="2"&&c===102)throw new bi.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}E=decodeURIComponent(E)}return E=String(E),O(E),E}function R(E,r){return(E=n(E,r).substr(1))?E.split(h):[]}function x(E){return R(_(E))}function C(E,r){return r===void 0&&(r=Qe.ENCODING_UTF8),ee.Buffer.isBuffer(E)?E:E instanceof Uint8Array?ee.bufferFrom(E):ee.bufferFrom(String(E),r)}function k(E,r){return r&&r!=="buffer"?E.toString(r):E}function O(E,r){if((""+E).indexOf("\0")!==-1){if(E=Error("Path must be a string without null bytes"),E.code="ENOENT",typeof r!="function")throw E;return ve.default.nextTick(r,E),!1}return!0}function Z(E,r){if(E=typeof E=="number"?E:typeof E=="string"?parseInt(E,8):r?Z(r):void 0,typeof E!="number"||isNaN(E))throw new TypeError(I.MODE_INT);return E}function z(E){if(E>>>0!==E)throw TypeError(I.FD)}function K(E){if(typeof E=="string"&&+E==E)return+E;if(E instanceof Date)return E.getTime()/1e3;if(isFinite(E))return 0>E?Date.now()/1e3:E;throw Error("Cannot parse time: "+E)}function T(E){if(typeof E!="number")throw TypeError(I.UID)}function p(E){if(typeof E!="number")throw TypeError(I.GID)}function w(E){E.emit("stop")}function D(E,r,c){if(!(this instanceof D))return new D(E,r,c);if(this._vol=E,c=q({},f(c,{})),c.highWaterMark===void 0&&(c.highWaterMark=65536),Me.Readable.call(this,c),this.path=_(r),this.fd=c.fd===void 0?null:c.fd,this.flags=c.flags===void 0?"r":c.flags,this.mode=c.mode===void 0?438:c.mode,this.start=c.start,this.end=c.end,this.autoClose=c.autoClose===void 0?!0:c.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}function $(){this.close()}function U(E,r,c){if(!(this instanceof U))return new U(E,r,c);if(this._vol=E,c=q({},f(c,{})),Me.Writable.call(this,c),this.path=_(r),this.fd=c.fd===void 0?null:c.fd,this.flags=c.flags===void 0?"w":c.flags,this.mode=c.mode===void 0?438:c.mode,this.start=c.start,this.autoClose=c.autoClose===void 0?!0:!!c.autoClose,this.pos=void 0,this.bytesWritten=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(0>this.start)throw Error('"start" must be >= zero');this.pos=this.start}c.encoding&&this.setDefaultEncoding(c.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}var M=se&&se.__extends||function(){function E(r,c){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var B in v)v.hasOwnProperty(B)&&(y[B]=v[B])},E(r,c)}return function(r,c){function y(){this.constructor=r}E(r,c),r.prototype=c===null?Object.create(c):(y.prototype=c.prototype,new y)}}(),S=se&&se.__spreadArrays||function(){for(var E=0,r=0,c=arguments.length;r<c;r++)E+=arguments[r].length;E=Array(E);var y=0;for(r=0;r<c;r++)for(var v=arguments[r],B=0,G=v.length;B<G;B++,y++)E[y]=v[B];return E};Object.defineProperty(t,"__esModule",{value:!0});var q=Xf.extend,tt=cr.resolve,ft=Yt.constants.O_RDONLY,it=Yt.constants.O_WRONLY,nt=Yt.constants.O_RDWR,gt=Yt.constants.O_CREAT,ot=Yt.constants.O_EXCL,It=Yt.constants.O_TRUNC,Ot=Yt.constants.O_APPEND,Lt=Yt.constants.O_SYNC,vt=Yt.constants.O_DIRECTORY,L=Yt.constants.F_OK,u=Yt.constants.COPYFILE_EXCL,F=Yt.constants.COPYFILE_FICLONE_FORCE,h=cr.sep,H=cr.relative,N=ve.default.platform==="win32",I={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"},V;(function(E){E[E.r=ft]="r",E[E["r+"]=nt]="r+",E[E.rs=ft|Lt]="rs",E[E.sr=E.rs]="sr",E[E["rs+"]=nt|Lt]="rs+",E[E["sr+"]=E["rs+"]]="sr+",E[E.w=it|gt|It]="w",E[E.wx=it|gt|It|ot]="wx",E[E.xw=E.wx]="xw",E[E["w+"]=nt|gt|It]="w+",E[E["wx+"]=nt|gt|It|ot]="wx+",E[E["xw+"]=E["wx+"]]="xw+",E[E.a=it|Ot|gt]="a",E[E.ax=it|Ot|gt|ot]="ax",E[E.xa=E.ax]="xa",E[E["a+"]=nt|Ot|gt]="a+",E[E["ax+"]=nt|Ot|gt|ot]="ax+",E[E["xa+"]=E["ax+"]]="xa+"})(V=t.FLAGS||(t.FLAGS={})),t.flagsToNumber=g,e={encoding:"utf8"};var lt=l(e),at=A(lt),At=l({flag:"r"}),Nt={encoding:"utf8",mode:438,flag:V[V.w]},Tt=l(Nt),bt={encoding:"utf8",mode:438,flag:V[V.a]},wt=l(bt),pt=A(wt),Et=l(e),Bt=A(Et),Pt={mode:511,recursive:!1},Ct={recursive:!1},Ht=l({encoding:"utf8",withFileTypes:!1}),b=A(Ht),P={bigint:!1};if(t.pathToFilename=_,N){var W=n,Q=ac.unixify;n=function(E,r){return Q(W(E,r))}}t.filenameToSteps=R,t.pathToSteps=x,t.dataToStr=function(E,r){return r===void 0&&(r=Qe.ENCODING_UTF8),ee.Buffer.isBuffer(E)?E.toString(r):E instanceof Uint8Array?ee.bufferFrom(E).toString(r):String(E)},t.dataToBuffer=C,t.bufferToEncoding=k,t.toUnixTimestamp=K,e=function(){function E(r){r===void 0&&(r={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=Ks.default(this),this.statWatchers={},this.props=q({Node:Bi.Node,Link:Bi.Link,File:Bi.File},r),r=this.createLink(),r.setNode(this.createNode(!0));var c=this;this.StatWatcher=function(y){function v(){return y.call(this,c)||this}return M(v,y),v}(X),this.ReadStream=function(y){function v(){for(var B=[],G=0;G<arguments.length;G++)B[G]=arguments[G];return y.apply(this,S([c],B))||this}return M(v,y),v}(D),this.WriteStream=function(y){function v(){for(var B=[],G=0;G<arguments.length;G++)B[G]=arguments[G];return y.apply(this,S([c],B))||this}return M(v,y),v}(U),this.FSWatcher=function(y){function v(){return y.call(this,c)||this}return M(v,y),v}(rt),this.root=r}return E.fromJSON=function(r,c){var y=new E;return y.fromJSON(r,c),y},Object.defineProperty(E.prototype,"promises",{get:function(){if(this.promisesApi===null)throw Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!0,configurable:!0}),E.prototype.createLink=function(r,c,y,v){if(y===void 0&&(y=!1),!r)return new this.props.Link(this,null,"");if(!c)throw Error("createLink: name cannot be empty");return r.createChild(c,this.createNode(y,v))},E.prototype.deleteLink=function(r){var c=r.parent;return c?(c.deleteChild(r),!0):!1},E.prototype.newInoNumber=function(){var r=this.releasedInos.pop();return r||(this.ino=(this.ino+1)%4294967295)},E.prototype.newFdNumber=function(){var r=this.releasedFds.pop();return typeof r=="number"?r:E.fd--},E.prototype.createNode=function(r,c){return r===void 0&&(r=!1),c=new this.props.Node(this.newInoNumber(),c),r&&c.setIsDirectory(),this.inodes[c.ino]=c},E.prototype.getNode=function(r){return this.inodes[r]},E.prototype.deleteNode=function(r){r.del(),delete this.inodes[r.ino],this.releasedInos.push(r.ino)},E.prototype.genRndStr=function(){var r=(Math.random()+1).toString(36).substr(2,6);return r.length===6?r:this.genRndStr()},E.prototype.getLink=function(r){return this.root.walk(r)},E.prototype.getLinkOrThrow=function(r,c){var y=R(r);if(y=this.getLink(y),!y)throw d("ENOENT",c,r);return y},E.prototype.getResolvedLink=function(r){r=typeof r=="string"?R(r):r;for(var c=this.root,y=0;y<r.length;){if(c=c.getChild(r[y]),!c)return null;var v=c.getNode();v.isSymlink()?(r=v.symlink.concat(r.slice(y+1)),c=this.root,y=0):y++}return c},E.prototype.getResolvedLinkOrThrow=function(r,c){var y=this.getResolvedLink(r);if(!y)throw d("ENOENT",c,r);return y},E.prototype.resolveSymlinks=function(r){return this.getResolvedLink(r.steps.slice(1))},E.prototype.getLinkAsDirOrThrow=function(r,c){var y=this.getLinkOrThrow(r,c);if(!y.getNode().isDirectory())throw d("ENOTDIR",c,r);return y},E.prototype.getLinkParent=function(r){return this.root.walk(r,r.length-1)},E.prototype.getLinkParentAsDirOrThrow=function(r,c){r=r instanceof Array?r:R(r);var y=this.getLinkParent(r);if(!y)throw d("ENOENT",c,h+r.join(h));if(!y.getNode().isDirectory())throw d("ENOTDIR",c,h+r.join(h));return y},E.prototype.getFileByFd=function(r){return this.fds[String(r)]},E.prototype.getFileByFdOrThrow=function(r,c){if(r>>>0!==r)throw TypeError(I.FD);if(r=this.getFileByFd(r),!r)throw d("EBADF",c);return r},E.prototype.getNodeByIdOrCreate=function(r,c,y){if(typeof r=="number"){if(r=this.getFileByFd(r),!r)throw Error("File nto found");return r.node}var v=x(r),B=this.getLink(v);if(B)return B.getNode();if(c&gt&&(c=this.getLinkParent(v)))return B=this.createLink(c,v[v.length-1],!1,y),B.getNode();throw d("ENOENT","getNodeByIdOrCreate",_(r))},E.prototype.wrapAsync=function(r,c,y){var v=this;m(y),si.default(function(){try{y(null,r.apply(v,c))}catch(B){y(B)}})},E.prototype._toJSON=function(r,c,y){var v;r===void 0&&(r=this.root),c===void 0&&(c={});var B=!0,G=r.children;r.getNode().isFile()&&(G=(v={},v[r.getName()]=r.parent.getChild(r.getName()),v),r=r.parent);for(var j in G){if(B=!1,G=r.getChild(j),!G)throw Error("_toJSON: unexpected undefined");v=G.getNode(),v.isFile()?(G=G.getPath(),y&&(G=H(y,G)),c[G]=v.getString()):v.isDirectory()&&this._toJSON(G,c,y)}return r=r.getPath(),y&&(r=H(y,r)),r&&B&&(c[r]=null),c},E.prototype.toJSON=function(r,c,y){c===void 0&&(c={}),y===void 0&&(y=!1);var v=[];if(r){r instanceof Array||(r=[r]);for(var B=0;B<r.length;B++){var G=_(r[B]);(G=this.getResolvedLink(G))&&v.push(G)}}else v.push(this.root);if(!v.length)return c;for(B=0;B<v.length;B++)G=v[B],this._toJSON(G,c,y?G.getPath():"");return c},E.prototype.fromJSON=function(r,c){c===void 0&&(c=ve.default.cwd());for(var y in r){var v=r[y];if(typeof v=="string"){y=n(y,c);var B=R(y);1<B.length&&(B=h+B.slice(0,B.length-1).join(h),this.mkdirpBase(B,511)),this.writeFileSync(y,v)}else this.mkdirpBase(y,511)}},E.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},E.prototype.mountSync=function(r,c){this.fromJSON(c,r)},E.prototype.openLink=function(r,c,y){if(y===void 0&&(y=!0),this.openFiles>=this.maxFiles)throw d("EMFILE","open",r.getPath());var v=r;if(y&&(v=this.resolveSymlinks(r)),!v)throw d("ENOENT","open",r.getPath());if(y=v.getNode(),y.isDirectory()){if((c&(ft|nt|it))!==ft)throw d("EISDIR","open",r.getPath())}else if(c&vt)throw d("ENOTDIR","open",r.getPath());if(!(c&it||y.canRead()))throw d("EACCES","open",r.getPath());return r=new this.props.File(r,y,c,this.newFdNumber()),this.fds[r.fd]=r,this.openFiles++,c&It&&r.truncate(),r},E.prototype.openFile=function(r,c,y,v){v===void 0&&(v=!0);var B=R(r),G=v?this.getResolvedLink(B):this.getLink(B);if(!G&&c&gt){var j=this.getResolvedLink(B.slice(0,B.length-1));if(!j)throw d("ENOENT","open",h+B.join(h));c&gt&&typeof y=="number"&&(G=this.createLink(j,B[B.length-1],!1,y))}if(G)return this.openLink(G,c,v);throw d("ENOENT","open",r)},E.prototype.openBase=function(r,c,y,v){if(v===void 0&&(v=!0),c=this.openFile(r,c,y,v),!c)throw d("ENOENT","open",r);return c.fd},E.prototype.openSync=function(r,c,y){return y===void 0&&(y=438),y=Z(y),r=_(r),c=g(c),this.openBase(r,c,y)},E.prototype.open=function(r,c,y,v){var B=y;typeof y=="function"&&(B=438,v=y),y=Z(B||438),r=_(r),c=g(c),this.wrapAsync(this.openBase,[r,c,y],v)},E.prototype.closeFile=function(r){this.fds[r.fd]&&(this.openFiles--,delete this.fds[r.fd],this.releasedFds.push(r.fd))},E.prototype.closeSync=function(r){z(r),r=this.getFileByFdOrThrow(r,"close"),this.closeFile(r)},E.prototype.close=function(r,c){z(r),this.wrapAsync(this.closeSync,[r],c)},E.prototype.openFileOrGetById=function(r,c,y){if(typeof r=="number"){if(r=this.fds[r],!r)throw d("ENOENT");return r}return this.openFile(_(r),c,y)},E.prototype.readBase=function(r,c,y,v,B){return this.getFileByFdOrThrow(r).read(c,Number(y),Number(v),B)},E.prototype.readSync=function(r,c,y,v,B){return z(r),this.readBase(r,c,y,v,B)},E.prototype.read=function(r,c,y,v,B,G){var j=this;if(m(G),v===0)return ve.default.nextTick(function(){G&&G(null,0,c)});si.default(function(){try{var et=j.readBase(r,c,y,v,B);G(null,et,c)}catch(ut){G(ut)}})},E.prototype.readFileBase=function(r,c,y){var v=typeof r=="number"&&r>>>0===r;if(!v){var B=_(r);if(B=R(B),(B=this.getResolvedLink(B))&&B.getNode().isDirectory())throw d("EISDIR","open",B.getPath());r=this.openSync(r,c)}try{var G=k(this.getFileByFdOrThrow(r).getBuffer(),y)}finally{v||this.closeSync(r)}return G},E.prototype.readFileSync=function(r,c){c=At(c);var y=g(c.flag);return this.readFileBase(r,y,c.encoding)},E.prototype.readFile=function(r,c,y){y=A(At)(c,y),c=y[0],y=y[1];var v=g(c.flag);this.wrapAsync(this.readFileBase,[r,v,c.encoding],y)},E.prototype.writeBase=function(r,c,y,v,B){return this.getFileByFdOrThrow(r,"write").write(c,y,v,B)},E.prototype.writeSync=function(r,c,y,v,B){z(r);var G=typeof c!="string";if(G){var j=(y||0)|0,et=v;y=B}else var ut=v;return c=C(c,ut),G?typeof et=="undefined"&&(et=c.length):(j=0,et=c.length),this.writeBase(r,c,j,et,y)},E.prototype.write=function(r,c,y,v,B,G){var j=this;z(r);var et=typeof c,ut=typeof y,ht=typeof v,ct=typeof B;if(et!=="string")if(ut==="function")var yt=y;else if(ht==="function"){var xt=y|0;yt=v}else if(ct==="function"){xt=y|0;var Rt=v;yt=B}else{xt=y|0,Rt=v;var Ft=B;yt=G}else if(ut==="function")yt=y;else if(ht==="function")Ft=y,yt=v;else if(ct==="function"){Ft=y;var Ut=v;yt=B}var Dt=C(c,Ut);et!=="string"?typeof Rt=="undefined"&&(Rt=Dt.length):(xt=0,Rt=Dt.length);var $t=m(yt);si.default(function(){try{var Gt=j.writeBase(r,Dt,xt,Rt,Ft);et!=="string"?$t(null,Gt,Dt):$t(null,Gt,c)}catch(kt){$t(kt)}})},E.prototype.writeFileBase=function(r,c,y,v){var B=typeof r=="number";r=B?r:this.openBase(_(r),y,v),v=0;var G=c.length;y=y&Ot?void 0:0;try{for(;0<G;){var j=this.writeSync(r,c,v,G,y);v+=j,G-=j,y!==void 0&&(y+=j)}}finally{B||this.closeSync(r)}},E.prototype.writeFileSync=function(r,c,y){var v=Tt(y);y=g(v.flag);var B=Z(v.mode);c=C(c,v.encoding),this.writeFileBase(r,c,y,B)},E.prototype.writeFile=function(r,c,y,v){var B=y;typeof y=="function"&&(B=Nt,v=y),y=m(v);var G=Tt(B);B=g(G.flag),v=Z(G.mode),c=C(c,G.encoding),this.wrapAsync(this.writeFileBase,[r,c,B,v],y)},E.prototype.linkBase=function(r,c){var y=R(r),v=this.getLink(y);if(!v)throw d("ENOENT","link",r,c);var B=R(c);if(y=this.getLinkParent(B),!y)throw d("ENOENT","link",r,c);if(B=B[B.length-1],y.getChild(B))throw d("EEXIST","link",r,c);r=v.getNode(),r.nlink++,y.createChild(B,r)},E.prototype.copyFileBase=function(r,c,y){var v=this.readFileSync(r);if(y&u&&this.existsSync(c))throw d("EEXIST","copyFile",r,c);if(y&F)throw d("ENOSYS","copyFile",r,c);this.writeFileBase(c,v,V.w,438)},E.prototype.copyFileSync=function(r,c,y){return r=_(r),c=_(c),this.copyFileBase(r,c,(y||0)|0)},E.prototype.copyFile=function(r,c,y,v){if(r=_(r),c=_(c),typeof y=="function")var B=0;else B=y,y=v;m(y),this.wrapAsync(this.copyFileBase,[r,c,B],y)},E.prototype.linkSync=function(r,c){r=_(r),c=_(c),this.linkBase(r,c)},E.prototype.link=function(r,c,y){r=_(r),c=_(c),this.wrapAsync(this.linkBase,[r,c],y)},E.prototype.unlinkBase=function(r){var c=R(r);if(c=this.getLink(c),!c)throw d("ENOENT","unlink",r);if(c.length)throw Error("Dir not empty...");this.deleteLink(c),r=c.getNode(),r.nlink--,0>=r.nlink&&this.deleteNode(r)},E.prototype.unlinkSync=function(r){r=_(r),this.unlinkBase(r)},E.prototype.unlink=function(r,c){r=_(r),this.wrapAsync(this.unlinkBase,[r],c)},E.prototype.symlinkBase=function(r,c){var y=R(c),v=this.getLinkParent(y);if(!v)throw d("ENOENT","symlink",r,c);if(y=y[y.length-1],v.getChild(y))throw d("EEXIST","symlink",r,c);return c=v.createChild(y),c.getNode().makeSymlink(R(r)),c},E.prototype.symlinkSync=function(r,c){r=_(r),c=_(c),this.symlinkBase(r,c)},E.prototype.symlink=function(r,c,y,v){y=m(typeof y=="function"?y:v),r=_(r),c=_(c),this.wrapAsync(this.symlinkBase,[r,c],y)},E.prototype.realpathBase=function(r,c){var y=R(r);if(y=this.getResolvedLink(y),!y)throw d("ENOENT","realpath",r);return Qe.strToEncoding(y.getPath(),c)},E.prototype.realpathSync=function(r,c){return this.realpathBase(_(r),Et(c).encoding)},E.prototype.realpath=function(r,c,y){y=Bt(c,y),c=y[0],y=y[1],r=_(r),this.wrapAsync(this.realpathBase,[r,c.encoding],y)},E.prototype.lstatBase=function(r,c){c===void 0&&(c=!1);var y=this.getLink(R(r));if(!y)throw d("ENOENT","lstat",r);return ti.default.build(y.getNode(),c)},E.prototype.lstatSync=function(r,c){return this.lstatBase(_(r),o(c).bigint)},E.prototype.lstat=function(r,c,y){y=i(c,y),c=y[0],y=y[1],this.wrapAsync(this.lstatBase,[_(r),c.bigint],y)},E.prototype.statBase=function(r,c){c===void 0&&(c=!1);var y=this.getResolvedLink(R(r));if(!y)throw d("ENOENT","stat",r);return ti.default.build(y.getNode(),c)},E.prototype.statSync=function(r,c){return this.statBase(_(r),o(c).bigint)},E.prototype.stat=function(r,c,y){y=i(c,y),c=y[0],y=y[1],this.wrapAsync(this.statBase,[_(r),c.bigint],y)},E.prototype.fstatBase=function(r,c){if(c===void 0&&(c=!1),r=this.getFileByFd(r),!r)throw d("EBADF","fstat");return ti.default.build(r.node,c)},E.prototype.fstatSync=function(r,c){return this.fstatBase(r,o(c).bigint)},E.prototype.fstat=function(r,c,y){c=i(c,y),this.wrapAsync(this.fstatBase,[r,c[0].bigint],c[1])},E.prototype.renameBase=function(r,c){var y=this.getLink(R(r));if(!y)throw d("ENOENT","rename",r,c);var v=R(c),B=this.getLinkParent(v);if(!B)throw d("ENOENT","rename",r,c);(r=y.parent)&&r.deleteChild(y),y.steps=S(B.steps,[v[v.length-1]]),B.setChild(y.getName(),y)},E.prototype.renameSync=function(r,c){r=_(r),c=_(c),this.renameBase(r,c)},E.prototype.rename=function(r,c,y){r=_(r),c=_(c),this.wrapAsync(this.renameBase,[r,c],y)},E.prototype.existsBase=function(r){return!!this.statBase(r)},E.prototype.existsSync=function(r){try{return this.existsBase(_(r))}catch{return!1}},E.prototype.exists=function(r,c){var y=this,v=_(r);if(typeof c!="function")throw Error(I.CB);si.default(function(){try{c(y.existsBase(v))}catch{c(!1)}})},E.prototype.accessBase=function(r){this.getLinkOrThrow(r,"access")},E.prototype.accessSync=function(r,c){c===void 0&&(c=L),r=_(r),this.accessBase(r,c|0)},E.prototype.access=function(r,c,y){var v=L;typeof c!="function"&&(v=c|0,c=m(y)),r=_(r),this.wrapAsync(this.accessBase,[r,v],c)},E.prototype.appendFileSync=function(r,c,y){y===void 0&&(y=bt),y=wt(y),y.flag&&r>>>0!==r||(y.flag="a"),this.writeFileSync(r,c,y)},E.prototype.appendFile=function(r,c,y,v){v=pt(y,v),y=v[0],v=v[1],y.flag&&r>>>0!==r||(y.flag="a"),this.writeFile(r,c,y,v)},E.prototype.readdirBase=function(r,c){var y=R(r);if(y=this.getResolvedLink(y),!y)throw d("ENOENT","readdir",r);if(!y.getNode().isDirectory())throw d("ENOTDIR","scandir",r);if(c.withFileTypes){var v=[];for(B in y.children)(r=y.getChild(B))&&v.push(or.default.build(r,c.encoding));return N||c.encoding==="buffer"||v.sort(function(G,j){return G.name<j.name?-1:G.name>j.name?1:0}),v}var B=[];for(v in y.children)B.push(Qe.strToEncoding(v,c.encoding));return N||c.encoding==="buffer"||B.sort(),B},E.prototype.readdirSync=function(r,c){return c=Ht(c),r=_(r),this.readdirBase(r,c)},E.prototype.readdir=function(r,c,y){y=b(c,y),c=y[0],y=y[1],r=_(r),this.wrapAsync(this.readdirBase,[r,c],y)},E.prototype.readlinkBase=function(r,c){var y=this.getLinkOrThrow(r,"readlink").getNode();if(!y.isSymlink())throw d("EINVAL","readlink",r);return r=h+y.symlink.join(h),Qe.strToEncoding(r,c)},E.prototype.readlinkSync=function(r,c){return c=lt(c),r=_(r),this.readlinkBase(r,c.encoding)},E.prototype.readlink=function(r,c,y){y=at(c,y),c=y[0],y=y[1],r=_(r),this.wrapAsync(this.readlinkBase,[r,c.encoding],y)},E.prototype.fsyncBase=function(r){this.getFileByFdOrThrow(r,"fsync")},E.prototype.fsyncSync=function(r){this.fsyncBase(r)},E.prototype.fsync=function(r,c){this.wrapAsync(this.fsyncBase,[r],c)},E.prototype.fdatasyncBase=function(r){this.getFileByFdOrThrow(r,"fdatasync")},E.prototype.fdatasyncSync=function(r){this.fdatasyncBase(r)},E.prototype.fdatasync=function(r,c){this.wrapAsync(this.fdatasyncBase,[r],c)},E.prototype.ftruncateBase=function(r,c){this.getFileByFdOrThrow(r,"ftruncate").truncate(c)},E.prototype.ftruncateSync=function(r,c){this.ftruncateBase(r,c)},E.prototype.ftruncate=function(r,c,y){var v=typeof c=="number"?c:0;c=m(typeof c=="number"?y:c),this.wrapAsync(this.ftruncateBase,[r,v],c)},E.prototype.truncateBase=function(r,c){r=this.openSync(r,"r+");try{this.ftruncateSync(r,c)}finally{this.closeSync(r)}},E.prototype.truncateSync=function(r,c){if(r>>>0===r)return this.ftruncateSync(r,c);this.truncateBase(r,c)},E.prototype.truncate=function(r,c,y){var v=typeof c=="number"?c:0;if(c=m(typeof c=="number"?y:c),r>>>0===r)return this.ftruncate(r,v,c);this.wrapAsync(this.truncateBase,[r,v],c)},E.prototype.futimesBase=function(r,c,y){r=this.getFileByFdOrThrow(r,"futimes").node,r.atime=new Date(1e3*c),r.mtime=new Date(1e3*y)},E.prototype.futimesSync=function(r,c,y){this.futimesBase(r,K(c),K(y))},E.prototype.futimes=function(r,c,y,v){this.wrapAsync(this.futimesBase,[r,K(c),K(y)],v)},E.prototype.utimesBase=function(r,c,y){r=this.openSync(r,"r+");try{this.futimesBase(r,c,y)}finally{this.closeSync(r)}},E.prototype.utimesSync=function(r,c,y){this.utimesBase(_(r),K(c),K(y))},E.prototype.utimes=function(r,c,y,v){this.wrapAsync(this.utimesBase,[_(r),K(c),K(y)],v)},E.prototype.mkdirBase=function(r,c){var y=R(r);if(!y.length)throw d("EISDIR","mkdir",r);var v=this.getLinkParentAsDirOrThrow(r,"mkdir");if(y=y[y.length-1],v.getChild(y))throw d("EEXIST","mkdir",r);v.createChild(y,this.createNode(!0,c))},E.prototype.mkdirpBase=function(r,c){r=R(r);for(var y=this.root,v=0;v<r.length;v++){var B=r[v];if(!y.getNode().isDirectory())throw d("ENOTDIR","mkdir",y.getPath());var G=y.getChild(B);if(G)if(G.getNode().isDirectory())y=G;else throw d("ENOTDIR","mkdir",G.getPath());else y=y.createChild(B,this.createNode(!0,c))}},E.prototype.mkdirSync=function(r,c){c=a(c);var y=Z(c.mode,511);r=_(r),c.recursive?this.mkdirpBase(r,y):this.mkdirBase(r,y)},E.prototype.mkdir=function(r,c,y){var v=a(c);c=m(typeof c=="function"?c:y),y=Z(v.mode,511),r=_(r),v.recursive?this.wrapAsync(this.mkdirpBase,[r,y],c):this.wrapAsync(this.mkdirBase,[r,y],c)},E.prototype.mkdirpSync=function(r,c){this.mkdirSync(r,{mode:c,recursive:!0})},E.prototype.mkdirp=function(r,c,y){var v=typeof c=="function"?void 0:c;c=m(typeof c=="function"?c:y),this.mkdir(r,{mode:v,recursive:!0},c)},E.prototype.mkdtempBase=function(r,c,y){y===void 0&&(y=5);var v=r+this.genRndStr();try{return this.mkdirBase(v,511),Qe.strToEncoding(v,c)}catch(B){if(B.code==="EEXIST"){if(1<y)return this.mkdtempBase(r,c,y-1);throw Error("Could not create temp dir.")}throw B}},E.prototype.mkdtempSync=function(r,c){if(c=lt(c).encoding,!r||typeof r!="string")throw new TypeError("filename prefix is required");return O(r),this.mkdtempBase(r,c)},E.prototype.mkdtemp=function(r,c,y){if(y=at(c,y),c=y[0].encoding,y=y[1],!r||typeof r!="string")throw new TypeError("filename prefix is required");O(r)&&this.wrapAsync(this.mkdtempBase,[r,c],y)},E.prototype.rmdirBase=function(r,c){c=q({},Ct,c);var y=this.getLinkAsDirOrThrow(r,"rmdir");if(y.length&&!c.recursive)throw d("ENOTEMPTY","rmdir",r);this.deleteLink(y)},E.prototype.rmdirSync=function(r,c){this.rmdirBase(_(r),c)},E.prototype.rmdir=function(r,c,y){var v=q({},Ct,c);c=m(typeof c=="function"?c:y),this.wrapAsync(this.rmdirBase,[_(r),v],c)},E.prototype.fchmodBase=function(r,c){this.getFileByFdOrThrow(r,"fchmod").chmod(c)},E.prototype.fchmodSync=function(r,c){this.fchmodBase(r,Z(c))},E.prototype.fchmod=function(r,c,y){this.wrapAsync(this.fchmodBase,[r,Z(c)],y)},E.prototype.chmodBase=function(r,c){r=this.openSync(r,"r+");try{this.fchmodBase(r,c)}finally{this.closeSync(r)}},E.prototype.chmodSync=function(r,c){c=Z(c),r=_(r),this.chmodBase(r,c)},E.prototype.chmod=function(r,c,y){c=Z(c),r=_(r),this.wrapAsync(this.chmodBase,[r,c],y)},E.prototype.lchmodBase=function(r,c){r=this.openBase(r,nt,0,!1);try{this.fchmodBase(r,c)}finally{this.closeSync(r)}},E.prototype.lchmodSync=function(r,c){c=Z(c),r=_(r),this.lchmodBase(r,c)},E.prototype.lchmod=function(r,c,y){c=Z(c),r=_(r),this.wrapAsync(this.lchmodBase,[r,c],y)},E.prototype.fchownBase=function(r,c,y){this.getFileByFdOrThrow(r,"fchown").chown(c,y)},E.prototype.fchownSync=function(r,c,y){T(c),p(y),this.fchownBase(r,c,y)},E.prototype.fchown=function(r,c,y,v){T(c),p(y),this.wrapAsync(this.fchownBase,[r,c,y],v)},E.prototype.chownBase=function(r,c,y){this.getResolvedLinkOrThrow(r,"chown").getNode().chown(c,y)},E.prototype.chownSync=function(r,c,y){T(c),p(y),this.chownBase(_(r),c,y)},E.prototype.chown=function(r,c,y,v){T(c),p(y),this.wrapAsync(this.chownBase,[_(r),c,y],v)},E.prototype.lchownBase=function(r,c,y){this.getLinkOrThrow(r,"lchown").getNode().chown(c,y)},E.prototype.lchownSync=function(r,c,y){T(c),p(y),this.lchownBase(_(r),c,y)},E.prototype.lchown=function(r,c,y,v){T(c),p(y),this.wrapAsync(this.lchownBase,[_(r),c,y],v)},E.prototype.watchFile=function(r,c,y){r=_(r);var v=c;if(typeof v=="function"&&(y=c,v=null),typeof y!="function")throw Error('"watchFile()" requires a listener function');c=5007;var B=!0;return v&&typeof v=="object"&&(typeof v.interval=="number"&&(c=v.interval),typeof v.persistent=="boolean"&&(B=v.persistent)),v=this.statWatchers[r],v||(v=new this.StatWatcher,v.start(r,B,c),this.statWatchers[r]=v),v.addListener("change",y),v},E.prototype.unwatchFile=function(r,c){r=_(r);var y=this.statWatchers[r];y&&(typeof c=="function"?y.removeListener("change",c):y.removeAllListeners("change"),y.listenerCount("change")===0&&(y.stop(),delete this.statWatchers[r]))},E.prototype.createReadStream=function(r,c){return new this.ReadStream(r,c)},E.prototype.createWriteStream=function(r,c){return new this.WriteStream(r,c)},E.prototype.watch=function(r,c,y){r=_(r);var v=c;typeof c=="function"&&(y=c,v=null);var B=lt(v);c=B.persistent,v=B.recursive,B=B.encoding,c===void 0&&(c=!0),v===void 0&&(v=!1);var G=new this.FSWatcher;return G.start(r,c,v,B),y&&G.addListener("change",y),G},E.fd=2147483647,E}(),t.Volume=e;var X=function(E){function r(c){var y=E.call(this)||this;return y.onInterval=function(){try{var v=y.vol.statSync(y.filename);y.hasChanged(v)&&(y.emit("change",v,y.prev),y.prev=v)}finally{y.loop()}},y.vol=c,y}return M(r,E),r.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},r.prototype.hasChanged=function(c){return c.mtimeMs>this.prev.mtimeMs||c.nlink!==this.prev.nlink},r.prototype.start=function(c,y,v){y===void 0&&(y=!0),v===void 0&&(v=5007),this.filename=_(c),this.setTimeout=y?setTimeout:Ns.default,this.interval=v,this.prev=this.vol.statSync(this.filename),this.loop()},r.prototype.stop=function(){clearTimeout(this.timeoutRef),ve.default.nextTick(w,this)},r}(jt.EventEmitter);t.StatWatcher=X;var J;Ci.inherits(D,Me.Readable),t.ReadStream=D,D.prototype.open=function(){var E=this;this._vol.open(this.path,this.flags,this.mode,function(r,c){r?(E.autoClose&&E.destroy&&E.destroy(),E.emit("error",r)):(E.fd=c,E.emit("open",c),E.read())})},D.prototype._read=function(E){if(typeof this.fd!="number")return this.once("open",function(){this._read(E)});if(!this.destroyed){(!J||128>J.length-J.used)&&(J=ee.bufferAllocUnsafe(this._readableState.highWaterMark),J.used=0);var r=J,c=Math.min(J.length-J.used,E),y=J.used;if(this.pos!==void 0&&(c=Math.min(this.end-this.pos+1,c)),0>=c)return this.push(null);var v=this;this._vol.read(this.fd,J,J.used,c,this.pos,function(B,G){B?(v.autoClose&&v.destroy&&v.destroy(),v.emit("error",B)):(B=null,0<G&&(v.bytesRead+=G,B=r.slice(y,y+G)),v.push(B))}),this.pos!==void 0&&(this.pos+=c),J.used+=c}},D.prototype._destroy=function(E,r){this.close(function(c){r(E||c)})},D.prototype.close=function(E){var r=this;if(E&&this.once("close",E),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",$);return}return ve.default.nextTick(function(){return r.emit("close")})}this.closed=!0,this._vol.close(this.fd,function(c){c?r.emit("error",c):r.emit("close")}),this.fd=null},Ci.inherits(U,Me.Writable),t.WriteStream=U,U.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(E,r){E?(this.autoClose&&this.destroy&&this.destroy(),this.emit("error",E)):(this.fd=r,this.emit("open",r))}.bind(this))},U.prototype._write=function(E,r,c){if(!(E instanceof ee.Buffer))return this.emit("error",Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(E,r,c)});var y=this;this._vol.write(this.fd,E,0,E.length,this.pos,function(v,B){if(v)return y.autoClose&&y.destroy&&y.destroy(),c(v);y.bytesWritten+=B,c()}),this.pos!==void 0&&(this.pos+=E.length)},U.prototype._writev=function(E,r){if(typeof this.fd!="number")return this.once("open",function(){this._writev(E,r)});for(var c=this,y=E.length,v=Array(y),B=0,G=0;G<y;G++){var j=E[G].chunk;v[G]=j,B+=j.length}y=ee.Buffer.concat(v),this._vol.write(this.fd,y,0,y.length,this.pos,function(et,ut){if(et)return c.destroy&&c.destroy(),r(et);c.bytesWritten+=ut,r()}),this.pos!==void 0&&(this.pos+=B)},U.prototype._destroy=D.prototype._destroy,U.prototype.close=D.prototype.close,U.prototype.destroySoon=U.prototype.end;var rt=function(E){function r(c){var y=E.call(this)||this;return y._filename="",y._filenameEncoded="",y._recursive=!1,y._encoding=Qe.ENCODING_UTF8,y._onNodeChange=function(){y._emit("change")},y._onParentChild=function(v){v.getName()===y._getName()&&y._emit("rename")},y._emit=function(v){y.emit("change",v,y._filenameEncoded)},y._persist=function(){y._timer=setTimeout(y._persist,1e6)},y._vol=c,y}return M(r,E),r.prototype._getName=function(){return this._steps[this._steps.length-1]},r.prototype.start=function(c,y,v,B){y===void 0&&(y=!0),v===void 0&&(v=!1),B===void 0&&(B=Qe.ENCODING_UTF8),this._filename=_(c),this._steps=R(this._filename),this._filenameEncoded=Qe.strToEncoding(this._filename),this._recursive=v,this._encoding=B;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(G){throw y=Error("watch "+this._filename+" "+G.code),y.code=G.code,y.errno=G.code,y}this._link.getNode().on("change",this._onNodeChange),this._link.on("child:add",this._onNodeChange),this._link.on("child:delete",this._onNodeChange),(c=this._link.parent)&&(c.setMaxListeners(c.getMaxListeners()+1),c.on("child:delete",this._onParentChild)),y&&this._persist()},r.prototype.close=function(){clearTimeout(this._timer),this._link.getNode().removeListener("change",this._onNodeChange);var c=this._link.parent;c&&c.removeListener("child:delete",this._onParentChild)},r}(jt.EventEmitter);t.FSWatcher=rt});Se(Wn);var md=Wn.pathToFilename,yd=Wn.filenameToSteps,sc=Wn.Volume,Lr=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fsProps="constants F_OK R_OK W_OK X_OK Stats".split(" "),t.fsSyncMethods="renameSync ftruncateSync truncateSync chownSync fchownSync lchownSync chmodSync fchmodSync lchmodSync statSync lstatSync fstatSync linkSync symlinkSync readlinkSync realpathSync unlinkSync rmdirSync mkdirSync mkdirpSync readdirSync closeSync openSync utimesSync futimesSync fsyncSync writeSync readSync readFileSync writeFileSync appendFileSync existsSync accessSync fdatasyncSync mkdtempSync copyFileSync createReadStream createWriteStream".split(" "),t.fsAsyncMethods="rename ftruncate truncate chown fchown lchown chmod fchmod lchmod stat lstat fstat link symlink readlink realpath unlink rmdir mkdir mkdirp readdir close open utimes futimes fsync write read readFile writeFile appendFile exists access fdatasync mkdtemp copyFile watchFile unwatchFile watch".split(" ")});Se(Lr);var cc=Ae(function(e,t){function n(l){for(var m={F_OK:s,R_OK:d,W_OK:g,X_OK:f,constants:Yt.constants,Stats:ti.default,Dirent:or.default},A=0,_=o;A<_.length;A++){var R=_[A];typeof l[R]=="function"&&(m[R]=l[R].bind(l))}for(A=0,_=a;A<_.length;A++)R=_[A],typeof l[R]=="function"&&(m[R]=l[R].bind(l));return m.StatWatcher=l.StatWatcher,m.FSWatcher=l.FSWatcher,m.WriteStream=l.WriteStream,m.ReadStream=l.ReadStream,m.promises=l.promises,m._toUnixTimestamp=Wn.toUnixTimestamp,m}var i=se&&se.__assign||function(){return i=Object.assign||function(l){for(var m,A=1,_=arguments.length;A<_;A++){m=arguments[A];for(var R in m)Object.prototype.hasOwnProperty.call(m,R)&&(l[R]=m[R])}return l},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=Lr.fsSyncMethods,a=Lr.fsAsyncMethods,s=Yt.constants.F_OK,d=Yt.constants.R_OK,g=Yt.constants.W_OK,f=Yt.constants.X_OK;t.Volume=Wn.Volume,t.vol=new Wn.Volume,t.createFsFromVolume=n,t.fs=n(t.vol),e.exports=i(i({},e.exports),t.fs),e.exports.semantic=!0});Se(cc);var lc=cc.createFsFromVolume;Nf.prototype.emit=function(e){for(var t,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];o=this.listeners(e);try{for(var a=qo(o),s=a.next();!s.done;s=a.next()){var d=s.value;try{d.apply(void 0,af(i))}catch(g){console.error(g)}}}catch(g){t={error:g}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return 0<o.length};var Ad=function(){function e(){this.volume=new sc,this.fs=lc(this.volume),this.fromJSON({"/dev/stdin":"","/dev/stdout":"","/dev/stderr":""})}return e.prototype._toJSON=function(t,n,i){n===void 0&&(n={});var o=!0,a;for(a in t.children){o=!1;var s=t.getChild(a);if(s){var d=s.getNode();d&&d.isFile()?(s=s.getPath(),i&&(s=sr(i,s)),n[s]=d.getBuffer()):d&&d.isDirectory()&&this._toJSON(s,n,i)}}return t=t.getPath(),i&&(t=sr(i,t)),t&&o&&(n[t]=null),n},e.prototype.toJSON=function(t,n,i){var o,a;n===void 0&&(n={}),i===void 0&&(i=!1);var s=[];if(t){t instanceof Array||(t=[t]);try{for(var d=qo(t),g=d.next();!g.done;g=d.next()){var f=md(g.value),l=this.volume.getResolvedLink(f);l&&s.push(l)}}catch(x){var m={error:x}}finally{try{g&&!g.done&&(o=d.return)&&o.call(d)}finally{if(m)throw m.error}}}else s.push(this.volume.root);if(!s.length)return n;try{for(var A=qo(s),_=A.next();!_.done;_=A.next())l=_.value,this._toJSON(l,n,i?l.getPath():"")}catch(x){var R={error:x}}finally{try{_&&!_.done&&(a=A.return)&&a.call(A)}finally{if(R)throw R.error}}return n},e.prototype.fromJSONFixed=function(t,n){for(var i in n){var o=n[i];if(o?Object.getPrototypeOf(o)!==null:o!==null){var a=yd(i);1<a.length&&(a="/"+a.slice(0,a.length-1).join("/"),t.mkdirpBase(a,511)),t.writeFileSync(i,o||"")}else t.mkdirpBase(i,511)}},e.prototype.fromJSON=function(t){this.volume=new sc,this.fromJSONFixed(this.volume,t),this.fs=lc(this.volume),this.volume.releasedFds=[0,1,2],t=this.volume.openSync("/dev/stderr","w");var n=this.volume.openSync("/dev/stdout","w"),i=this.volume.openSync("/dev/stdin","r");if(t!==2)throw Error("invalid handle for stderr: "+t);if(n!==1)throw Error("invalid handle for stdout: "+n);if(i!==0)throw Error("invalid handle for stdin: "+i)},e.prototype.getStdOut=function(){return nf(this,void 0,void 0,function(){var t,n=this;return of(this,function(){return t=new Promise(function(i){i(n.fs.readFileSync("/dev/stdout","utf8"))}),[2,t]})})},e}();function uc(e){return e.arrayBuffer?e.arrayBuffer():new Promise((t,n)=>{const i=new FileReader;i.addEventListener("loadend",()=>{t(i.result)}),i.addEventListener("error",n),i.readAsArrayBuffer(e)})}async function Ld(e){const t=await uc(e);return new Uint8Array(t)}function fc(e){return typeof Blob!="undefined"&&e instanceof Blob}function Pi(e){return typeof SharedArrayBuffer!="undefined"&&e instanceof SharedArrayBuffer}const Id=typeof process!="undefined"&&process.versions&&typeof process.versions.node!="undefined"&&typeof process.versions.electron=="undefined";function Ed(e){return e.byteOffset===0&&e.byteLength===e.buffer.byteLength}class dc{constructor(t){this.typedArray=t instanceof ArrayBuffer||Pi(t)?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}async getLength(){return this.typedArray.byteLength}async read(t,n){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+t,n)}}class hc{constructor(t){this.blob=t}async getLength(){return this.blob.size}async read(t,n){const i=this.blob.slice(t,t+n),o=await uc(i);return new Uint8Array(o)}async sliceAsBlob(t,n,i=""){return this.blob.slice(t,t+n,i)}}function wd(e,t){var n=Uint8Array;if(e[0]==3&&e[1]==0)return t||new n(0);var i=vd,o=pc,a=Sd,s=mc,d=t==null;d&&(t=new n(e.length>>>2<<3));for(var g=0,f=0,l=0,m=0,A=0,_=0,R=0,x=0,C=0,k,O;g==0;){if(g=i(e,C,1),f=i(e,C+1,2),C+=3,f==0){(C&7)!=0&&(C+=8-(C&7));var Z=(C>>>3)+4,z=e[Z-4]|e[Z-3]<<8;d&&(t=Ir(t,x+z)),t.set(new n(e.buffer,e.byteOffset+Z,z),x),C=Z+z<<3,x+=z;continue}if(d&&(t=Ir(t,x+(1<<17))),f==1&&(k=qt.flmap,O=qt.fdmap,_=(1<<9)-1,R=(1<<5)-1),f==2){l=o(e,C,5)+257,m=o(e,C+5,5)+1,A=o(e,C+10,4)+4,C+=14;for(var K=0;K<38;K+=2)qt.itree[K]=0,qt.itree[K+1]=0;for(var T=1,K=0;K<A;K++){var p=o(e,C+K*3,3);qt.itree[(qt.ordr[K]<<1)+1]=p,p>T&&(T=p)}C+=3*A,xi(qt.itree,T),Ni(qt.itree,T,qt.imap),k=qt.lmap,O=qt.dmap,C=a(qt.imap,(1<<T)-1,l+m,e,C,qt.ttree);var w=_c(qt.ttree,0,l,qt.ltree);_=(1<<w)-1;var D=_c(qt.ttree,l,m,qt.dtree);R=(1<<D)-1,xi(qt.ltree,w),Ni(qt.ltree,w,k),xi(qt.dtree,D),Ni(qt.dtree,D,O)}for(;;){var $=k[s(e,C)&_];C+=$&15;var U=$>>>4;if(U>>>8==0)t[x++]=U;else{if(U==256)break;var M=x+U-254;if(U>264){var S=qt.ldef[U-257];M=x+(S>>>3)+o(e,C,S&7),C+=S&7}var q=O[s(e,C)&R];C+=q&15;var tt=q>>>4,ft=qt.ddef[tt],it=(ft>>>4)+i(e,C,ft&15);for(C+=ft&15,d&&(t=Ir(t,x+(1<<17)));x<M;)t[x]=t[x++-it],t[x]=t[x++-it],t[x]=t[x++-it],t[x]=t[x++-it];x=M}}}return t.length==x?t:t.slice(0,x)}function Ir(e,t){var n=e.length;if(t<=n)return e;var i=new Uint8Array(Math.max(n<<1,t));return i.set(e,0),i}function Sd(e,t,n,i,o,a){for(var s=pc,d=mc,g=0;g<n;){var f=e[d(i,o)&t];o+=f&15;var l=f>>>4;if(l<=15)a[g]=l,g++;else{var m=0,A=0;l==16?(A=3+s(i,o,2),o+=2,m=a[g-1]):l==17?(A=3+s(i,o,3),o+=3):l==18&&(A=11+s(i,o,7),o+=7);for(var _=g+A;g<_;)a[g]=m,g++}}return o}function _c(e,t,n,i){for(var o=0,a=0,s=i.length>>>1;a<n;){var d=e[a+t];i[a<<1]=0,i[(a<<1)+1]=d,d>o&&(o=d),a++}for(;a<s;)i[a<<1]=0,i[(a<<1)+1]=0,a++;return o}function xi(e,t){for(var n=e.length,i,o,a,s,d,g=qt.bl_count,s=0;s<=t;s++)g[s]=0;for(s=1;s<n;s+=2)g[e[s]]++;var f=qt.next_code;for(i=0,g[0]=0,o=1;o<=t;o++)i=i+g[o-1]<<1,f[o]=i;for(a=0;a<n;a+=2)d=e[a+1],d!=0&&(e[a]=f[d],f[d]++)}function Ni(e,t,n){for(var i=e.length,o=qt.rev15,a=0;a<i;a+=2)if(e[a+1]!=0)for(var s=a>>1,d=e[a+1],g=s<<4|d,f=t-d,l=e[a]<<f,m=l+(1<<f);l!=m;){var A=o[l]>>>15-t;n[A]=g,l++}}function gc(e,t){for(var n=qt.rev15,i=15-t,o=0;o<e.length;o+=2){var a=e[o]<<t-e[o+1];e[o]=n[a]>>>i}}function pc(e,t,n){return(e[t>>>3]|e[(t>>>3)+1]<<8)>>>(t&7)&(1<<n)-1}function vd(e,t,n){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(t&7)&(1<<n)-1}function mc(e,t){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(t&7)}const qt=function(){var e=Uint16Array,t=Uint32Array;return{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(1<<15),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(1<<16),prev:new e(1<<15)}}();(function(){for(var e=1<<15,t=0;t<e;t++){var n=t;n=(n&2863311530)>>>1|(n&1431655765)<<1,n=(n&3435973836)>>>2|(n&858993459)<<2,n=(n&4042322160)>>>4|(n&252645135)<<4,n=(n&4278255360)>>>8|(n&16711935)<<8,qt.rev15[t]=(n>>>16|n<<16)>>>17}function i(o,a,s){for(;a--!=0;)o.push(0,s)}for(var t=0;t<32;t++)qt.ldef[t]=qt.of0[t]<<3|qt.exb[t],qt.ddef[t]=qt.df0[t]<<4|qt.dxb[t];i(qt.fltree,144,8),i(qt.fltree,255-143,9),i(qt.fltree,279-255,7),i(qt.fltree,287-279,8),xi(qt.fltree,9),Ni(qt.fltree,9,qt.flmap),gc(qt.fltree,9),i(qt.fdtree,32,5),xi(qt.fdtree,5),Ni(qt.fdtree,5,qt.fdmap),gc(qt.fdtree,5),i(qt.itree,19,0),i(qt.ltree,286,0),i(qt.dtree,30,0),i(qt.ttree,320,0)})();const yc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var n=t,i=0;i<8;i++)n&1?n=3988292384^n>>>1:n=n>>>1;e[t]=n}return e}(),update:function(e,t,n,i){for(var o=0;o<i;o++)e=yc.table[(e^t[n+o])&255]^e>>>8;return e},crc:function(e,t,n){return yc.update(4294967295,e,t,n)^4294967295}};function Cd(e,t){return wd(e,t)}const Ac={numWorkers:1,workerURL:"",useWorkers:!1};let bd=0;const ho=[];function Er(e){return new Promise((t,n)=>{const i=new Worker(e);i.onmessage=o=>{o.data==="start"?(i.onerror=void 0,i.onmessage=void 0,t(i)):n(new Error(`unexpected message: ${o.data}`))},i.onerror=n})}function Fd(e,t){return e.require(t)}(function(){if(Id){const{Worker:e}=Fd(module,"worker_threads");return{async createWorker(t){return new e(t)},addEventListener(t,n){t.on("message",i=>{n({target:t,data:i})})},async terminate(t){await t.terminate()}}}else return{async createWorker(e){try{return await Er(e)}catch{console.warn("could not load worker:",e)}let t;try{const n=await fetch(e,{mode:"cors"});if(!n.ok)throw new Error(`could not load: ${e}`);t=await n.text(),e=URL.createObjectURL(new Blob([t],{type:"application/javascript"}));const i=await Er(e);return Ac.workerURL=e,i}catch{console.warn("could not load worker via fetch:",e)}if(t!==void 0)try{e=`data:application/javascript;base64,${btoa(t)}`;const n=await Er(e);return Ac.workerURL=e,n}catch{console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(e,t){e.addEventListener("message",t)},async terminate(e){e.terminate()}}})();function Bd(e,t,n,i){const o=new Uint8Array(t);Cd(e,o),i(n?new Blob([o],{type:n}):o.buffer)}async function Td(){if(ho.length!==0)for(;ho.length;){const{src:e,uncompressedSize:t,type:n,resolve:i}=ho.shift();let o=e;fc(e)&&(o=await Ld(e)),Bd(o,t,n,i)}}function Lc(e,t,n){return new Promise((i,o)=>{ho.push({src:e,uncompressedSize:t,type:n,resolve:i,reject:o,id:bd++}),Td()})}function Rd(e,t){const n=e&31,i=(e>>5&15)-1,o=(e>>9&127)+1980,a=0,s=(t&31)*2,d=t>>5&63,g=t>>11&31;return new Date(o,i,n,g,d,s,a)}class Od{constructor(t,n){this._reader=t,this._rawEntry=n,this.name=n.name,this.nameBytes=n.nameBytes,this.size=n.uncompressedSize,this.compressedSize=n.compressedSize,this.comment=n.comment,this.commentBytes=n.commentBytes,this.compressionMethod=n.compressionMethod,this.lastModDate=Rd(n.lastModFileDate,n.lastModFileTime),this.isDirectory=n.uncompressedSize===0&&n.name.endsWith("/"),this.encrypted=!!(n.generalPurposeBitFlag&1),this.externalFileAttributes=n.externalFileAttributes,this.versionMadeBy=n.versionMadeBy}async blob(t="application/octet-stream"){return await Qd(this._reader,this._rawEntry,t)}async arrayBuffer(){return await qd(this._reader,this._rawEntry)}async text(){const t=await this.arrayBuffer();return Mi(new Uint8Array(t))}async json(){const t=await this.text();return JSON.parse(t)}}const wr=22,Pd=65535,xd=101010256,Nd=101075792;async function ui(e,t,n){return await e.read(t,n)}async function Sr(e,t,n,i){return e.sliceAsBlob?await e.sliceAsBlob(t,n,i):await e.read(t,n)}const Md={unsigned(){return 0}};function pe(e,t){return e[t]+e[t+1]*256}function Ce(e,t){return e[t]+e[t+1]*256+e[t+2]*65536+e[t+3]*16777216}function qn(e,t){return Ce(e,t)+Ce(e,t+4)*4294967296}const Ud=new TextDecoder;function Mi(e,t){return Pi(e.buffer)&&(e=new Uint8Array(e)),Ud.decode(e)}async function Dd(e,t){const n=Math.min(wr+Pd,t),i=t-n,o=await ui(e,i,n);for(let a=n-wr;a>=0;--a){if(Ce(o,a)!==xd)continue;const s=new Uint8Array(o.buffer,o.byteOffset+a,o.byteLength-a),d=pe(s,4);if(d!==0)throw new Error(`multi-volume zip files are not supported. This is volume: ${d}`);const g=pe(s,10),f=Ce(s,12),l=Ce(s,16),m=pe(s,20),A=s.length-wr;if(m!==A)throw new Error(`invalid comment length. expected: ${A}, actual: ${m}`);const _=new Uint8Array(s.buffer,s.byteOffset+22,m),R=Mi(_);return g===65535||l===4294967295?await kd(e,i+a,R,_):await Ic(e,l,f,g,R,_)}throw new Error("could not find end of central directory. maybe not zip file")}const Gd=117853008;async function kd(e,t,n,i){const o=t-20,a=await ui(e,o,20);if(Ce(a,0)!==Gd)throw new Error("invalid zip64 end of central directory locator signature");const s=qn(a,8),d=await ui(e,s,56);if(Ce(d,0)!==Nd)throw new Error("invalid zip64 end of central directory record signature");const g=qn(d,32),f=qn(d,40),l=qn(d,48);return Ic(e,l,f,g,n,i)}const Wd=33639248;async function Ic(e,t,n,i,o,a){let s=0;const d=await ui(e,t,n),g=[];for(let l=0;l<i;++l){const m=d.subarray(s,s+46),A=Ce(m,0);if(A!==Wd)throw new Error(`invalid central directory file header signature: 0x${A.toString(16)}`);const _={versionMadeBy:pe(m,4),versionNeededToExtract:pe(m,6),generalPurposeBitFlag:pe(m,8),compressionMethod:pe(m,10),lastModFileTime:pe(m,12),lastModFileDate:pe(m,14),crc32:Ce(m,16),compressedSize:Ce(m,20),uncompressedSize:Ce(m,24),fileNameLength:pe(m,28),extraFieldLength:pe(m,30),fileCommentLength:pe(m,32),internalFileAttributes:pe(m,36),externalFileAttributes:Ce(m,38),relativeOffsetOfLocalHeader:Ce(m,42)};if(_.generalPurposeBitFlag&64)throw new Error("strong encryption is not supported");s+=46;const R=d.subarray(s,s+_.fileNameLength+_.extraFieldLength+_.fileCommentLength);_.nameBytes=R.slice(0,_.fileNameLength),_.name=Mi(_.nameBytes);const x=_.fileNameLength+_.extraFieldLength,C=R.slice(_.fileNameLength,x);_.extraFields=[];let k=0;for(;k<C.length-3;){const Z=pe(C,k+0),z=pe(C,k+2),K=k+4,T=K+z;if(T>C.length)throw new Error("extra field length exceeds extra field buffer size");_.extraFields.push({id:Z,data:C.slice(K,T)}),k=T}if(_.commentBytes=R.slice(x,x+_.fileCommentLength),_.comment=Mi(_.commentBytes),s+=R.length,_.uncompressedSize===4294967295||_.compressedSize===4294967295||_.relativeOffsetOfLocalHeader===4294967295){const Z=_.extraFields.find(T=>T.id===1);if(!Z)throw new Error("expected zip64 extended information extra field");const z=Z.data;let K=0;if(_.uncompressedSize===4294967295){if(K+8>z.length)throw new Error("zip64 extended information extra field does not include uncompressed size");_.uncompressedSize=qn(z,K),K+=8}if(_.compressedSize===4294967295){if(K+8>z.length)throw new Error("zip64 extended information extra field does not include compressed size");_.compressedSize=qn(z,K),K+=8}if(_.relativeOffsetOfLocalHeader===4294967295){if(K+8>z.length)throw new Error("zip64 extended information extra field does not include relative header offset");_.relativeOffsetOfLocalHeader=qn(z,K),K+=8}}const O=_.extraFields.find(Z=>Z.id===28789&&Z.data.length>=6&&Z.data[0]===1&&Ce(Z.data,1),Md.unsigned(_.nameBytes));if(O&&(_.fileName=Mi(O.data.slice(5))),_.compressionMethod===0){let Z=_.uncompressedSize;if((_.generalPurposeBitFlag&1)!=0&&(Z+=12),_.compressedSize!==Z)throw new Error(`compressed size mismatch for stored file: ${_.compressedSize} != ${Z}`)}g.push(_)}return{zip:{comment:o,commentBytes:a},entries:g.map(l=>new Od(e,l))}}async function Ec(e,t){if(t.generalPurposeBitFlag&1)throw new Error("encrypted entries not supported");const n=await ui(e,t.relativeOffsetOfLocalHeader,30),i=await e.getLength(),o=Ce(n,0);if(o!==67324752)throw new Error(`invalid local file header signature: 0x${o.toString(16)}`);const a=pe(n,26),s=pe(n,28),d=t.relativeOffsetOfLocalHeader+n.length+a+s;let g;if(t.compressionMethod===0)g=!1;else if(t.compressionMethod===8)g=!0;else throw new Error(`unsupported compression method: ${t.compressionMethod}`);const f=d,l=f+t.compressedSize;if(t.compressedSize!==0&&l>i)throw new Error(`file data overflows file bounds: ${f} +  ${t.compressedSize}  > ${i}`);return{decompress:g,fileDataStart:f}}async function qd(e,t){const{decompress:n,fileDataStart:i}=await Ec(e,t);if(!n){const s=await ui(e,i,t.compressedSize);return Ed(s)?s.buffer:s.slice().buffer}const o=await Sr(e,i,t.compressedSize);return await Lc(o,t.uncompressedSize)}async function Qd(e,t,n){const{decompress:i,fileDataStart:o}=await Ec(e,t);if(!i){const d=await Sr(e,o,t.compressedSize,n);return fc(d)?d:new Blob([Pi(d.buffer)?new Uint8Array(d):d],{type:n})}const a=await Sr(e,o,t.compressedSize);return await Lc(a,t.uncompressedSize,n)}async function Hd(e){let t;if(typeof Blob!="undefined"&&e instanceof Blob)t=new hc(e);else if(e instanceof ArrayBuffer||e&&e.buffer&&e.buffer instanceof ArrayBuffer)t=new dc(e);else if(Pi(e)||Pi(e.buffer))t=new dc(e);else if(typeof e=="string"){const i=await fetch(e);if(!i.ok)throw new Error(`failed http request ${e}, status: ${i.status}: ${i.statusText}`);const o=await i.blob();t=new hc(o)}else if(typeof e.getLength=="function"&&typeof e.read=="function")t=e;else throw new Error("unsupported source type");const n=await t.getLength();if(n>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${n}. Only file sizes up 4503599627370496 bytes are supported`);return await Dd(t,n)}async function zd(e){const{zip:t,entries:n}=await Hd(e);return{zip:t,entries:Object.fromEntries(n.map(i=>[i.name,i]))}}var $d="circomlib.acbc52cb.zip",Yd="circom.836a5901.wasm";globalThis.process={cwd(){return""}},globalThis.Buffer=St;const jd=Math.floor((Date.now()-performance.now())*.001);function Kd(){let e=performance.now()*.001,t=Math.floor(e)+jd,n=Math.floor(e%1*1e9);return t*1e9+n}function Vd(e,t,n){if(e instanceof Uint8Array)for(let i=t;i<t+n;i++)e[i]=Math.floor(Math.random()*256);return e}const Zd={hrtime:Kd,exit:e=>{throw new Zu(e)},kill:e=>{throw new Ju(e)},randomFillSync:Vd,isTTY:()=>!0,path:ef,fs:null};async function Jd(e){const t=await fetch(e),n=t.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&n.startsWith("application/wasm"))return await WebAssembly.compileStreaming(t);{const i=await t.arrayBuffer();return await WebAssembly.compile(i)}}async function Xd(){const e=new Ad,{entries:t}=await zd($d);for(const[n,i]of Object.entries(t)){const o=await t[n].arrayBuffer();e.fs.writeFileSync(n.replace("circomlib-master/circuits/","circomlib/"),new Uint8Array(o)),e.fs.writeFileSync(n.replace("circomlib-master/circuits/","circomlib/circuits/"),new Uint8Array(o))}return e}const Ui=Xd();function wc(e){return e.replace(/(include\s+")([^"]+)"/g,(t,n,i)=>i.startsWith("gist:")?n+i.replace("gist:","external/https/gist.github.com/")+'"':t.replace(/(include\s+")(\w+):\/\//,"$1external/$2/"))}async function th(e="main.circom",t={nosym:!1,nowasm:!1,nor1cs:!1}){const n=await Ui;let i=10*1024*1024,o=new Uint8Array(i),a=-1,s=0,d=0,g;const f=ma(Bo({},n.fs),{realpathSync(m){const A=m.replace(/.*circomlib\//,"circomlib/");return m.includes("circomlib/")&&n.fs.existsSync(A)?A:(m.startsWith("external/")&&!n.fs.existsSync(m)&&(g=m),n.fs.realpathSync(m))},writeSync(m,A,_,R,x){return a===m&&s+R<i&&x===d+s?(o.set(A,s),s+=R,R):(a>=0&&n.fs.writeSync(a,o,0,s,d),a=m,s=0,o.set(A,s),s+=R,d=x,R)},closeSync(m){if(a>=0&&(n.fs.writeSync(a,o,0,s,d),a=-1,s=0,d=0),m>=0)return n.fs.closeSync(m)}}),l=await Jd(Yd);for(;;){let m=new Xu({args:["circom2",e,!t.nor1cs&&"--r1cs",!t.nowasm&&"--wasm",!t.nosym&&"--sym"].filter(_=>_!==!1),env:{RUST_BACKTRACE:"1"},preopens:{".":"."},bindings:ma(Bo({},Zd),{fs:f})});g=void 0,m.bindings.fs.writeFileSync("/dev/stderr",""),m.bindings.fs.writeFileSync("/dev/stdout","");let A=await WebAssembly.instantiate(l,Bo({},m.getImports(l)));try{m.start(A)}catch(_){console.log(_)}if(m.bindings.fs.closeSync(-1),g){console.log("Fetching",g);const _=await nh(g),R=wc(eh(_));m.bindings.fs.mkdirSync(Wo.dirname(g),{recursive:!0}),m.bindings.fs.writeFileSync(g,R);continue}break}}function eh(e){return e.replace(/(component\s+main[^;]+;)/,"/* $1 */")}async function Di(e){let t;try{t=await fetch(e)}catch{throw new Error(`Failed to fetch ${e}`)}if(t.status!==200)throw new Error(`Error ${t.status}: ${e}`);return await t.text()}async function Sc(e){const n=await(await fetch(`https://api.github.com/gists/${e}`)).json();if(n.files["main.circom"])return n.files["main.circom"].content;const i=Object.keys(n.files).find(o=>o.endsWith(".circom"));return i?n.files[i].content:Object.values(n.files)[0].content}async function nh(e){let t=[];const n=i=>t=i.exec(e);if(n(/^external\/https\/gist\.github\.com\/([^/]+)\/([\da-f]{32})/))return Sc(t[2]);if(n(/^external\/https\/gist\.github\.com\/([\da-f]{32})/))return Sc(t[1]);if(n(/^external\/https\/github\.com\/([^/]+)\/([^/]+)\/blob\/([^/]+)\/(.*)/))return Di(`https://raw.githubusercontent.com/${t[1]}/${t[2]}/${t[3]}/${t[4]}`);if(n(/^external\/ipfs\/(.*)$/))return Di(`https://cloudflare-ipfs.com/ipfs/${t[1]}`);if(n(/^external\/dweb\/ipfs\/(.*)$/))return Di(`https://cloudflare-ipfs.com/ipfs/${t[1]}`);if(n(/^external\/https\/(.*)$/))return Di(`https://${t[1]}`);if(n(/^external\/http\/(.*)$/))return Di(`http://${t[1]}`)}const ih=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function vc(e,t){if(!t||t==10)return BigInt(e);if(t==16)return e.slice(0,2)=="0x"?BigInt(e):BigInt("0x"+e)}const oh=vc;function rh(e,t){let n=BigInt(0);t=BigInt(t);for(let i=0;i<e.length;i++)n=n*t+BigInt(e[i]);return n}function ah(e){const t=e.toString(16);return(t.length-1)*4+ih[parseInt(t[0],16)]}function sh(e){return BigInt(e)<BigInt(0)}function ch(e){return!e}function Cc(e,t){return BigInt(e)<<BigInt(t)}function bc(e,t){return BigInt(e)>>BigInt(t)}const lh=Cc,uh=bc;function fh(e){return(BigInt(e)&BigInt(1))==BigInt(1)}function dh(e){let t=BigInt(e);const n=[];for(;t;){if(t&BigInt(1)){const i=2-Number(t%BigInt(4));n.push(i),t=t-BigInt(i)}else n.push(0);t=t>>BigInt(1)}return n}function hh(e){let t=BigInt(e);const n=[];for(;t;)t&BigInt(1)?n.push(1):n.push(0),t=t>>BigInt(1);return n}function _h(e){if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("Number too big");return Number(e)}function gh(e,t){const n=[];let i=BigInt(e);for(t=BigInt(t);i;)n.unshift(Number(i%t)),i=i/t;return n}function ph(e,t){return BigInt(e)+BigInt(t)}function mh(e,t){return BigInt(e)-BigInt(t)}function yh(e){return-BigInt(e)}function Ah(e,t){return BigInt(e)*BigInt(t)}function Lh(e){return BigInt(e)*BigInt(e)}function Ih(e,t){return BigInt(e)**BigInt(t)}function Eh(e,t){return BigInt(e)**BigInt(t)}function wh(e){return BigInt(e)>=0?BigInt(e):-BigInt(e)}function Sh(e,t){return BigInt(e)/BigInt(t)}function vh(e,t){return BigInt(e)%BigInt(t)}function Ch(e,t){return BigInt(e)==BigInt(t)}function bh(e,t){return BigInt(e)!=BigInt(t)}function Fh(e,t){return BigInt(e)<BigInt(t)}function Bh(e,t){return BigInt(e)>BigInt(t)}function Th(e,t){return BigInt(e)<=BigInt(t)}function Rh(e,t){return BigInt(e)>=BigInt(t)}function Oh(e,t){return BigInt(e)&BigInt(t)}function Ph(e,t){return BigInt(e)|BigInt(t)}function xh(e,t){return BigInt(e)^BigInt(t)}function Nh(e,t){return BigInt(e)&&BigInt(t)}function Mh(e,t){return BigInt(e)||BigInt(t)}function Uh(e){return!BigInt(e)}var Dh=Object.freeze({__proto__:null,fromString:vc,e:oh,fromArray:rh,bitLength:ah,isNegative:sh,isZero:ch,shiftLeft:Cc,shiftRight:bc,shl:lh,shr:uh,isOdd:fh,naf:dh,bits:hh,toNumber:_h,toArray:gh,add:ph,sub:mh,neg:yh,mul:Ah,square:Lh,pow:Ih,exp:Eh,abs:wh,div:Sh,mod:vh,eq:Ch,neq:bh,lt:Fh,gt:Bh,leq:Th,geq:Rh,band:Oh,bor:Ph,bxor:xh,land:Nh,lor:Mh,lnot:Uh}),en={exports:{}};(function(e){var t=function(n){var i=1e7,o=7,a=9007199254740992,s=R(a),d="0123456789abcdefghijklmnopqrstuvwxyz",g=typeof BigInt=="function";function f(b,P,W,Q){return typeof b=="undefined"?f[0]:typeof P!="undefined"?+P==10&&!W?Ct(b):Tt(b,P,W,Q):Ct(b)}function l(b,P){this.value=b,this.sign=P,this.isSmall=!1}l.prototype=Object.create(f.prototype);function m(b){this.value=b,this.sign=b<0,this.isSmall=!0}m.prototype=Object.create(f.prototype);function A(b){this.value=b}A.prototype=Object.create(f.prototype);function _(b){return-a<b&&b<a}function R(b){return b<1e7?[b]:b<1e14?[b%1e7,Math.floor(b/1e7)]:[b%1e7,Math.floor(b/1e7)%1e7,Math.floor(b/1e14)]}function x(b){C(b);var P=b.length;if(P<4&&ot(b,s)<0)switch(P){case 0:return 0;case 1:return b[0];case 2:return b[0]+b[1]*i;default:return b[0]+(b[1]+b[2]*i)*i}return b}function C(b){for(var P=b.length;b[--P]===0;);b.length=P+1}function k(b){for(var P=new Array(b),W=-1;++W<b;)P[W]=0;return P}function O(b){return b>0?Math.floor(b):Math.ceil(b)}function Z(b,P){var W=b.length,Q=P.length,X=new Array(W),J=0,rt=i,E,r;for(r=0;r<Q;r++)E=b[r]+P[r]+J,J=E>=rt?1:0,X[r]=E-J*rt;for(;r<W;)E=b[r]+J,J=E===rt?1:0,X[r++]=E-J*rt;return J>0&&X.push(J),X}function z(b,P){return b.length>=P.length?Z(b,P):Z(P,b)}function K(b,P){var W=b.length,Q=new Array(W),X=i,J,rt;for(rt=0;rt<W;rt++)J=b[rt]-X+P,P=Math.floor(J/X),Q[rt]=J-P*X,P+=1;for(;P>0;)Q[rt++]=P%X,P=Math.floor(P/X);return Q}l.prototype.add=function(b){var P=Ct(b);if(this.sign!==P.sign)return this.subtract(P.negate());var W=this.value,Q=P.value;return P.isSmall?new l(K(W,Math.abs(Q)),this.sign):new l(z(W,Q),this.sign)},l.prototype.plus=l.prototype.add,m.prototype.add=function(b){var P=Ct(b),W=this.value;if(W<0!==P.sign)return this.subtract(P.negate());var Q=P.value;if(P.isSmall){if(_(W+Q))return new m(W+Q);Q=R(Math.abs(Q))}return new l(K(Q,Math.abs(W)),W<0)},m.prototype.plus=m.prototype.add,A.prototype.add=function(b){return new A(this.value+Ct(b).value)},A.prototype.plus=A.prototype.add;function T(b,P){var W=b.length,Q=P.length,X=new Array(W),J=0,rt=i,E,r;for(E=0;E<Q;E++)r=b[E]-J-P[E],r<0?(r+=rt,J=1):J=0,X[E]=r;for(E=Q;E<W;E++){if(r=b[E]-J,r<0)r+=rt;else{X[E++]=r;break}X[E]=r}for(;E<W;E++)X[E]=b[E];return C(X),X}function p(b,P,W){var Q;return ot(b,P)>=0?Q=T(b,P):(Q=T(P,b),W=!W),Q=x(Q),typeof Q=="number"?(W&&(Q=-Q),new m(Q)):new l(Q,W)}function w(b,P,W){var Q=b.length,X=new Array(Q),J=-P,rt=i,E,r;for(E=0;E<Q;E++)r=b[E]+J,J=Math.floor(r/rt),r%=rt,X[E]=r<0?r+rt:r;return X=x(X),typeof X=="number"?(W&&(X=-X),new m(X)):new l(X,W)}l.prototype.subtract=function(b){var P=Ct(b);if(this.sign!==P.sign)return this.add(P.negate());var W=this.value,Q=P.value;return P.isSmall?w(W,Math.abs(Q),this.sign):p(W,Q,this.sign)},l.prototype.minus=l.prototype.subtract,m.prototype.subtract=function(b){var P=Ct(b),W=this.value;if(W<0!==P.sign)return this.add(P.negate());var Q=P.value;return P.isSmall?new m(W-Q):w(Q,Math.abs(W),W>=0)},m.prototype.minus=m.prototype.subtract,A.prototype.subtract=function(b){return new A(this.value-Ct(b).value)},A.prototype.minus=A.prototype.subtract,l.prototype.negate=function(){return new l(this.value,!this.sign)},m.prototype.negate=function(){var b=this.sign,P=new m(-this.value);return P.sign=!b,P},A.prototype.negate=function(){return new A(-this.value)},l.prototype.abs=function(){return new l(this.value,!1)},m.prototype.abs=function(){return new m(Math.abs(this.value))},A.prototype.abs=function(){return new A(this.value>=0?this.value:-this.value)};function D(b,P){var W=b.length,Q=P.length,X=W+Q,J=k(X),rt=i,E,r,c,y,v;for(c=0;c<W;++c){y=b[c];for(var B=0;B<Q;++B)v=P[B],E=y*v+J[c+B],r=Math.floor(E/rt),J[c+B]=E-r*rt,J[c+B+1]+=r}return C(J),J}function $(b,P){var W=b.length,Q=new Array(W),X=i,J=0,rt,E;for(E=0;E<W;E++)rt=b[E]*P+J,J=Math.floor(rt/X),Q[E]=rt-J*X;for(;J>0;)Q[E++]=J%X,J=Math.floor(J/X);return Q}function U(b,P){for(var W=[];P-- >0;)W.push(0);return W.concat(b)}function M(b,P){var W=Math.max(b.length,P.length);if(W<=30)return D(b,P);W=Math.ceil(W/2);var Q=b.slice(W),X=b.slice(0,W),J=P.slice(W),rt=P.slice(0,W),E=M(X,rt),r=M(Q,J),c=M(z(X,Q),z(rt,J)),y=z(z(E,U(T(T(c,E),r),W)),U(r,2*W));return C(y),y}function S(b,P){return-.012*b-.012*P+15e-6*b*P>0}l.prototype.multiply=function(b){var P=Ct(b),W=this.value,Q=P.value,X=this.sign!==P.sign,J;if(P.isSmall){if(Q===0)return f[0];if(Q===1)return this;if(Q===-1)return this.negate();if(J=Math.abs(Q),J<i)return new l($(W,J),X);Q=R(J)}return S(W.length,Q.length)?new l(M(W,Q),X):new l(D(W,Q),X)},l.prototype.times=l.prototype.multiply;function q(b,P,W){return b<i?new l($(P,b),W):new l(D(P,R(b)),W)}m.prototype._multiplyBySmall=function(b){return _(b.value*this.value)?new m(b.value*this.value):q(Math.abs(b.value),R(Math.abs(this.value)),this.sign!==b.sign)},l.prototype._multiplyBySmall=function(b){return b.value===0?f[0]:b.value===1?this:b.value===-1?this.negate():q(Math.abs(b.value),this.value,this.sign!==b.sign)},m.prototype.multiply=function(b){return Ct(b)._multiplyBySmall(this)},m.prototype.times=m.prototype.multiply,A.prototype.multiply=function(b){return new A(this.value*Ct(b).value)},A.prototype.times=A.prototype.multiply;function tt(b){var P=b.length,W=k(P+P),Q=i,X,J,rt,E,r;for(rt=0;rt<P;rt++){E=b[rt],J=0-E*E;for(var c=rt;c<P;c++)r=b[c],X=2*(E*r)+W[rt+c]+J,J=Math.floor(X/Q),W[rt+c]=X-J*Q;W[rt+P]=J}return C(W),W}l.prototype.square=function(){return new l(tt(this.value),!1)},m.prototype.square=function(){var b=this.value*this.value;return _(b)?new m(b):new l(tt(R(Math.abs(this.value))),!1)},A.prototype.square=function(b){return new A(this.value*this.value)};function ft(b,P){var W=b.length,Q=P.length,X=i,J=k(P.length),rt=P[Q-1],E=Math.ceil(X/(2*rt)),r=$(b,E),c=$(P,E),y,v,B,G,j,et,ut;for(r.length<=W&&r.push(0),c.push(0),rt=c[Q-1],v=W-Q;v>=0;v--){for(y=X-1,r[v+Q]!==rt&&(y=Math.floor((r[v+Q]*X+r[v+Q-1])/rt)),B=0,G=0,et=c.length,j=0;j<et;j++)B+=y*c[j],ut=Math.floor(B/X),G+=r[v+j]-(B-ut*X),B=ut,G<0?(r[v+j]=G+X,G=-1):(r[v+j]=G,G=0);for(;G!==0;){for(y-=1,B=0,j=0;j<et;j++)B+=r[v+j]-X+c[j],B<0?(r[v+j]=B+X,B=0):(r[v+j]=B,B=1);G+=B}J[v]=y}return r=nt(r,E)[0],[x(J),x(r)]}function it(b,P){for(var W=b.length,Q=P.length,X=[],J=[],rt=i,E,r,c,y,v;W;){if(J.unshift(b[--W]),C(J),ot(J,P)<0){X.push(0);continue}r=J.length,c=J[r-1]*rt+J[r-2],y=P[Q-1]*rt+P[Q-2],r>Q&&(c=(c+1)*rt),E=Math.ceil(c/y);do{if(v=$(P,E),ot(v,J)<=0)break;E--}while(E);X.push(E),J=T(J,v)}return X.reverse(),[x(X),x(J)]}function nt(b,P){var W=b.length,Q=k(W),X=i,J,rt,E,r;for(E=0,J=W-1;J>=0;--J)r=E*X+b[J],rt=O(r/P),E=r-rt*P,Q[J]=rt|0;return[Q,E|0]}function gt(b,P){var W,Q=Ct(P);if(g)return[new A(b.value/Q.value),new A(b.value%Q.value)];var X=b.value,J=Q.value,rt;if(J===0)throw new Error("Cannot divide by zero");if(b.isSmall)return Q.isSmall?[new m(O(X/J)),new m(X%J)]:[f[0],b];if(Q.isSmall){if(J===1)return[b,f[0]];if(J==-1)return[b.negate(),f[0]];var E=Math.abs(J);if(E<i){W=nt(X,E),rt=x(W[0]);var r=W[1];return b.sign&&(r=-r),typeof rt=="number"?(b.sign!==Q.sign&&(rt=-rt),[new m(rt),new m(r)]):[new l(rt,b.sign!==Q.sign),new m(r)]}J=R(E)}var c=ot(X,J);if(c===-1)return[f[0],b];if(c===0)return[f[b.sign===Q.sign?1:-1],f[0]];X.length+J.length<=200?W=ft(X,J):W=it(X,J),rt=W[0];var y=b.sign!==Q.sign,v=W[1],B=b.sign;return typeof rt=="number"?(y&&(rt=-rt),rt=new m(rt)):rt=new l(rt,y),typeof v=="number"?(B&&(v=-v),v=new m(v)):v=new l(v,B),[rt,v]}l.prototype.divmod=function(b){var P=gt(this,b);return{quotient:P[0],remainder:P[1]}},A.prototype.divmod=m.prototype.divmod=l.prototype.divmod,l.prototype.divide=function(b){return gt(this,b)[0]},A.prototype.over=A.prototype.divide=function(b){return new A(this.value/Ct(b).value)},m.prototype.over=m.prototype.divide=l.prototype.over=l.prototype.divide,l.prototype.mod=function(b){return gt(this,b)[1]},A.prototype.mod=A.prototype.remainder=function(b){return new A(this.value%Ct(b).value)},m.prototype.remainder=m.prototype.mod=l.prototype.remainder=l.prototype.mod,l.prototype.pow=function(b){var P=Ct(b),W=this.value,Q=P.value,X,J,rt;if(Q===0)return f[1];if(W===0)return f[0];if(W===1)return f[1];if(W===-1)return P.isEven()?f[1]:f[-1];if(P.sign)return f[0];if(!P.isSmall)throw new Error("The exponent "+P.toString()+" is too large.");if(this.isSmall&&_(X=Math.pow(W,Q)))return new m(O(X));for(J=this,rt=f[1];Q&!0&&(rt=rt.times(J),--Q),Q!==0;)Q/=2,J=J.square();return rt},m.prototype.pow=l.prototype.pow,A.prototype.pow=function(b){var P=Ct(b),W=this.value,Q=P.value,X=BigInt(0),J=BigInt(1),rt=BigInt(2);if(Q===X)return f[1];if(W===X)return f[0];if(W===J)return f[1];if(W===BigInt(-1))return P.isEven()?f[1]:f[-1];if(P.isNegative())return new A(X);for(var E=this,r=f[1];(Q&J)===J&&(r=r.times(E),--Q),Q!==X;)Q/=rt,E=E.square();return r},l.prototype.modPow=function(b,P){if(b=Ct(b),P=Ct(P),P.isZero())throw new Error("Cannot take modPow with modulus 0");var W=f[1],Q=this.mod(P);for(b.isNegative()&&(b=b.multiply(f[-1]),Q=Q.modInv(P));b.isPositive();){if(Q.isZero())return f[0];b.isOdd()&&(W=W.multiply(Q).mod(P)),b=b.divide(2),Q=Q.square().mod(P)}return W},A.prototype.modPow=m.prototype.modPow=l.prototype.modPow;function ot(b,P){if(b.length!==P.length)return b.length>P.length?1:-1;for(var W=b.length-1;W>=0;W--)if(b[W]!==P[W])return b[W]>P[W]?1:-1;return 0}l.prototype.compareAbs=function(b){var P=Ct(b),W=this.value,Q=P.value;return P.isSmall?1:ot(W,Q)},m.prototype.compareAbs=function(b){var P=Ct(b),W=Math.abs(this.value),Q=P.value;return P.isSmall?(Q=Math.abs(Q),W===Q?0:W>Q?1:-1):-1},A.prototype.compareAbs=function(b){var P=this.value,W=Ct(b).value;return P=P>=0?P:-P,W=W>=0?W:-W,P===W?0:P>W?1:-1},l.prototype.compare=function(b){if(b===1/0)return-1;if(b===-1/0)return 1;var P=Ct(b),W=this.value,Q=P.value;return this.sign!==P.sign?P.sign?1:-1:P.isSmall?this.sign?-1:1:ot(W,Q)*(this.sign?-1:1)},l.prototype.compareTo=l.prototype.compare,m.prototype.compare=function(b){if(b===1/0)return-1;if(b===-1/0)return 1;var P=Ct(b),W=this.value,Q=P.value;return P.isSmall?W==Q?0:W>Q?1:-1:W<0!==P.sign?W<0?-1:1:W<0?1:-1},m.prototype.compareTo=m.prototype.compare,A.prototype.compare=function(b){if(b===1/0)return-1;if(b===-1/0)return 1;var P=this.value,W=Ct(b).value;return P===W?0:P>W?1:-1},A.prototype.compareTo=A.prototype.compare,l.prototype.equals=function(b){return this.compare(b)===0},A.prototype.eq=A.prototype.equals=m.prototype.eq=m.prototype.equals=l.prototype.eq=l.prototype.equals,l.prototype.notEquals=function(b){return this.compare(b)!==0},A.prototype.neq=A.prototype.notEquals=m.prototype.neq=m.prototype.notEquals=l.prototype.neq=l.prototype.notEquals,l.prototype.greater=function(b){return this.compare(b)>0},A.prototype.gt=A.prototype.greater=m.prototype.gt=m.prototype.greater=l.prototype.gt=l.prototype.greater,l.prototype.lesser=function(b){return this.compare(b)<0},A.prototype.lt=A.prototype.lesser=m.prototype.lt=m.prototype.lesser=l.prototype.lt=l.prototype.lesser,l.prototype.greaterOrEquals=function(b){return this.compare(b)>=0},A.prototype.geq=A.prototype.greaterOrEquals=m.prototype.geq=m.prototype.greaterOrEquals=l.prototype.geq=l.prototype.greaterOrEquals,l.prototype.lesserOrEquals=function(b){return this.compare(b)<=0},A.prototype.leq=A.prototype.lesserOrEquals=m.prototype.leq=m.prototype.lesserOrEquals=l.prototype.leq=l.prototype.lesserOrEquals,l.prototype.isEven=function(){return(this.value[0]&1)==0},m.prototype.isEven=function(){return(this.value&1)==0},A.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},l.prototype.isOdd=function(){return(this.value[0]&1)==1},m.prototype.isOdd=function(){return(this.value&1)==1},A.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},l.prototype.isPositive=function(){return!this.sign},m.prototype.isPositive=function(){return this.value>0},A.prototype.isPositive=m.prototype.isPositive,l.prototype.isNegative=function(){return this.sign},m.prototype.isNegative=function(){return this.value<0},A.prototype.isNegative=m.prototype.isNegative,l.prototype.isUnit=function(){return!1},m.prototype.isUnit=function(){return Math.abs(this.value)===1},A.prototype.isUnit=function(){return this.abs().value===BigInt(1)},l.prototype.isZero=function(){return!1},m.prototype.isZero=function(){return this.value===0},A.prototype.isZero=function(){return this.value===BigInt(0)},l.prototype.isDivisibleBy=function(b){var P=Ct(b);return P.isZero()?!1:P.isUnit()?!0:P.compareAbs(2)===0?this.isEven():this.mod(P).isZero()},A.prototype.isDivisibleBy=m.prototype.isDivisibleBy=l.prototype.isDivisibleBy;function It(b){var P=b.abs();if(P.isUnit())return!1;if(P.equals(2)||P.equals(3)||P.equals(5))return!0;if(P.isEven()||P.isDivisibleBy(3)||P.isDivisibleBy(5))return!1;if(P.lesser(49))return!0}function Ot(b,P){for(var W=b.prev(),Q=W,X=0,J,rt,E;Q.isEven();)Q=Q.divide(2),X++;t:for(rt=0;rt<P.length;rt++)if(!b.lesser(P[rt])&&(E=t(P[rt]).modPow(Q,b),!(E.isUnit()||E.equals(W)))){for(J=X-1;J!=0;J--){if(E=E.square().mod(b),E.isUnit())return!1;if(E.equals(W))continue t}return!1}return!0}l.prototype.isPrime=function(b){var P=It(this);if(P!==n)return P;var W=this.abs(),Q=W.bitLength();if(Q<=64)return Ot(W,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var X=Math.log(2)*Q.toJSNumber(),J=Math.ceil(b===!0?2*Math.pow(X,2):X),rt=[],E=0;E<J;E++)rt.push(t(E+2));return Ot(W,rt)},A.prototype.isPrime=m.prototype.isPrime=l.prototype.isPrime,l.prototype.isProbablePrime=function(b,P){var W=It(this);if(W!==n)return W;for(var Q=this.abs(),X=b===n?5:b,J=[],rt=0;rt<X;rt++)J.push(t.randBetween(2,Q.minus(2),P));return Ot(Q,J)},A.prototype.isProbablePrime=m.prototype.isProbablePrime=l.prototype.isProbablePrime,l.prototype.modInv=function(b){for(var P=t.zero,W=t.one,Q=Ct(b),X=this.abs(),J,rt,E;!X.isZero();)J=Q.divide(X),rt=P,E=Q,P=W,Q=X,W=rt.subtract(J.multiply(W)),X=E.subtract(J.multiply(X));if(!Q.isUnit())throw new Error(this.toString()+" and "+b.toString()+" are not co-prime");return P.compare(0)===-1&&(P=P.add(b)),this.isNegative()?P.negate():P},A.prototype.modInv=m.prototype.modInv=l.prototype.modInv,l.prototype.next=function(){var b=this.value;return this.sign?w(b,1,this.sign):new l(K(b,1),this.sign)},m.prototype.next=function(){var b=this.value;return b+1<a?new m(b+1):new l(s,!1)},A.prototype.next=function(){return new A(this.value+BigInt(1))},l.prototype.prev=function(){var b=this.value;return this.sign?new l(K(b,1),!0):w(b,1,this.sign)},m.prototype.prev=function(){var b=this.value;return b-1>-a?new m(b-1):new l(s,!0)},A.prototype.prev=function(){return new A(this.value-BigInt(1))};for(var Lt=[1];2*Lt[Lt.length-1]<=i;)Lt.push(2*Lt[Lt.length-1]);var vt=Lt.length,L=Lt[vt-1];function u(b){return Math.abs(b)<=i}l.prototype.shiftLeft=function(b){var P=Ct(b).toJSNumber();if(!u(P))throw new Error(String(P)+" is too large for shifting.");if(P<0)return this.shiftRight(-P);var W=this;if(W.isZero())return W;for(;P>=vt;)W=W.multiply(L),P-=vt-1;return W.multiply(Lt[P])},A.prototype.shiftLeft=m.prototype.shiftLeft=l.prototype.shiftLeft,l.prototype.shiftRight=function(b){var P,W=Ct(b).toJSNumber();if(!u(W))throw new Error(String(W)+" is too large for shifting.");if(W<0)return this.shiftLeft(-W);for(var Q=this;W>=vt;){if(Q.isZero()||Q.isNegative()&&Q.isUnit())return Q;P=gt(Q,L),Q=P[1].isNegative()?P[0].prev():P[0],W-=vt-1}return P=gt(Q,Lt[W]),P[1].isNegative()?P[0].prev():P[0]},A.prototype.shiftRight=m.prototype.shiftRight=l.prototype.shiftRight;function F(b,P,W){P=Ct(P);for(var Q=b.isNegative(),X=P.isNegative(),J=Q?b.not():b,rt=X?P.not():P,E=0,r=0,c=null,y=null,v=[];!J.isZero()||!rt.isZero();)c=gt(J,L),E=c[1].toJSNumber(),Q&&(E=L-1-E),y=gt(rt,L),r=y[1].toJSNumber(),X&&(r=L-1-r),J=c[0],rt=y[0],v.push(W(E,r));for(var B=W(Q?1:0,X?1:0)!==0?t(-1):t(0),G=v.length-1;G>=0;G-=1)B=B.multiply(L).add(t(v[G]));return B}l.prototype.not=function(){return this.negate().prev()},A.prototype.not=m.prototype.not=l.prototype.not,l.prototype.and=function(b){return F(this,b,function(P,W){return P&W})},A.prototype.and=m.prototype.and=l.prototype.and,l.prototype.or=function(b){return F(this,b,function(P,W){return P|W})},A.prototype.or=m.prototype.or=l.prototype.or,l.prototype.xor=function(b){return F(this,b,function(P,W){return P^W})},A.prototype.xor=m.prototype.xor=l.prototype.xor;var h=1<<30,H=(i&-i)*(i&-i)|h;function N(b){var P=b.value,W=typeof P=="number"?P|h:typeof P=="bigint"?P|BigInt(h):P[0]+P[1]*i|H;return W&-W}function I(b,P){if(P.compareTo(b)<=0){var W=I(b,P.square(P)),Q=W.p,X=W.e,J=Q.multiply(P);return J.compareTo(b)<=0?{p:J,e:X*2+1}:{p:Q,e:X*2}}return{p:t(1),e:0}}l.prototype.bitLength=function(){var b=this;return b.compareTo(t(0))<0&&(b=b.negate().subtract(t(1))),b.compareTo(t(0))===0?t(0):t(I(b,t(2)).e).add(t(1))},A.prototype.bitLength=m.prototype.bitLength=l.prototype.bitLength;function V(b,P){return b=Ct(b),P=Ct(P),b.greater(P)?b:P}function lt(b,P){return b=Ct(b),P=Ct(P),b.lesser(P)?b:P}function at(b,P){if(b=Ct(b).abs(),P=Ct(P).abs(),b.equals(P))return b;if(b.isZero())return P;if(P.isZero())return b;for(var W=f[1],Q,X;b.isEven()&&P.isEven();)Q=lt(N(b),N(P)),b=b.divide(Q),P=P.divide(Q),W=W.multiply(Q);for(;b.isEven();)b=b.divide(N(b));do{for(;P.isEven();)P=P.divide(N(P));b.greater(P)&&(X=P,P=b,b=X),P=P.subtract(b)}while(!P.isZero());return W.isUnit()?b:b.multiply(W)}function At(b,P){return b=Ct(b).abs(),P=Ct(P).abs(),b.divide(at(b,P)).multiply(P)}function Nt(b,P,W){b=Ct(b),P=Ct(P);var Q=W||Math.random,X=lt(b,P),J=V(b,P),rt=J.subtract(X).add(1);if(rt.isSmall)return X.add(Math.floor(Q()*rt));for(var E=pt(rt,i).value,r=[],c=!0,y=0;y<E.length;y++){var v=c?E[y]+(y+1<E.length?E[y+1]/i:0):i,B=O(Q()*v);r.push(B),B<E[y]&&(c=!1)}return X.add(f.fromArray(r,i,!1))}var Tt=function(b,P,W,Q){W=W||d,b=String(b),Q||(b=b.toLowerCase(),W=W.toLowerCase());var X=b.length,J,rt=Math.abs(P),E={};for(J=0;J<W.length;J++)E[W[J]]=J;for(J=0;J<X;J++){var r=b[J];if(r!=="-"&&r in E&&E[r]>=rt){if(r==="1"&&rt===1)continue;throw new Error(r+" is not a valid digit in base "+P+".")}}P=Ct(P);var c=[],y=b[0]==="-";for(J=y?1:0;J<b.length;J++){var r=b[J];if(r in E)c.push(Ct(E[r]));else if(r==="<"){var v=J;do J++;while(b[J]!==">"&&J<b.length);c.push(Ct(b.slice(v+1,J)))}else throw new Error(r+" is not a valid character")}return bt(c,P,y)};function bt(b,P,W){var Q=f[0],X=f[1],J;for(J=b.length-1;J>=0;J--)Q=Q.add(b[J].times(X)),X=X.times(P);return W?Q.negate():Q}function wt(b,P){return P=P||d,b<P.length?P[b]:"<"+b+">"}function pt(b,P){if(P=t(P),P.isZero()){if(b.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(P.equals(-1)){if(b.isZero())return{value:[0],isNegative:!1};if(b.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-b.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var W=Array.apply(null,Array(b.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return W.unshift([1]),{value:[].concat.apply([],W),isNegative:!1}}var Q=!1;if(b.isNegative()&&P.isPositive()&&(Q=!0,b=b.abs()),P.isUnit())return b.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(b.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:Q};for(var X=[],J=b,rt;J.isNegative()||J.compareAbs(P)>=0;){rt=J.divmod(P),J=rt.quotient;var E=rt.remainder;E.isNegative()&&(E=P.minus(E).abs(),J=J.next()),X.push(E.toJSNumber())}return X.push(J.toJSNumber()),{value:X.reverse(),isNegative:Q}}function Et(b,P,W){var Q=pt(b,P);return(Q.isNegative?"-":"")+Q.value.map(function(X){return wt(X,W)}).join("")}l.prototype.toArray=function(b){return pt(this,b)},m.prototype.toArray=function(b){return pt(this,b)},A.prototype.toArray=function(b){return pt(this,b)},l.prototype.toString=function(b,P){if(b===n&&(b=10),b!==10)return Et(this,b,P);for(var W=this.value,Q=W.length,X=String(W[--Q]),J="0000000",rt;--Q>=0;)rt=String(W[Q]),X+=J.slice(rt.length)+rt;var E=this.sign?"-":"";return E+X},m.prototype.toString=function(b,P){return b===n&&(b=10),b!=10?Et(this,b,P):String(this.value)},A.prototype.toString=m.prototype.toString,A.prototype.toJSON=l.prototype.toJSON=m.prototype.toJSON=function(){return this.toString()},l.prototype.valueOf=function(){return parseInt(this.toString(),10)},l.prototype.toJSNumber=l.prototype.valueOf,m.prototype.valueOf=function(){return this.value},m.prototype.toJSNumber=m.prototype.valueOf,A.prototype.valueOf=A.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function Bt(b){if(_(+b)){var P=+b;if(P===O(P))return g?new A(BigInt(P)):new m(P);throw new Error("Invalid integer: "+b)}var W=b[0]==="-";W&&(b=b.slice(1));var Q=b.split(/e/i);if(Q.length>2)throw new Error("Invalid integer: "+Q.join("e"));if(Q.length===2){var X=Q[1];if(X[0]==="+"&&(X=X.slice(1)),X=+X,X!==O(X)||!_(X))throw new Error("Invalid integer: "+X+" is not a valid exponent.");var J=Q[0],rt=J.indexOf(".");if(rt>=0&&(X-=J.length-rt-1,J=J.slice(0,rt)+J.slice(rt+1)),X<0)throw new Error("Cannot include negative exponent part for integers");J+=new Array(X+1).join("0"),b=J}var E=/^([0-9][0-9]*)$/.test(b);if(!E)throw new Error("Invalid integer: "+b);if(g)return new A(BigInt(W?"-"+b:b));for(var r=[],c=b.length,y=o,v=c-y;c>0;)r.push(+b.slice(v,c)),v-=y,v<0&&(v=0),c-=y;return C(r),new l(r,W)}function Pt(b){if(g)return new A(BigInt(b));if(_(b)){if(b!==O(b))throw new Error(b+" is not an integer.");return new m(b)}return Bt(b.toString())}function Ct(b){return typeof b=="number"?Pt(b):typeof b=="string"?Bt(b):typeof b=="bigint"?new A(b):b}for(var Ht=0;Ht<1e3;Ht++)f[Ht]=Ct(Ht),Ht>0&&(f[-Ht]=Ct(-Ht));return f.one=f[1],f.zero=f[0],f.minusOne=f[-1],f.max=V,f.min=lt,f.gcd=at,f.lcm=At,f.isInstance=function(b){return b instanceof l||b instanceof m||b instanceof A},f.randBetween=Nt,f.fromArray=function(b,P,W){return bt(b.map(Ct),Ct(P||10),W)},f}();e.hasOwnProperty("exports")&&(e.exports=t)})(en);var st=en.exports;function Fc(e,t){return typeof e=="string"&&e.slice(0,2)=="0x"?st(e.slice(2),16):st(e,t)}const Gh=Fc;function kh(e,t){return st.fromArray(e,t)}function Wh(e){return st(e).bitLength()}function qh(e){return st(e).isNegative()}function Qh(e){return st(e).isZero()}function Bc(e,t){return st(e).shiftLeft(t)}function Tc(e,t){return st(e).shiftRight(t)}const Hh=Bc,zh=Tc;function $h(e){return st(e).isOdd()}function Yh(e){let t=st(e);const n=[];for(;t.gt(st.zero);){if(t.isOdd()){const i=2-t.mod(4).toJSNumber();n.push(i),t=t.minus(i)}else n.push(0);t=t.shiftRight(1)}return n}function jh(e){let t=st(e);const n=[];for(;t.gt(st.zero);)t.isOdd()?n.push(1):n.push(0),t=t.shiftRight(1);return n}function Kh(e){if(!e.lt(st("9007199254740992",10)))throw new Error("Number too big");return e.toJSNumber()}function Vh(e,t){return st(e).toArray(t)}function Zh(e,t){return st(e).add(st(t))}function Jh(e,t){return st(e).minus(st(t))}function Xh(e){return st.zero.minus(st(e))}function t2(e,t){return st(e).times(st(t))}function e2(e){return st(e).square()}function n2(e,t){return st(e).pow(st(t))}function i2(e,t){return st(e).pow(st(t))}function o2(e){return st(e).abs()}function r2(e,t){return st(e).divide(st(t))}function a2(e,t){return st(e).mod(st(t))}function s2(e,t){return st(e).eq(st(t))}function c2(e,t){return st(e).neq(st(t))}function l2(e,t){return st(e).lt(st(t))}function u2(e,t){return st(e).gt(st(t))}function f2(e,t){return st(e).leq(st(t))}function d2(e,t){return st(e).geq(st(t))}function h2(e,t){return st(e).and(st(t))}function _2(e,t){return st(e).or(st(t))}function g2(e,t){return st(e).xor(st(t))}function p2(e,t){return!st(e).isZero()&&!st(t).isZero()}function m2(e,t){return!st(e).isZero()||!st(t).isZero()}function y2(e){return st(e).isZero()}var A2=Object.freeze({__proto__:null,fromString:Fc,e:Gh,fromArray:kh,bitLength:Wh,isNegative:qh,isZero:Qh,shiftLeft:Bc,shiftRight:Tc,shl:Hh,shr:zh,isOdd:$h,naf:Yh,bits:jh,toNumber:Kh,toArray:Vh,add:Zh,sub:Jh,neg:Xh,mul:t2,square:e2,pow:n2,exp:i2,abs:o2,div:r2,mod:a2,eq:s2,neq:c2,lt:l2,gt:u2,leq:f2,geq:d2,band:h2,bor:_2,bxor:g2,land:p2,lor:m2,lnot:y2});const L2=typeof BigInt=="function";let ce={};L2?Object.assign(ce,Dh):Object.assign(ce,A2),ce.toRprLE=function(t,n,i,o){const a="0000000"+i.toString(16),s=new Uint32Array(t.buffer,n,o/4),d=((a.length-7)*4-1>>5)+1;for(let g=0;g<d;g++)s[g]=parseInt(a.substring(a.length-8*g-8,a.length-8*g),16);for(let g=d;g<s.length;g++)s[g]=0;for(let g=s.length*4;g<o;g++)t[g]=ce.toNumber(ce.band(ce.shiftRight(i,g*8),255))},ce.toRprBE=function(t,n,i,o){const a="0000000"+i.toString(16),s=new DataView(t.buffer,t.byteOffset+n,o),d=((a.length-7)*4-1>>5)+1;for(let g=0;g<d;g++)s.setUint32(o-g*4-4,parseInt(a.substring(a.length-8*g-8,a.length-8*g),16),!1);for(let g=0;g<o/4-d;g++)s[g]=0},ce.fromRprLE=function(t,n,i){i=i||t.byteLength,n=n||0;const o=new Uint32Array(t.buffer,n,i/4),a=new Array(i/4);return o.forEach((s,d)=>a[a.length-d-1]=s.toString(16).padStart(8,"0")),ce.fromString(a.join(""),16)},ce.fromRprBE=function(t,n,i){i=i||t.byteLength,n=n||0;const o=new DataView(t.buffer,t.byteOffset+n,i),a=new Array(i/4);for(let s=0;s<i/4;s++)a[s]=o.getUint32(s*4,!1).toString(16).padStart(8,"0");return ce.fromString(a.join(""),16)},ce.toString=function(t,n){return t.toString(n)},ce.toLEBuff=function(t){const n=new Uint8Array(Math.floor((ce.bitLength(t)-1)/8)+1);return ce.toRprLE(n,0,t,n.byteLength),n},ce.zero=ce.e(0),ce.one=ce.e(1);let{toRprLE:I2,toRprBE:E2,fromRprLE:Rc,fromRprBE:w2,toString:S2,toLEBuff:v2,zero:C2,one:b2,fromString:F2,e:Gi,fromArray:B2,bitLength:Oc,isNegative:T2,isZero:R2,shiftLeft:O2,shiftRight:P2,shl:x2,shr:N2,isOdd:M2,naf:U2,bits:D2,toNumber:G2,toArray:k2,add:W2,sub:q2,neg:Q2,mul:H2,square:z2,pow:$2,exp:Y2,abs:j2,div:K2,mod:V2,eq:Z2,neq:J2,lt:X2,gt:t_,leq:e_,geq:n_,band:i_,bor:o_,bxor:r_,land:a_,lor:s_,lnot:c_}=ce;var l_=Object.freeze({__proto__:null,toRprLE:I2,toRprBE:E2,fromRprLE:Rc,fromRprBE:w2,toString:S2,toLEBuff:v2,zero:C2,one:b2,fromString:F2,e:Gi,fromArray:B2,bitLength:Oc,isNegative:T2,isZero:R2,shiftLeft:O2,shiftRight:P2,shl:x2,shr:N2,isOdd:M2,naf:U2,bits:D2,toNumber:G2,toArray:k2,add:W2,sub:q2,neg:Q2,mul:H2,square:z2,pow:$2,exp:Y2,abs:j2,div:K2,mod:V2,eq:Z2,neq:J2,lt:X2,gt:t_,leq:e_,geq:n_,band:i_,bor:o_,bxor:r_,land:a_,lor:s_,lnot:c_});const u_=[];for(let e=0;e<256;e++)u_[e]=f_(e,8);function f_(e,t){let n=0,i=e;for(let o=0;o<t;o++)n<<=1,n=n|i&1,i>>=1;return n}function d_(e){return crypto.getRandomValues(new Uint8Array(e))}var h_={randomBytes:d_},hn={};const Pc=en.exports;hn.bigInt2BytesLE=function(t,n){const i=Array(n);let o=Pc(t);for(let a=0;a<n;a++)i[a]=o.and(255).toJSNumber(),o=o.shiftRight(8);return i},hn.bigInt2U32LE=function(t,n){const i=Array(n);let o=Pc(t);for(let a=0;a<n;a++)i[a]=o.and(4294967295).toJSNumber(),o=o.shiftRight(32);return i},hn.isOcamNum=function(e){return!(!Array.isArray(e)||e.length!=3||typeof e[0]!="number"||typeof e[1]!="number"||!Array.isArray(e[2]))};const __=hn;var g_=function(t,n,i){const o=i||"int";if(t.modules[o])return o;t.modules[o]={};const a=n*2,s=n*8;t.alloc(s,__.bigInt2BytesLE(1,s));function d(){const T=t.addFunction(o+"_copy");T.addParam("px","i32"),T.addParam("pr","i32");const p=T.getCodeBuilder();for(let w=0;w<n;w++)T.addCode(p.i64_store(p.getLocal("pr"),w*8,p.i64_load(p.getLocal("px"),w*8)))}function g(){const T=t.addFunction(o+"_zero");T.addParam("pr","i32");const p=T.getCodeBuilder();for(let w=0;w<n;w++)T.addCode(p.i64_store(p.getLocal("pr"),w*8,p.i64_const(0)))}function f(){const T=t.addFunction(o+"_one");T.addParam("pr","i32");const p=T.getCodeBuilder();T.addCode(p.i64_store(p.getLocal("pr"),0,p.i64_const(1)));for(let w=1;w<n;w++)T.addCode(p.i64_store(p.getLocal("pr"),w*8,p.i64_const(0)))}function l(){const T=t.addFunction(o+"_isZero");T.addParam("px","i32"),T.setReturnType("i32");const p=T.getCodeBuilder();function w(D){return D==0?p.ret(p.i64_eqz(p.i64_load(p.getLocal("px")))):p.if(p.i64_eqz(p.i64_load(p.getLocal("px"),D*8)),w(D-1),p.ret(p.i32_const(0)))}T.addCode(w(n-1)),T.addCode(p.ret(p.i32_const(0)))}function m(){const T=t.addFunction(o+"_eq");T.addParam("px","i32"),T.addParam("py","i32"),T.setReturnType("i32");const p=T.getCodeBuilder();function w(D){return D==0?p.ret(p.i64_eq(p.i64_load(p.getLocal("px")),p.i64_load(p.getLocal("py")))):p.if(p.i64_eq(p.i64_load(p.getLocal("px"),D*8),p.i64_load(p.getLocal("py"),D*8)),w(D-1),p.ret(p.i32_const(0)))}T.addCode(w(n-1)),T.addCode(p.ret(p.i32_const(0)))}function A(){const T=t.addFunction(o+"_gte");T.addParam("px","i32"),T.addParam("py","i32"),T.setReturnType("i32");const p=T.getCodeBuilder();function w(D){return D==0?p.ret(p.i64_ge_u(p.i64_load(p.getLocal("px")),p.i64_load(p.getLocal("py")))):p.if(p.i64_lt_u(p.i64_load(p.getLocal("px"),D*8),p.i64_load(p.getLocal("py"),D*8)),p.ret(p.i32_const(0)),p.if(p.i64_gt_u(p.i64_load(p.getLocal("px"),D*8),p.i64_load(p.getLocal("py"),D*8)),p.ret(p.i32_const(1)),w(D-1)))}T.addCode(w(n-1)),T.addCode(p.ret(p.i32_const(0)))}function _(){const T=t.addFunction(o+"_add");T.addParam("x","i32"),T.addParam("y","i32"),T.addParam("r","i32"),T.setReturnType("i32"),T.addLocal("c","i64");const p=T.getCodeBuilder();T.addCode(p.setLocal("c",p.i64_add(p.i64_load32_u(p.getLocal("x")),p.i64_load32_u(p.getLocal("y"))))),T.addCode(p.i64_store32(p.getLocal("r"),p.getLocal("c")));for(let w=1;w<a;w++)T.addCode(p.setLocal("c",p.i64_add(p.i64_add(p.i64_load32_u(p.getLocal("x"),4*w),p.i64_load32_u(p.getLocal("y"),4*w)),p.i64_shr_u(p.getLocal("c"),p.i64_const(32))))),T.addCode(p.i64_store32(p.getLocal("r"),w*4,p.getLocal("c")));T.addCode(p.i32_wrap_i64(p.i64_shr_u(p.getLocal("c"),p.i64_const(32))))}function R(){const T=t.addFunction(o+"_sub");T.addParam("x","i32"),T.addParam("y","i32"),T.addParam("r","i32"),T.setReturnType("i32"),T.addLocal("c","i64");const p=T.getCodeBuilder();T.addCode(p.setLocal("c",p.i64_sub(p.i64_load32_u(p.getLocal("x")),p.i64_load32_u(p.getLocal("y"))))),T.addCode(p.i64_store32(p.getLocal("r"),p.i64_and(p.getLocal("c"),p.i64_const("0xFFFFFFFF"))));for(let w=1;w<a;w++)T.addCode(p.setLocal("c",p.i64_add(p.i64_sub(p.i64_load32_u(p.getLocal("x"),4*w),p.i64_load32_u(p.getLocal("y"),4*w)),p.i64_shr_s(p.getLocal("c"),p.i64_const(32))))),T.addCode(p.i64_store32(p.getLocal("r"),w*4,p.i64_and(p.getLocal("c"),p.i64_const("0xFFFFFFFF"))));T.addCode(p.i32_wrap_i64(p.i64_shr_s(p.getLocal("c"),p.i64_const(32))))}function x(){const T=t.addFunction(o+"_mul");T.addParam("x","i32"),T.addParam("y","i32"),T.addParam("r","i32"),T.addLocal("c0","i64"),T.addLocal("c1","i64");for(let S=0;S<a;S++)T.addLocal("x"+S,"i64"),T.addLocal("y"+S,"i64");const p=T.getCodeBuilder(),w=[],D=[];function $(S,q){let tt,ft;return w[S]?tt=p.getLocal("x"+S):(tt=p.teeLocal("x"+S,p.i64_load32_u(p.getLocal("x"),S*4)),w[S]=!0),D[q]?ft=p.getLocal("y"+q):(ft=p.teeLocal("y"+q,p.i64_load32_u(p.getLocal("y"),q*4)),D[q]=!0),p.i64_mul(tt,ft)}let U="c0",M="c1";for(let S=0;S<a*2-1;S++){for(let q=Math.max(0,S-a+1);q<=S&&q<a;q++){const tt=S-q;T.addCode(p.setLocal(U,p.i64_add(p.i64_and(p.getLocal(U),p.i64_const(4294967295)),$(q,tt)))),T.addCode(p.setLocal(M,p.i64_add(p.getLocal(M),p.i64_shr_u(p.getLocal(U),p.i64_const(32)))))}T.addCode(p.i64_store32(p.getLocal("r"),S*4,p.getLocal(U))),[U,M]=[M,U],T.addCode(p.setLocal(M,p.i64_shr_u(p.getLocal(U),p.i64_const(32))))}T.addCode(p.i64_store32(p.getLocal("r"),a*4*2-4,p.getLocal(U)))}function C(){const T=t.addFunction(o+"_square");T.addParam("x","i32"),T.addParam("r","i32"),T.addLocal("c0","i64"),T.addLocal("c1","i64"),T.addLocal("c0_old","i64"),T.addLocal("c1_old","i64");for(let q=0;q<a;q++)T.addLocal("x"+q,"i64");const p=T.getCodeBuilder(),w=[];function D(q,tt){let ft,it;return w[q]?ft=p.getLocal("x"+q):(ft=p.teeLocal("x"+q,p.i64_load32_u(p.getLocal("x"),q*4)),w[q]=!0),w[tt]?it=p.getLocal("x"+tt):(it=p.teeLocal("x"+tt,p.i64_load32_u(p.getLocal("x"),tt*4)),w[tt]=!0),p.i64_mul(ft,it)}let $="c0",U="c1",M="c0_old",S="c1_old";for(let q=0;q<a*2-1;q++){T.addCode(p.setLocal($,p.i64_const(0)),p.setLocal(U,p.i64_const(0)));for(let tt=Math.max(0,q-a+1);tt<q+1>>1&&tt<a;tt++){const ft=q-tt;T.addCode(p.setLocal($,p.i64_add(p.i64_and(p.getLocal($),p.i64_const(4294967295)),D(tt,ft)))),T.addCode(p.setLocal(U,p.i64_add(p.getLocal(U),p.i64_shr_u(p.getLocal($),p.i64_const(32)))))}T.addCode(p.setLocal($,p.i64_shl(p.i64_and(p.getLocal($),p.i64_const(4294967295)),p.i64_const(1)))),T.addCode(p.setLocal(U,p.i64_add(p.i64_shl(p.getLocal(U),p.i64_const(1)),p.i64_shr_u(p.getLocal($),p.i64_const(32))))),q%2==0&&(T.addCode(p.setLocal($,p.i64_add(p.i64_and(p.getLocal($),p.i64_const(4294967295)),D(q>>1,q>>1)))),T.addCode(p.setLocal(U,p.i64_add(p.getLocal(U),p.i64_shr_u(p.getLocal($),p.i64_const(32)))))),q>0&&(T.addCode(p.setLocal($,p.i64_add(p.i64_and(p.getLocal($),p.i64_const(4294967295)),p.i64_and(p.getLocal(M),p.i64_const(4294967295))))),T.addCode(p.setLocal(U,p.i64_add(p.i64_add(p.getLocal(U),p.i64_shr_u(p.getLocal($),p.i64_const(32))),p.getLocal(S))))),T.addCode(p.i64_store32(p.getLocal("r"),q*4,p.getLocal($))),T.addCode(p.setLocal(M,p.getLocal(U)),p.setLocal(S,p.i64_shr_u(p.getLocal(M),p.i64_const(32))))}T.addCode(p.i64_store32(p.getLocal("r"),a*4*2-4,p.getLocal(M)))}function k(){const T=t.addFunction(o+"_squareOld");T.addParam("x","i32"),T.addParam("r","i32");const p=T.getCodeBuilder();T.addCode(p.call(o+"_mul",p.getLocal("x"),p.getLocal("x"),p.getLocal("r")))}function O(){const T=t.addFunction(o+"__mul1");T.addParam("px","i32"),T.addParam("y","i64"),T.addParam("pr","i32"),T.addLocal("c","i64");const p=T.getCodeBuilder();T.addCode(p.setLocal("c",p.i64_mul(p.i64_load32_u(p.getLocal("px"),0,0),p.getLocal("y")))),T.addCode(p.i64_store32(p.getLocal("pr"),0,0,p.getLocal("c")));for(let w=1;w<a;w++)T.addCode(p.setLocal("c",p.i64_add(p.i64_mul(p.i64_load32_u(p.getLocal("px"),4*w,0),p.getLocal("y")),p.i64_shr_u(p.getLocal("c"),p.i64_const(32))))),T.addCode(p.i64_store32(p.getLocal("pr"),w*4,0,p.getLocal("c")))}function Z(){const T=t.addFunction(o+"__add1");T.addParam("x","i32"),T.addParam("y","i64"),T.addLocal("c","i64"),T.addLocal("px","i32");const p=T.getCodeBuilder();T.addCode(p.setLocal("px",p.getLocal("x"))),T.addCode(p.setLocal("c",p.i64_add(p.i64_load32_u(p.getLocal("px"),0,0),p.getLocal("y")))),T.addCode(p.i64_store32(p.getLocal("px"),0,0,p.getLocal("c"))),T.addCode(p.setLocal("c",p.i64_shr_u(p.getLocal("c"),p.i64_const(32)))),T.addCode(p.block(p.loop(p.br_if(1,p.i64_eqz(p.getLocal("c"))),p.setLocal("px",p.i32_add(p.getLocal("px"),p.i32_const(4))),p.setLocal("c",p.i64_add(p.i64_load32_u(p.getLocal("px"),0,0),p.getLocal("c"))),p.i64_store32(p.getLocal("px"),0,0,p.getLocal("c")),p.setLocal("c",p.i64_shr_u(p.getLocal("c"),p.i64_const(32))),p.br(0))))}function z(){O(),Z();const T=t.addFunction(o+"_div");T.addParam("x","i32"),T.addParam("y","i32"),T.addParam("c","i32"),T.addParam("r","i32"),T.addLocal("rr","i32"),T.addLocal("cc","i32"),T.addLocal("eX","i32"),T.addLocal("eY","i32"),T.addLocal("sy","i64"),T.addLocal("sx","i64"),T.addLocal("ec","i32");const p=T.getCodeBuilder(),w=p.i32_const(t.alloc(s)),D=p.i32_const(t.alloc(s)),$=p.i32_const(t.alloc(s)),U=p.getLocal("cc"),M=p.getLocal("rr"),S=t.alloc(s*2),q=p.i32_const(S),tt=p.i32_const(S+s);T.addCode(p.if(p.getLocal("c"),p.setLocal("cc",p.getLocal("c")),p.setLocal("cc",D))),T.addCode(p.if(p.getLocal("r"),p.setLocal("rr",p.getLocal("r")),p.setLocal("rr",$))),T.addCode(p.call(o+"_copy",p.getLocal("x"),M)),T.addCode(p.call(o+"_copy",p.getLocal("y"),w)),T.addCode(p.call(o+"_zero",U)),T.addCode(p.call(o+"_zero",q)),T.addCode(p.setLocal("eX",p.i32_const(s-1))),T.addCode(p.setLocal("eY",p.i32_const(s-1))),T.addCode(p.block(p.loop(p.br_if(1,p.i32_or(p.i32_load8_u(p.i32_add(w,p.getLocal("eY")),0,0),p.i32_eq(p.getLocal("eY"),p.i32_const(3)))),p.setLocal("eY",p.i32_sub(p.getLocal("eY"),p.i32_const(1))),p.br(0)))),T.addCode(p.setLocal("sy",p.i64_add(p.i64_load32_u(p.i32_sub(p.i32_add(w,p.getLocal("eY")),p.i32_const(3)),0,0),p.i64_const(1)))),T.addCode(p.if(p.i64_eq(p.getLocal("sy"),p.i64_const(1)),p.drop(p.i64_div_u(p.i64_const(0),p.i64_const(0))))),T.addCode(p.block(p.loop(p.block(p.loop(p.br_if(1,p.i32_or(p.i32_load8_u(p.i32_add(M,p.getLocal("eX")),0,0),p.i32_eq(p.getLocal("eX"),p.i32_const(7)))),p.setLocal("eX",p.i32_sub(p.getLocal("eX"),p.i32_const(1))),p.br(0))),p.setLocal("sx",p.i64_load(p.i32_sub(p.i32_add(M,p.getLocal("eX")),p.i32_const(7)),0,0)),p.setLocal("sx",p.i64_div_u(p.getLocal("sx"),p.getLocal("sy"))),p.setLocal("ec",p.i32_sub(p.i32_sub(p.getLocal("eX"),p.getLocal("eY")),p.i32_const(4))),p.block(p.loop(p.br_if(1,p.i32_and(p.i64_eqz(p.i64_and(p.getLocal("sx"),p.i64_const("0xFFFFFFFF00000000"))),p.i32_ge_s(p.getLocal("ec"),p.i32_const(0)))),p.setLocal("sx",p.i64_shr_u(p.getLocal("sx"),p.i64_const(8))),p.setLocal("ec",p.i32_add(p.getLocal("ec"),p.i32_const(1))),p.br(0))),p.if(p.i64_eqz(p.getLocal("sx")),[...p.br_if(2,p.i32_eqz(p.call(o+"_gte",M,w))),...p.setLocal("sx",p.i64_const(1)),...p.setLocal("ec",p.i32_const(0))]),p.call(o+"__mul1",w,p.getLocal("sx"),tt),p.drop(p.call(o+"_sub",M,p.i32_sub(tt,p.getLocal("ec")),M)),p.call(o+"__add1",p.i32_add(U,p.getLocal("ec")),p.getLocal("sx")),p.br(0))))}function K(){const T=t.addFunction(o+"_inverseMod");T.addParam("px","i32"),T.addParam("pm","i32"),T.addParam("pr","i32"),T.addLocal("t","i32"),T.addLocal("newt","i32"),T.addLocal("r","i32"),T.addLocal("qq","i32"),T.addLocal("qr","i32"),T.addLocal("newr","i32"),T.addLocal("swp","i32"),T.addLocal("x","i32"),T.addLocal("signt","i32"),T.addLocal("signnewt","i32"),T.addLocal("signx","i32");const p=T.getCodeBuilder(),w=p.i32_const(t.alloc(s)),D=p.i32_const(t.alloc(s)),$=p.i32_const(t.alloc(s)),U=p.i32_const(t.alloc(s)),M=p.i32_const(t.alloc(s)),S=p.i32_const(t.alloc(s)),q=p.i32_const(t.alloc(s*2)),tt=p.i32_const(t.alloc(s));T.addCode(p.setLocal("t",w),p.call(o+"_zero",w),p.setLocal("signt",p.i32_const(0))),T.addCode(p.setLocal("r",D),p.call(o+"_copy",p.getLocal("pm"),D)),T.addCode(p.setLocal("newt",$),p.call(o+"_one",$),p.setLocal("signnewt",p.i32_const(0))),T.addCode(p.setLocal("newr",U),p.call(o+"_copy",p.getLocal("px"),U)),T.addCode(p.setLocal("qq",M)),T.addCode(p.setLocal("qr",S)),T.addCode(p.setLocal("x",tt)),T.addCode(p.block(p.loop(p.br_if(1,p.call(o+"_isZero",p.getLocal("newr"))),p.call(o+"_div",p.getLocal("r"),p.getLocal("newr"),p.getLocal("qq"),p.getLocal("qr")),p.call(o+"_mul",p.getLocal("qq"),p.getLocal("newt"),q),p.if(p.getLocal("signt"),p.if(p.getLocal("signnewt"),p.if(p.call(o+"_gte",q,p.getLocal("t")),[...p.drop(p.call(o+"_sub",q,p.getLocal("t"),p.getLocal("x"))),...p.setLocal("signx",p.i32_const(0))],[...p.drop(p.call(o+"_sub",p.getLocal("t"),q,p.getLocal("x"))),...p.setLocal("signx",p.i32_const(1))]),[...p.drop(p.call(o+"_add",q,p.getLocal("t"),p.getLocal("x"))),...p.setLocal("signx",p.i32_const(1))]),p.if(p.getLocal("signnewt"),[...p.drop(p.call(o+"_add",q,p.getLocal("t"),p.getLocal("x"))),...p.setLocal("signx",p.i32_const(0))],p.if(p.call(o+"_gte",p.getLocal("t"),q),[...p.drop(p.call(o+"_sub",p.getLocal("t"),q,p.getLocal("x"))),...p.setLocal("signx",p.i32_const(0))],[...p.drop(p.call(o+"_sub",q,p.getLocal("t"),p.getLocal("x"))),...p.setLocal("signx",p.i32_const(1))]))),p.setLocal("swp",p.getLocal("t")),p.setLocal("t",p.getLocal("newt")),p.setLocal("newt",p.getLocal("x")),p.setLocal("x",p.getLocal("swp")),p.setLocal("signt",p.getLocal("signnewt")),p.setLocal("signnewt",p.getLocal("signx")),p.setLocal("swp",p.getLocal("r")),p.setLocal("r",p.getLocal("newr")),p.setLocal("newr",p.getLocal("qr")),p.setLocal("qr",p.getLocal("swp")),p.br(0)))),T.addCode(p.if(p.getLocal("signt"),p.drop(p.call(o+"_sub",p.getLocal("pm"),p.getLocal("t"),p.getLocal("pr"))),p.call(o+"_copy",p.getLocal("t"),p.getLocal("pr"))))}return d(),g(),l(),f(),m(),A(),_(),R(),x(),C(),k(),z(),K(),t.exportFunction(o+"_copy"),t.exportFunction(o+"_zero"),t.exportFunction(o+"_one"),t.exportFunction(o+"_isZero"),t.exportFunction(o+"_eq"),t.exportFunction(o+"_gte"),t.exportFunction(o+"_add"),t.exportFunction(o+"_sub"),t.exportFunction(o+"_mul"),t.exportFunction(o+"_square"),t.exportFunction(o+"_squareOld"),t.exportFunction(o+"_div"),t.exportFunction(o+"_inverseMod"),o},vr=function(t,n,i,o,a,s,d){const g=t.addFunction(n);g.addParam("base","i32"),g.addParam("scalar","i32"),g.addParam("scalarLength","i32"),g.addParam("r","i32"),g.addLocal("i","i32"),g.addLocal("b","i32");const f=g.getCodeBuilder(),l=f.i32_const(t.alloc(i));g.addCode(f.if(f.i32_eqz(f.getLocal("scalarLength")),[...f.call(d,f.getLocal("r")),...f.ret([])])),g.addCode(f.call(s,f.getLocal("base"),l)),g.addCode(f.call(d,f.getLocal("r"))),g.addCode(f.setLocal("i",f.getLocal("scalarLength"))),g.addCode(f.block(f.loop(f.setLocal("i",f.i32_sub(f.getLocal("i"),f.i32_const(1))),f.setLocal("b",f.i32_load8_u(f.i32_add(f.getLocal("scalar"),f.getLocal("i")))),...m(),f.br_if(1,f.i32_eqz(f.getLocal("i"))),f.br(0))));function m(){const A=[];for(let _=0;_<8;_++)A.push(...f.call(a,f.getLocal("r"),f.getLocal("r")),...f.if(f.i32_ge_u(f.getLocal("b"),f.i32_const(128>>_)),[...f.setLocal("b",f.i32_sub(f.getLocal("b"),f.i32_const(128>>_))),...f.call(o,f.getLocal("r"),l,f.getLocal("r"))]));return A}},Cr=p_;function p_(e,t){const n=e.modules[t].n64*8,i=e.addFunction(t+"_batchInverse");i.addParam("pIn","i32"),i.addParam("inStep","i32"),i.addParam("n","i32"),i.addParam("pOut","i32"),i.addParam("outStep","i32"),i.addLocal("itAux","i32"),i.addLocal("itIn","i32"),i.addLocal("itOut","i32"),i.addLocal("i","i32");const o=i.getCodeBuilder(),a=o.i32_const(e.alloc(n));i.addCode(o.setLocal("itAux",o.i32_load(o.i32_const(0))),o.i32_store(o.i32_const(0),o.i32_add(o.getLocal("itAux"),o.i32_mul(o.i32_add(o.getLocal("n"),o.i32_const(1)),o.i32_const(n))))),i.addCode(o.call(t+"_one",o.getLocal("itAux")),o.setLocal("itIn",o.getLocal("pIn")),o.setLocal("itAux",o.i32_add(o.getLocal("itAux"),o.i32_const(n))),o.setLocal("i",o.i32_const(0)),o.block(o.loop(o.br_if(1,o.i32_eq(o.getLocal("i"),o.getLocal("n"))),o.if(o.call(t+"_isZero",o.getLocal("itIn")),o.call(t+"_copy",o.i32_sub(o.getLocal("itAux"),o.i32_const(n)),o.getLocal("itAux")),o.call(t+"_mul",o.getLocal("itIn"),o.i32_sub(o.getLocal("itAux"),o.i32_const(n)),o.getLocal("itAux"))),o.setLocal("itIn",o.i32_add(o.getLocal("itIn"),o.getLocal("inStep"))),o.setLocal("itAux",o.i32_add(o.getLocal("itAux"),o.i32_const(n))),o.setLocal("i",o.i32_add(o.getLocal("i"),o.i32_const(1))),o.br(0))),o.setLocal("itIn",o.i32_sub(o.getLocal("itIn"),o.getLocal("inStep"))),o.setLocal("itAux",o.i32_sub(o.getLocal("itAux"),o.i32_const(n))),o.setLocal("itOut",o.i32_add(o.getLocal("pOut"),o.i32_mul(o.i32_sub(o.getLocal("n"),o.i32_const(1)),o.getLocal("outStep")))),o.call(t+"_inverse",o.getLocal("itAux"),o.getLocal("itAux")),o.block(o.loop(o.br_if(1,o.i32_eqz(o.getLocal("i"))),o.if(o.call(t+"_isZero",o.getLocal("itIn")),[...o.call(t+"_copy",o.getLocal("itAux"),o.i32_sub(o.getLocal("itAux"),o.i32_const(n))),...o.call(t+"_zero",o.getLocal("itOut"))],[...o.call(t+"_copy",o.i32_sub(o.getLocal("itAux"),o.i32_const(n)),a),...o.call(t+"_mul",o.getLocal("itAux"),o.getLocal("itIn"),o.i32_sub(o.getLocal("itAux"),o.i32_const(n))),...o.call(t+"_mul",o.getLocal("itAux"),a,o.getLocal("itOut"))]),o.setLocal("itIn",o.i32_sub(o.getLocal("itIn"),o.getLocal("inStep"))),o.setLocal("itOut",o.i32_sub(o.getLocal("itOut"),o.getLocal("outStep"))),o.setLocal("itAux",o.i32_sub(o.getLocal("itAux"),o.i32_const(n))),o.setLocal("i",o.i32_sub(o.getLocal("i"),o.i32_const(1))),o.br(0)))),i.addCode(o.i32_store(o.i32_const(0),o.getLocal("itAux")))}var xc=m_;function m_(e,t,n,i,o,a){typeof a=="undefined"&&(i<o?a=!0:a=!1);const s=e.addFunction(t);s.addParam("pIn","i32"),s.addParam("n","i32"),s.addParam("pOut","i32"),s.addLocal("i","i32"),s.addLocal("itIn","i32"),s.addLocal("itOut","i32");const d=s.getCodeBuilder();a?s.addCode(d.setLocal("itIn",d.i32_add(d.getLocal("pIn"),d.i32_mul(d.i32_sub(d.getLocal("n"),d.i32_const(1)),d.i32_const(i)))),d.setLocal("itOut",d.i32_add(d.getLocal("pOut"),d.i32_mul(d.i32_sub(d.getLocal("n"),d.i32_const(1)),d.i32_const(o)))),d.setLocal("i",d.i32_const(0)),d.block(d.loop(d.br_if(1,d.i32_eq(d.getLocal("i"),d.getLocal("n"))),d.call(n,d.getLocal("itIn"),d.getLocal("itOut")),d.setLocal("itIn",d.i32_sub(d.getLocal("itIn"),d.i32_const(i))),d.setLocal("itOut",d.i32_sub(d.getLocal("itOut"),d.i32_const(o))),d.setLocal("i",d.i32_add(d.getLocal("i"),d.i32_const(1))),d.br(0)))):s.addCode(d.setLocal("itIn",d.getLocal("pIn")),d.setLocal("itOut",d.getLocal("pOut")),d.setLocal("i",d.i32_const(0)),d.block(d.loop(d.br_if(1,d.i32_eq(d.getLocal("i"),d.getLocal("n"))),d.call(n,d.getLocal("itIn"),d.getLocal("itOut")),d.setLocal("itIn",d.i32_add(d.getLocal("itIn"),d.i32_const(i))),d.setLocal("itOut",d.i32_add(d.getLocal("itOut"),d.i32_const(o))),d.setLocal("i",d.i32_add(d.getLocal("i"),d.i32_const(1))),d.br(0))))}var y_=A_;function A_(e,t,n,i,o,a){typeof a=="undefined"&&(i<o?a=!0:a=!1);const s=e.addFunction(t);s.addParam("pIn1","i32"),s.addParam("pIn2","i32"),s.addParam("n","i32"),s.addParam("pOut","i32"),s.addLocal("i","i32"),s.addLocal("itIn1","i32"),s.addLocal("itIn2","i32"),s.addLocal("itOut","i32");const d=s.getCodeBuilder();a?s.addCode(d.setLocal("itIn1",d.i32_add(d.getLocal("pIn1"),d.i32_mul(d.i32_sub(d.getLocal("n"),d.i32_const(1)),d.i32_const(i)))),d.setLocal("itIn2",d.i32_add(d.getLocal("pIn2"),d.i32_mul(d.i32_sub(d.getLocal("n"),d.i32_const(1)),d.i32_const(i)))),d.setLocal("itOut",d.i32_add(d.getLocal("pOut"),d.i32_mul(d.i32_sub(d.getLocal("n"),d.i32_const(1)),d.i32_const(o)))),d.setLocal("i",d.i32_const(0)),d.block(d.loop(d.br_if(1,d.i32_eq(d.getLocal("i"),d.getLocal("n"))),d.call(n,d.getLocal("itIn1"),d.getLocal("itIn2"),d.getLocal("itOut")),d.setLocal("itIn1",d.i32_sub(d.getLocal("itIn1"),d.i32_const(i))),d.setLocal("itIn2",d.i32_sub(d.getLocal("itIn2"),d.i32_const(i))),d.setLocal("itOut",d.i32_sub(d.getLocal("itOut"),d.i32_const(o))),d.setLocal("i",d.i32_add(d.getLocal("i"),d.i32_const(1))),d.br(0)))):s.addCode(d.setLocal("itIn1",d.getLocal("pIn1")),d.setLocal("itIn2",d.getLocal("pIn2")),d.setLocal("itOut",d.getLocal("pOut")),d.setLocal("i",d.i32_const(0)),d.block(d.loop(d.br_if(1,d.i32_eq(d.getLocal("i"),d.getLocal("n"))),d.call(n,d.getLocal("itIn1"),d.getLocal("itIn2"),d.getLocal("itOut")),d.setLocal("itIn1",d.i32_add(d.getLocal("itIn1"),d.i32_const(i))),d.setLocal("itIn2",d.i32_add(d.getLocal("itIn2"),d.i32_const(i))),d.setLocal("itOut",d.i32_add(d.getLocal("itOut"),d.i32_const(o))),d.setLocal("i",d.i32_add(d.getLocal("i"),d.i32_const(1))),d.br(0))))}const be=en.exports,L_=g_,ze=hn,I_=vr,E_=Cr,br=xc,Fr=y_;var Br=function(t,n,i,o){const a=be(n),s=Math.floor((a.minus(1).bitLength()-1)/64)+1,d=s*2,g=s*8,f=i||"f1m";if(t.modules[f])return f;const l=L_(t,s,o),m=t.alloc(g,ze.bigInt2BytesLE(a,g));t.alloc(ze.bigInt2BytesLE(be.one.shiftLeft(s*64).mod(a),g));const A=t.alloc(ze.bigInt2BytesLE(be.one.shiftLeft(s*64).square().mod(a),g)),_=t.alloc(ze.bigInt2BytesLE(be.one.shiftLeft(s*64).mod(a),g)),R=t.alloc(ze.bigInt2BytesLE(be.zero,g)),x=a.minus(be.one),C=x.shiftRight(1),k=t.alloc(g,ze.bigInt2BytesLE(C,g)),O=C.add(be.one),Z=t.alloc(g,ze.bigInt2BytesLE(O,g));t.modules[f]={pq:m,pR2:A,n64:s,q:a,pOne:_,pZero:R,pePlusOne:Z};function z(){const N=t.addFunction(f+"_one");N.addParam("pr","i32");const I=N.getCodeBuilder();N.addCode(I.call(l+"_copy",I.i32_const(_),I.getLocal("pr")))}function K(){const N=t.addFunction(f+"_add");N.addParam("x","i32"),N.addParam("y","i32"),N.addParam("r","i32");const I=N.getCodeBuilder();N.addCode(I.if(I.call(l+"_add",I.getLocal("x"),I.getLocal("y"),I.getLocal("r")),I.drop(I.call(l+"_sub",I.getLocal("r"),I.i32_const(m),I.getLocal("r"))),I.if(I.call(l+"_gte",I.getLocal("r"),I.i32_const(m)),I.drop(I.call(l+"_sub",I.getLocal("r"),I.i32_const(m),I.getLocal("r"))))))}function T(){const N=t.addFunction(f+"_sub");N.addParam("x","i32"),N.addParam("y","i32"),N.addParam("r","i32");const I=N.getCodeBuilder();N.addCode(I.if(I.call(l+"_sub",I.getLocal("x"),I.getLocal("y"),I.getLocal("r")),I.drop(I.call(l+"_add",I.getLocal("r"),I.i32_const(m),I.getLocal("r")))))}function p(){const N=t.addFunction(f+"_neg");N.addParam("x","i32"),N.addParam("r","i32");const I=N.getCodeBuilder();N.addCode(I.call(f+"_sub",I.i32_const(R),I.getLocal("x"),I.getLocal("r")))}function w(){const N=t.addFunction(f+"_isNegative");N.addParam("x","i32"),N.setReturnType("i32");const I=N.getCodeBuilder(),V=I.i32_const(t.alloc(g));N.addCode(I.call(f+"_fromMontgomery",I.getLocal("x"),V),I.call(l+"_gte",V,I.i32_const(Z)))}function D(){const N=t.addFunction(f+"_sign");N.addParam("x","i32"),N.setReturnType("i32");const I=N.getCodeBuilder(),V=I.i32_const(t.alloc(g));N.addCode(I.if(I.call(l+"_isZero",I.getLocal("x")),I.ret(I.i32_const(0))),I.call(f+"_fromMontgomery",I.getLocal("x"),V),I.if(I.call(l+"_gte",V,I.i32_const(Z)),I.ret(I.i32_const(-1))),I.ret(I.i32_const(1)))}function $(){const N=t.alloc(d*d*8),I=t.addFunction(f+"_mReduct");I.addParam("t","i32"),I.addParam("r","i32"),I.addLocal("np32","i64"),I.addLocal("c","i64"),I.addLocal("m","i64");const V=I.getCodeBuilder(),lt=be("100000000",16).minus(a.modInv(be("100000000",16))).toJSNumber();I.addCode(V.setLocal("np32",V.i64_const(lt)));for(let at=0;at<d;at++){I.addCode(V.setLocal("c",V.i64_const(0))),I.addCode(V.setLocal("m",V.i64_and(V.i64_mul(V.i64_load32_u(V.getLocal("t"),at*4),V.getLocal("np32")),V.i64_const("0xFFFFFFFF"))));for(let At=0;At<d;At++)I.addCode(V.setLocal("c",V.i64_add(V.i64_add(V.i64_load32_u(V.getLocal("t"),(at+At)*4),V.i64_shr_u(V.getLocal("c"),V.i64_const(32))),V.i64_mul(V.i64_load32_u(V.i32_const(m),At*4),V.getLocal("m"))))),I.addCode(V.i64_store32(V.getLocal("t"),(at+At)*4,V.getLocal("c")));I.addCode(V.i64_store32(V.i32_const(N),at*4,V.i64_shr_u(V.getLocal("c"),V.i64_const(32))))}I.addCode(V.call(f+"_add",V.i32_const(N),V.i32_add(V.getLocal("t"),V.i32_const(d*4)),V.getLocal("r")))}function U(){const N=t.addFunction(f+"_mul");N.addParam("x","i32"),N.addParam("y","i32"),N.addParam("r","i32"),N.addLocal("c0","i64"),N.addLocal("c1","i64"),N.addLocal("np32","i64");for(let pt=0;pt<d;pt++)N.addLocal("x"+pt,"i64"),N.addLocal("y"+pt,"i64"),N.addLocal("m"+pt,"i64"),N.addLocal("q"+pt,"i64");const I=N.getCodeBuilder(),V=be("100000000",16).minus(a.modInv(be("100000000",16))).toJSNumber();N.addCode(I.setLocal("np32",I.i64_const(V)));const lt=[],at=[],At=[];function Nt(pt,Et){let Bt,Pt;return lt[pt]?Bt=I.getLocal("x"+pt):(Bt=I.teeLocal("x"+pt,I.i64_load32_u(I.getLocal("x"),pt*4)),lt[pt]=!0),at[Et]?Pt=I.getLocal("y"+Et):(Pt=I.teeLocal("y"+Et,I.i64_load32_u(I.getLocal("y"),Et*4)),at[Et]=!0),I.i64_mul(Bt,Pt)}function Tt(pt,Et){let Bt,Pt;return At[pt]?Bt=I.getLocal("q"+pt):(Bt=I.teeLocal("q"+pt,I.i64_load32_u(I.i32_const(0),m+pt*4)),At[pt]=!0),Pt=I.getLocal("m"+Et),I.i64_mul(Bt,Pt)}let bt="c0",wt="c1";for(let pt=0;pt<d*2-1;pt++){for(let Et=Math.max(0,pt-d+1);Et<=pt&&Et<d;Et++){const Bt=pt-Et;N.addCode(I.setLocal(bt,I.i64_add(I.i64_and(I.getLocal(bt),I.i64_const(4294967295)),Nt(Et,Bt)))),N.addCode(I.setLocal(wt,I.i64_add(I.getLocal(wt),I.i64_shr_u(I.getLocal(bt),I.i64_const(32)))))}for(let Et=Math.max(1,pt-d+1);Et<=pt&&Et<d;Et++){const Bt=pt-Et;N.addCode(I.setLocal(bt,I.i64_add(I.i64_and(I.getLocal(bt),I.i64_const(4294967295)),Tt(Et,Bt)))),N.addCode(I.setLocal(wt,I.i64_add(I.getLocal(wt),I.i64_shr_u(I.getLocal(bt),I.i64_const(32)))))}pt<d&&(N.addCode(I.setLocal("m"+pt,I.i64_and(I.i64_mul(I.i64_and(I.getLocal(bt),I.i64_const(4294967295)),I.getLocal("np32")),I.i64_const("0xFFFFFFFF")))),N.addCode(I.setLocal(bt,I.i64_add(I.i64_and(I.getLocal(bt),I.i64_const(4294967295)),Tt(0,pt)))),N.addCode(I.setLocal(wt,I.i64_add(I.getLocal(wt),I.i64_shr_u(I.getLocal(bt),I.i64_const(32)))))),pt>=d&&N.addCode(I.i64_store32(I.getLocal("r"),(pt-d)*4,I.getLocal(bt))),[bt,wt]=[wt,bt],N.addCode(I.setLocal(wt,I.i64_shr_u(I.getLocal(bt),I.i64_const(32))))}N.addCode(I.i64_store32(I.getLocal("r"),d*4-4,I.getLocal(bt))),N.addCode(I.if(I.i32_wrap_i64(I.getLocal(wt)),I.drop(I.call(l+"_sub",I.getLocal("r"),I.i32_const(m),I.getLocal("r"))),I.if(I.call(l+"_gte",I.getLocal("r"),I.i32_const(m)),I.drop(I.call(l+"_sub",I.getLocal("r"),I.i32_const(m),I.getLocal("r"))))))}function M(){const N=t.addFunction(f+"_square");N.addParam("x","i32"),N.addParam("r","i32"),N.addLocal("c0","i64"),N.addLocal("c1","i64"),N.addLocal("c0_old","i64"),N.addLocal("c1_old","i64"),N.addLocal("np32","i64");for(let Et=0;Et<d;Et++)N.addLocal("x"+Et,"i64"),N.addLocal("m"+Et,"i64"),N.addLocal("q"+Et,"i64");const I=N.getCodeBuilder(),V=be("100000000",16).minus(a.modInv(be("100000000",16))).toJSNumber();N.addCode(I.setLocal("np32",I.i64_const(V)));const lt=[],at=[];function At(Et,Bt){let Pt,Ct;return lt[Et]?Pt=I.getLocal("x"+Et):(Pt=I.teeLocal("x"+Et,I.i64_load32_u(I.getLocal("x"),Et*4)),lt[Et]=!0),lt[Bt]?Ct=I.getLocal("x"+Bt):(Ct=I.teeLocal("x"+Bt,I.i64_load32_u(I.getLocal("x"),Bt*4)),lt[Bt]=!0),I.i64_mul(Pt,Ct)}function Nt(Et,Bt){let Pt,Ct;return at[Et]?Pt=I.getLocal("q"+Et):(Pt=I.teeLocal("q"+Et,I.i64_load32_u(I.i32_const(0),m+Et*4)),at[Et]=!0),Ct=I.getLocal("m"+Bt),I.i64_mul(Pt,Ct)}let Tt="c0",bt="c1",wt="c0_old",pt="c1_old";for(let Et=0;Et<d*2-1;Et++){N.addCode(I.setLocal(Tt,I.i64_const(0)),I.setLocal(bt,I.i64_const(0)));for(let Bt=Math.max(0,Et-d+1);Bt<Et+1>>1&&Bt<d;Bt++){const Pt=Et-Bt;N.addCode(I.setLocal(Tt,I.i64_add(I.i64_and(I.getLocal(Tt),I.i64_const(4294967295)),At(Bt,Pt)))),N.addCode(I.setLocal(bt,I.i64_add(I.getLocal(bt),I.i64_shr_u(I.getLocal(Tt),I.i64_const(32)))))}N.addCode(I.setLocal(Tt,I.i64_shl(I.i64_and(I.getLocal(Tt),I.i64_const(4294967295)),I.i64_const(1)))),N.addCode(I.setLocal(bt,I.i64_add(I.i64_shl(I.getLocal(bt),I.i64_const(1)),I.i64_shr_u(I.getLocal(Tt),I.i64_const(32))))),Et%2==0&&(N.addCode(I.setLocal(Tt,I.i64_add(I.i64_and(I.getLocal(Tt),I.i64_const(4294967295)),At(Et>>1,Et>>1)))),N.addCode(I.setLocal(bt,I.i64_add(I.getLocal(bt),I.i64_shr_u(I.getLocal(Tt),I.i64_const(32)))))),Et>0&&(N.addCode(I.setLocal(Tt,I.i64_add(I.i64_and(I.getLocal(Tt),I.i64_const(4294967295)),I.i64_and(I.getLocal(wt),I.i64_const(4294967295))))),N.addCode(I.setLocal(bt,I.i64_add(I.i64_add(I.getLocal(bt),I.i64_shr_u(I.getLocal(Tt),I.i64_const(32))),I.getLocal(pt)))));for(let Bt=Math.max(1,Et-d+1);Bt<=Et&&Bt<d;Bt++){const Pt=Et-Bt;N.addCode(I.setLocal(Tt,I.i64_add(I.i64_and(I.getLocal(Tt),I.i64_const(4294967295)),Nt(Bt,Pt)))),N.addCode(I.setLocal(bt,I.i64_add(I.getLocal(bt),I.i64_shr_u(I.getLocal(Tt),I.i64_const(32)))))}Et<d&&(N.addCode(I.setLocal("m"+Et,I.i64_and(I.i64_mul(I.i64_and(I.getLocal(Tt),I.i64_const(4294967295)),I.getLocal("np32")),I.i64_const("0xFFFFFFFF")))),N.addCode(I.setLocal(Tt,I.i64_add(I.i64_and(I.getLocal(Tt),I.i64_const(4294967295)),Nt(0,Et)))),N.addCode(I.setLocal(bt,I.i64_add(I.getLocal(bt),I.i64_shr_u(I.getLocal(Tt),I.i64_const(32)))))),Et>=d&&N.addCode(I.i64_store32(I.getLocal("r"),(Et-d)*4,I.getLocal(Tt))),N.addCode(I.setLocal(wt,I.getLocal(bt)),I.setLocal(pt,I.i64_shr_u(I.getLocal(wt),I.i64_const(32))))}N.addCode(I.i64_store32(I.getLocal("r"),d*4-4,I.getLocal(wt))),N.addCode(I.if(I.i32_wrap_i64(I.getLocal(pt)),I.drop(I.call(l+"_sub",I.getLocal("r"),I.i32_const(m),I.getLocal("r"))),I.if(I.call(l+"_gte",I.getLocal("r"),I.i32_const(m)),I.drop(I.call(l+"_sub",I.getLocal("r"),I.i32_const(m),I.getLocal("r"))))))}function S(){const N=t.addFunction(f+"_squareOld");N.addParam("x","i32"),N.addParam("r","i32");const I=N.getCodeBuilder();N.addCode(I.call(f+"_mul",I.getLocal("x"),I.getLocal("x"),I.getLocal("r")))}function q(){const N=t.addFunction(f+"_toMontgomery");N.addParam("x","i32"),N.addParam("r","i32");const I=N.getCodeBuilder();N.addCode(I.call(f+"_mul",I.getLocal("x"),I.i32_const(A),I.getLocal("r")))}function tt(){const N=t.alloc(g*2),I=t.addFunction(f+"_fromMontgomery");I.addParam("x","i32"),I.addParam("r","i32");const V=I.getCodeBuilder();I.addCode(V.call(l+"_copy",V.getLocal("x"),V.i32_const(N))),I.addCode(V.call(l+"_zero",V.i32_const(N+g))),I.addCode(V.call(f+"_mReduct",V.i32_const(N),V.getLocal("r")))}function ft(){const N=t.addFunction(f+"_inverse");N.addParam("x","i32"),N.addParam("r","i32");const I=N.getCodeBuilder();N.addCode(I.call(f+"_fromMontgomery",I.getLocal("x"),I.getLocal("r"))),N.addCode(I.call(l+"_inverseMod",I.getLocal("r"),I.i32_const(m),I.getLocal("r"))),N.addCode(I.call(f+"_toMontgomery",I.getLocal("r"),I.getLocal("r")))}let it=be(2);if(a.isPrime())for(;!it.modPow(C,a).equals(x);)it=it.add(be.one);t.alloc(ze.bigInt2BytesLE(it.shiftLeft(s*64).mod(a),g));let nt=0,gt=x;for(;!gt.isOdd()&&!gt.isZero();)nt++,gt=gt.shiftRight(1);const ot=t.alloc(g,ze.bigInt2BytesLE(gt,g)),It=it.modPow(gt,a),Ot=t.alloc(ze.bigInt2BytesLE(It.shiftLeft(s*64).mod(a),g)),Lt=gt.add(1).shiftRight(1),vt=t.alloc(g,ze.bigInt2BytesLE(Lt,g));function L(){const N=t.addFunction(f+"_sqrt");N.addParam("n","i32"),N.addParam("r","i32"),N.addLocal("m","i32"),N.addLocal("i","i32"),N.addLocal("j","i32");const I=N.getCodeBuilder(),V=I.i32_const(_),lt=I.i32_const(t.alloc(g)),at=I.i32_const(t.alloc(g)),At=I.i32_const(t.alloc(g)),Nt=I.i32_const(t.alloc(g)),Tt=I.i32_const(t.alloc(g));N.addCode(I.if(I.call(f+"_isZero",I.getLocal("n")),I.ret(I.call(f+"_zero",I.getLocal("r")))),I.setLocal("m",I.i32_const(nt)),I.call(f+"_copy",I.i32_const(Ot),lt),I.call(f+"_exp",I.getLocal("n"),I.i32_const(ot),I.i32_const(g),at),I.call(f+"_exp",I.getLocal("n"),I.i32_const(vt),I.i32_const(g),At),I.block(I.loop(I.br_if(1,I.call(f+"_eq",at,V)),I.call(f+"_square",at,Nt),I.setLocal("i",I.i32_const(1)),I.block(I.loop(I.br_if(1,I.call(f+"_eq",Nt,V)),I.call(f+"_square",Nt,Nt),I.setLocal("i",I.i32_add(I.getLocal("i"),I.i32_const(1))),I.br(0))),I.call(f+"_copy",lt,Tt),I.setLocal("j",I.i32_sub(I.i32_sub(I.getLocal("m"),I.getLocal("i")),I.i32_const(1))),I.block(I.loop(I.br_if(1,I.i32_eqz(I.getLocal("j"))),I.call(f+"_square",Tt,Tt),I.setLocal("j",I.i32_sub(I.getLocal("j"),I.i32_const(1))),I.br(0))),I.setLocal("m",I.getLocal("i")),I.call(f+"_square",Tt,lt),I.call(f+"_mul",at,lt,at),I.call(f+"_mul",At,Tt,At),I.br(0))),I.if(I.call(f+"_isNegative",At),I.call(f+"_neg",At,I.getLocal("r")),I.call(f+"_copy",At,I.getLocal("r"))))}function u(){const N=t.addFunction(f+"_isSquare");N.addParam("n","i32"),N.setReturnType("i32");const I=N.getCodeBuilder(),V=I.i32_const(_),lt=I.i32_const(t.alloc(g));N.addCode(I.if(I.call(f+"_isZero",I.getLocal("n")),I.ret(I.i32_const(1))),I.call(f+"_exp",I.getLocal("n"),I.i32_const(k),I.i32_const(g),lt),I.call(f+"_eq",lt,V))}function F(){const N=t.addFunction(f+"_load");N.addParam("scalar","i32"),N.addParam("scalarLen","i32"),N.addParam("r","i32"),N.addLocal("p","i32"),N.addLocal("l","i32"),N.addLocal("i","i32"),N.addLocal("j","i32");const I=N.getCodeBuilder(),V=I.i32_const(t.alloc(g)),lt=t.alloc(g),at=I.i32_const(lt);N.addCode(I.call(l+"_zero",I.getLocal("r")),I.setLocal("i",I.i32_const(g)),I.setLocal("p",I.getLocal("scalar")),I.block(I.loop(I.br_if(1,I.i32_gt_u(I.getLocal("i"),I.getLocal("scalarLen"))),I.if(I.i32_eq(I.getLocal("i"),I.i32_const(g)),I.call(f+"_one",V),I.call(f+"_mul",V,I.i32_const(A),V)),I.call(f+"_mul",I.getLocal("p"),V,at),I.call(f+"_add",I.getLocal("r"),at,I.getLocal("r")),I.setLocal("p",I.i32_add(I.getLocal("p"),I.i32_const(g))),I.setLocal("i",I.i32_add(I.getLocal("i"),I.i32_const(g))),I.br(0))),I.setLocal("l",I.i32_rem_u(I.getLocal("scalarLen"),I.i32_const(g))),I.if(I.i32_eqz(I.getLocal("l")),I.ret([])),I.call(l+"_zero",at),I.setLocal("j",I.i32_const(0)),I.block(I.loop(I.br_if(1,I.i32_eq(I.getLocal("j"),I.getLocal("l"))),I.i32_store8(I.getLocal("j"),lt,I.i32_load8_u(I.getLocal("p"))),I.setLocal("p",I.i32_add(I.getLocal("p"),I.i32_const(1))),I.setLocal("j",I.i32_add(I.getLocal("j"),I.i32_const(1))),I.br(0))),I.if(I.i32_eq(I.getLocal("i"),I.i32_const(g)),I.call(f+"_one",V),I.call(f+"_mul",V,I.i32_const(A),V)),I.call(f+"_mul",at,V,at),I.call(f+"_add",I.getLocal("r"),at,I.getLocal("r")))}function h(){const N=t.addFunction(f+"_timesScalar");N.addParam("x","i32"),N.addParam("scalar","i32"),N.addParam("scalarLen","i32"),N.addParam("r","i32");const I=N.getCodeBuilder(),V=I.i32_const(t.alloc(g));N.addCode(I.call(f+"_load",I.getLocal("scalar"),I.getLocal("scalarLen"),V),I.call(f+"_toMontgomery",V,V),I.call(f+"_mul",I.getLocal("x"),V,I.getLocal("r")))}function H(){const N=t.addFunction(f+"_isOne");N.addParam("x","i32"),N.setReturnType("i32");const I=N.getCodeBuilder();N.addCode(I.ret(I.call(l+"_eq",I.getLocal("x"),I.i32_const(_))))}return t.exportFunction(l+"_copy",f+"_copy"),t.exportFunction(l+"_zero",f+"_zero"),t.exportFunction(l+"_isZero",f+"_isZero"),t.exportFunction(l+"_eq",f+"_eq"),H(),K(),T(),p(),$(),U(),M(),S(),q(),tt(),w(),D(),ft(),z(),F(),h(),E_(t,f),br(t,f+"_batchToMontgomery",f+"_toMontgomery",g,g),br(t,f+"_batchFromMontgomery",f+"_fromMontgomery",g,g),br(t,f+"_batchNeg",f+"_neg",g,g),Fr(t,f+"_batchAdd",f+"_add",g,g),Fr(t,f+"_batchSub",f+"_sub",g,g),Fr(t,f+"_batchMul",f+"_mul",g,g),t.exportFunction(f+"_add"),t.exportFunction(f+"_sub"),t.exportFunction(f+"_neg"),t.exportFunction(f+"_isNegative"),t.exportFunction(f+"_isOne"),t.exportFunction(f+"_sign"),t.exportFunction(f+"_mReduct"),t.exportFunction(f+"_mul"),t.exportFunction(f+"_square"),t.exportFunction(f+"_squareOld"),t.exportFunction(f+"_fromMontgomery"),t.exportFunction(f+"_toMontgomery"),t.exportFunction(f+"_inverse"),t.exportFunction(f+"_one"),t.exportFunction(f+"_load"),t.exportFunction(f+"_timesScalar"),I_(t,f+"_exp",g,f+"_mul",f+"_square",l+"_copy",f+"_one"),t.exportFunction(f+"_exp"),t.exportFunction(f+"_batchInverse"),a.isPrime()&&(L(),u(),t.exportFunction(f+"_sqrt"),t.exportFunction(f+"_isSquare")),t.exportFunction(f+"_batchToMontgomery"),t.exportFunction(f+"_batchFromMontgomery"),f};const w_=en.exports,S_=Br;var Nc=function(t,n,i,o,a){const s=w_(n),d=Math.floor((s.minus(1).bitLength()-1)/64)+1,g=d*8,f=i||"f1";if(t.modules[f])return f;t.modules[f]={n64:d};const l=a||"int",m=S_(t,s,o,l),A=t.modules[m].pR2,_=t.modules[m].pq,R=t.modules[m].pePlusOne;function x(){const Z=t.alloc(g),z=t.addFunction(f+"_mul");z.addParam("x","i32"),z.addParam("y","i32"),z.addParam("r","i32");const K=z.getCodeBuilder();z.addCode(K.call(m+"_mul",K.getLocal("x"),K.getLocal("y"),K.i32_const(Z))),z.addCode(K.call(m+"_mul",K.i32_const(Z),K.i32_const(A),K.getLocal("r")))}function C(){const Z=t.addFunction(f+"_square");Z.addParam("x","i32"),Z.addParam("r","i32");const z=Z.getCodeBuilder();Z.addCode(z.call(f+"_mul",z.getLocal("x"),z.getLocal("x"),z.getLocal("r")))}function k(){const Z=t.addFunction(f+"_inverse");Z.addParam("x","i32"),Z.addParam("r","i32");const z=Z.getCodeBuilder();Z.addCode(z.call(l+"_inverseMod",z.getLocal("x"),z.i32_const(_),z.getLocal("r")))}function O(){const Z=t.addFunction(f+"_isNegative");Z.addParam("x","i32"),Z.setReturnType("i32");const z=Z.getCodeBuilder();Z.addCode(z.call(l+"_gte",z.getLocal("x"),z.i32_const(R)))}return x(),C(),k(),O(),t.exportFunction(m+"_add",f+"_add"),t.exportFunction(m+"_sub",f+"_sub"),t.exportFunction(m+"_neg",f+"_neg"),t.exportFunction(f+"_mul"),t.exportFunction(f+"_square"),t.exportFunction(f+"_inverse"),t.exportFunction(f+"_isNegative"),t.exportFunction(m+"_copy",f+"_copy"),t.exportFunction(m+"_zero",f+"_zero"),t.exportFunction(m+"_one",f+"_one"),t.exportFunction(m+"_isZero",f+"_isZero"),t.exportFunction(m+"_eq",f+"_eq"),f};const v_=vr,C_=Cr,fi=en.exports,Tr=hn;var Mc=function(t,n,i,o){if(t.modules[i])return i;const a=t.modules[o].n64*8,s=t.modules[o].q;t.modules[i]={n64:t.modules[o].n64*2};function d(){const M=t.addFunction(i+"_add");M.addParam("x","i32"),M.addParam("y","i32"),M.addParam("r","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a)),ft=S.getLocal("y"),it=S.i32_add(S.getLocal("y"),S.i32_const(a)),nt=S.getLocal("r"),gt=S.i32_add(S.getLocal("r"),S.i32_const(a));M.addCode(S.call(o+"_add",q,ft,nt),S.call(o+"_add",tt,it,gt))}function g(){const M=t.addFunction(i+"_timesScalar");M.addParam("x","i32"),M.addParam("scalar","i32"),M.addParam("scalarLen","i32"),M.addParam("r","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a)),ft=S.getLocal("r"),it=S.i32_add(S.getLocal("r"),S.i32_const(a));M.addCode(S.call(o+"_timesScalar",q,S.getLocal("scalar"),S.getLocal("scalarLen"),ft),S.call(o+"_timesScalar",tt,S.getLocal("scalar"),S.getLocal("scalarLen"),it))}function f(){const M=t.addFunction(i+"_sub");M.addParam("x","i32"),M.addParam("y","i32"),M.addParam("r","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a)),ft=S.getLocal("y"),it=S.i32_add(S.getLocal("y"),S.i32_const(a)),nt=S.getLocal("r"),gt=S.i32_add(S.getLocal("r"),S.i32_const(a));M.addCode(S.call(o+"_sub",q,ft,nt),S.call(o+"_sub",tt,it,gt))}function l(){const M=t.addFunction(i+"_neg");M.addParam("x","i32"),M.addParam("r","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a)),ft=S.getLocal("r"),it=S.i32_add(S.getLocal("r"),S.i32_const(a));M.addCode(S.call(o+"_neg",q,ft),S.call(o+"_neg",tt,it))}function m(){const M=t.addFunction(i+"_conjugate");M.addParam("x","i32"),M.addParam("r","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a)),ft=S.getLocal("r"),it=S.i32_add(S.getLocal("r"),S.i32_const(a));M.addCode(S.call(o+"_copy",q,ft),S.call(o+"_neg",tt,it))}function A(){const M=t.addFunction(i+"_isNegative");M.addParam("x","i32"),M.setReturnType("i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a));M.addCode(S.if(S.call(o+"_isZero",tt),S.ret(S.call(o+"_isNegative",q))),S.ret(S.call(o+"_isNegative",tt)))}function _(){const M=t.addFunction(i+"_mul");M.addParam("x","i32"),M.addParam("y","i32"),M.addParam("r","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a)),ft=S.getLocal("y"),it=S.i32_add(S.getLocal("y"),S.i32_const(a)),nt=S.getLocal("r"),gt=S.i32_add(S.getLocal("r"),S.i32_const(a)),ot=S.i32_const(t.alloc(a)),It=S.i32_const(t.alloc(a)),Ot=S.i32_const(t.alloc(a)),Lt=S.i32_const(t.alloc(a));M.addCode(S.call(o+"_mul",q,ft,ot),S.call(o+"_mul",tt,it,It),S.call(o+"_add",q,tt,Ot),S.call(o+"_add",ft,it,Lt),S.call(o+"_mul",Ot,Lt,Ot),S.call(n,It,nt),S.call(o+"_add",ot,nt,nt),S.call(o+"_add",ot,It,gt),S.call(o+"_sub",Ot,gt,gt))}function R(){const M=t.addFunction(i+"_mul1");M.addParam("x","i32"),M.addParam("y","i32"),M.addParam("r","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a)),ft=S.getLocal("y"),it=S.getLocal("r"),nt=S.i32_add(S.getLocal("r"),S.i32_const(a));M.addCode(S.call(o+"_mul",q,ft,it),S.call(o+"_mul",tt,ft,nt))}function x(){const M=t.addFunction(i+"_square");M.addParam("x","i32"),M.addParam("r","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a)),ft=S.getLocal("r"),it=S.i32_add(S.getLocal("r"),S.i32_const(a)),nt=S.i32_const(t.alloc(a)),gt=S.i32_const(t.alloc(a)),ot=S.i32_const(t.alloc(a)),It=S.i32_const(t.alloc(a));M.addCode(S.call(o+"_mul",q,tt,nt),S.call(o+"_add",q,tt,gt),S.call(n,tt,ot),S.call(o+"_add",q,ot,ot),S.call(n,nt,It),S.call(o+"_add",It,nt,It),S.call(o+"_mul",gt,ot,ft),S.call(o+"_sub",ft,It,ft),S.call(o+"_add",nt,nt,it))}function C(){const M=t.addFunction(i+"_toMontgomery");M.addParam("x","i32"),M.addParam("r","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a)),ft=S.getLocal("r"),it=S.i32_add(S.getLocal("r"),S.i32_const(a));M.addCode(S.call(o+"_toMontgomery",q,ft),S.call(o+"_toMontgomery",tt,it))}function k(){const M=t.addFunction(i+"_fromMontgomery");M.addParam("x","i32"),M.addParam("r","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a)),ft=S.getLocal("r"),it=S.i32_add(S.getLocal("r"),S.i32_const(a));M.addCode(S.call(o+"_fromMontgomery",q,ft),S.call(o+"_fromMontgomery",tt,it))}function O(){const M=t.addFunction(i+"_copy");M.addParam("x","i32"),M.addParam("r","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a)),ft=S.getLocal("r"),it=S.i32_add(S.getLocal("r"),S.i32_const(a));M.addCode(S.call(o+"_copy",q,ft),S.call(o+"_copy",tt,it))}function Z(){const M=t.addFunction(i+"_zero");M.addParam("x","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a));M.addCode(S.call(o+"_zero",q),S.call(o+"_zero",tt))}function z(){const M=t.addFunction(i+"_one");M.addParam("x","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a));M.addCode(S.call(o+"_one",q),S.call(o+"_zero",tt))}function K(){const M=t.addFunction(i+"_eq");M.addParam("x","i32"),M.addParam("y","i32"),M.setReturnType("i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a)),ft=S.getLocal("y"),it=S.i32_add(S.getLocal("y"),S.i32_const(a));M.addCode(S.i32_and(S.call(o+"_eq",q,ft),S.call(o+"_eq",tt,it)))}function T(){const M=t.addFunction(i+"_isZero");M.addParam("x","i32"),M.setReturnType("i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a));M.addCode(S.i32_and(S.call(o+"_isZero",q),S.call(o+"_isZero",tt)))}function p(){const M=t.addFunction(i+"_inverse");M.addParam("x","i32"),M.addParam("r","i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a)),ft=S.getLocal("r"),it=S.i32_add(S.getLocal("r"),S.i32_const(a)),nt=S.i32_const(t.alloc(a)),gt=S.i32_const(t.alloc(a)),ot=S.i32_const(t.alloc(a)),It=S.i32_const(t.alloc(a));M.addCode(S.call(o+"_square",q,nt),S.call(o+"_square",tt,gt),S.call(n,gt,ot),S.call(o+"_sub",nt,ot,ot),S.call(o+"_inverse",ot,It),S.call(o+"_mul",q,It,ft),S.call(o+"_mul",tt,It,it),S.call(o+"_neg",it,it))}function w(){const M=t.addFunction(i+"_sign");M.addParam("x","i32"),M.addLocal("s","i32"),M.setReturnType("i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a));M.addCode(S.setLocal("s",S.call(o+"_sign",tt)),S.if(S.getLocal("s"),S.ret(S.getLocal("s"))),S.ret(S.call(o+"_sign",q)))}function D(){const M=t.addFunction(i+"_isOne");M.addParam("x","i32"),M.setReturnType("i32");const S=M.getCodeBuilder(),q=S.getLocal("x"),tt=S.i32_add(S.getLocal("x"),S.i32_const(a));M.addCode(S.ret(S.i32_and(S.call(o+"_isOne",q),S.call(o+"_isZero",tt))))}function $(){const M=t.addFunction(i+"_sqrt");M.addParam("a","i32"),M.addParam("pr","i32");const S=M.getCodeBuilder(),q=S.i32_const(t.alloc(Tr.bigInt2BytesLE(fi(s).minus(fi(3)).divide(4),a))),tt=S.i32_const(t.alloc(Tr.bigInt2BytesLE(fi(s).minus(fi(1)).divide(2),a))),ft=S.getLocal("a"),it=S.i32_const(t.alloc(a*2)),nt=S.i32_const(t.alloc(a*2)),gt=S.i32_const(t.alloc(a*2)),ot=t.alloc(a*2),It=S.i32_const(ot),Ot=S.i32_const(ot),Lt=S.i32_const(ot+a),vt=S.i32_const(t.alloc(a*2)),L=S.i32_const(t.alloc(a*2));M.addCode(S.call(i+"_one",It),S.call(i+"_neg",It,It),S.call(i+"_exp",ft,q,S.i32_const(a),it),S.call(i+"_square",it,nt),S.call(i+"_mul",ft,nt,nt),S.call(i+"_conjugate",nt,gt),S.call(i+"_mul",gt,nt,gt),S.if(S.call(i+"_eq",gt,It),S.unreachable()),S.call(i+"_mul",it,ft,vt),S.if(S.call(i+"_eq",nt,It),[...S.call(o+"_zero",Ot),...S.call(o+"_one",Lt),...S.call(i+"_mul",It,vt,S.getLocal("pr"))],[...S.call(i+"_one",L),...S.call(i+"_add",L,nt,L),...S.call(i+"_exp",L,tt,S.i32_const(a),L),...S.call(i+"_mul",L,vt,S.getLocal("pr"))]))}function U(){const M=t.addFunction(i+"_isSquare");M.addParam("a","i32"),M.setReturnType("i32");const S=M.getCodeBuilder(),q=S.i32_const(t.alloc(Tr.bigInt2BytesLE(fi(s).minus(fi(3)).divide(4),a))),tt=S.getLocal("a"),ft=S.i32_const(t.alloc(a*2)),it=S.i32_const(t.alloc(a*2)),nt=S.i32_const(t.alloc(a*2)),gt=t.alloc(a*2),ot=S.i32_const(gt);M.addCode(S.call(i+"_one",ot),S.call(i+"_neg",ot,ot),S.call(i+"_exp",tt,q,S.i32_const(a),ft),S.call(i+"_square",ft,it),S.call(i+"_mul",tt,it,it),S.call(i+"_conjugate",it,nt),S.call(i+"_mul",nt,it,nt),S.if(S.call(i+"_eq",nt,ot),S.ret(S.i32_const(0))),S.ret(S.i32_const(1)))}return T(),D(),Z(),z(),O(),_(),R(),x(),d(),f(),l(),m(),C(),k(),K(),p(),g(),w(),A(),t.exportFunction(i+"_isZero"),t.exportFunction(i+"_isOne"),t.exportFunction(i+"_zero"),t.exportFunction(i+"_one"),t.exportFunction(i+"_copy"),t.exportFunction(i+"_mul"),t.exportFunction(i+"_mul1"),t.exportFunction(i+"_square"),t.exportFunction(i+"_add"),t.exportFunction(i+"_sub"),t.exportFunction(i+"_neg"),t.exportFunction(i+"_sign"),t.exportFunction(i+"_conjugate"),t.exportFunction(i+"_fromMontgomery"),t.exportFunction(i+"_toMontgomery"),t.exportFunction(i+"_eq"),t.exportFunction(i+"_inverse"),C_(t,i),v_(t,i+"_exp",a*2,i+"_mul",i+"_square",i+"_copy",i+"_one"),$(),U(),t.exportFunction(i+"_exp"),t.exportFunction(i+"_timesScalar"),t.exportFunction(i+"_batchInverse"),t.exportFunction(i+"_sqrt"),t.exportFunction(i+"_isSquare"),t.exportFunction(i+"_isNegative"),i};const b_=vr,F_=Cr;var Uc=function(t,n,i,o){if(t.modules[i])return i;const a=t.modules[o].n64*8;t.modules[i]={n64:t.modules[o].n64*3};function s(){const p=t.addFunction(i+"_add");p.addParam("x","i32"),p.addParam("y","i32"),p.addParam("r","i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a)),M=w.getLocal("y"),S=w.i32_add(w.getLocal("y"),w.i32_const(a)),q=w.i32_add(w.getLocal("y"),w.i32_const(2*a)),tt=w.getLocal("r"),ft=w.i32_add(w.getLocal("r"),w.i32_const(a)),it=w.i32_add(w.getLocal("r"),w.i32_const(2*a));p.addCode(w.call(o+"_add",D,M,tt),w.call(o+"_add",$,S,ft),w.call(o+"_add",U,q,it))}function d(){const p=t.addFunction(i+"_timesScalar");p.addParam("x","i32"),p.addParam("scalar","i32"),p.addParam("scalarLen","i32"),p.addParam("r","i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a)),M=w.getLocal("r"),S=w.i32_add(w.getLocal("r"),w.i32_const(a)),q=w.i32_add(w.getLocal("r"),w.i32_const(2*a));p.addCode(w.call(o+"_timesScalar",D,w.getLocal("scalar"),w.getLocal("scalarLen"),M),w.call(o+"_timesScalar",$,w.getLocal("scalar"),w.getLocal("scalarLen"),S),w.call(o+"_timesScalar",U,w.getLocal("scalar"),w.getLocal("scalarLen"),q))}function g(){const p=t.addFunction(i+"_sub");p.addParam("x","i32"),p.addParam("y","i32"),p.addParam("r","i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a)),M=w.getLocal("y"),S=w.i32_add(w.getLocal("y"),w.i32_const(a)),q=w.i32_add(w.getLocal("y"),w.i32_const(2*a)),tt=w.getLocal("r"),ft=w.i32_add(w.getLocal("r"),w.i32_const(a)),it=w.i32_add(w.getLocal("r"),w.i32_const(2*a));p.addCode(w.call(o+"_sub",D,M,tt),w.call(o+"_sub",$,S,ft),w.call(o+"_sub",U,q,it))}function f(){const p=t.addFunction(i+"_neg");p.addParam("x","i32"),p.addParam("r","i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a)),M=w.getLocal("r"),S=w.i32_add(w.getLocal("r"),w.i32_const(a)),q=w.i32_add(w.getLocal("r"),w.i32_const(2*a));p.addCode(w.call(o+"_neg",D,M),w.call(o+"_neg",$,S),w.call(o+"_neg",U,q))}function l(){const p=t.addFunction(i+"_isNegative");p.addParam("x","i32"),p.setReturnType("i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a));p.addCode(w.if(w.call(o+"_isZero",U),w.if(w.call(o+"_isZero",$),w.ret(w.call(o+"_isNegative",D)),w.ret(w.call(o+"_isNegative",$)))),w.ret(w.call(o+"_isNegative",U)))}function m(){const p=t.addFunction(i+"_mul");p.addParam("x","i32"),p.addParam("y","i32"),p.addParam("r","i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a)),M=w.getLocal("y"),S=w.i32_add(w.getLocal("y"),w.i32_const(a)),q=w.i32_add(w.getLocal("y"),w.i32_const(2*a)),tt=w.getLocal("r"),ft=w.i32_add(w.getLocal("r"),w.i32_const(a)),it=w.i32_add(w.getLocal("r"),w.i32_const(2*a)),nt=w.i32_const(t.alloc(a)),gt=w.i32_const(t.alloc(a)),ot=w.i32_const(t.alloc(a)),It=w.i32_const(t.alloc(a)),Ot=w.i32_const(t.alloc(a)),Lt=w.i32_const(t.alloc(a)),vt=w.i32_const(t.alloc(a)),L=w.i32_const(t.alloc(a)),u=w.i32_const(t.alloc(a)),F=w.i32_const(t.alloc(a)),h=w.i32_const(t.alloc(a)),H=w.i32_const(t.alloc(a)),N=w.i32_const(t.alloc(a));p.addCode(w.call(o+"_mul",D,M,nt),w.call(o+"_mul",$,S,gt),w.call(o+"_mul",U,q,ot),w.call(o+"_add",D,$,It),w.call(o+"_add",M,S,Ot),w.call(o+"_add",D,U,Lt),w.call(o+"_add",M,q,vt),w.call(o+"_add",$,U,L),w.call(o+"_add",S,q,u),w.call(o+"_add",nt,gt,F),w.call(o+"_add",nt,ot,h),w.call(o+"_add",gt,ot,H),w.call(o+"_mul",L,u,tt),w.call(o+"_sub",tt,H,tt),w.call(n,tt,tt),w.call(o+"_add",nt,tt,tt),w.call(o+"_mul",It,Ot,ft),w.call(o+"_sub",ft,F,ft),w.call(n,ot,N),w.call(o+"_add",ft,N,ft),w.call(o+"_mul",Lt,vt,it),w.call(o+"_sub",it,h,it),w.call(o+"_add",it,gt,it))}function A(){const p=t.addFunction(i+"_square");p.addParam("x","i32"),p.addParam("r","i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a)),M=w.getLocal("r"),S=w.i32_add(w.getLocal("r"),w.i32_const(a)),q=w.i32_add(w.getLocal("r"),w.i32_const(2*a)),tt=w.i32_const(t.alloc(a)),ft=w.i32_const(t.alloc(a)),it=w.i32_const(t.alloc(a)),nt=w.i32_const(t.alloc(a)),gt=w.i32_const(t.alloc(a)),ot=w.i32_const(t.alloc(a)),It=w.i32_const(t.alloc(a));p.addCode(w.call(o+"_square",D,tt),w.call(o+"_mul",D,$,ft),w.call(o+"_add",ft,ft,it),w.call(o+"_sub",D,$,nt),w.call(o+"_add",nt,U,nt),w.call(o+"_square",nt,nt),w.call(o+"_mul",$,U,gt),w.call(o+"_add",gt,gt,ot),w.call(o+"_square",U,It),w.call(n,ot,M),w.call(o+"_add",tt,M,M),w.call(n,It,S),w.call(o+"_add",it,S,S),w.call(o+"_add",tt,It,q),w.call(o+"_sub",ot,q,q),w.call(o+"_add",nt,q,q),w.call(o+"_add",it,q,q))}function _(){const p=t.addFunction(i+"_toMontgomery");p.addParam("x","i32"),p.addParam("r","i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a)),M=w.getLocal("r"),S=w.i32_add(w.getLocal("r"),w.i32_const(a)),q=w.i32_add(w.getLocal("r"),w.i32_const(2*a));p.addCode(w.call(o+"_toMontgomery",D,M),w.call(o+"_toMontgomery",$,S),w.call(o+"_toMontgomery",U,q))}function R(){const p=t.addFunction(i+"_fromMontgomery");p.addParam("x","i32"),p.addParam("r","i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a)),M=w.getLocal("r"),S=w.i32_add(w.getLocal("r"),w.i32_const(a)),q=w.i32_add(w.getLocal("r"),w.i32_const(2*a));p.addCode(w.call(o+"_fromMontgomery",D,M),w.call(o+"_fromMontgomery",$,S),w.call(o+"_fromMontgomery",U,q))}function x(){const p=t.addFunction(i+"_copy");p.addParam("x","i32"),p.addParam("r","i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a)),M=w.getLocal("r"),S=w.i32_add(w.getLocal("r"),w.i32_const(a)),q=w.i32_add(w.getLocal("r"),w.i32_const(2*a));p.addCode(w.call(o+"_copy",D,M),w.call(o+"_copy",$,S),w.call(o+"_copy",U,q))}function C(){const p=t.addFunction(i+"_zero");p.addParam("x","i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a));p.addCode(w.call(o+"_zero",D),w.call(o+"_zero",$),w.call(o+"_zero",U))}function k(){const p=t.addFunction(i+"_one");p.addParam("x","i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a));p.addCode(w.call(o+"_one",D),w.call(o+"_zero",$),w.call(o+"_zero",U))}function O(){const p=t.addFunction(i+"_eq");p.addParam("x","i32"),p.addParam("y","i32"),p.setReturnType("i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a)),M=w.getLocal("y"),S=w.i32_add(w.getLocal("y"),w.i32_const(a)),q=w.i32_add(w.getLocal("y"),w.i32_const(2*a));p.addCode(w.i32_and(w.i32_and(w.call(o+"_eq",D,M),w.call(o+"_eq",$,S)),w.call(o+"_eq",U,q)))}function Z(){const p=t.addFunction(i+"_isZero");p.addParam("x","i32"),p.setReturnType("i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a));p.addCode(w.i32_and(w.i32_and(w.call(o+"_isZero",D),w.call(o+"_isZero",$)),w.call(o+"_isZero",U)))}function z(){const p=t.addFunction(i+"_inverse");p.addParam("x","i32"),p.addParam("r","i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a)),M=w.getLocal("r"),S=w.i32_add(w.getLocal("r"),w.i32_const(a)),q=w.i32_add(w.getLocal("r"),w.i32_const(2*a)),tt=w.i32_const(t.alloc(a)),ft=w.i32_const(t.alloc(a)),it=w.i32_const(t.alloc(a)),nt=w.i32_const(t.alloc(a)),gt=w.i32_const(t.alloc(a)),ot=w.i32_const(t.alloc(a)),It=w.i32_const(t.alloc(a)),Ot=w.i32_const(t.alloc(a)),Lt=w.i32_const(t.alloc(a)),vt=w.i32_const(t.alloc(a)),L=w.i32_const(t.alloc(a));p.addCode(w.call(o+"_square",D,tt),w.call(o+"_square",$,ft),w.call(o+"_square",U,it),w.call(o+"_mul",D,$,nt),w.call(o+"_mul",D,U,gt),w.call(o+"_mul",$,U,ot),w.call(n,ot,It),w.call(o+"_sub",tt,It,It),w.call(n,it,Ot),w.call(o+"_sub",Ot,nt,Ot),w.call(o+"_sub",ft,gt,Lt),w.call(o+"_mul",U,Ot,vt),w.call(o+"_mul",$,Lt,L),w.call(o+"_add",vt,L,vt),w.call(n,vt,vt),w.call(o+"_mul",D,It,L),w.call(o+"_add",L,vt,vt),w.call(o+"_inverse",vt,vt),w.call(o+"_mul",vt,It,M),w.call(o+"_mul",vt,Ot,S),w.call(o+"_mul",vt,Lt,q))}function K(){const p=t.addFunction(i+"_sign");p.addParam("x","i32"),p.addLocal("s","i32"),p.setReturnType("i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(2*a));p.addCode(w.setLocal("s",w.call(o+"_sign",U)),w.if(w.getLocal("s"),w.ret(w.getLocal("s"))),w.setLocal("s",w.call(o+"_sign",$)),w.if(w.getLocal("s"),w.ret(w.getLocal("s"))),w.ret(w.call(o+"_sign",D)))}function T(){const p=t.addFunction(i+"_isOne");p.addParam("x","i32"),p.setReturnType("i32");const w=p.getCodeBuilder(),D=w.getLocal("x"),$=w.i32_add(w.getLocal("x"),w.i32_const(a)),U=w.i32_add(w.getLocal("x"),w.i32_const(a*2));p.addCode(w.ret(w.i32_and(w.i32_and(w.call(o+"_isOne",D),w.call(o+"_isZero",$)),w.call(o+"_isZero",U))))}return Z(),T(),C(),k(),x(),m(),A(),s(),g(),f(),K(),_(),R(),O(),z(),d(),l(),t.exportFunction(i+"_isZero"),t.exportFunction(i+"_isOne"),t.exportFunction(i+"_zero"),t.exportFunction(i+"_one"),t.exportFunction(i+"_copy"),t.exportFunction(i+"_mul"),t.exportFunction(i+"_square"),t.exportFunction(i+"_add"),t.exportFunction(i+"_sub"),t.exportFunction(i+"_neg"),t.exportFunction(i+"_sign"),t.exportFunction(i+"_fromMontgomery"),t.exportFunction(i+"_toMontgomery"),t.exportFunction(i+"_eq"),t.exportFunction(i+"_inverse"),F_(t,i),b_(t,i+"_exp",a*3,i+"_mul",i+"_square",i+"_copy",i+"_one"),t.exportFunction(i+"_exp"),t.exportFunction(i+"_timesScalar"),t.exportFunction(i+"_batchInverse"),t.exportFunction(i+"_isNegative"),i},B_=function(t,n,i,o,a,s,d,g){const f=t.addFunction(n);f.addParam("base","i32"),f.addParam("scalar","i32"),f.addParam("scalarLength","i32"),f.addParam("r","i32"),f.addLocal("old0","i32"),f.addLocal("nbits","i32"),f.addLocal("i","i32"),f.addLocal("last","i32"),f.addLocal("cur","i32"),f.addLocal("carry","i32"),f.addLocal("p","i32");const l=f.getCodeBuilder(),m=l.i32_const(t.alloc(i));function A(R){return l.i32_and(l.i32_shr_u(l.i32_load(l.i32_add(l.getLocal("scalar"),l.i32_and(l.i32_shr_u(R,l.i32_const(3)),l.i32_const(4294967292)))),l.i32_and(R,l.i32_const(31))),l.i32_const(1))}function _(R){return[...l.i32_store8(l.getLocal("p"),l.i32_const(R)),...l.setLocal("p",l.i32_add(l.getLocal("p"),l.i32_const(1)))]}f.addCode(l.if(l.i32_eqz(l.getLocal("scalarLength")),[...l.call(g,l.getLocal("r")),...l.ret([])]),l.setLocal("nbits",l.i32_shl(l.getLocal("scalarLength"),l.i32_const(3))),l.setLocal("old0",l.i32_load(l.i32_const(0))),l.setLocal("p",l.getLocal("old0")),l.i32_store(l.i32_const(0),l.i32_and(l.i32_add(l.i32_add(l.getLocal("old0"),l.i32_const(32)),l.getLocal("nbits")),l.i32_const(4294967288))),l.setLocal("i",l.i32_const(1)),l.setLocal("last",A(l.i32_const(0))),l.setLocal("carry",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("nbits"))),l.setLocal("cur",A(l.getLocal("i"))),l.if(l.getLocal("last"),l.if(l.getLocal("cur"),l.if(l.getLocal("carry"),[...l.setLocal("last",l.i32_const(0)),...l.setLocal("carry",l.i32_const(1)),..._(1)],[...l.setLocal("last",l.i32_const(0)),...l.setLocal("carry",l.i32_const(1)),..._(255)]),l.if(l.getLocal("carry"),[...l.setLocal("last",l.i32_const(0)),...l.setLocal("carry",l.i32_const(1)),..._(255)],[...l.setLocal("last",l.i32_const(0)),...l.setLocal("carry",l.i32_const(0)),..._(1)])),l.if(l.getLocal("cur"),l.if(l.getLocal("carry"),[...l.setLocal("last",l.i32_const(0)),...l.setLocal("carry",l.i32_const(1)),..._(0)],[...l.setLocal("last",l.i32_const(1)),...l.setLocal("carry",l.i32_const(0)),..._(0)]),l.if(l.getLocal("carry"),[...l.setLocal("last",l.i32_const(1)),...l.setLocal("carry",l.i32_const(0)),..._(0)],[...l.setLocal("last",l.i32_const(0)),...l.setLocal("carry",l.i32_const(0)),..._(0)]))),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0))),l.if(l.getLocal("last"),l.if(l.getLocal("carry"),[..._(255),..._(0),..._(1)],[..._(1)]),l.if(l.getLocal("carry"),[..._(0),..._(1)])),l.setLocal("p",l.i32_sub(l.getLocal("p"),l.i32_const(1))),l.call(d,l.getLocal("base"),m),l.call(g,l.getLocal("r")),l.block(l.loop(l.call(a,l.getLocal("r"),l.getLocal("r")),l.setLocal("cur",l.i32_load8_u(l.getLocal("p"))),l.if(l.getLocal("cur"),l.if(l.i32_eq(l.getLocal("cur"),l.i32_const(1)),l.call(o,l.getLocal("r"),m,l.getLocal("r")),l.call(s,l.getLocal("r"),m,l.getLocal("r")))),l.br_if(1,l.i32_eq(l.getLocal("old0"),l.getLocal("p"))),l.setLocal("p",l.i32_sub(l.getLocal("p"),l.i32_const(1))),l.br(0))),l.i32_store(l.i32_const(0),l.getLocal("old0")))},T_=function(t,n,i,o,a){const d=t.modules[n].n64*8;function g(){const A=t.addFunction(i+"_getChunk");A.addParam("pScalar","i32"),A.addParam("scalarSize","i32"),A.addParam("startBit","i32"),A.addParam("chunkSize","i32"),A.addLocal("bitsToEnd","i32"),A.addLocal("mask","i32"),A.setReturnType("i32");const _=A.getCodeBuilder();A.addCode(_.setLocal("bitsToEnd",_.i32_sub(_.i32_mul(_.getLocal("scalarSize"),_.i32_const(8)),_.getLocal("startBit"))),_.if(_.i32_gt_s(_.getLocal("chunkSize"),_.getLocal("bitsToEnd")),_.setLocal("mask",_.i32_sub(_.i32_shl(_.i32_const(1),_.getLocal("bitsToEnd")),_.i32_const(1))),_.setLocal("mask",_.i32_sub(_.i32_shl(_.i32_const(1),_.getLocal("chunkSize")),_.i32_const(1)))),_.i32_and(_.i32_shr_u(_.i32_load(_.i32_add(_.getLocal("pScalar"),_.i32_shr_u(_.getLocal("startBit"),_.i32_const(3))),0,0),_.i32_and(_.getLocal("startBit"),_.i32_const(7))),_.getLocal("mask")))}function f(){const A=t.addFunction(i+"_chunk");A.addParam("pBases","i32"),A.addParam("pScalars","i32"),A.addParam("scalarSize","i32"),A.addParam("n","i32"),A.addParam("startBit","i32"),A.addParam("chunkSize","i32"),A.addParam("pr","i32"),A.addLocal("nChunks","i32"),A.addLocal("itScalar","i32"),A.addLocal("endScalar","i32"),A.addLocal("itBase","i32"),A.addLocal("i","i32"),A.addLocal("j","i32"),A.addLocal("nTable","i32"),A.addLocal("pTable","i32"),A.addLocal("idx","i32"),A.addLocal("pIdxTable","i32");const _=A.getCodeBuilder();A.addCode(_.if(_.i32_eqz(_.getLocal("n")),[..._.call(n+"_zero",_.getLocal("pr")),..._.ret([])]),_.setLocal("nTable",_.i32_shl(_.i32_const(1),_.getLocal("chunkSize"))),_.setLocal("pTable",_.i32_load(_.i32_const(0))),_.i32_store(_.i32_const(0),_.i32_add(_.getLocal("pTable"),_.i32_mul(_.getLocal("nTable"),_.i32_const(d)))),_.setLocal("j",_.i32_const(0)),_.block(_.loop(_.br_if(1,_.i32_eq(_.getLocal("j"),_.getLocal("nTable"))),_.call(n+"_zero",_.i32_add(_.getLocal("pTable"),_.i32_mul(_.getLocal("j"),_.i32_const(d)))),_.setLocal("j",_.i32_add(_.getLocal("j"),_.i32_const(1))),_.br(0))),_.setLocal("itBase",_.getLocal("pBases")),_.setLocal("itScalar",_.getLocal("pScalars")),_.setLocal("endScalar",_.i32_add(_.getLocal("pScalars"),_.i32_mul(_.getLocal("n"),_.getLocal("scalarSize")))),_.block(_.loop(_.br_if(1,_.i32_eq(_.getLocal("itScalar"),_.getLocal("endScalar"))),_.setLocal("idx",_.call(i+"_getChunk",_.getLocal("itScalar"),_.getLocal("scalarSize"),_.getLocal("startBit"),_.getLocal("chunkSize"))),_.if(_.getLocal("idx"),[..._.setLocal("pIdxTable",_.i32_add(_.getLocal("pTable"),_.i32_mul(_.i32_sub(_.getLocal("idx"),_.i32_const(1)),_.i32_const(d)))),..._.call(o,_.getLocal("pIdxTable"),_.getLocal("itBase"),_.getLocal("pIdxTable"))]),_.setLocal("itScalar",_.i32_add(_.getLocal("itScalar"),_.getLocal("scalarSize"))),_.setLocal("itBase",_.i32_add(_.getLocal("itBase"),_.i32_const(a))),_.br(0))),_.call(i+"_reduceTable",_.getLocal("pTable"),_.getLocal("chunkSize")),_.call(n+"_copy",_.getLocal("pTable"),_.getLocal("pr")),_.i32_store(_.i32_const(0),_.getLocal("pTable")))}function l(){const A=t.addFunction(i);A.addParam("pBases","i32"),A.addParam("pScalars","i32"),A.addParam("scalarSize","i32"),A.addParam("n","i32"),A.addParam("pr","i32"),A.addLocal("chunkSize","i32"),A.addLocal("nChunks","i32"),A.addLocal("itScalar","i32"),A.addLocal("endScalar","i32"),A.addLocal("itBase","i32"),A.addLocal("itBit","i32"),A.addLocal("i","i32"),A.addLocal("j","i32"),A.addLocal("nTable","i32"),A.addLocal("pTable","i32"),A.addLocal("idx","i32"),A.addLocal("pIdxTable","i32");const _=A.getCodeBuilder(),R=_.i32_const(t.alloc(d)),x=t.alloc([17,17,17,17,17,17,17,17,17,17,16,16,15,14,13,13,12,11,10,9,8,7,7,6,5,4,3,2,1,1,1,1]);A.addCode(_.call(n+"_zero",_.getLocal("pr")),_.if(_.i32_eqz(_.getLocal("n")),_.ret([])),_.setLocal("chunkSize",_.i32_load8_u(_.i32_clz(_.getLocal("n")),x)),_.setLocal("nChunks",_.i32_add(_.i32_div_u(_.i32_sub(_.i32_shl(_.getLocal("scalarSize"),_.i32_const(3)),_.i32_const(1)),_.getLocal("chunkSize")),_.i32_const(1))),_.setLocal("itBit",_.i32_mul(_.i32_sub(_.getLocal("nChunks"),_.i32_const(1)),_.getLocal("chunkSize"))),_.block(_.loop(_.br_if(1,_.i32_lt_s(_.getLocal("itBit"),_.i32_const(0))),_.if(_.i32_eqz(_.call(n+"_isZero",_.getLocal("pr"))),[..._.setLocal("j",_.i32_const(0)),..._.block(_.loop(_.br_if(1,_.i32_eq(_.getLocal("j"),_.getLocal("chunkSize"))),_.call(n+"_double",_.getLocal("pr"),_.getLocal("pr")),_.setLocal("j",_.i32_add(_.getLocal("j"),_.i32_const(1))),_.br(0)))]),_.call(i+"_chunk",_.getLocal("pBases"),_.getLocal("pScalars"),_.getLocal("scalarSize"),_.getLocal("n"),_.getLocal("itBit"),_.getLocal("chunkSize"),R),_.call(n+"_add",_.getLocal("pr"),R,_.getLocal("pr")),_.setLocal("itBit",_.i32_sub(_.getLocal("itBit"),_.getLocal("chunkSize"))),_.br(0))))}function m(){const A=t.addFunction(i+"_reduceTable");A.addParam("pTable","i32"),A.addParam("p","i32"),A.addLocal("half","i32"),A.addLocal("it1","i32"),A.addLocal("it2","i32"),A.addLocal("pAcc","i32");const _=A.getCodeBuilder();A.addCode(_.if(_.i32_eq(_.getLocal("p"),_.i32_const(1)),_.ret([])),_.setLocal("half",_.i32_shl(_.i32_const(1),_.i32_sub(_.getLocal("p"),_.i32_const(1)))),_.setLocal("it1",_.getLocal("pTable")),_.setLocal("it2",_.i32_add(_.getLocal("pTable"),_.i32_mul(_.getLocal("half"),_.i32_const(d)))),_.setLocal("pAcc",_.i32_sub(_.getLocal("it2"),_.i32_const(d))),_.block(_.loop(_.br_if(1,_.i32_eq(_.getLocal("it1"),_.getLocal("pAcc"))),_.call(n+"_add",_.getLocal("it1"),_.getLocal("it2"),_.getLocal("it1")),_.call(n+"_add",_.getLocal("pAcc"),_.getLocal("it2"),_.getLocal("pAcc")),_.setLocal("it1",_.i32_add(_.getLocal("it1"),_.i32_const(d))),_.setLocal("it2",_.i32_add(_.getLocal("it2"),_.i32_const(d))),_.br(0))),_.call(i+"_reduceTable",_.getLocal("pTable"),_.i32_sub(_.getLocal("p"),_.i32_const(1))),_.setLocal("p",_.i32_sub(_.getLocal("p"),_.i32_const(1))),_.block(_.loop(_.br_if(1,_.i32_eqz(_.getLocal("p"))),_.call(n+"_double",_.getLocal("pAcc"),_.getLocal("pAcc")),_.setLocal("p",_.i32_sub(_.getLocal("p"),_.i32_const(1))),_.br(0))),_.call(n+"_add",_.getLocal("pTable"),_.getLocal("pAcc"),_.getLocal("pTable")))}g(),m(),f(),l(),t.exportFunction(i),t.exportFunction(i+"_chunk")};const Dc=B_,ki=xc,Gc=T_;var kc=function(t,n,i,o){const a=t.modules[i].n64,s=a*8;if(t.modules[n])return n;t.modules[n]={n64:a*3};function d(){const L=t.addFunction(n+"_isZero");L.addParam("p1","i32"),L.setReturnType("i32");const u=L.getCodeBuilder();L.addCode(u.call(i+"_isZero",u.i32_add(u.getLocal("p1"),u.i32_const(s*2))))}function g(){const L=t.addFunction(n+"_isZeroAffine");L.addParam("p1","i32"),L.setReturnType("i32");const u=L.getCodeBuilder();L.addCode(u.i32_and(u.call(i+"_isZero",u.getLocal("p1")),u.call(i+"_isZero",u.i32_add(u.getLocal("p1"),u.i32_const(s)))))}function f(){const L=t.addFunction(n+"_copy");L.addParam("ps","i32"),L.addParam("pd","i32");const u=L.getCodeBuilder();for(let F=0;F<a*3;F++)L.addCode(u.i64_store(u.getLocal("pd"),F*8,u.i64_load(u.getLocal("ps"),F*8)))}function l(){const L=t.addFunction(n+"_copyAffine");L.addParam("ps","i32"),L.addParam("pd","i32");const u=L.getCodeBuilder();for(let F=0;F<a*2;F++)L.addCode(u.i64_store(u.getLocal("pd"),F*8,u.i64_load(u.getLocal("ps"),F*8)))}function m(){const L=t.addFunction(n+"_zero");L.addParam("pr","i32");const u=L.getCodeBuilder();L.addCode(u.call(i+"_zero",u.getLocal("pr"))),L.addCode(u.call(i+"_one",u.i32_add(u.getLocal("pr"),u.i32_const(s)))),L.addCode(u.call(i+"_zero",u.i32_add(u.getLocal("pr"),u.i32_const(s*2))))}function A(){const L=t.addFunction(n+"_zeroAffine");L.addParam("pr","i32");const u=L.getCodeBuilder();L.addCode(u.call(i+"_zero",u.getLocal("pr"))),L.addCode(u.call(i+"_zero",u.i32_add(u.getLocal("pr"),u.i32_const(s))))}function _(){const L=t.addFunction(n+"_eq");L.addParam("p1","i32"),L.addParam("p2","i32"),L.setReturnType("i32"),L.addLocal("z1","i32"),L.addLocal("z2","i32");const u=L.getCodeBuilder(),F=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(s));L.addCode(u.setLocal("z1",u.i32_add(u.getLocal("p1"),u.i32_const(s*2))));const H=u.getLocal("z1"),N=u.getLocal("p2"),I=u.i32_add(u.getLocal("p2"),u.i32_const(s));L.addCode(u.setLocal("z2",u.i32_add(u.getLocal("p2"),u.i32_const(s*2))));const V=u.getLocal("z2"),lt=u.i32_const(t.alloc(s)),at=u.i32_const(t.alloc(s)),At=u.i32_const(t.alloc(s)),Nt=u.i32_const(t.alloc(s)),Tt=u.i32_const(t.alloc(s)),bt=u.i32_const(t.alloc(s)),wt=u.i32_const(t.alloc(s)),pt=u.i32_const(t.alloc(s));L.addCode(u.if(u.call(n+"_isZero",u.getLocal("p1")),u.ret(u.call(n+"_isZero",u.getLocal("p2")))),u.if(u.call(n+"_isZero",u.getLocal("p2")),u.ret(u.i32_const(0))),u.if(u.call(i+"_isOne",H),u.ret(u.call(n+"_eqMixed",u.getLocal("p2"),u.getLocal("p1")))),u.if(u.call(i+"_isOne",V),u.ret(u.call(n+"_eqMixed",u.getLocal("p1"),u.getLocal("p2")))),u.call(i+"_square",H,lt),u.call(i+"_square",V,at),u.call(i+"_mul",F,at,At),u.call(i+"_mul",N,lt,Nt),u.call(i+"_mul",H,lt,Tt),u.call(i+"_mul",V,at,bt),u.call(i+"_mul",h,bt,wt),u.call(i+"_mul",I,Tt,pt),u.if(u.call(i+"_eq",At,Nt),u.if(u.call(i+"_eq",wt,pt),u.ret(u.i32_const(1)))),u.ret(u.i32_const(0)))}function R(){const L=t.addFunction(n+"_eqMixed");L.addParam("p1","i32"),L.addParam("p2","i32"),L.setReturnType("i32"),L.addLocal("z1","i32");const u=L.getCodeBuilder(),F=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(s));L.addCode(u.setLocal("z1",u.i32_add(u.getLocal("p1"),u.i32_const(s*2))));const H=u.getLocal("z1"),N=u.getLocal("p2"),I=u.i32_add(u.getLocal("p2"),u.i32_const(s)),V=u.i32_const(t.alloc(s)),lt=u.i32_const(t.alloc(s)),at=u.i32_const(t.alloc(s)),At=u.i32_const(t.alloc(s));L.addCode(u.if(u.call(n+"_isZero",u.getLocal("p1")),u.ret(u.call(n+"_isZeroAffine",u.getLocal("p2")))),u.if(u.call(n+"_isZeroAffine",u.getLocal("p2")),u.ret(u.i32_const(0))),u.if(u.call(i+"_isOne",H),u.ret(u.call(n+"_eqAffine",u.getLocal("p1"),u.getLocal("p2")))),u.call(i+"_square",H,V),u.call(i+"_mul",N,V,lt),u.call(i+"_mul",H,V,at),u.call(i+"_mul",I,at,At),u.if(u.call(i+"_eq",F,lt),u.if(u.call(i+"_eq",h,At),u.ret(u.i32_const(1)))),u.ret(u.i32_const(0)))}function x(){const L=t.addFunction(n+"_double");L.addParam("p1","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder(),F=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(s)),H=u.i32_add(u.getLocal("p1"),u.i32_const(s*2)),N=u.getLocal("pr"),I=u.i32_add(u.getLocal("pr"),u.i32_const(s)),V=u.i32_add(u.getLocal("pr"),u.i32_const(s*2)),lt=u.i32_const(t.alloc(s)),at=u.i32_const(t.alloc(s)),At=u.i32_const(t.alloc(s)),Nt=u.i32_const(t.alloc(s)),Tt=u.i32_const(t.alloc(s)),bt=u.i32_const(t.alloc(s)),wt=u.i32_const(t.alloc(s)),pt=u.i32_const(t.alloc(s));L.addCode(u.if(u.call(n+"_isZero",u.getLocal("p1")),[...u.call(n+"_copy",u.getLocal("p1"),u.getLocal("pr")),...u.ret([])]),u.if(u.call(i+"_isOne",H),[...u.ret(u.call(n+"_doubleAffine",u.getLocal("p1"),u.getLocal("pr"))),...u.ret([])]),u.call(i+"_square",F,lt),u.call(i+"_square",h,at),u.call(i+"_square",at,At),u.call(i+"_add",F,at,Nt),u.call(i+"_square",Nt,Nt),u.call(i+"_sub",Nt,lt,Nt),u.call(i+"_sub",Nt,At,Nt),u.call(i+"_add",Nt,Nt,Nt),u.call(i+"_add",lt,lt,Tt),u.call(i+"_add",Tt,lt,Tt),u.call(i+"_square",Tt,bt),u.call(i+"_mul",h,H,wt),u.call(i+"_add",Nt,Nt,N),u.call(i+"_sub",bt,N,N),u.call(i+"_add",At,At,pt),u.call(i+"_add",pt,pt,pt),u.call(i+"_add",pt,pt,pt),u.call(i+"_sub",Nt,N,I),u.call(i+"_mul",I,Tt,I),u.call(i+"_sub",I,pt,I),u.call(i+"_add",wt,wt,V))}function C(){const L=t.addFunction(n+"_doubleAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder(),F=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(s)),H=u.getLocal("pr"),N=u.i32_add(u.getLocal("pr"),u.i32_const(s)),I=u.i32_add(u.getLocal("pr"),u.i32_const(s*2)),V=u.i32_const(t.alloc(s)),lt=u.i32_const(t.alloc(s)),at=u.i32_const(t.alloc(s)),At=u.i32_const(t.alloc(s)),Nt=u.i32_const(t.alloc(s)),Tt=u.i32_const(t.alloc(s));L.addCode(u.if(u.call(n+"_isZeroAffine",u.getLocal("p1")),[...u.call(n+"_toJacobian",u.getLocal("p1"),u.getLocal("pr")),...u.ret([])]),u.call(i+"_square",F,V),u.call(i+"_square",h,lt),u.call(i+"_square",lt,at),u.call(i+"_add",F,lt,At),u.call(i+"_square",At,At),u.call(i+"_sub",At,V,At),u.call(i+"_sub",At,at,At),u.call(i+"_add",At,At,At),u.call(i+"_add",V,V,Nt),u.call(i+"_add",Nt,V,Nt),u.call(i+"_add",h,h,I),u.call(i+"_square",Nt,H),u.call(i+"_sub",H,At,H),u.call(i+"_sub",H,At,H),u.call(i+"_add",at,at,Tt),u.call(i+"_add",Tt,Tt,Tt),u.call(i+"_add",Tt,Tt,Tt),u.call(i+"_sub",At,H,N),u.call(i+"_mul",N,Nt,N),u.call(i+"_sub",N,Tt,N))}function k(){const L=t.addFunction(n+"_eqAffine");L.addParam("p1","i32"),L.addParam("p2","i32"),L.setReturnType("i32"),L.addLocal("z1","i32");const u=L.getCodeBuilder();L.addCode(u.ret(u.i32_and(u.call(i+"_eq",u.getLocal("p1"),u.getLocal("p2")),u.call(i+"_eq",u.i32_add(u.getLocal("p1"),u.i32_const(s)),u.i32_add(u.getLocal("p2"),u.i32_const(s))))))}function O(){const L=t.addFunction(n+"_toMontgomery");L.addParam("p1","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder();L.addCode(u.call(i+"_toMontgomery",u.getLocal("p1"),u.getLocal("pr")));for(let F=1;F<3;F++)L.addCode(u.call(i+"_toMontgomery",u.i32_add(u.getLocal("p1"),u.i32_const(F*s)),u.i32_add(u.getLocal("pr"),u.i32_const(F*s))))}function Z(){const L=t.addFunction(n+"_toMontgomeryAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder();L.addCode(u.call(i+"_toMontgomery",u.getLocal("p1"),u.getLocal("pr")));for(let F=1;F<2;F++)L.addCode(u.call(i+"_toMontgomery",u.i32_add(u.getLocal("p1"),u.i32_const(F*s)),u.i32_add(u.getLocal("pr"),u.i32_const(F*s))))}function z(){const L=t.addFunction(n+"_fromMontgomery");L.addParam("p1","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder();L.addCode(u.call(i+"_fromMontgomery",u.getLocal("p1"),u.getLocal("pr")));for(let F=1;F<3;F++)L.addCode(u.call(i+"_fromMontgomery",u.i32_add(u.getLocal("p1"),u.i32_const(F*s)),u.i32_add(u.getLocal("pr"),u.i32_const(F*s))))}function K(){const L=t.addFunction(n+"_fromMontgomeryAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder();L.addCode(u.call(i+"_fromMontgomery",u.getLocal("p1"),u.getLocal("pr")));for(let F=1;F<2;F++)L.addCode(u.call(i+"_fromMontgomery",u.i32_add(u.getLocal("p1"),u.i32_const(F*s)),u.i32_add(u.getLocal("pr"),u.i32_const(F*s))))}function T(){const L=t.addFunction(n+"_add");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32"),L.addLocal("z1","i32"),L.addLocal("z2","i32");const u=L.getCodeBuilder(),F=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(s));L.addCode(u.setLocal("z1",u.i32_add(u.getLocal("p1"),u.i32_const(s*2))));const H=u.getLocal("z1"),N=u.getLocal("p2"),I=u.i32_add(u.getLocal("p2"),u.i32_const(s));L.addCode(u.setLocal("z2",u.i32_add(u.getLocal("p2"),u.i32_const(s*2))));const V=u.getLocal("z2"),lt=u.getLocal("pr"),at=u.i32_add(u.getLocal("pr"),u.i32_const(s)),At=u.i32_add(u.getLocal("pr"),u.i32_const(s*2)),Nt=u.i32_const(t.alloc(s)),Tt=u.i32_const(t.alloc(s)),bt=u.i32_const(t.alloc(s)),wt=u.i32_const(t.alloc(s)),pt=u.i32_const(t.alloc(s)),Et=u.i32_const(t.alloc(s)),Bt=u.i32_const(t.alloc(s)),Pt=u.i32_const(t.alloc(s)),Ct=u.i32_const(t.alloc(s)),Ht=u.i32_const(t.alloc(s)),b=u.i32_const(t.alloc(s)),P=u.i32_const(t.alloc(s)),W=u.i32_const(t.alloc(s)),Q=u.i32_const(t.alloc(s)),X=u.i32_const(t.alloc(s)),J=u.i32_const(t.alloc(s)),rt=u.i32_const(t.alloc(s));L.addCode(u.if(u.call(n+"_isZero",u.getLocal("p1")),[...u.call(n+"_copy",u.getLocal("p2"),u.getLocal("pr")),...u.ret([])]),u.if(u.call(n+"_isZero",u.getLocal("p2")),[...u.call(n+"_copy",u.getLocal("p1"),u.getLocal("pr")),...u.ret([])]),u.if(u.call(i+"_isOne",H),[...u.call(n+"_addMixed",N,F,lt),...u.ret([])]),u.if(u.call(i+"_isOne",V),[...u.call(n+"_addMixed",F,N,lt),...u.ret([])]),u.call(i+"_square",H,Nt),u.call(i+"_square",V,Tt),u.call(i+"_mul",F,Tt,bt),u.call(i+"_mul",N,Nt,wt),u.call(i+"_mul",H,Nt,pt),u.call(i+"_mul",V,Tt,Et),u.call(i+"_mul",h,Et,Bt),u.call(i+"_mul",I,pt,Pt),u.if(u.call(i+"_eq",bt,wt),u.if(u.call(i+"_eq",Bt,Pt),[...u.call(n+"_double",u.getLocal("p1"),u.getLocal("pr")),...u.ret([])])),u.call(i+"_sub",wt,bt,Ct),u.call(i+"_sub",Pt,Bt,Ht),u.call(i+"_add",Ct,Ct,b),u.call(i+"_square",b,b),u.call(i+"_mul",Ct,b,P),u.call(i+"_add",Ht,Ht,W),u.call(i+"_mul",bt,b,X),u.call(i+"_square",W,Q),u.call(i+"_add",X,X,J),u.call(i+"_sub",Q,P,lt),u.call(i+"_sub",lt,J,lt),u.call(i+"_mul",Bt,P,rt),u.call(i+"_add",rt,rt,rt),u.call(i+"_sub",X,lt,at),u.call(i+"_mul",at,W,at),u.call(i+"_sub",at,rt,at),u.call(i+"_add",H,V,At),u.call(i+"_square",At,At),u.call(i+"_sub",At,Nt,At),u.call(i+"_sub",At,Tt,At),u.call(i+"_mul",At,Ct,At))}function p(){const L=t.addFunction(n+"_addMixed");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32"),L.addLocal("z1","i32");const u=L.getCodeBuilder(),F=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(s));L.addCode(u.setLocal("z1",u.i32_add(u.getLocal("p1"),u.i32_const(s*2))));const H=u.getLocal("z1"),N=u.getLocal("p2"),I=u.i32_add(u.getLocal("p2"),u.i32_const(s)),V=u.getLocal("pr"),lt=u.i32_add(u.getLocal("pr"),u.i32_const(s)),at=u.i32_add(u.getLocal("pr"),u.i32_const(s*2)),At=u.i32_const(t.alloc(s)),Nt=u.i32_const(t.alloc(s)),Tt=u.i32_const(t.alloc(s)),bt=u.i32_const(t.alloc(s)),wt=u.i32_const(t.alloc(s)),pt=u.i32_const(t.alloc(s)),Et=u.i32_const(t.alloc(s)),Bt=u.i32_const(t.alloc(s)),Pt=u.i32_const(t.alloc(s)),Ct=u.i32_const(t.alloc(s)),Ht=u.i32_const(t.alloc(s)),b=u.i32_const(t.alloc(s)),P=u.i32_const(t.alloc(s)),W=u.i32_const(t.alloc(s));L.addCode(u.if(u.call(n+"_isZero",u.getLocal("p1")),[...u.call(n+"_copyAffine",u.getLocal("p2"),u.getLocal("pr")),...u.call(i+"_one",u.i32_add(u.getLocal("pr"),u.i32_const(s*2))),...u.ret([])]),u.if(u.call(n+"_isZeroAffine",u.getLocal("p2")),[...u.call(n+"_copy",u.getLocal("p1"),u.getLocal("pr")),...u.ret([])]),u.if(u.call(i+"_isOne",H),[...u.call(n+"_addAffine",F,N,V),...u.ret([])]),u.call(i+"_square",H,At),u.call(i+"_mul",N,At,Nt),u.call(i+"_mul",H,At,Tt),u.call(i+"_mul",I,Tt,bt),u.if(u.call(i+"_eq",F,Nt),u.if(u.call(i+"_eq",h,bt),[...u.call(n+"_doubleAffine",u.getLocal("p2"),u.getLocal("pr")),...u.ret([])])),u.call(i+"_sub",Nt,F,wt),u.call(i+"_sub",bt,h,Et),u.call(i+"_square",wt,pt),u.call(i+"_add",pt,pt,Bt),u.call(i+"_add",Bt,Bt,Bt),u.call(i+"_mul",wt,Bt,Pt),u.call(i+"_add",Et,Et,Ct),u.call(i+"_mul",F,Bt,b),u.call(i+"_square",Ct,Ht),u.call(i+"_add",b,b,P),u.call(i+"_sub",Ht,Pt,V),u.call(i+"_sub",V,P,V),u.call(i+"_mul",h,Pt,W),u.call(i+"_add",W,W,W),u.call(i+"_sub",b,V,lt),u.call(i+"_mul",lt,Ct,lt),u.call(i+"_sub",lt,W,lt),u.call(i+"_add",H,wt,at),u.call(i+"_square",at,at),u.call(i+"_sub",at,At,at),u.call(i+"_sub",at,pt,at))}function w(){const L=t.addFunction(n+"_addAffine");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32"),L.addLocal("z1","i32");const u=L.getCodeBuilder(),F=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(s));L.addCode(u.setLocal("z1",u.i32_add(u.getLocal("p1"),u.i32_const(s*2))));const H=u.getLocal("p2"),N=u.i32_add(u.getLocal("p2"),u.i32_const(s)),I=u.getLocal("pr"),V=u.i32_add(u.getLocal("pr"),u.i32_const(s)),lt=u.i32_add(u.getLocal("pr"),u.i32_const(s*2)),at=u.i32_const(t.alloc(s)),At=u.i32_const(t.alloc(s)),Nt=u.i32_const(t.alloc(s)),Tt=u.i32_const(t.alloc(s)),bt=u.i32_const(t.alloc(s)),wt=u.i32_const(t.alloc(s)),pt=u.i32_const(t.alloc(s)),Et=u.i32_const(t.alloc(s)),Bt=u.i32_const(t.alloc(s)),Pt=u.i32_const(t.alloc(s));L.addCode(u.if(u.call(n+"_isZeroAffine",u.getLocal("p1")),[...u.call(n+"_copyAffine",u.getLocal("p2"),u.getLocal("pr")),...u.call(i+"_one",u.i32_add(u.getLocal("pr"),u.i32_const(s*2))),...u.ret([])]),u.if(u.call(n+"_isZeroAffine",u.getLocal("p2")),[...u.call(n+"_copyAffine",u.getLocal("p1"),u.getLocal("pr")),...u.call(i+"_one",u.i32_add(u.getLocal("pr"),u.i32_const(s*2))),...u.ret([])]),u.if(u.call(i+"_eq",F,H),u.if(u.call(i+"_eq",h,N),[...u.call(n+"_doubleAffine",u.getLocal("p2"),u.getLocal("pr")),...u.ret([])])),u.call(i+"_sub",H,F,at),u.call(i+"_sub",N,h,Nt),u.call(i+"_square",at,At),u.call(i+"_add",At,At,Tt),u.call(i+"_add",Tt,Tt,Tt),u.call(i+"_mul",at,Tt,bt),u.call(i+"_add",Nt,Nt,wt),u.call(i+"_mul",F,Tt,Et),u.call(i+"_square",wt,pt),u.call(i+"_add",Et,Et,Bt),u.call(i+"_sub",pt,bt,I),u.call(i+"_sub",I,Bt,I),u.call(i+"_mul",h,bt,Pt),u.call(i+"_add",Pt,Pt,Pt),u.call(i+"_sub",Et,I,V),u.call(i+"_mul",V,wt,V),u.call(i+"_sub",V,Pt,V),u.call(i+"_add",at,at,lt))}function D(){const L=t.addFunction(n+"_neg");L.addParam("p1","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder(),F=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(s)),H=u.i32_add(u.getLocal("p1"),u.i32_const(s*2)),N=u.getLocal("pr"),I=u.i32_add(u.getLocal("pr"),u.i32_const(s)),V=u.i32_add(u.getLocal("pr"),u.i32_const(s*2));L.addCode(u.call(i+"_copy",F,N),u.call(i+"_neg",h,I),u.call(i+"_copy",H,V))}function $(){const L=t.addFunction(n+"_negAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder(),F=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(s)),H=u.getLocal("pr"),N=u.i32_add(u.getLocal("pr"),u.i32_const(s));L.addCode(u.call(i+"_copy",F,H),u.call(i+"_neg",h,N))}function U(){const L=t.addFunction(n+"_sub");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder(),F=u.i32_const(t.alloc(s*3));L.addCode(u.call(n+"_neg",u.getLocal("p2"),F),u.call(n+"_add",u.getLocal("p1"),F,u.getLocal("pr")))}function M(){const L=t.addFunction(n+"_subMixed");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder(),F=u.i32_const(t.alloc(s*3));L.addCode(u.call(n+"_negAffine",u.getLocal("p2"),F),u.call(n+"_addMixed",u.getLocal("p1"),F,u.getLocal("pr")))}function S(){const L=t.addFunction(n+"_subAffine");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder(),F=u.i32_const(t.alloc(s*3));L.addCode(u.call(n+"_negAffine",u.getLocal("p2"),F),u.call(n+"_addAffine",u.getLocal("p1"),F,u.getLocal("pr")))}function q(){const L=t.addFunction(n+"_normalize");L.addParam("p1","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder(),F=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(s)),H=u.i32_add(u.getLocal("p1"),u.i32_const(s*2)),N=u.getLocal("pr"),I=u.i32_add(u.getLocal("pr"),u.i32_const(s)),V=u.i32_add(u.getLocal("pr"),u.i32_const(s*2)),lt=u.i32_const(t.alloc(s)),at=u.i32_const(t.alloc(s)),At=u.i32_const(t.alloc(s));L.addCode(u.if(u.call(n+"_isZero",u.getLocal("p1")),u.call(n+"_zero",u.getLocal("pr")),[...u.call(i+"_inverse",H,lt),...u.call(i+"_square",lt,at),...u.call(i+"_mul",lt,at,At),...u.call(i+"_mul",F,at,N),...u.call(i+"_mul",h,At,I),...u.call(i+"_one",V)]))}function tt(){const L=t.addFunction(n+"_toAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder(),F=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(s)),H=u.i32_add(u.getLocal("p1"),u.i32_const(s*2)),N=u.getLocal("pr"),I=u.i32_add(u.getLocal("pr"),u.i32_const(s)),V=u.i32_const(t.alloc(s)),lt=u.i32_const(t.alloc(s)),at=u.i32_const(t.alloc(s));L.addCode(u.if(u.call(n+"_isZero",u.getLocal("p1")),[...u.call(i+"_zero",N),...u.call(i+"_zero",I)],[...u.call(i+"_inverse",H,V),...u.call(i+"_square",V,lt),...u.call(i+"_mul",V,lt,at),...u.call(i+"_mul",F,lt,N),...u.call(i+"_mul",h,at,I)]))}function ft(){const L=t.addFunction(n+"_toJacobian");L.addParam("p1","i32"),L.addParam("pr","i32");const u=L.getCodeBuilder(),F=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(s)),H=u.getLocal("pr"),N=u.i32_add(u.getLocal("pr"),u.i32_const(s)),I=u.i32_add(u.getLocal("pr"),u.i32_const(s*2));L.addCode(u.if(u.call(n+"_isZeroAffine",u.getLocal("p1")),u.call(n+"_zero",u.getLocal("pr")),[...u.call(i+"_one",I),...u.call(i+"_copy",h,N),...u.call(i+"_copy",F,H)]))}function it(){const L=t.addFunction(n+"_batchToAffine");L.addParam("pIn","i32"),L.addParam("n","i32"),L.addParam("pOut","i32"),L.addLocal("pAux","i32"),L.addLocal("itIn","i32"),L.addLocal("itAux","i32"),L.addLocal("itOut","i32"),L.addLocal("i","i32");const u=L.getCodeBuilder(),F=u.i32_const(t.alloc(s));L.addCode(u.setLocal("pAux",u.i32_load(u.i32_const(0))),u.i32_store(u.i32_const(0),u.i32_add(u.getLocal("pAux"),u.i32_mul(u.getLocal("n"),u.i32_const(s)))),u.call(i+"_batchInverse",u.i32_add(u.getLocal("pIn"),u.i32_const(s*2)),u.i32_const(s*3),u.getLocal("n"),u.getLocal("pAux"),u.i32_const(s)),u.setLocal("itIn",u.getLocal("pIn")),u.setLocal("itAux",u.getLocal("pAux")),u.setLocal("itOut",u.getLocal("pOut")),u.setLocal("i",u.i32_const(0)),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("i"),u.getLocal("n"))),u.if(u.call(i+"_isZero",u.getLocal("itAux")),[...u.call(i+"_zero",u.getLocal("itOut")),...u.call(i+"_zero",u.i32_add(u.getLocal("itOut"),u.i32_const(s)))],[...u.call(i+"_mul",u.getLocal("itAux"),u.i32_add(u.getLocal("itIn"),u.i32_const(s)),F),...u.call(i+"_square",u.getLocal("itAux"),u.getLocal("itAux")),...u.call(i+"_mul",u.getLocal("itAux"),u.getLocal("itIn"),u.getLocal("itOut")),...u.call(i+"_mul",u.getLocal("itAux"),F,u.i32_add(u.getLocal("itOut"),u.i32_const(s)))]),u.setLocal("itIn",u.i32_add(u.getLocal("itIn"),u.i32_const(s*3))),u.setLocal("itOut",u.i32_add(u.getLocal("itOut"),u.i32_const(s*2))),u.setLocal("itAux",u.i32_add(u.getLocal("itAux"),u.i32_const(s))),u.setLocal("i",u.i32_add(u.getLocal("i"),u.i32_const(1))),u.br(0))),u.i32_store(u.i32_const(0),u.getLocal("pAux")))}function nt(){const L=t.addFunction(n+"__reverseBytes");L.addParam("pIn","i32"),L.addParam("n","i32"),L.addParam("pOut","i32"),L.addLocal("itOut","i32"),L.addLocal("itIn","i32");const u=L.getCodeBuilder();L.addCode(u.setLocal("itOut",u.i32_sub(u.i32_add(u.getLocal("pOut"),u.getLocal("n")),u.i32_const(1))),u.setLocal("itIn",u.getLocal("pIn")),u.block(u.loop(u.br_if(1,u.i32_lt_s(u.getLocal("itOut"),u.getLocal("pOut"))),u.i32_store8(u.getLocal("itOut"),u.i32_load8_u(u.getLocal("itIn"))),u.setLocal("itOut",u.i32_sub(u.getLocal("itOut"),u.i32_const(1))),u.setLocal("itIn",u.i32_add(u.getLocal("itIn"),u.i32_const(1))),u.br(0))))}function gt(){const L=t.addFunction(n+"_LEMtoC");L.addParam("pIn","i32"),L.addParam("pOut","i32");const u=L.getCodeBuilder(),F=u.i32_const(t.alloc(s));L.addCode(u.if(u.call(n+"_isZero",u.getLocal("pIn")),[...u.call(i+"_zero",u.getLocal("pOut")),...u.i32_store8(u.getLocal("pOut"),u.i32_const(64)),...u.ret([])]),u.call(i+"_fromMontgomery",u.getLocal("pIn"),F),u.call(n+"__reverseBytes",F,u.i32_const(s),u.getLocal("pOut")),u.if(u.i32_eq(u.call(i+"_sign",u.i32_add(u.getLocal("pIn"),u.i32_const(s))),u.i32_const(-1)),u.i32_store8(u.getLocal("pOut"),u.i32_or(u.i32_load8_u(u.getLocal("pOut")),u.i32_const(128)))))}function ot(){const L=t.addFunction(n+"_LEMtoU");L.addParam("pIn","i32"),L.addParam("pOut","i32");const u=L.getCodeBuilder(),F=t.alloc(s*2),h=u.i32_const(F),H=u.i32_const(F),N=u.i32_const(F+s);L.addCode(u.if(u.call(n+"_isZeroAffine",u.getLocal("pIn")),[...u.call(n+"_zeroAffine",u.getLocal("pOut")),...u.i32_store8(u.getLocal("pOut"),u.i32_const(64)),...u.ret([])]),u.call(n+"_fromMontgomeryAffine",u.getLocal("pIn"),h),u.call(n+"__reverseBytes",H,u.i32_const(s),u.getLocal("pOut")),u.call(n+"__reverseBytes",N,u.i32_const(s),u.i32_add(u.getLocal("pOut"),u.i32_const(s))))}function It(){const L=t.addFunction(n+"_UtoLEM");L.addParam("pIn","i32"),L.addParam("pOut","i32");const u=L.getCodeBuilder(),F=t.alloc(s*2),h=u.i32_const(F),H=u.i32_const(F),N=u.i32_const(F+s);L.addCode(u.if(u.i32_and(u.i32_load8_u(u.getLocal("pIn")),u.i32_const(64)),[...u.call(n+"_zeroAffine",u.getLocal("pOut")),...u.ret([])]),u.call(n+"__reverseBytes",u.getLocal("pIn"),u.i32_const(s),H),u.call(n+"__reverseBytes",u.i32_add(u.getLocal("pIn"),u.i32_const(s)),u.i32_const(s),N),u.call(n+"_toMontgomeryAffine",h,u.getLocal("pOut")))}function Ot(){const L=t.addFunction(n+"_CtoLEM");L.addParam("pIn","i32"),L.addParam("pOut","i32"),L.addLocal("firstByte","i32"),L.addLocal("greatest","i32");const u=L.getCodeBuilder(),F=t.alloc(s*2),h=u.i32_const(F),H=u.i32_const(F+s);L.addCode(u.setLocal("firstByte",u.i32_load8_u(u.getLocal("pIn"))),u.if(u.i32_and(u.getLocal("firstByte"),u.i32_const(64)),[...u.call(n+"_zeroAffine",u.getLocal("pOut")),...u.ret([])]),u.setLocal("greatest",u.i32_and(u.getLocal("firstByte"),u.i32_const(128))),u.call(i+"_copy",u.getLocal("pIn"),H),u.i32_store8(H,u.i32_and(u.getLocal("firstByte"),u.i32_const(63))),u.call(n+"__reverseBytes",H,u.i32_const(s),h),u.call(i+"_toMontgomery",h,u.getLocal("pOut")),u.call(i+"_square",u.getLocal("pOut"),H),u.call(i+"_mul",u.getLocal("pOut"),H,H),u.call(i+"_add",H,u.i32_const(o),H),u.call(i+"_sqrt",H,H),u.call(i+"_neg",H,h),u.if(u.i32_eq(u.call(i+"_sign",H),u.i32_const(-1)),u.if(u.getLocal("greatest"),u.call(i+"_copy",H,u.i32_add(u.getLocal("pOut"),u.i32_const(s))),u.call(i+"_neg",H,u.i32_add(u.getLocal("pOut"),u.i32_const(s)))),u.if(u.getLocal("greatest"),u.call(i+"_neg",H,u.i32_add(u.getLocal("pOut"),u.i32_const(s))),u.call(i+"_copy",H,u.i32_add(u.getLocal("pOut"),u.i32_const(s))))))}function Lt(){const L=t.addFunction(n+"_inCurveAffine");L.addParam("pIn","i32"),L.setReturnType("i32");const u=L.getCodeBuilder(),F=u.getLocal("pIn"),h=u.i32_add(u.getLocal("pIn"),s),H=t.alloc(s*2),N=t.alloc(s*2);L.addCode(u.call(i+"_square",h,H),u.call(i+"_square",F,N),u.call(i+"_mul",F,N,N),u.call(i+"_add",N,u.i32_const(o),N),u.ret(u.call(i+"_eq",H,N)))}function Lt(){const L=t.addFunction(n+"_inCurveAffine");L.addParam("pIn","i32"),L.setReturnType("i32");const u=L.getCodeBuilder(),F=u.getLocal("pIn"),h=u.i32_add(u.getLocal("pIn"),u.i32_const(s)),H=u.i32_const(t.alloc(s)),N=u.i32_const(t.alloc(s));L.addCode(u.call(i+"_square",h,H),u.call(i+"_square",F,N),u.call(i+"_mul",F,N,N),u.call(i+"_add",N,u.i32_const(o),N),u.ret(u.call(i+"_eq",H,N)))}function vt(){const L=t.addFunction(n+"_inCurve");L.addParam("pIn","i32"),L.setReturnType("i32");const u=L.getCodeBuilder(),F=u.i32_const(t.alloc(s*2));L.addCode(u.call(n+"_toAffine",u.getLocal("pIn"),F),u.ret(u.call(n+"_inCurveAffine",F)))}return g(),d(),A(),m(),l(),f(),ft(),k(),R(),_(),C(),x(),w(),p(),T(),$(),D(),S(),M(),U(),K(),z(),Z(),O(),tt(),Lt(),vt(),it(),q(),nt(),ot(),gt(),It(),Ot(),ki(t,n+"_batchLEMtoU",n+"_LEMtoU",s*2,s*2),ki(t,n+"_batchLEMtoC",n+"_LEMtoC",s*2,s),ki(t,n+"_batchUtoLEM",n+"_UtoLEM",s*2,s*2),ki(t,n+"_batchCtoLEM",n+"_CtoLEM",s,s*2,!0),ki(t,n+"_batchToJacobian",n+"_toJacobian",s*2,s*3,!0),Gc(t,n,n+"_multiexp",n+"_add",s*3),Gc(t,n,n+"_multiexpAffine",n+"_addMixed",s*2),Dc(t,n+"_timesScalar",s*3,n+"_add",n+"_double",n+"_sub",n+"_copy",n+"_zero"),Dc(t,n+"_timesScalarAffine",s*2,n+"_addMixed",n+"_double",n+"_subMixed",n+"_copyAffine",n+"_zero"),t.exportFunction(n+"_isZero"),t.exportFunction(n+"_isZeroAffine"),t.exportFunction(n+"_eq"),t.exportFunction(n+"_eqMixed"),t.exportFunction(n+"_eqAffine"),t.exportFunction(n+"_copy"),t.exportFunction(n+"_copyAffine"),t.exportFunction(n+"_zero"),t.exportFunction(n+"_zeroAffine"),t.exportFunction(n+"_double"),t.exportFunction(n+"_doubleAffine"),t.exportFunction(n+"_add"),t.exportFunction(n+"_addMixed"),t.exportFunction(n+"_addAffine"),t.exportFunction(n+"_neg"),t.exportFunction(n+"_negAffine"),t.exportFunction(n+"_sub"),t.exportFunction(n+"_subMixed"),t.exportFunction(n+"_subAffine"),t.exportFunction(n+"_fromMontgomery"),t.exportFunction(n+"_fromMontgomeryAffine"),t.exportFunction(n+"_toMontgomery"),t.exportFunction(n+"_toMontgomeryAffine"),t.exportFunction(n+"_timesScalar"),t.exportFunction(n+"_timesScalarAffine"),t.exportFunction(n+"_normalize"),t.exportFunction(n+"_LEMtoU"),t.exportFunction(n+"_LEMtoC"),t.exportFunction(n+"_UtoLEM"),t.exportFunction(n+"_CtoLEM"),t.exportFunction(n+"_batchLEMtoU"),t.exportFunction(n+"_batchLEMtoC"),t.exportFunction(n+"_batchUtoLEM"),t.exportFunction(n+"_batchCtoLEM"),t.exportFunction(n+"_toAffine"),t.exportFunction(n+"_toJacobian"),t.exportFunction(n+"_batchToAffine"),t.exportFunction(n+"_batchToJacobian"),t.exportFunction(n+"_inCurve"),t.exportFunction(n+"_inCurveAffine"),n};const di=en.exports,_o=hn;var Wc=function(t,n,i,o,a){const d=t.modules[o].n64*8,f=t.modules[i].n64*8,l=t.modules[o].q;let m=l.minus(di(1)),A=0;for(;!m.isOdd();)A++,m=m.shiftRight(1);let _=di(2);for(;_.modPow(l.shiftRight(1),l).equals(1);)_=_.add(1);const R=new Array(A+1);R[A]=_.modPow(m,l);let x=A-1;for(;x>=0;)R[x]=R[x+1].modPow(2,l),x--;const C=[],k=di(1).shiftLeft(d*8).mod(l);for(let F=0;F<R.length;F++){const h=R[F].times(k).mod(l);C.push(..._o.bigInt2BytesLE(h,d))}const O=t.alloc(C),Z=new Array(A+1);Z[0]=di(1);for(let F=1;F<=A;F++)Z[F]=Z[F-1].times(2);const z=[];for(let F=0;F<=A;F++){const h=Z[F].modInv(l).times(k).mod(l);z.push(..._o.bigInt2BytesLE(h,d))}const K=t.alloc(z),T=_.modPow(2,l),p=[],w=[];for(let F=0;F<=A;F++){const h=T.modPow(di(2).pow(F),l),H=l.add(di.one).minus(h).modInv(l);p.push(..._o.bigInt2BytesLE(h.times(k).mod(l),d)),w.push(..._o.bigInt2BytesLE(H.times(k).mod(l),d))}const D=t.alloc(p),$=t.alloc(w);function U(F){let h=0;for(let H=0;H<8;H++)F&1<<H&&(h=h|128>>H);return h}const M=Array(256);for(let F=0;F<256;F++)M[F]=U(F);const S=t.alloc(M);function q(){const F=t.addFunction(n+"__log2");F.addParam("n","i32"),F.setReturnType("i32"),F.addLocal("bits","i32"),F.addLocal("aux","i32");const h=F.getCodeBuilder();F.addCode(h.setLocal("aux",h.i32_shr_u(h.getLocal("n"),h.i32_const(1)))),F.addCode(h.setLocal("bits",h.i32_const(0))),F.addCode(h.block(h.loop(h.br_if(1,h.i32_eqz(h.getLocal("aux"))),h.setLocal("aux",h.i32_shr_u(h.getLocal("aux"),h.i32_const(1))),h.setLocal("bits",h.i32_add(h.getLocal("bits"),h.i32_const(1))),h.br(0)))),F.addCode(h.if(h.i32_ne(h.getLocal("n"),h.i32_shl(h.i32_const(1),h.getLocal("bits"))),h.unreachable())),F.addCode(h.if(h.i32_gt_u(h.getLocal("bits"),h.i32_const(A)),h.unreachable())),F.addCode(h.getLocal("bits"))}function tt(){const F=t.addFunction(n+"_fft");F.addParam("px","i32"),F.addParam("n","i32"),F.addLocal("bits","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(d));F.addCode(h.setLocal("bits",h.call(n+"__log2",h.getLocal("n"))),h.call(o+"_one",H),h.call(n+"_rawfft",h.getLocal("px"),h.getLocal("bits"),h.i32_const(0),H))}function ft(){const F=t.addFunction(n+"_ifft");F.addParam("px","i32"),F.addParam("n","i32"),F.addLocal("bits","i32"),F.addLocal("pInv2","i32");const h=F.getCodeBuilder();F.addCode(h.setLocal("bits",h.call(n+"__log2",h.getLocal("n"))),h.setLocal("pInv2",h.i32_add(h.i32_const(K),h.i32_mul(h.getLocal("bits"),h.i32_const(d)))),h.call(n+"_rawfft",h.getLocal("px"),h.getLocal("bits"),h.i32_const(1),h.getLocal("pInv2")))}function it(){const F=t.addFunction(n+"_rawfft");F.addParam("px","i32"),F.addParam("bits","i32"),F.addParam("reverse","i32"),F.addParam("mulFactor","i32"),F.addLocal("s","i32"),F.addLocal("k","i32"),F.addLocal("j","i32"),F.addLocal("m","i32"),F.addLocal("mdiv2","i32"),F.addLocal("n","i32"),F.addLocal("pwm","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(d)),N=h.i32_const(t.alloc(f)),I=h.i32_const(t.alloc(f));F.addCode(h.call(n+"__reversePermutation",h.getLocal("px"),h.getLocal("bits")),h.setLocal("n",h.i32_shl(h.i32_const(1),h.getLocal("bits"))),h.setLocal("s",h.i32_const(1)),h.block(h.loop(h.br_if(1,h.i32_gt_u(h.getLocal("s"),h.getLocal("bits"))),h.setLocal("m",h.i32_shl(h.i32_const(1),h.getLocal("s"))),h.setLocal("pwm",h.i32_add(h.i32_const(O),h.i32_mul(h.getLocal("s"),h.i32_const(d)))),h.setLocal("k",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_ge_u(h.getLocal("k"),h.getLocal("n"))),h.call(o+"_one",H),h.setLocal("mdiv2",h.i32_shr_u(h.getLocal("m"),h.i32_const(1))),h.setLocal("j",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_ge_u(h.getLocal("j"),h.getLocal("mdiv2"))),h.setLocal("idx1",h.i32_add(h.getLocal("px"),h.i32_mul(h.i32_add(h.getLocal("k"),h.getLocal("j")),h.i32_const(f)))),h.setLocal("idx2",h.i32_add(h.getLocal("idx1"),h.i32_mul(h.getLocal("mdiv2"),h.i32_const(f)))),h.call(a,h.getLocal("idx2"),H,N),h.call(i+"_copy",h.getLocal("idx1"),I),h.call(i+"_add",I,N,h.getLocal("idx1")),h.call(i+"_sub",I,N,h.getLocal("idx2")),h.call(o+"_mul",H,h.getLocal("pwm"),H),h.setLocal("j",h.i32_add(h.getLocal("j"),h.i32_const(1))),h.br(0))),h.setLocal("k",h.i32_add(h.getLocal("k"),h.getLocal("m"))),h.br(0))),h.setLocal("s",h.i32_add(h.getLocal("s"),h.i32_const(1))),h.br(0))),h.call(n+"__fftFinal",h.getLocal("px"),h.getLocal("bits"),h.getLocal("reverse"),h.getLocal("mulFactor")))}function nt(){const F=t.addFunction(n+"__fftFinal");F.addParam("px","i32"),F.addParam("bits","i32"),F.addParam("reverse","i32"),F.addParam("mulFactor","i32"),F.addLocal("n","i32"),F.addLocal("ndiv2","i32"),F.addLocal("pInv2","i32"),F.addLocal("i","i32"),F.addLocal("mask","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(f));F.addCode(h.if(h.i32_and(h.i32_eqz(h.getLocal("reverse")),h.call(o+"_isOne",h.getLocal("mulFactor"))),h.ret([])),h.setLocal("n",h.i32_shl(h.i32_const(1),h.getLocal("bits"))),h.setLocal("mask",h.i32_sub(h.getLocal("n"),h.i32_const(1))),h.setLocal("i",h.i32_const(1)),h.setLocal("ndiv2",h.i32_shr_u(h.getLocal("n"),h.i32_const(1))),h.block(h.loop(h.br_if(1,h.i32_ge_u(h.getLocal("i"),h.getLocal("ndiv2"))),h.setLocal("idx1",h.i32_add(h.getLocal("px"),h.i32_mul(h.getLocal("i"),h.i32_const(f)))),h.setLocal("idx2",h.i32_add(h.getLocal("px"),h.i32_mul(h.i32_sub(h.getLocal("n"),h.getLocal("i")),h.i32_const(f)))),h.if(h.getLocal("reverse"),h.if(h.call(o+"_isOne",h.getLocal("mulFactor")),[...h.call(i+"_copy",h.getLocal("idx1"),H),...h.call(i+"_copy",h.getLocal("idx2"),h.getLocal("idx1")),...h.call(i+"_copy",H,h.getLocal("idx2"))],[...h.call(i+"_copy",h.getLocal("idx1"),H),...h.call(a,h.getLocal("idx2"),h.getLocal("mulFactor"),h.getLocal("idx1")),...h.call(a,H,h.getLocal("mulFactor"),h.getLocal("idx2"))]),h.if(h.call(o+"_isOne",h.getLocal("mulFactor")),[],[...h.call(a,h.getLocal("idx1"),h.getLocal("mulFactor"),h.getLocal("idx1")),...h.call(a,h.getLocal("idx2"),h.getLocal("mulFactor"),h.getLocal("idx2"))])),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))),h.if(h.call(o+"_isOne",h.getLocal("mulFactor")),[],[...h.call(a,h.getLocal("px"),h.getLocal("mulFactor"),h.getLocal("px")),...h.setLocal("idx2",h.i32_add(h.getLocal("px"),h.i32_mul(h.getLocal("ndiv2"),h.i32_const(f)))),...h.call(a,h.getLocal("idx2"),h.getLocal("mulFactor"),h.getLocal("idx2"))]))}function gt(){const F=t.addFunction(n+"__reversePermutation");F.addParam("px","i32"),F.addParam("bits","i32"),F.addLocal("n","i32"),F.addLocal("i","i32"),F.addLocal("ri","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(f));F.addCode(h.setLocal("n",h.i32_shl(h.i32_const(1),h.getLocal("bits"))),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("px"),h.i32_mul(h.getLocal("i"),h.i32_const(f)))),h.setLocal("ri",h.call(n+"__rev",h.getLocal("i"),h.getLocal("bits"))),h.setLocal("idx2",h.i32_add(h.getLocal("px"),h.i32_mul(h.getLocal("ri"),h.i32_const(f)))),h.if(h.i32_lt_u(h.getLocal("i"),h.getLocal("ri")),[...h.call(i+"_copy",h.getLocal("idx1"),H),...h.call(i+"_copy",h.getLocal("idx2"),h.getLocal("idx1")),...h.call(i+"_copy",H,h.getLocal("idx2"))]),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function ot(){const F=t.addFunction(n+"__rev");F.addParam("x","i32"),F.addParam("bits","i32"),F.setReturnType("i32");const h=F.getCodeBuilder();F.addCode(h.i32_rotl(h.i32_add(h.i32_add(h.i32_shl(h.i32_load8_u(h.i32_and(h.getLocal("x"),h.i32_const(255)),S,0),h.i32_const(24)),h.i32_shl(h.i32_load8_u(h.i32_and(h.i32_shr_u(h.getLocal("x"),h.i32_const(8)),h.i32_const(255)),S,0),h.i32_const(16))),h.i32_add(h.i32_shl(h.i32_load8_u(h.i32_and(h.i32_shr_u(h.getLocal("x"),h.i32_const(16)),h.i32_const(255)),S,0),h.i32_const(8)),h.i32_load8_u(h.i32_and(h.i32_shr_u(h.getLocal("x"),h.i32_const(24)),h.i32_const(255)),S,0))),h.getLocal("bits")))}function It(){const F=t.addFunction(n+"_fftJoin");F.addParam("pBuff1","i32"),F.addParam("pBuff2","i32"),F.addParam("n","i32"),F.addParam("first","i32"),F.addParam("inc","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32"),F.addLocal("i","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(d)),N=h.i32_const(t.alloc(f)),I=h.i32_const(t.alloc(f));F.addCode(h.call(o+"_copy",h.getLocal("first"),H),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff1"),h.i32_mul(h.getLocal("i"),h.i32_const(f)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff2"),h.i32_mul(h.getLocal("i"),h.i32_const(f)))),h.call(a,h.getLocal("idx2"),H,N),h.call(i+"_copy",h.getLocal("idx1"),I),h.call(i+"_add",I,N,h.getLocal("idx1")),h.call(i+"_sub",I,N,h.getLocal("idx2")),h.call(o+"_mul",H,h.getLocal("inc"),H),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function Ot(){const F=t.addFunction(n+"_fftJoinExt");F.addParam("pBuff1","i32"),F.addParam("pBuff2","i32"),F.addParam("n","i32"),F.addParam("first","i32"),F.addParam("inc","i32"),F.addParam("totalBits","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32"),F.addLocal("i","i32"),F.addLocal("pShiftToM","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(d)),N=h.i32_const(t.alloc(f));F.addCode(h.setLocal("pShiftToM",h.i32_add(h.i32_const(D),h.i32_mul(h.getLocal("totalBits"),h.i32_const(d)))),h.call(o+"_copy",h.getLocal("first"),H),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff1"),h.i32_mul(h.getLocal("i"),h.i32_const(f)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff2"),h.i32_mul(h.getLocal("i"),h.i32_const(f)))),h.call(i+"_add",h.getLocal("idx1"),h.getLocal("idx2"),N),h.call(a,h.getLocal("idx2"),h.getLocal("pShiftToM"),h.getLocal("idx2")),h.call(i+"_add",h.getLocal("idx1"),h.getLocal("idx2"),h.getLocal("idx2")),h.call(a,h.getLocal("idx2"),H,h.getLocal("idx2")),h.call(i+"_copy",N,h.getLocal("idx1")),h.call(o+"_mul",H,h.getLocal("inc"),H),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function Lt(){const F=t.addFunction(n+"_fftJoinExtInv");F.addParam("pBuff1","i32"),F.addParam("pBuff2","i32"),F.addParam("n","i32"),F.addParam("first","i32"),F.addParam("inc","i32"),F.addParam("totalBits","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32"),F.addLocal("i","i32"),F.addLocal("pShiftToM","i32"),F.addLocal("pSConst","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(d)),N=h.i32_const(t.alloc(f));F.addCode(h.setLocal("pShiftToM",h.i32_add(h.i32_const(D),h.i32_mul(h.getLocal("totalBits"),h.i32_const(d)))),h.setLocal("pSConst",h.i32_add(h.i32_const($),h.i32_mul(h.getLocal("totalBits"),h.i32_const(d)))),h.call(o+"_copy",h.getLocal("first"),H),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff1"),h.i32_mul(h.getLocal("i"),h.i32_const(f)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff2"),h.i32_mul(h.getLocal("i"),h.i32_const(f)))),h.call(a,h.getLocal("idx2"),H,N),h.call(i+"_sub",h.getLocal("idx1"),N,h.getLocal("idx2")),h.call(a,h.getLocal("idx2"),h.getLocal("pSConst"),h.getLocal("idx2")),h.call(a,h.getLocal("idx1"),h.getLocal("pShiftToM"),h.getLocal("idx1")),h.call(i+"_sub",N,h.getLocal("idx1"),h.getLocal("idx1")),h.call(a,h.getLocal("idx1"),h.getLocal("pSConst"),h.getLocal("idx1")),h.call(o+"_mul",H,h.getLocal("inc"),H),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function vt(){const F=t.addFunction(n+"_prepareLagrangeEvaluation");F.addParam("pBuff1","i32"),F.addParam("pBuff2","i32"),F.addParam("n","i32"),F.addParam("first","i32"),F.addParam("inc","i32"),F.addParam("totalBits","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32"),F.addLocal("i","i32"),F.addLocal("pShiftToM","i32"),F.addLocal("pSConst","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(d)),N=h.i32_const(t.alloc(f));F.addCode(h.setLocal("pShiftToM",h.i32_add(h.i32_const(D),h.i32_mul(h.getLocal("totalBits"),h.i32_const(d)))),h.setLocal("pSConst",h.i32_add(h.i32_const($),h.i32_mul(h.getLocal("totalBits"),h.i32_const(d)))),h.call(o+"_copy",h.getLocal("first"),H),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff1"),h.i32_mul(h.getLocal("i"),h.i32_const(f)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff2"),h.i32_mul(h.getLocal("i"),h.i32_const(f)))),h.call(a,h.getLocal("idx1"),h.getLocal("pShiftToM"),N),h.call(i+"_sub",h.getLocal("idx2"),N,N),h.call(i+"_sub",h.getLocal("idx1"),h.getLocal("idx2"),h.getLocal("idx2")),h.call(a,N,h.getLocal("pSConst"),h.getLocal("idx1")),h.call(a,h.getLocal("idx2"),H,h.getLocal("idx2")),h.call(o+"_mul",H,h.getLocal("inc"),H),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function L(){const F=t.addFunction(n+"_fftMix");F.addParam("pBuff","i32"),F.addParam("n","i32"),F.addParam("exp","i32"),F.addLocal("nGroups","i32"),F.addLocal("nPerGroup","i32"),F.addLocal("nPerGroupDiv2","i32"),F.addLocal("pairOffset","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32"),F.addLocal("i","i32"),F.addLocal("j","i32"),F.addLocal("pwm","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(d)),N=h.i32_const(t.alloc(f)),I=h.i32_const(t.alloc(f));F.addCode(h.setLocal("nPerGroup",h.i32_shl(h.i32_const(1),h.getLocal("exp"))),h.setLocal("nPerGroupDiv2",h.i32_shr_u(h.getLocal("nPerGroup"),h.i32_const(1))),h.setLocal("nGroups",h.i32_shr_u(h.getLocal("n"),h.getLocal("exp"))),h.setLocal("pairOffset",h.i32_mul(h.getLocal("nPerGroupDiv2"),h.i32_const(f))),h.setLocal("pwm",h.i32_add(h.i32_const(O),h.i32_mul(h.getLocal("exp"),h.i32_const(d)))),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("nGroups"))),h.call(o+"_one",H),h.setLocal("j",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("j"),h.getLocal("nPerGroupDiv2"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.i32_add(h.i32_mul(h.getLocal("i"),h.getLocal("nPerGroup")),h.getLocal("j")),h.i32_const(f)))),h.setLocal("idx2",h.i32_add(h.getLocal("idx1"),h.getLocal("pairOffset"))),h.call(a,h.getLocal("idx2"),H,N),h.call(i+"_copy",h.getLocal("idx1"),I),h.call(i+"_add",I,N,h.getLocal("idx1")),h.call(i+"_sub",I,N,h.getLocal("idx2")),h.call(o+"_mul",H,h.getLocal("pwm"),H),h.setLocal("j",h.i32_add(h.getLocal("j"),h.i32_const(1))),h.br(0))),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function u(){const F=t.addFunction(n+"_fftFinal");F.addParam("pBuff","i32"),F.addParam("n","i32"),F.addParam("factor","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32"),F.addLocal("i","i32"),F.addLocal("ndiv2","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(f));F.addCode(h.setLocal("ndiv2",h.i32_shr_u(h.getLocal("n"),h.i32_const(1))),h.if(h.i32_and(h.getLocal("n"),h.i32_const(1)),h.call(a,h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.getLocal("ndiv2"),h.i32_const(f))),h.getLocal("factor"),h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.getLocal("ndiv2"),h.i32_const(f))))),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_ge_u(h.getLocal("i"),h.getLocal("ndiv2"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.getLocal("i"),h.i32_const(f)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.i32_sub(h.i32_sub(h.getLocal("n"),h.i32_const(1)),h.getLocal("i")),h.i32_const(f)))),h.call(a,h.getLocal("idx2"),h.getLocal("factor"),H),h.call(a,h.getLocal("idx1"),h.getLocal("factor"),h.getLocal("idx2")),h.call(i+"_copy",H,h.getLocal("idx1")),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}ot(),gt(),nt(),it(),q(),tt(),ft(),It(),Ot(),Lt(),L(),u(),vt(),t.exportFunction(n+"_fft"),t.exportFunction(n+"_ifft"),t.exportFunction(n+"_rawfft"),t.exportFunction(n+"_fftJoin"),t.exportFunction(n+"_fftJoinExt"),t.exportFunction(n+"_fftJoinExtInv"),t.exportFunction(n+"_fftMix"),t.exportFunction(n+"_fftFinal"),t.exportFunction(n+"_prepareLagrangeEvaluation")},qc=function(t,n,i){const a=t.modules[i].n64*8;function s(){const g=t.addFunction(n+"_zero");g.addParam("px","i32"),g.addParam("n","i32"),g.addLocal("lastp","i32"),g.addLocal("p","i32");const f=g.getCodeBuilder();g.addCode(f.setLocal("p",f.getLocal("px")),f.setLocal("lastp",f.i32_add(f.getLocal("px"),f.i32_mul(f.getLocal("n"),f.i32_const(a)))),f.block(f.loop(f.br_if(1,f.i32_eq(f.getLocal("p"),f.getLocal("lastp"))),f.call(i+"_zero",f.getLocal("p")),f.setLocal("p",f.i32_add(f.getLocal("p"),f.i32_const(a))),f.br(0))))}function d(){const g=t.addFunction(n+"_constructLC");g.addParam("ppolynomials","i32"),g.addParam("psignals","i32"),g.addParam("nSignals","i32"),g.addParam("pres","i32"),g.addLocal("i","i32"),g.addLocal("j","i32"),g.addLocal("pp","i32"),g.addLocal("ps","i32"),g.addLocal("pd","i32"),g.addLocal("ncoefs","i32");const f=g.getCodeBuilder(),l=f.i32_const(t.alloc(a));g.addCode(f.setLocal("i",f.i32_const(0)),f.setLocal("pp",f.getLocal("ppolynomials")),f.setLocal("ps",f.getLocal("psignals")),f.block(f.loop(f.br_if(1,f.i32_eq(f.getLocal("i"),f.getLocal("nSignals"))),f.setLocal("ncoefs",f.i32_load(f.getLocal("pp"))),f.setLocal("pp",f.i32_add(f.getLocal("pp"),f.i32_const(4))),f.setLocal("j",f.i32_const(0)),f.block(f.loop(f.br_if(1,f.i32_eq(f.getLocal("j"),f.getLocal("ncoefs"))),f.setLocal("pd",f.i32_add(f.getLocal("pres"),f.i32_mul(f.i32_load(f.getLocal("pp")),f.i32_const(a)))),f.setLocal("pp",f.i32_add(f.getLocal("pp"),f.i32_const(4))),f.call(i+"_mul",f.getLocal("ps"),f.getLocal("pp"),l),f.call(i+"_add",l,f.getLocal("pd"),f.getLocal("pd")),f.setLocal("pp",f.i32_add(f.getLocal("pp"),f.i32_const(a))),f.setLocal("j",f.i32_add(f.getLocal("j"),f.i32_const(1))),f.br(0))),f.setLocal("ps",f.i32_add(f.getLocal("ps"),f.i32_const(a))),f.setLocal("i",f.i32_add(f.getLocal("i"),f.i32_const(1))),f.br(0))))}return s(),d(),t.exportFunction(n+"_zero"),t.exportFunction(n+"_constructLC"),n},Qc=function(t,n,i){const a=t.modules[i].n64*8;function s(){const f=t.addFunction(n+"_buildABC");f.addParam("pCoefs","i32"),f.addParam("nCoefs","i32"),f.addParam("pWitness","i32"),f.addParam("pA","i32"),f.addParam("pB","i32"),f.addParam("pC","i32"),f.addParam("offsetOut","i32"),f.addParam("nOut","i32"),f.addParam("offsetWitness","i32"),f.addParam("nWitness","i32"),f.addLocal("it","i32"),f.addLocal("ita","i32"),f.addLocal("itb","i32"),f.addLocal("last","i32"),f.addLocal("m","i32"),f.addLocal("c","i32"),f.addLocal("s","i32"),f.addLocal("pOut","i32");const l=f.getCodeBuilder(),m=l.i32_const(t.alloc(a));f.addCode(l.setLocal("ita",l.getLocal("pA")),l.setLocal("itb",l.getLocal("pB")),l.setLocal("last",l.i32_add(l.getLocal("pA"),l.i32_mul(l.getLocal("nOut"),l.i32_const(a)))),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("ita"),l.getLocal("last"))),l.call(i+"_zero",l.getLocal("ita")),l.call(i+"_zero",l.getLocal("itb")),l.setLocal("ita",l.i32_add(l.getLocal("ita"),l.i32_const(a))),l.setLocal("itb",l.i32_add(l.getLocal("itb"),l.i32_const(a))),l.br(0))),l.setLocal("it",l.getLocal("pCoefs")),l.setLocal("last",l.i32_add(l.getLocal("pCoefs"),l.i32_mul(l.getLocal("nCoefs"),l.i32_const(a+12)))),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("it"),l.getLocal("last"))),l.setLocal("s",l.i32_load(l.getLocal("it"),8)),l.if(l.i32_or(l.i32_lt_u(l.getLocal("s"),l.getLocal("offsetWitness")),l.i32_ge_u(l.getLocal("s"),l.i32_add(l.getLocal("offsetWitness"),l.getLocal("nWitness")))),[...l.setLocal("it",l.i32_add(l.getLocal("it"),l.i32_const(a+12))),...l.br(1)]),l.setLocal("m",l.i32_load(l.getLocal("it"))),l.if(l.i32_eq(l.getLocal("m"),l.i32_const(0)),l.setLocal("pOut",l.getLocal("pA")),l.if(l.i32_eq(l.getLocal("m"),l.i32_const(1)),l.setLocal("pOut",l.getLocal("pB")),[...l.setLocal("it",l.i32_add(l.getLocal("it"),l.i32_const(a+12))),...l.br(1)])),l.setLocal("c",l.i32_load(l.getLocal("it"),4)),l.if(l.i32_or(l.i32_lt_u(l.getLocal("c"),l.getLocal("offsetOut")),l.i32_ge_u(l.getLocal("c"),l.i32_add(l.getLocal("offsetOut"),l.getLocal("nOut")))),[...l.setLocal("it",l.i32_add(l.getLocal("it"),l.i32_const(a+12))),...l.br(1)]),l.setLocal("pOut",l.i32_add(l.getLocal("pOut"),l.i32_mul(l.i32_sub(l.getLocal("c"),l.getLocal("offsetOut")),l.i32_const(a)))),l.call(i+"_mul",l.i32_add(l.getLocal("pWitness"),l.i32_mul(l.i32_sub(l.getLocal("s"),l.getLocal("offsetWitness")),l.i32_const(a))),l.i32_add(l.getLocal("it"),l.i32_const(12)),m),l.call(i+"_add",l.getLocal("pOut"),m,l.getLocal("pOut")),l.setLocal("it",l.i32_add(l.getLocal("it"),l.i32_const(a+12))),l.br(0))),l.setLocal("ita",l.getLocal("pA")),l.setLocal("itb",l.getLocal("pB")),l.setLocal("it",l.getLocal("pC")),l.setLocal("last",l.i32_add(l.getLocal("pA"),l.i32_mul(l.getLocal("nOut"),l.i32_const(a)))),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("ita"),l.getLocal("last"))),l.call(i+"_mul",l.getLocal("ita"),l.getLocal("itb"),l.getLocal("it")),l.setLocal("ita",l.i32_add(l.getLocal("ita"),l.i32_const(a))),l.setLocal("itb",l.i32_add(l.getLocal("itb"),l.i32_const(a))),l.setLocal("it",l.i32_add(l.getLocal("it"),l.i32_const(a))),l.br(0))))}function d(){const f=t.addFunction(n+"_joinABC");f.addParam("pA","i32"),f.addParam("pB","i32"),f.addParam("pC","i32"),f.addParam("n","i32"),f.addParam("pP","i32"),f.addLocal("ita","i32"),f.addLocal("itb","i32"),f.addLocal("itc","i32"),f.addLocal("itp","i32"),f.addLocal("last","i32");const l=f.getCodeBuilder(),m=l.i32_const(t.alloc(a));f.addCode(l.setLocal("ita",l.getLocal("pA")),l.setLocal("itb",l.getLocal("pB")),l.setLocal("itc",l.getLocal("pC")),l.setLocal("itp",l.getLocal("pP")),l.setLocal("last",l.i32_add(l.getLocal("pA"),l.i32_mul(l.getLocal("n"),l.i32_const(a)))),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("ita"),l.getLocal("last"))),l.call(i+"_mul",l.getLocal("ita"),l.getLocal("itb"),m),l.call(i+"_sub",m,l.getLocal("itc"),l.getLocal("itp")),l.setLocal("ita",l.i32_add(l.getLocal("ita"),l.i32_const(a))),l.setLocal("itb",l.i32_add(l.getLocal("itb"),l.i32_const(a))),l.setLocal("itc",l.i32_add(l.getLocal("itc"),l.i32_const(a))),l.setLocal("itp",l.i32_add(l.getLocal("itp"),l.i32_const(a))),l.br(0))))}function g(){const f=t.addFunction(n+"_batchAdd");f.addParam("pa","i32"),f.addParam("pb","i32"),f.addParam("n","i32"),f.addParam("pr","i32"),f.addLocal("ita","i32"),f.addLocal("itb","i32"),f.addLocal("itr","i32"),f.addLocal("last","i32");const l=f.getCodeBuilder();f.addCode(l.setLocal("ita",l.getLocal("pa")),l.setLocal("itb",l.getLocal("pb")),l.setLocal("itr",l.getLocal("pr")),l.setLocal("last",l.i32_add(l.getLocal("pa"),l.i32_mul(l.getLocal("n"),l.i32_const(a)))),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("ita"),l.getLocal("last"))),l.call(i+"_add",l.getLocal("ita"),l.getLocal("itb"),l.getLocal("itr")),l.setLocal("ita",l.i32_add(l.getLocal("ita"),l.i32_const(a))),l.setLocal("itb",l.i32_add(l.getLocal("itb"),l.i32_const(a))),l.setLocal("itr",l.i32_add(l.getLocal("itr"),l.i32_const(a))),l.br(0))))}return s(),d(),g(),t.exportFunction(n+"_buildABC"),t.exportFunction(n+"_joinABC"),t.exportFunction(n+"_batchAdd"),n},Hc=function(t,n,i,o,a,s,d,g){const f=t.addFunction(n);f.addParam("pIn","i32"),f.addParam("n","i32"),f.addParam("pFirst","i32"),f.addParam("pInc","i32"),f.addParam("pOut","i32"),f.addLocal("pOldFree","i32"),f.addLocal("i","i32"),f.addLocal("pFrom","i32"),f.addLocal("pTo","i32");const l=f.getCodeBuilder(),m=l.i32_const(t.alloc(d));f.addCode(l.setLocal("pFrom",l.getLocal("pIn")),l.setLocal("pTo",l.getLocal("pOut"))),f.addCode(l.call(o+"_copy",l.getLocal("pFirst"),m)),f.addCode(l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.call(g,l.getLocal("pFrom"),m,l.getLocal("pTo")),l.setLocal("pFrom",l.i32_add(l.getLocal("pFrom"),l.i32_const(a))),l.setLocal("pTo",l.i32_add(l.getLocal("pTo"),l.i32_const(s))),l.call(o+"_mul",m,l.getLocal("pInc"),m),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0)))),t.exportFunction(n)};const _t=en.exports,zt=hn,R_=Br,O_=Nc,zc=Mc,P_=Uc,$c=kc,Rr=Wc,x_=qc,N_=Qc,Wi=Hc;var M_=function(t,n){const i=n||"bn128";if(t.modules[i])return i;const o=_t("21888242871839275222246405745257275088696311157297823662689037894645226208583"),a=_t("21888242871839275222246405745257275088548364400416034343698204186575808495617"),s=Math.floor((o.minus(1).bitLength()-1)/64)+1,d=s*8,g=d,f=d,l=f*2,m=f*12,A=t.alloc(zt.bigInt2BytesLE(a,g)),_=R_(t,o,"f1m");O_(t,a,"fr","frm");const R=t.alloc(zt.bigInt2BytesLE(z(_t(3)),f)),x=$c(t,"g1m","f1m",R);Rr(t,"frm","frm","frm","frm_mul"),x_(t,"pol","frm"),N_(t,"qap","frm");const C=zc(t,"f1m_neg","f2m","f1m"),k=t.alloc([...zt.bigInt2BytesLE(z(_t("19485874751759354771024239261021720505790618469301721065564631296452457478373")),f),...zt.bigInt2BytesLE(z(_t("266929791119991161246907387137283842545076965332900288569378510910307636690")),f)]),O=$c(t,"g2m","f2m",k);function Z(E,r){const c=t.addFunction(E);c.addParam("pG","i32"),c.addParam("pFr","i32"),c.addParam("pr","i32");const y=c.getCodeBuilder(),v=y.i32_const(t.alloc(d));c.addCode(y.call("frm_fromMontgomery",y.getLocal("pFr"),v),y.call(r,y.getLocal("pG"),v,y.i32_const(d),y.getLocal("pr"))),t.exportFunction(E)}Z("g1m_timesFr","g1m_timesScalar"),Rr(t,"g1m","g1m","frm","g1m_timesFr"),Z("g2m_timesFr","g2m_timesScalar"),Rr(t,"g2m","g2m","frm","g2m_timesFr"),Z("g1m_timesFrAffine","g1m_timesScalarAffine"),Z("g2m_timesFrAffine","g2m_timesScalarAffine"),Wi(t,"frm_batchApplyKey","fmr","frm",d,d,d,"frm_mul"),Wi(t,"g1m_batchApplyKey","g1m","frm",d*3,d*3,d,"g1m_timesFr"),Wi(t,"g1m_batchApplyKeyMixed","g1m","frm",d*2,d*3,d,"g1m_timesFrAffine"),Wi(t,"g2m_batchApplyKey","g2m","frm",d*2*3,d*3*2,d,"g2m_timesFr"),Wi(t,"g2m_batchApplyKeyMixed","g2m","frm",d*2*2,d*3*2,d,"g2m_timesFrAffine");function z(E){return _t(E).times(_t.one.shiftLeft(f*8)).mod(o)}const K=[_t("1"),_t("2"),_t.one],T=t.alloc([...zt.bigInt2BytesLE(z(K[0]),f),...zt.bigInt2BytesLE(z(K[1]),f),...zt.bigInt2BytesLE(z(K[2]),f)]),p=[_t.zero,_t.one,_t.zero],w=t.alloc([...zt.bigInt2BytesLE(z(p[0]),f),...zt.bigInt2BytesLE(z(p[1]),f),...zt.bigInt2BytesLE(z(p[2]),f)]),D=[[_t("10857046999023057135944570762232829481370756359578518086990519993285655852781"),_t("11559732032986387107991004021392285783925812861821192530917403151452391805634")],[_t("8495653923123431417604973247489272438418190587263600148770280649306958101930"),_t("4082367875863433681332203403145435568316851327593401208105741076214120093531")],[_t.one,_t.zero]],$=t.alloc([...zt.bigInt2BytesLE(z(D[0][0]),f),...zt.bigInt2BytesLE(z(D[0][1]),f),...zt.bigInt2BytesLE(z(D[1][0]),f),...zt.bigInt2BytesLE(z(D[1][1]),f),...zt.bigInt2BytesLE(z(D[2][0]),f),...zt.bigInt2BytesLE(z(D[2][1]),f)]),U=[[_t.zero,_t.zero],[_t.one,_t.zero],[_t.zero,_t.zero]],M=t.alloc([...zt.bigInt2BytesLE(z(U[0][0]),f),...zt.bigInt2BytesLE(z(U[0][1]),f),...zt.bigInt2BytesLE(z(U[1][0]),f),...zt.bigInt2BytesLE(z(U[1][1]),f),...zt.bigInt2BytesLE(z(U[2][0]),f),...zt.bigInt2BytesLE(z(U[2][1]),f)]),S=t.alloc([...zt.bigInt2BytesLE(z(1),f),...zt.bigInt2BytesLE(z(0),f),...zt.bigInt2BytesLE(z(0),f),...zt.bigInt2BytesLE(z(0),f),...zt.bigInt2BytesLE(z(0),f),...zt.bigInt2BytesLE(z(0),f),...zt.bigInt2BytesLE(z(0),f),...zt.bigInt2BytesLE(z(0),f),...zt.bigInt2BytesLE(z(0),f),...zt.bigInt2BytesLE(z(0),f),...zt.bigInt2BytesLE(z(0),f),...zt.bigInt2BytesLE(z(0),f)]),q=t.alloc([...zt.bigInt2BytesLE(z(9),f),...zt.bigInt2BytesLE(z(1),f)]),tt=t.alloc([...zt.bigInt2BytesLE(z(_t(2).modInv(o)),f),...zt.bigInt2BytesLE(_t(0),f)]),ft=q,it=t.alloc([...zt.bigInt2BytesLE(z("19485874751759354771024239261021720505790618469301721065564631296452457478373"),f),...zt.bigInt2BytesLE(z("266929791119991161246907387137283842545076965332900288569378510910307636690"),f)]);function nt(){const E=t.addFunction(i+"_mulNR6");E.addParam("x","i32"),E.addParam("pr","i32");const r=E.getCodeBuilder();E.addCode(r.call(C+"_mul",r.i32_const(q),r.getLocal("x"),r.getLocal("pr")))}nt();const gt=P_(t,i+"_mulNR6","f6m","f2m");function ot(){const E=t.addFunction(i+"_mulNR12");E.addParam("x","i32"),E.addParam("pr","i32");const r=E.getCodeBuilder();E.addCode(r.call(C+"_mul",r.i32_const(q),r.i32_add(r.getLocal("x"),r.i32_const(d*4)),r.getLocal("pr")),r.call(C+"_copy",r.getLocal("x"),r.i32_add(r.getLocal("pr"),r.i32_const(d*2))),r.call(C+"_copy",r.i32_add(r.getLocal("x"),r.i32_const(d*2)),r.i32_add(r.getLocal("pr"),r.i32_const(d*4))))}ot();const It=zc(t,i+"_mulNR12","ftm",gt),Ot=_t("29793968203157093288"),Lt=lt(Ot),vt=t.alloc(Lt),L=3*l,u=Lt.length-1,h=Lt.reduce((E,r)=>E+(r!=0?1:0),0)+u+1,H=3*2*d,N=3*d*2+h*L;t.modules[i]={n64:s,pG1gen:T,pG1zero:w,pG1b:R,pG2gen:$,pG2zero:M,pG2b:k,pq:t.modules.f1m.pq,pr:A,pOneT:S,prePSize:H,preQSize:N,r:a.toString(),q:o.toString()};const I=_t("4965661367192848881");function V(E){let r=E;const c=[];for(;r.gt(_t.zero);){if(r.isOdd()){const y=2-r.mod(4).toJSNumber();c.push(y),r=r.minus(y)}else c.push(0);r=r.shiftRight(1)}return c}function lt(E){let r=E;const c=[];for(;r.gt(_t.zero);)r.isOdd()?c.push(1):c.push(0),r=r.shiftRight(1);return c}function at(){const E=t.addFunction(i+"_prepareG1");E.addParam("pP","i32"),E.addParam("ppreP","i32");const r=E.getCodeBuilder();E.addCode(r.call(x+"_normalize",r.getLocal("pP"),r.getLocal("ppreP")))}function At(){const E=t.addFunction(i+"_prepAddStep");E.addParam("pQ","i32"),E.addParam("pR","i32"),E.addParam("pCoef","i32");const r=E.getCodeBuilder(),c=r.getLocal("pQ"),y=r.i32_add(r.getLocal("pQ"),r.i32_const(l)),v=r.getLocal("pR"),B=r.i32_add(r.getLocal("pR"),r.i32_const(l)),G=r.i32_add(r.getLocal("pR"),r.i32_const(2*l)),j=r.getLocal("pCoef"),et=r.i32_add(r.getLocal("pCoef"),r.i32_const(l)),ut=r.i32_add(r.getLocal("pCoef"),r.i32_const(2*l)),ht=et,ct=r.i32_const(t.alloc(l)),yt=r.i32_const(t.alloc(l)),xt=r.i32_const(t.alloc(l)),Rt=r.i32_const(t.alloc(l)),Ft=r.i32_const(t.alloc(l)),Ut=r.i32_const(t.alloc(l)),Dt=r.i32_const(t.alloc(l));E.addCode(r.call(C+"_mul",c,G,ht),r.call(C+"_sub",v,ht,ht),r.call(C+"_mul",y,G,ct),r.call(C+"_sub",B,ct,ct),r.call(C+"_square",ht,yt),r.call(C+"_square",ct,xt),r.call(C+"_mul",ht,yt,Rt),r.call(C+"_mul",v,yt,Ft),r.call(C+"_add",Ft,Ft,Dt),r.call(C+"_mul",G,xt,Ut),r.call(C+"_add",Rt,Ut,Ut),r.call(C+"_sub",Ut,Dt,Ut),r.call(C+"_mul",ht,Ut,v),r.call(C+"_mul",Rt,B,B),r.call(C+"_sub",Ft,Ut,Dt),r.call(C+"_mul",ct,Dt,Dt),r.call(C+"_sub",Dt,B,B),r.call(C+"_mul",G,Rt,G),r.call(C+"_mul",ht,y,Dt),r.call(C+"_mul",ct,c,j),r.call(C+"_sub",j,Dt,j),r.call(C+"_mul",j,r.i32_const(ft),j),r.call(C+"_neg",ct,ut))}function Nt(){const E=t.addFunction(i+"_prepDblStep");E.addParam("pR","i32"),E.addParam("pCoef","i32");const r=E.getCodeBuilder(),c=r.getLocal("pR"),y=r.i32_add(r.getLocal("pR"),r.i32_const(l)),v=r.i32_add(r.getLocal("pR"),r.i32_const(2*l)),B=r.getLocal("pCoef"),G=r.i32_add(r.getLocal("pCoef"),r.i32_const(l)),j=r.i32_add(r.getLocal("pCoef"),r.i32_const(2*l)),et=r.i32_const(t.alloc(l)),ut=r.i32_const(t.alloc(l)),ht=r.i32_const(t.alloc(l)),ct=r.i32_const(t.alloc(l)),yt=r.i32_const(t.alloc(l)),xt=r.i32_const(t.alloc(l)),Rt=r.i32_const(t.alloc(l)),Ft=r.i32_const(t.alloc(l)),Ut=r.i32_const(t.alloc(l)),Dt=r.i32_const(t.alloc(l)),$t=r.i32_const(t.alloc(l)),Gt=r.i32_const(t.alloc(l));E.addCode(r.call(C+"_mul",y,r.i32_const(tt),et),r.call(C+"_mul",c,et,et),r.call(C+"_square",y,ut),r.call(C+"_square",v,ht),r.call(C+"_add",ht,ht,ct),r.call(C+"_add",ct,ht,ct),r.call(C+"_mul",r.i32_const(it),ct,yt),r.call(C+"_add",yt,yt,xt),r.call(C+"_add",yt,xt,xt),r.call(C+"_add",ut,xt,Rt),r.call(C+"_mul",Rt,r.i32_const(tt),Rt),r.call(C+"_add",ut,ht,Gt),r.call(C+"_add",y,v,Ft),r.call(C+"_square",Ft,Ft),r.call(C+"_sub",Ft,Gt,Ft),r.call(C+"_sub",yt,ut,Ut),r.call(C+"_square",c,Dt),r.call(C+"_square",yt,$t),r.call(C+"_sub",ut,xt,Gt),r.call(C+"_mul",et,Gt,c),r.call(C+"_add",$t,$t,Gt),r.call(C+"_add",$t,Gt,Gt),r.call(C+"_square",Rt,y),r.call(C+"_sub",y,Gt,y),r.call(C+"_mul",ut,Ft,v),r.call(C+"_mul",r.i32_const(ft),Ut,B),r.call(C+"_neg",Ft,G),r.call(C+"_add",Dt,Dt,j),r.call(C+"_add",Dt,j,j))}function Tt(){const E=t.addFunction(i+"_mulByQ");E.addParam("p1","i32"),E.addParam("pr","i32");const r=E.getCodeBuilder(),c=r.getLocal("p1"),y=r.i32_add(r.getLocal("p1"),r.i32_const(l)),v=r.i32_add(r.getLocal("p1"),r.i32_const(l*2)),B=r.getLocal("pr"),G=r.i32_add(r.getLocal("pr"),r.i32_const(l)),j=r.i32_add(r.getLocal("pr"),r.i32_const(l*2)),et=r.i32_const(t.alloc([...zt.bigInt2BytesLE(z("21575463638280843010398324269430826099269044274347216827212613867836435027261"),f),...zt.bigInt2BytesLE(z("10307601595873709700152284273816112264069230130616436755625194854815875713954"),f)])),ut=r.i32_const(t.alloc([...zt.bigInt2BytesLE(z("2821565182194536844548159561693502659359617185244120367078079554186484126554"),f),...zt.bigInt2BytesLE(z("3505843767911556378687030309984248845540243509899259641013678093033130930403"),f)]));E.addCode(r.call(C+"_conjugate",c,B),r.call(C+"_mul",et,B,B),r.call(C+"_conjugate",y,G),r.call(C+"_mul",ut,G,G),r.call(C+"_conjugate",v,j))}function bt(){Tt();const E=t.addFunction(i+"_prepareG2");E.addParam("pQ","i32"),E.addParam("ppreQ","i32"),E.addLocal("pCoef","i32"),E.addLocal("i","i32");const r=E.getCodeBuilder(),c=r.getLocal("pQ");r.i32_add(r.getLocal("pQ"),r.i32_const(l)),r.i32_add(r.getLocal("pQ"),r.i32_const(l*2));const y=t.alloc(l*3),v=r.i32_const(y),B=r.i32_const(y),G=r.i32_const(y+l),j=r.i32_const(y+2*l),et=r.i32_add(r.getLocal("ppreQ"),r.i32_const(0)),ut=r.i32_add(r.getLocal("ppreQ"),r.i32_const(l));r.i32_add(r.getLocal("ppreQ"),r.i32_const(l*2));const ht=t.alloc(l*3),ct=r.i32_const(ht),yt=t.alloc(l*3),xt=r.i32_const(yt);r.i32_const(yt);const Rt=r.i32_const(yt+l);r.i32_const(yt+l*2),E.addCode(r.call(O+"_normalize",c,et),r.call(C+"_copy",et,B),r.call(C+"_copy",ut,G),r.call(C+"_one",j)),E.addCode(r.setLocal("pCoef",r.i32_add(r.getLocal("ppreQ"),r.i32_const(l*3))),r.setLocal("i",r.i32_const(Lt.length-2)),r.block(r.loop(r.call(i+"_prepDblStep",v,r.getLocal("pCoef")),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))),r.if(r.i32_load8_s(r.getLocal("i"),vt),[...r.call(i+"_prepAddStep",et,v,r.getLocal("pCoef")),...r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L)))]),r.br_if(1,r.i32_eqz(r.getLocal("i"))),r.setLocal("i",r.i32_sub(r.getLocal("i"),r.i32_const(1))),r.br(0)))),E.addCode(r.call(i+"_mulByQ",et,ct),r.call(i+"_mulByQ",ct,xt)),E.addCode(r.call(C+"_neg",Rt,Rt),r.call(i+"_prepAddStep",ct,v,r.getLocal("pCoef")),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))),r.call(i+"_prepAddStep",xt,v,r.getLocal("pCoef")),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))))}function wt(){const E=t.addFunction(i+"__mulBy024Old");E.addParam("pEll0","i32"),E.addParam("pEllVW","i32"),E.addParam("pEllVV","i32"),E.addParam("pR","i32");const r=E.getCodeBuilder(),c=r.getLocal("pEll0"),y=r.getLocal("pEllVV"),v=r.getLocal("pEllVW"),B=r.getLocal("pR"),G=t.alloc(m),j=r.i32_const(G),et=r.i32_const(G),ut=r.i32_const(G+l),ht=r.i32_const(G+l*2),ct=r.i32_const(G+l*3),yt=r.i32_const(G+l*4),xt=r.i32_const(G+l*5);E.addCode(r.call(C+"_copy",c,et),r.call(C+"_zero",ut),r.call(C+"_copy",y,ht),r.call(C+"_zero",ct),r.call(C+"_copy",v,yt),r.call(C+"_zero",xt),r.call(It+"_mul",j,B,B))}function pt(){const E=t.addFunction(i+"__mulBy024");E.addParam("pEll0","i32"),E.addParam("pEllVW","i32"),E.addParam("pEllVV","i32"),E.addParam("pR","i32");const r=E.getCodeBuilder(),c=r.getLocal("pEll0"),y=r.getLocal("pEllVV"),v=r.getLocal("pEllVW"),B=r.getLocal("pR"),G=r.i32_add(r.getLocal("pR"),r.i32_const(2*d)),j=r.i32_add(r.getLocal("pR"),r.i32_const(4*d)),et=r.i32_add(r.getLocal("pR"),r.i32_const(6*d)),ut=r.i32_add(r.getLocal("pR"),r.i32_const(8*d)),ht=r.i32_add(r.getLocal("pR"),r.i32_const(10*d)),ct=r.i32_const(t.alloc(l)),yt=r.i32_const(t.alloc(l)),xt=r.i32_const(t.alloc(l)),Rt=r.i32_const(t.alloc(l)),Ft=r.i32_const(t.alloc(l)),Ut=r.i32_const(t.alloc(l)),Dt=r.i32_const(t.alloc(l)),$t=r.i32_const(t.alloc(l)),Gt=r.i32_const(t.alloc(l)),kt=r.i32_const(t.alloc(l)),Mt=r.i32_const(t.alloc(l));E.addCode(r.call(C+"_mul",B,c,Dt),r.call(C+"_mul",j,y,$t),r.call(C+"_mul",ut,v,Gt),r.call(C+"_add",B,ut,xt),r.call(C+"_add",B,j,yt),r.call(C+"_add",G,et,Rt),r.call(C+"_add",Rt,ht,Rt),r.call(C+"_mul",G,y,kt),r.call(C+"_add",kt,Gt,Ft),r.call(C+"_mul",r.i32_const(q),Ft,Ut),r.call(C+"_add",Ut,Dt,B),r.call(C+"_mul",ht,v,Ft),r.call(C+"_add",kt,Ft,kt),r.call(C+"_add",Ft,$t,Ft),r.call(C+"_mul",r.i32_const(q),Ft,Ut),r.call(C+"_mul",G,c,Ft),r.call(C+"_add",kt,Ft,kt),r.call(C+"_add",Ut,Ft,G),r.call(C+"_add",c,y,ct),r.call(C+"_mul",yt,ct,Ft),r.call(C+"_add",Dt,$t,Mt),r.call(C+"_sub",Ft,Mt,Ft),r.call(C+"_mul",et,v,Ut),r.call(C+"_add",kt,Ut,kt),r.call(C+"_add",j,ut,ct),r.call(C+"_add",Ft,Ut,j),r.call(C+"_add",y,v,yt),r.call(C+"_mul",yt,ct,Ft),r.call(C+"_add",$t,Gt,Mt),r.call(C+"_sub",Ft,Mt,Ft),r.call(C+"_mul",r.i32_const(q),Ft,Ut),r.call(C+"_mul",et,c,Ft),r.call(C+"_add",kt,Ft,kt),r.call(C+"_add",Ut,Ft,et),r.call(C+"_mul",ht,y,Ft),r.call(C+"_add",kt,Ft,kt),r.call(C+"_mul",r.i32_const(q),Ft,Ut),r.call(C+"_add",c,v,ct),r.call(C+"_mul",xt,ct,Ft),r.call(C+"_add",Dt,Gt,Mt),r.call(C+"_sub",Ft,Mt,Ft),r.call(C+"_add",Ut,Ft,ut),r.call(C+"_add",c,y,ct),r.call(C+"_add",ct,v,ct),r.call(C+"_mul",Rt,ct,Ft),r.call(C+"_sub",Ft,kt,ht))}function Et(){const E=t.addFunction(i+"_millerLoop");E.addParam("ppreP","i32"),E.addParam("ppreQ","i32"),E.addParam("r","i32"),E.addLocal("pCoef","i32"),E.addLocal("i","i32");const r=E.getCodeBuilder(),c=r.getLocal("ppreP"),y=r.i32_add(r.getLocal("ppreP"),r.i32_const(f)),v=r.getLocal("pCoef"),B=r.i32_add(r.getLocal("pCoef"),r.i32_const(l)),G=r.i32_add(r.getLocal("pCoef"),r.i32_const(2*l)),j=t.alloc(l),et=r.i32_const(j),ut=t.alloc(l),ht=r.i32_const(ut),ct=r.getLocal("r");E.addCode(r.call(It+"_one",ct),r.setLocal("pCoef",r.i32_add(r.getLocal("ppreQ"),r.i32_const(l*3))),r.setLocal("i",r.i32_const(Lt.length-2)),r.block(r.loop(r.call(It+"_square",ct,ct),r.call(C+"_mul1",B,y,et),r.call(C+"_mul1",G,c,ht),r.call(i+"__mulBy024",v,et,ht,ct),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))),r.if(r.i32_load8_s(r.getLocal("i"),vt),[...r.call(C+"_mul1",B,y,et),...r.call(C+"_mul1",G,c,ht),...r.call(i+"__mulBy024",v,et,ht,ct),...r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L)))]),r.br_if(1,r.i32_eqz(r.getLocal("i"))),r.setLocal("i",r.i32_sub(r.getLocal("i"),r.i32_const(1))),r.br(0)))),E.addCode(r.call(C+"_mul1",B,y,et),r.call(C+"_mul1",G,c,ht),r.call(i+"__mulBy024",v,et,ht,ct),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))),r.call(C+"_mul1",B,y,et),r.call(C+"_mul1",G,c,ht),r.call(i+"__mulBy024",v,et,ht,ct),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))))}function Bt(E){const r=[[[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")]],[[_t("1"),_t("0")],[_t("8376118865763821496583973867626364092589906065868298776909617916018768340080"),_t("16469823323077808223889137241176536799009286646108169935659301613961712198316")],[_t("21888242871839275220042445260109153167277707414472061641714758635765020556617"),_t("0")],[_t("11697423496358154304825782922584725312912383441159505038794027105778954184319"),_t("303847389135065887422783454877609941456349188919719272345083954437860409601")],[_t("21888242871839275220042445260109153167277707414472061641714758635765020556616"),_t("0")],[_t("3321304630594332808241809054958361220322477375291206261884409189760185844239"),_t("5722266937896532885780051958958348231143373700109372999374820235121374419868")],[_t("21888242871839275222246405745257275088696311157297823662689037894645226208582"),_t("0")],[_t("13512124006075453725662431877630910996106405091429524885779419978626457868503"),_t("5418419548761466998357268504080738289687024511189653727029736280683514010267")],[_t("2203960485148121921418603742825762020974279258880205651966"),_t("0")],[_t("10190819375481120917420622822672549775783927716138318623895010788866272024264"),_t("21584395482704209334823622290379665147239961968378104390343953940207365798982")],[_t("2203960485148121921418603742825762020974279258880205651967"),_t("0")],[_t("18566938241244942414004596690298913868373833782006617400804628704885040364344"),_t("16165975933942742336466353786298926857552937457188450663314217659523851788715")]]],c=[[[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")],[_t("1"),_t("0")]],[[_t("1"),_t("0")],[_t("21575463638280843010398324269430826099269044274347216827212613867836435027261"),_t("10307601595873709700152284273816112264069230130616436755625194854815875713954")],[_t("21888242871839275220042445260109153167277707414472061641714758635765020556616"),_t("0")],[_t("3772000881919853776433695186713858239009073593817195771773381919316419345261"),_t("2236595495967245188281701248203181795121068902605861227855261137820944008926")],[_t("2203960485148121921418603742825762020974279258880205651966"),_t("0")],[_t("18429021223477853657660792034369865839114504446431234726392080002137598044644"),_t("9344045779998320333812420223237981029506012124075525679208581902008406485703")]],[[_t("1"),_t("0")],[_t("2581911344467009335267311115468803099551665605076196740867805258568234346338"),_t("19937756971775647987995932169929341994314640652964949448313374472400716661030")],[_t("2203960485148121921418603742825762020974279258880205651966"),_t("0")],[_t("5324479202449903542726783395506214481928257762400643279780343368557297135718"),_t("16208900380737693084919495127334387981393726419856888799917914180988844123039")],[_t("21888242871839275220042445260109153167277707414472061641714758635765020556616"),_t("0")],[_t("13981852324922362344252311234282257507216387789820983642040889267519694726527"),_t("7629828391165209371577384193250820201684255241773809077146787135900891633097")]]],y=t.addFunction(i+"__frobeniusMap"+E);y.addParam("x","i32"),y.addParam("r","i32");const v=y.getCodeBuilder();for(let G=0;G<6;G++){const j=G==0?v.getLocal("x"):v.i32_add(v.getLocal("x"),v.i32_const(G*l)),et=j,ut=v.i32_add(v.getLocal("x"),v.i32_const(G*l+f)),ht=G==0?v.getLocal("r"):v.i32_add(v.getLocal("r"),v.i32_const(G*l)),ct=ht,yt=v.i32_add(v.getLocal("r"),v.i32_const(G*l+f)),xt=B(r[Math.floor(G/3)][E%12],c[G%3][E%6]),Rt=t.alloc([...zt.bigInt2BytesLE(z(xt[0]),32),...zt.bigInt2BytesLE(z(xt[1]),32)]);E%2==1?y.addCode(v.call(_+"_copy",et,ct),v.call(_+"_neg",ut,yt),v.call(C+"_mul",ht,v.i32_const(Rt),ht)):y.addCode(v.call(C+"_mul",j,v.i32_const(Rt),ht))}function B(G,j){const et=_t(G[0]),ut=_t(G[1]),ht=_t(j[0]),ct=_t(j[1]),yt=[et.times(ht).minus(ut.times(ct)).mod(o),et.times(ct).add(ut.times(ht)).mod(o)];return yt[0].isNegative()&&(yt[0]=yt[0].add(o)),yt}}function Pt(){const E=t.addFunction(i+"__finalExponentiationFirstChunk");E.addParam("x","i32"),E.addParam("r","i32");const r=E.getCodeBuilder(),c=r.getLocal("x"),y=c,v=r.i32_add(c,r.i32_const(d*6)),B=r.getLocal("r"),G=t.alloc(m),j=r.i32_const(G),et=j,ut=r.i32_const(G+d*6),ht=r.i32_const(t.alloc(m)),ct=r.i32_const(t.alloc(m)),yt=r.i32_const(t.alloc(m));E.addCode(r.call(gt+"_copy",y,et),r.call(gt+"_neg",v,ut),r.call(It+"_inverse",c,ht),r.call(It+"_mul",j,ht,ct),r.call(i+"__frobeniusMap2",ct,yt),r.call(It+"_mul",ct,yt,B))}function Ct(){const E=t.addFunction(i+"__cyclotomicSquare");E.addParam("x","i32"),E.addParam("r","i32");const r=E.getCodeBuilder(),c=r.getLocal("x"),y=r.i32_add(r.getLocal("x"),r.i32_const(l)),v=r.i32_add(r.getLocal("x"),r.i32_const(2*l)),B=r.i32_add(r.getLocal("x"),r.i32_const(3*l)),G=r.i32_add(r.getLocal("x"),r.i32_const(4*l)),j=r.i32_add(r.getLocal("x"),r.i32_const(5*l)),et=r.getLocal("r"),ut=r.i32_add(r.getLocal("r"),r.i32_const(l)),ht=r.i32_add(r.getLocal("r"),r.i32_const(2*l)),ct=r.i32_add(r.getLocal("r"),r.i32_const(3*l)),yt=r.i32_add(r.getLocal("r"),r.i32_const(4*l)),xt=r.i32_add(r.getLocal("r"),r.i32_const(5*l)),Rt=r.i32_const(t.alloc(l)),Ft=r.i32_const(t.alloc(l)),Ut=r.i32_const(t.alloc(l)),Dt=r.i32_const(t.alloc(l)),$t=r.i32_const(t.alloc(l)),Gt=r.i32_const(t.alloc(l)),kt=r.i32_const(t.alloc(l)),Mt=r.i32_const(t.alloc(l));E.addCode(r.call(C+"_mul",c,G,kt),r.call(C+"_mul",G,r.i32_const(q),Rt),r.call(C+"_add",c,Rt,Rt),r.call(C+"_add",c,G,Mt),r.call(C+"_mul",Mt,Rt,Rt),r.call(C+"_mul",r.i32_const(q),kt,Mt),r.call(C+"_add",kt,Mt,Mt),r.call(C+"_sub",Rt,Mt,Rt),r.call(C+"_add",kt,kt,Ft),r.call(C+"_mul",B,v,kt),r.call(C+"_mul",v,r.i32_const(q),Ut),r.call(C+"_add",B,Ut,Ut),r.call(C+"_add",B,v,Mt),r.call(C+"_mul",Mt,Ut,Ut),r.call(C+"_mul",r.i32_const(q),kt,Mt),r.call(C+"_add",kt,Mt,Mt),r.call(C+"_sub",Ut,Mt,Ut),r.call(C+"_add",kt,kt,Dt),r.call(C+"_mul",y,j,kt),r.call(C+"_mul",j,r.i32_const(q),$t),r.call(C+"_add",y,$t,$t),r.call(C+"_add",y,j,Mt),r.call(C+"_mul",Mt,$t,$t),r.call(C+"_mul",r.i32_const(q),kt,Mt),r.call(C+"_add",kt,Mt,Mt),r.call(C+"_sub",$t,Mt,$t),r.call(C+"_add",kt,kt,Gt),r.call(C+"_sub",Rt,c,et),r.call(C+"_add",et,et,et),r.call(C+"_add",Rt,et,et),r.call(C+"_add",Ft,G,yt),r.call(C+"_add",yt,yt,yt),r.call(C+"_add",Ft,yt,yt),r.call(C+"_mul",Gt,r.i32_const(ft),Mt),r.call(C+"_add",Mt,B,ct),r.call(C+"_add",ct,ct,ct),r.call(C+"_add",Mt,ct,ct),r.call(C+"_sub",$t,v,ht),r.call(C+"_add",ht,ht,ht),r.call(C+"_add",$t,ht,ht),r.call(C+"_sub",Ut,y,ut),r.call(C+"_add",ut,ut,ut),r.call(C+"_add",Ut,ut,ut),r.call(C+"_add",Dt,j,xt),r.call(C+"_add",xt,xt,xt),r.call(C+"_add",Dt,xt,xt))}function Ht(E,r){const c=V(E).map(ut=>ut==-1?255:ut),y=t.alloc(c);t.alloc(zt.bigInt2BytesLE(E,32));const v=t.addFunction(i+"__cyclotomicExp_"+r);v.addParam("x","i32"),v.addParam("r","i32"),v.addLocal("bit","i32"),v.addLocal("i","i32");const B=v.getCodeBuilder(),G=B.getLocal("x"),j=B.getLocal("r"),et=B.i32_const(t.alloc(m));v.addCode(B.call(It+"_conjugate",G,et),B.call(It+"_one",j),B.if(B.teeLocal("bit",B.i32_load8_s(B.i32_const(c.length-1),y)),B.if(B.i32_eq(B.getLocal("bit"),B.i32_const(1)),B.call(It+"_mul",j,G,j),B.call(It+"_mul",j,et,j))),B.setLocal("i",B.i32_const(c.length-2)),B.block(B.loop(B.call(i+"__cyclotomicSquare",j,j),B.if(B.teeLocal("bit",B.i32_load8_s(B.getLocal("i"),y)),B.if(B.i32_eq(B.getLocal("bit"),B.i32_const(1)),B.call(It+"_mul",j,G,j),B.call(It+"_mul",j,et,j))),B.br_if(1,B.i32_eqz(B.getLocal("i"))),B.setLocal("i",B.i32_sub(B.getLocal("i"),B.i32_const(1))),B.br(0))))}function b(){Ct(),Ht(I,"w0");const E=t.addFunction(i+"__finalExponentiationLastChunk");E.addParam("x","i32"),E.addParam("r","i32");const r=E.getCodeBuilder(),c=r.getLocal("x"),y=r.getLocal("r"),v=r.i32_const(t.alloc(m)),B=r.i32_const(t.alloc(m)),G=r.i32_const(t.alloc(m)),j=r.i32_const(t.alloc(m)),et=r.i32_const(t.alloc(m)),ut=r.i32_const(t.alloc(m)),ht=r.i32_const(t.alloc(m)),ct=r.i32_const(t.alloc(m)),yt=r.i32_const(t.alloc(m)),xt=r.i32_const(t.alloc(m)),Rt=r.i32_const(t.alloc(m)),Ft=r.i32_const(t.alloc(m)),Ut=r.i32_const(t.alloc(m)),Dt=r.i32_const(t.alloc(m)),$t=r.i32_const(t.alloc(m)),Gt=r.i32_const(t.alloc(m)),kt=r.i32_const(t.alloc(m)),Mt=r.i32_const(t.alloc(m)),Vt=r.i32_const(t.alloc(m)),Ie=r.i32_const(t.alloc(m)),ke=r.i32_const(t.alloc(m));E.addCode(r.call(i+"__cyclotomicExp_w0",c,v),r.call(It+"_conjugate",v,v),r.call(i+"__cyclotomicSquare",v,B),r.call(i+"__cyclotomicSquare",B,G),r.call(It+"_mul",G,B,j),r.call(i+"__cyclotomicExp_w0",j,et),r.call(It+"_conjugate",et,et),r.call(i+"__cyclotomicSquare",et,ut),r.call(i+"__cyclotomicExp_w0",ut,ht),r.call(It+"_conjugate",ht,ht),r.call(It+"_conjugate",j,ct),r.call(It+"_conjugate",ht,yt),r.call(It+"_mul",yt,et,xt),r.call(It+"_mul",xt,ct,Rt),r.call(It+"_mul",Rt,B,Ft),r.call(It+"_mul",Rt,et,Ut),r.call(It+"_mul",Ut,c,Dt),r.call(i+"__frobeniusMap1",Ft,$t),r.call(It+"_mul",$t,Dt,Gt),r.call(i+"__frobeniusMap2",Rt,kt),r.call(It+"_mul",kt,Gt,Mt),r.call(It+"_conjugate",c,Vt),r.call(It+"_mul",Vt,Ft,Ie),r.call(i+"__frobeniusMap3",Ie,ke),r.call(It+"_mul",ke,Mt,y))}function P(){Pt(),b();const E=t.addFunction(i+"_finalExponentiation");E.addParam("x","i32"),E.addParam("r","i32");const r=E.getCodeBuilder(),c=r.getLocal("x"),y=r.getLocal("r"),v=r.i32_const(t.alloc(m));E.addCode(r.call(i+"__finalExponentiationFirstChunk",c,v),r.call(i+"__finalExponentiationLastChunk",v,y))}function W(){const E=t.addFunction(i+"_finalExponentiationOld");E.addParam("x","i32"),E.addParam("r","i32");const r=_t("552484233613224096312617126783173147097382103762957654188882734314196910839907541213974502761540629817009608548654680343627701153829446747810907373256841551006201639677726139946029199968412598804882391702273019083653272047566316584365559776493027495458238373902875937659943504873220554161550525926302303331747463515644711876653177129578303191095900909191624817826566688241804408081892785725967931714097716709526092261278071952560171111444072049229123565057483750161460024353346284167282452756217662335528813519139808291170539072125381230815729071544861602750936964829313608137325426383735122175229541155376346436093930287402089517426973178917569713384748081827255472576937471496195752727188261435633271238710131736096299798168852925540549342330775279877006784354801422249722573783561685179618816480037695005515426162362431072245638324744480"),c=t.alloc(zt.bigInt2BytesLE(r,352)),y=E.getCodeBuilder();E.addCode(y.call(It+"_exp",y.getLocal("x"),y.i32_const(c),y.i32_const(352),y.getLocal("r")))}const Q=t.alloc(H),X=t.alloc(N);function J(E){const r=t.addFunction(i+"_pairingEq"+E);for(let B=0;B<E;B++)r.addParam("p_"+B,"i32"),r.addParam("q_"+B,"i32");r.addParam("c","i32"),r.setReturnType("i32");const c=r.getCodeBuilder(),y=c.i32_const(t.alloc(m)),v=c.i32_const(t.alloc(m));r.addCode(c.call(It+"_one",y));for(let B=0;B<E;B++)r.addCode(c.call(i+"_prepareG1",c.getLocal("p_"+B),c.i32_const(Q))),r.addCode(c.call(i+"_prepareG2",c.getLocal("q_"+B),c.i32_const(X))),r.addCode(c.call(i+"_millerLoop",c.i32_const(Q),c.i32_const(X),v)),r.addCode(c.call(It+"_mul",y,v,y));r.addCode(c.call(i+"_finalExponentiation",y,y)),r.addCode(c.call(It+"_eq",y,c.getLocal("c")))}function rt(){const E=t.addFunction(i+"_pairing");E.addParam("p","i32"),E.addParam("q","i32"),E.addParam("r","i32");const r=E.getCodeBuilder(),c=r.i32_const(t.alloc(m));E.addCode(r.call(i+"_prepareG1",r.getLocal("p"),r.i32_const(Q))),E.addCode(r.call(i+"_prepareG2",r.getLocal("q"),r.i32_const(X))),E.addCode(r.call(i+"_millerLoop",r.i32_const(Q),r.i32_const(X),c)),E.addCode(r.call(i+"_finalExponentiation",c,r.getLocal("r")))}At(),Nt(),at(),bt(),pt(),wt(),Et();for(let E=0;E<10;E++)Bt(E),t.exportFunction(i+"__frobeniusMap"+E);W(),P();for(let E=1;E<=5;E++)J(E),t.exportFunction(i+"_pairingEq"+E);rt(),t.exportFunction(i+"_pairing"),t.exportFunction(i+"_prepareG1"),t.exportFunction(i+"_prepareG2"),t.exportFunction(i+"_millerLoop"),t.exportFunction(i+"_finalExponentiation"),t.exportFunction(i+"_finalExponentiationOld"),t.exportFunction(i+"__mulBy024"),t.exportFunction(i+"__mulBy024Old"),t.exportFunction(i+"__cyclotomicSquare"),t.exportFunction(i+"__cyclotomicExp_w0")};const dt=en.exports,Wt=hn,U_=Br,D_=Nc,Yc=Mc,G_=Uc,jc=kc,Or=Wc,k_=qc,W_=Qc,qi=Hc;var q_=function(t,n){const i=n||"bls12381";if(t.modules[i])return i;const o=dt("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),a=dt("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),s=Math.floor((o.minus(1).bitLength()-1)/64)+1,d=s*8,g=d,f=g*2,l=g*12,m=Math.floor((a.minus(1).bitLength()-1)/64)+1,A=m*8,_=A,R=t.alloc(Wt.bigInt2BytesLE(a,_)),x=U_(t,o,"f1m","intq");D_(t,a,"fr","frm","intr");const C=t.alloc(Wt.bigInt2BytesLE(T(dt(4)),g)),k=jc(t,"g1m","f1m",C);Or(t,"frm","frm","frm","frm_mul"),k_(t,"pol","frm"),W_(t,"qap","frm");const O=Yc(t,"f1m_neg","f2m","f1m"),Z=t.alloc([...Wt.bigInt2BytesLE(T(dt("4")),g),...Wt.bigInt2BytesLE(T(dt("4")),g)]),z=jc(t,"g2m","f2m",Z);function K(r,c){const y=t.addFunction(r);y.addParam("pG","i32"),y.addParam("pFr","i32"),y.addParam("pr","i32");const v=y.getCodeBuilder(),B=v.i32_const(t.alloc(A));y.addCode(v.call("frm_fromMontgomery",v.getLocal("pFr"),B),v.call(c,v.getLocal("pG"),B,v.i32_const(A),v.getLocal("pr"))),t.exportFunction(r)}K("g1m_timesFr","g1m_timesScalar"),Or(t,"g1m","g1m","frm","g1m_timesFr"),K("g2m_timesFr","g2m_timesScalar"),Or(t,"g2m","g2m","frm","g2m_timesFr"),K("g1m_timesFrAffine","g1m_timesScalarAffine"),K("g2m_timesFrAffine","g2m_timesScalarAffine"),qi(t,"frm_batchApplyKey","fmr","frm",A,A,A,"frm_mul"),qi(t,"g1m_batchApplyKey","g1m","frm",d*3,d*3,A,"g1m_timesFr"),qi(t,"g1m_batchApplyKeyMixed","g1m","frm",d*2,d*3,A,"g1m_timesFrAffine"),qi(t,"g2m_batchApplyKey","g2m","frm",d*2*3,d*3*2,A,"g2m_timesFr"),qi(t,"g2m_batchApplyKeyMixed","g2m","frm",d*2*2,d*3*2,A,"g2m_timesFrAffine");function T(r){return dt(r).times(dt.one.shiftLeft(g*8)).mod(o)}const p=[dt("3685416753713387016781088315183077757961620795782546409894578378688607592378376318836054947676345821548104185464507"),dt("1339506544944476473020471379941921221584933875938349620426543736416511423956333506472724655353366534992391756441569"),dt.one],w=t.alloc([...Wt.bigInt2BytesLE(T(p[0]),g),...Wt.bigInt2BytesLE(T(p[1]),g),...Wt.bigInt2BytesLE(T(p[2]),g)]),D=[dt.zero,dt.one,dt.zero],$=t.alloc([...Wt.bigInt2BytesLE(T(D[0]),g),...Wt.bigInt2BytesLE(T(D[1]),g),...Wt.bigInt2BytesLE(T(D[2]),g)]),U=[[dt("352701069587466618187139116011060144890029952792775240219908644239793785735715026873347600343865175952761926303160"),dt("3059144344244213709971259814753781636986470325476647558659373206291635324768958432433509563104347017837885763365758")],[dt("1985150602287291935568054521177171638300868978215655730859378665066344726373823718423869104263333984641494340347905"),dt("927553665492332455747201965776037880757740193453592970025027978793976877002675564980949289727957565575433344219582")],[dt.one,dt.zero]],M=t.alloc([...Wt.bigInt2BytesLE(T(U[0][0]),g),...Wt.bigInt2BytesLE(T(U[0][1]),g),...Wt.bigInt2BytesLE(T(U[1][0]),g),...Wt.bigInt2BytesLE(T(U[1][1]),g),...Wt.bigInt2BytesLE(T(U[2][0]),g),...Wt.bigInt2BytesLE(T(U[2][1]),g)]),S=[[dt.zero,dt.zero],[dt.one,dt.zero],[dt.zero,dt.zero]],q=t.alloc([...Wt.bigInt2BytesLE(T(S[0][0]),g),...Wt.bigInt2BytesLE(T(S[0][1]),g),...Wt.bigInt2BytesLE(T(S[1][0]),g),...Wt.bigInt2BytesLE(T(S[1][1]),g),...Wt.bigInt2BytesLE(T(S[2][0]),g),...Wt.bigInt2BytesLE(T(S[2][1]),g)]),tt=t.alloc([...Wt.bigInt2BytesLE(T(1),g),...Wt.bigInt2BytesLE(T(0),g),...Wt.bigInt2BytesLE(T(0),g),...Wt.bigInt2BytesLE(T(0),g),...Wt.bigInt2BytesLE(T(0),g),...Wt.bigInt2BytesLE(T(0),g),...Wt.bigInt2BytesLE(T(0),g),...Wt.bigInt2BytesLE(T(0),g),...Wt.bigInt2BytesLE(T(0),g),...Wt.bigInt2BytesLE(T(0),g),...Wt.bigInt2BytesLE(T(0),g),...Wt.bigInt2BytesLE(T(0),g)]);t.alloc([...Wt.bigInt2BytesLE(T(dt(2).modInv(o)),g),...Wt.bigInt2BytesLE(dt(0),g)]);const ft=t.alloc([...Wt.bigInt2BytesLE(T(1),g),...Wt.bigInt2BytesLE(T(1),g)]);t.alloc([...Wt.bigInt2BytesLE(T("4"),g),...Wt.bigInt2BytesLE(T("4"),g)]);function it(){const r=t.addFunction(O+"_mulNR");r.addParam("x","i32"),r.addParam("pr","i32");const c=r.getCodeBuilder(),y=c.i32_const(t.alloc(g)),v=c.getLocal("x"),B=c.i32_add(c.getLocal("x"),c.i32_const(g)),G=c.getLocal("pr"),j=c.i32_add(c.getLocal("pr"),c.i32_const(g));r.addCode(c.call(x+"_copy",v,y),c.call(x+"_sub",v,B,G),c.call(x+"_add",y,B,j))}it();const nt=G_(t,O+"_mulNR","f6m","f2m");function gt(){const r=t.addFunction(nt+"_mulNR");r.addParam("x","i32"),r.addParam("pr","i32");const c=r.getCodeBuilder(),y=c.i32_const(t.alloc(g*2));r.addCode(c.call(O+"_copy",c.getLocal("x"),y),c.call(O+"_mulNR",c.i32_add(c.getLocal("x"),c.i32_const(d*4)),c.getLocal("pr")),c.call(O+"_copy",c.i32_add(c.getLocal("x"),c.i32_const(d*2)),c.i32_add(c.getLocal("pr"),c.i32_const(d*4))),c.call(O+"_copy",y,c.i32_add(c.getLocal("pr"),c.i32_const(d*2))))}gt();const ot=Yc(t,nt+"_mulNR","ftm",nt),It=dt("d201000000010000",16),Ot=lt(It),Lt=t.alloc(Ot),vt=3*f,L=Ot.length-1,F=Ot.reduce((r,c)=>r+(c!=0?1:0),0)+L+1,h=3*2*d,H=3*d*2+F*vt,N=!0,I=dt("15132376222941642752");t.modules[i]={n64q:s,n64r:m,n8q:d,n8r:A,pG1gen:w,pG1zero:$,pG1b:C,pG2gen:M,pG2zero:q,pG2b:Z,pq:t.modules.f1m.pq,pr:R,pOneT:tt,r:a,q:o,prePSize:h,preQSize:H};function V(r){let c=r;const y=[];for(;c.gt(dt.zero);){if(c.isOdd()){const v=2-c.mod(4).toJSNumber();y.push(v),c=c.minus(v)}else y.push(0);c=c.shiftRight(1)}return y}function lt(r){let c=r;const y=[];for(;c.gt(dt.zero);)c.isOdd()?y.push(1):y.push(0),c=c.shiftRight(1);return y}function at(){const r=t.addFunction(i+"_prepareG1");r.addParam("pP","i32"),r.addParam("ppreP","i32");const c=r.getCodeBuilder();r.addCode(c.call(k+"_normalize",c.getLocal("pP"),c.getLocal("ppreP")))}function At(){const r=t.addFunction(i+"_prepDblStep");r.addParam("R","i32"),r.addParam("r","i32");const c=r.getCodeBuilder(),y=c.getLocal("R"),v=c.i32_add(c.getLocal("R"),c.i32_const(2*d)),B=c.i32_add(c.getLocal("R"),c.i32_const(4*d)),G=c.getLocal("r"),j=c.i32_add(c.getLocal("r"),c.i32_const(2*d)),et=c.i32_add(c.getLocal("r"),c.i32_const(4*d)),ut=c.i32_const(t.alloc(f)),ht=c.i32_const(t.alloc(f)),ct=c.i32_const(t.alloc(f)),yt=c.i32_const(t.alloc(f)),xt=c.i32_const(t.alloc(f));r.addCode(c.call(O+"_square",y,G),c.call(O+"_square",v,ht),c.call(O+"_square",ht,ct),c.call(O+"_add",ht,y,j),c.call(O+"_square",j,j),c.call(O+"_sub",j,G,j),c.call(O+"_sub",j,ct,j),c.call(O+"_add",j,j,j),c.call(O+"_add",G,G,yt),c.call(O+"_add",yt,G,yt),c.call(O+"_add",y,yt,et),c.call(O+"_square",yt,xt),c.call(O+"_square",B,ut),c.call(O+"_sub",xt,j,y),c.call(O+"_sub",y,j,y),c.call(O+"_add",B,v,B),c.call(O+"_square",B,B),c.call(O+"_sub",B,ht,B),c.call(O+"_sub",B,ut,B),c.call(O+"_sub",j,y,v),c.call(O+"_mul",v,yt,v),c.call(O+"_add",ct,ct,ct),c.call(O+"_add",ct,ct,ct),c.call(O+"_add",ct,ct,ct),c.call(O+"_sub",v,ct,v),c.call(O+"_mul",yt,ut,j),c.call(O+"_add",j,j,j),c.call(O+"_neg",j,j),c.call(O+"_square",et,et),c.call(O+"_sub",et,G,et),c.call(O+"_sub",et,xt,et),c.call(O+"_add",ht,ht,ht),c.call(O+"_add",ht,ht,ht),c.call(O+"_sub",et,ht,et),c.call(O+"_mul",B,ut,G),c.call(O+"_add",G,G,G))}function Nt(){const r=t.addFunction(i+"_prepAddStep");r.addParam("R","i32"),r.addParam("Q","i32"),r.addParam("r","i32");const c=r.getCodeBuilder(),y=c.getLocal("R"),v=c.i32_add(c.getLocal("R"),c.i32_const(2*d)),B=c.i32_add(c.getLocal("R"),c.i32_const(4*d)),G=c.getLocal("Q"),j=c.i32_add(c.getLocal("Q"),c.i32_const(2*d)),et=c.getLocal("r"),ut=c.i32_add(c.getLocal("r"),c.i32_const(2*d)),ht=c.i32_add(c.getLocal("r"),c.i32_const(4*d)),ct=c.i32_const(t.alloc(f)),yt=c.i32_const(t.alloc(f)),xt=c.i32_const(t.alloc(f)),Rt=c.i32_const(t.alloc(f)),Ft=c.i32_const(t.alloc(f)),Ut=c.i32_const(t.alloc(f)),Dt=c.i32_const(t.alloc(f)),$t=c.i32_const(t.alloc(f)),Gt=c.i32_const(t.alloc(f)),kt=c.i32_const(t.alloc(f)),Mt=c.i32_const(t.alloc(f));r.addCode(c.call(O+"_square",B,ct),c.call(O+"_square",j,yt),c.call(O+"_mul",ct,G,Rt),c.call(O+"_add",j,B,ut),c.call(O+"_square",ut,ut),c.call(O+"_sub",ut,yt,ut),c.call(O+"_sub",ut,ct,ut),c.call(O+"_mul",ut,ct,ut),c.call(O+"_sub",Rt,y,Ft),c.call(O+"_square",Ft,Ut),c.call(O+"_add",Ut,Ut,Dt),c.call(O+"_add",Dt,Dt,Dt),c.call(O+"_mul",Dt,Ft,$t),c.call(O+"_sub",ut,v,Gt),c.call(O+"_sub",Gt,v,Gt),c.call(O+"_mul",Gt,G,ht),c.call(O+"_mul",Dt,y,kt),c.call(O+"_square",Gt,y),c.call(O+"_sub",y,$t,y),c.call(O+"_sub",y,kt,y),c.call(O+"_sub",y,kt,y),c.call(O+"_add",B,Ft,B),c.call(O+"_square",B,B),c.call(O+"_sub",B,ct,B),c.call(O+"_sub",B,Ut,B),c.call(O+"_add",j,B,et),c.call(O+"_sub",kt,y,Mt),c.call(O+"_mul",Mt,Gt,Mt),c.call(O+"_mul",v,$t,Rt),c.call(O+"_add",Rt,Rt,Rt),c.call(O+"_sub",Mt,Rt,v),c.call(O+"_square",et,et),c.call(O+"_sub",et,yt,et),c.call(O+"_square",B,xt),c.call(O+"_sub",et,xt,et),c.call(O+"_add",ht,ht,ht),c.call(O+"_sub",ht,et,ht),c.call(O+"_add",B,B,et),c.call(O+"_neg",Gt,Gt),c.call(O+"_add",Gt,Gt,ut))}function Tt(){const r=t.addFunction(i+"_prepareG2");r.addParam("pQ","i32"),r.addParam("ppreQ","i32"),r.addLocal("pCoef","i32"),r.addLocal("i","i32");const c=r.getCodeBuilder(),y=c.getLocal("pQ"),v=t.alloc(f*3),B=c.i32_const(v),G=c.getLocal("ppreQ");r.addCode(c.call(z+"_normalize",y,G),c.if(c.call(z+"_isZero",G),c.ret([])),c.call(z+"_copy",G,B),c.setLocal("pCoef",c.i32_add(c.getLocal("ppreQ"),c.i32_const(f*3)))),r.addCode(c.setLocal("i",c.i32_const(Ot.length-2)),c.block(c.loop(c.call(i+"_prepDblStep",B,c.getLocal("pCoef")),c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(vt))),c.if(c.i32_load8_s(c.getLocal("i"),Lt),[...c.call(i+"_prepAddStep",B,G,c.getLocal("pCoef")),...c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(vt)))]),c.br_if(1,c.i32_eqz(c.getLocal("i"))),c.setLocal("i",c.i32_sub(c.getLocal("i"),c.i32_const(1))),c.br(0))))}function bt(){const r=t.addFunction(nt+"_mul1");r.addParam("pA","i32"),r.addParam("pC1","i32"),r.addParam("pR","i32");const c=r.getCodeBuilder(),y=c.getLocal("pA"),v=c.i32_add(c.getLocal("pA"),c.i32_const(g*2)),B=c.i32_add(c.getLocal("pA"),c.i32_const(g*4)),G=c.getLocal("pC1"),j=c.getLocal("pR"),et=c.i32_add(c.getLocal("pR"),c.i32_const(g*2)),ut=c.i32_add(c.getLocal("pR"),c.i32_const(g*4)),ht=c.i32_const(t.alloc(g*2)),ct=c.i32_const(t.alloc(g*2));r.addCode(c.call(O+"_add",y,v,ht),c.call(O+"_add",v,B,ct),c.call(O+"_mul",v,G,ut),c.call(O+"_mul",ct,G,j),c.call(O+"_sub",j,ut,j),c.call(O+"_mulNR",j,j),c.call(O+"_mul",ht,G,et),c.call(O+"_sub",et,ut,et))}bt();function wt(){const r=t.addFunction(nt+"_mul01");r.addParam("pA","i32"),r.addParam("pC0","i32"),r.addParam("pC1","i32"),r.addParam("pR","i32");const c=r.getCodeBuilder(),y=c.getLocal("pA"),v=c.i32_add(c.getLocal("pA"),c.i32_const(g*2)),B=c.i32_add(c.getLocal("pA"),c.i32_const(g*4)),G=c.getLocal("pC0"),j=c.getLocal("pC1"),et=c.getLocal("pR"),ut=c.i32_add(c.getLocal("pR"),c.i32_const(g*2)),ht=c.i32_add(c.getLocal("pR"),c.i32_const(g*4)),ct=c.i32_const(t.alloc(g*2)),yt=c.i32_const(t.alloc(g*2)),xt=c.i32_const(t.alloc(g*2)),Rt=c.i32_const(t.alloc(g*2));r.addCode(c.call(O+"_mul",y,G,ct),c.call(O+"_mul",v,j,yt),c.call(O+"_add",y,v,xt),c.call(O+"_add",y,B,Rt),c.call(O+"_add",v,B,et),c.call(O+"_mul",et,j,et),c.call(O+"_sub",et,yt,et),c.call(O+"_mulNR",et,et),c.call(O+"_add",et,ct,et),c.call(O+"_add",G,j,ut),c.call(O+"_mul",ut,xt,ut),c.call(O+"_sub",ut,ct,ut),c.call(O+"_sub",ut,yt,ut),c.call(O+"_mul",Rt,G,ht),c.call(O+"_sub",ht,ct,ht),c.call(O+"_add",ht,yt,ht))}wt();function pt(){const r=t.addFunction(ot+"_mul014");r.addParam("pA","i32"),r.addParam("pC0","i32"),r.addParam("pC1","i32"),r.addParam("pC4","i32"),r.addParam("pR","i32");const c=r.getCodeBuilder(),y=c.getLocal("pA"),v=c.i32_add(c.getLocal("pA"),c.i32_const(g*6)),B=c.getLocal("pC0"),G=c.getLocal("pC1"),j=c.getLocal("pC4"),et=c.i32_const(t.alloc(g*6)),ut=c.i32_const(t.alloc(g*6)),ht=c.i32_const(t.alloc(g*2)),ct=c.getLocal("pR"),yt=c.i32_add(c.getLocal("pR"),c.i32_const(g*6));r.addCode(c.call(nt+"_mul01",y,B,G,et),c.call(nt+"_mul1",v,j,ut),c.call(O+"_add",G,j,ht),c.call(nt+"_add",v,y,yt),c.call(nt+"_mul01",yt,B,ht,yt),c.call(nt+"_sub",yt,et,yt),c.call(nt+"_sub",yt,ut,yt),c.call(nt+"_copy",ut,ct),c.call(nt+"_mulNR",ct,ct),c.call(nt+"_add",ct,et,ct))}pt();function Et(){const r=t.addFunction(i+"_ell");r.addParam("pP","i32"),r.addParam("pCoefs","i32"),r.addParam("pF","i32");const c=r.getCodeBuilder(),y=c.getLocal("pP"),v=c.i32_add(c.getLocal("pP"),c.i32_const(d)),B=c.getLocal("pF"),G=c.getLocal("pCoefs"),j=c.i32_add(c.getLocal("pCoefs"),c.i32_const(g)),et=c.i32_add(c.getLocal("pCoefs"),c.i32_const(g*2)),ut=c.i32_add(c.getLocal("pCoefs"),c.i32_const(g*3)),ht=c.i32_add(c.getLocal("pCoefs"),c.i32_const(g*4)),ct=t.alloc(g*2),yt=c.i32_const(ct),xt=c.i32_const(ct),Rt=c.i32_const(ct+g),Ft=t.alloc(g*2),Ut=c.i32_const(Ft),Dt=c.i32_const(Ft),$t=c.i32_const(Ft+g);r.addCode(c.call(x+"_mul",G,v,xt),c.call(x+"_mul",j,v,Rt),c.call(x+"_mul",et,y,Dt),c.call(x+"_mul",ut,y,$t),c.call(ot+"_mul014",B,ht,Ut,yt,B))}Et();function Bt(){const r=t.addFunction(i+"_millerLoop");r.addParam("ppreP","i32"),r.addParam("ppreQ","i32"),r.addParam("r","i32"),r.addLocal("pCoef","i32"),r.addLocal("i","i32");const c=r.getCodeBuilder(),y=c.getLocal("ppreP");c.getLocal("ppreQ");const v=c.getLocal("pCoef"),B=c.getLocal("r");r.addCode(c.call(ot+"_one",B),c.if(c.call(k+"_isZero",y),c.ret([])),c.if(c.call(k+"_isZero",c.getLocal("ppreQ")),c.ret([])),c.setLocal("pCoef",c.i32_add(c.getLocal("ppreQ"),c.i32_const(f*3))),c.setLocal("i",c.i32_const(Ot.length-2)),c.block(c.loop(c.call(i+"_ell",y,v,B),c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(vt))),c.if(c.i32_load8_s(c.getLocal("i"),Lt),[...c.call(i+"_ell",y,v,B),...c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(vt)))]),c.call(ot+"_square",B,B),c.br_if(1,c.i32_eq(c.getLocal("i"),c.i32_const(1))),c.setLocal("i",c.i32_sub(c.getLocal("i"),c.i32_const(1))),c.br(0))),c.call(i+"_ell",y,v,B)),r.addCode(c.call(ot+"_conjugate",B,B))}function Pt(r){const c=[[[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")]],[[dt("1"),dt("0")],[dt("3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760"),dt("151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027")],[dt("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351"),dt("0")],[dt("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530"),dt("1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257")],[dt("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),dt("0")],[dt("3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557"),dt("877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230")],[dt("4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786"),dt("0")],[dt("151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027"),dt("3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760")],[dt("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),dt("0")],[dt("1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257"),dt("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530")],[dt("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437"),dt("0")],[dt("877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230"),dt("3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557")]]],y=[[[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")],[dt("1"),dt("0")]],[[dt("1"),dt("0")],[dt("0"),dt("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436")],[dt("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),dt("0")],[dt("0"),dt("1")],[dt("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),dt("0")],[dt("0"),dt("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350")]],[[dt("1"),dt("0")],[dt("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437"),dt("0")],[dt("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),dt("0")],[dt("4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786"),dt("0")],[dt("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),dt("0")],[dt("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351"),dt("0")]]],v=t.addFunction(ot+"_frobeniusMap"+r);v.addParam("x","i32"),v.addParam("r","i32");const B=v.getCodeBuilder();for(let j=0;j<6;j++){const et=j==0?B.getLocal("x"):B.i32_add(B.getLocal("x"),B.i32_const(j*f)),ut=et,ht=B.i32_add(B.getLocal("x"),B.i32_const(j*f+g)),ct=j==0?B.getLocal("r"):B.i32_add(B.getLocal("r"),B.i32_const(j*f)),yt=ct,xt=B.i32_add(B.getLocal("r"),B.i32_const(j*f+g)),Rt=G(c[Math.floor(j/3)][r%12],y[j%3][r%6]),Ft=t.alloc([...Wt.bigInt2BytesLE(T(Rt[0]),d),...Wt.bigInt2BytesLE(T(Rt[1]),d)]);r%2==1?v.addCode(B.call(x+"_copy",ut,yt),B.call(x+"_neg",ht,xt),B.call(O+"_mul",ct,B.i32_const(Ft),ct)):v.addCode(B.call(O+"_mul",et,B.i32_const(Ft),ct))}function G(j,et){const ut=dt(j[0]),ht=dt(j[1]),ct=dt(et[0]),yt=dt(et[1]),xt=[ut.times(ct).minus(ht.times(yt)).mod(o),ut.times(yt).add(ht.times(ct)).mod(o)];return xt[0].isNegative()&&(xt[0]=xt[0].add(o)),xt}}function Ct(){const r=t.addFunction(i+"__cyclotomicSquare");r.addParam("x","i32"),r.addParam("r","i32");const c=r.getCodeBuilder(),y=c.getLocal("x"),v=c.i32_add(c.getLocal("x"),c.i32_const(f)),B=c.i32_add(c.getLocal("x"),c.i32_const(2*f)),G=c.i32_add(c.getLocal("x"),c.i32_const(3*f)),j=c.i32_add(c.getLocal("x"),c.i32_const(4*f)),et=c.i32_add(c.getLocal("x"),c.i32_const(5*f)),ut=c.getLocal("r"),ht=c.i32_add(c.getLocal("r"),c.i32_const(f)),ct=c.i32_add(c.getLocal("r"),c.i32_const(2*f)),yt=c.i32_add(c.getLocal("r"),c.i32_const(3*f)),xt=c.i32_add(c.getLocal("r"),c.i32_const(4*f)),Rt=c.i32_add(c.getLocal("r"),c.i32_const(5*f)),Ft=c.i32_const(t.alloc(f)),Ut=c.i32_const(t.alloc(f)),Dt=c.i32_const(t.alloc(f)),$t=c.i32_const(t.alloc(f)),Gt=c.i32_const(t.alloc(f)),kt=c.i32_const(t.alloc(f)),Mt=c.i32_const(t.alloc(f)),Vt=c.i32_const(t.alloc(f));r.addCode(c.call(O+"_mul",y,j,Mt),c.call(O+"_mulNR",j,Ft),c.call(O+"_add",y,Ft,Ft),c.call(O+"_add",y,j,Vt),c.call(O+"_mul",Vt,Ft,Ft),c.call(O+"_mulNR",Mt,Vt),c.call(O+"_add",Mt,Vt,Vt),c.call(O+"_sub",Ft,Vt,Ft),c.call(O+"_add",Mt,Mt,Ut),c.call(O+"_mul",G,B,Mt),c.call(O+"_mulNR",B,Dt),c.call(O+"_add",G,Dt,Dt),c.call(O+"_add",G,B,Vt),c.call(O+"_mul",Vt,Dt,Dt),c.call(O+"_mulNR",Mt,Vt),c.call(O+"_add",Mt,Vt,Vt),c.call(O+"_sub",Dt,Vt,Dt),c.call(O+"_add",Mt,Mt,$t),c.call(O+"_mul",v,et,Mt),c.call(O+"_mulNR",et,Gt),c.call(O+"_add",v,Gt,Gt),c.call(O+"_add",v,et,Vt),c.call(O+"_mul",Vt,Gt,Gt),c.call(O+"_mulNR",Mt,Vt),c.call(O+"_add",Mt,Vt,Vt),c.call(O+"_sub",Gt,Vt,Gt),c.call(O+"_add",Mt,Mt,kt),c.call(O+"_sub",Ft,y,ut),c.call(O+"_add",ut,ut,ut),c.call(O+"_add",Ft,ut,ut),c.call(O+"_add",Ut,j,xt),c.call(O+"_add",xt,xt,xt),c.call(O+"_add",Ut,xt,xt),c.call(O+"_mul",kt,c.i32_const(ft),Vt),c.call(O+"_add",Vt,G,yt),c.call(O+"_add",yt,yt,yt),c.call(O+"_add",Vt,yt,yt),c.call(O+"_sub",Gt,B,ct),c.call(O+"_add",ct,ct,ct),c.call(O+"_add",Gt,ct,ct),c.call(O+"_sub",Dt,v,ht),c.call(O+"_add",ht,ht,ht),c.call(O+"_add",Dt,ht,ht),c.call(O+"_add",$t,et,Rt),c.call(O+"_add",Rt,Rt,Rt),c.call(O+"_add",$t,Rt,Rt))}function Ht(r,c,y){const v=V(r).map(ct=>ct==-1?255:ct),B=t.alloc(v),G=t.addFunction(i+"__cyclotomicExp_"+y);G.addParam("x","i32"),G.addParam("r","i32"),G.addLocal("bit","i32"),G.addLocal("i","i32");const j=G.getCodeBuilder(),et=j.getLocal("x"),ut=j.getLocal("r"),ht=j.i32_const(t.alloc(l));G.addCode(j.call(ot+"_conjugate",et,ht),j.call(ot+"_one",ut),j.if(j.teeLocal("bit",j.i32_load8_s(j.i32_const(v.length-1),B)),j.if(j.i32_eq(j.getLocal("bit"),j.i32_const(1)),j.call(ot+"_mul",ut,et,ut),j.call(ot+"_mul",ut,ht,ut))),j.setLocal("i",j.i32_const(v.length-2)),j.block(j.loop(j.call(i+"__cyclotomicSquare",ut,ut),j.if(j.teeLocal("bit",j.i32_load8_s(j.getLocal("i"),B)),j.if(j.i32_eq(j.getLocal("bit"),j.i32_const(1)),j.call(ot+"_mul",ut,et,ut),j.call(ot+"_mul",ut,ht,ut))),j.br_if(1,j.i32_eqz(j.getLocal("i"))),j.setLocal("i",j.i32_sub(j.getLocal("i"),j.i32_const(1))),j.br(0)))),c&&G.addCode(j.call(ot+"_conjugate",ut,ut))}function b(){Ct(),Ht(I,N,"w0");const r=t.addFunction(i+"_finalExponentiation");r.addParam("x","i32"),r.addParam("r","i32");const c=r.getCodeBuilder(),y=c.getLocal("x"),v=c.getLocal("r"),B=c.i32_const(t.alloc(l)),G=c.i32_const(t.alloc(l)),j=c.i32_const(t.alloc(l)),et=c.i32_const(t.alloc(l)),ut=c.i32_const(t.alloc(l)),ht=c.i32_const(t.alloc(l)),ct=c.i32_const(t.alloc(l));r.addCode(c.call(ot+"_frobeniusMap6",y,B),c.call(ot+"_inverse",y,G),c.call(ot+"_mul",B,G,j),c.call(ot+"_copy",j,G),c.call(ot+"_frobeniusMap2",j,j),c.call(ot+"_mul",j,G,j),c.call(i+"__cyclotomicSquare",j,G),c.call(ot+"_conjugate",G,G),c.call(i+"__cyclotomicExp_w0",j,et),c.call(i+"__cyclotomicSquare",et,ut),c.call(ot+"_mul",G,et,ht),c.call(i+"__cyclotomicExp_w0",ht,G),c.call(i+"__cyclotomicExp_w0",G,B),c.call(i+"__cyclotomicExp_w0",B,ct),c.call(ot+"_mul",ct,ut,ct),c.call(i+"__cyclotomicExp_w0",ct,ut),c.call(ot+"_conjugate",ht,ht),c.call(ot+"_mul",ut,ht,ut),c.call(ot+"_mul",ut,j,ut),c.call(ot+"_conjugate",j,ht),c.call(ot+"_mul",G,j,G),c.call(ot+"_frobeniusMap3",G,G),c.call(ot+"_mul",ct,ht,ct),c.call(ot+"_frobeniusMap1",ct,ct),c.call(ot+"_mul",et,B,et),c.call(ot+"_frobeniusMap2",et,et),c.call(ot+"_mul",et,G,et),c.call(ot+"_mul",et,ct,et),c.call(ot+"_mul",et,ut,v))}function P(){const r=t.addFunction(i+"_finalExponentiationOld");r.addParam("x","i32"),r.addParam("r","i32");const c=dt("322277361516934140462891564586510139908379969514828494218366688025288661041104682794998680497580008899973249814104447692778988208376779573819485263026159588510513834876303014016798809919343532899164848730280942609956670917565618115867287399623286813270357901731510188149934363360381614501334086825442271920079363289954510565375378443704372994881406797882676971082200626541916413184642520269678897559532260949334760604962086348898118982248842634379637598665468817769075878555493752214492790122785850202957575200176084204422751485957336465472324810982833638490904279282696134323072515220044451592646885410572234451732790590013479358343841220074174848221722017083597872017638514103174122784843925578370430843522959600095676285723737049438346544753168912974976791528535276317256904336520179281145394686565050419250614107803233314658825463117900250701199181529205942363159325765991819433914303908860460720581408201373164047773794825411011922305820065611121544561808414055302212057471395719432072209245600258134364584636810093520285711072578721435517884103526483832733289802426157301542744476740008494780363354305116978805620671467071400711358839553375340724899735460480144599782014906586543813292157922220645089192130209334926661588737007768565838519456601560804957985667880395221049249803753582637708560"),y=t.alloc(Wt.bigInt2BytesLE(c,544)),v=r.getCodeBuilder();r.addCode(v.call(ot+"_exp",v.getLocal("x"),v.i32_const(y),v.i32_const(544),v.getLocal("r")))}const W=t.alloc(h),Q=t.alloc(H);function X(r){const c=t.addFunction(i+"_pairingEq"+r);for(let G=0;G<r;G++)c.addParam("p_"+G,"i32"),c.addParam("q_"+G,"i32");c.addParam("c","i32"),c.setReturnType("i32");const y=c.getCodeBuilder(),v=y.i32_const(t.alloc(l)),B=y.i32_const(t.alloc(l));c.addCode(y.call(ot+"_one",v));for(let G=0;G<r;G++)c.addCode(y.call(i+"_prepareG1",y.getLocal("p_"+G),y.i32_const(W))),c.addCode(y.call(i+"_prepareG2",y.getLocal("q_"+G),y.i32_const(Q))),c.addCode(y.if(y.i32_eqz(y.call(k+"_inGroupAffine",y.i32_const(W))),y.ret(y.i32_const(0))),y.if(y.i32_eqz(y.call(z+"_inGroupAffine",y.i32_const(Q))),y.ret(y.i32_const(0)))),c.addCode(y.call(i+"_millerLoop",y.i32_const(W),y.i32_const(Q),B)),c.addCode(y.call(ot+"_mul",v,B,v));c.addCode(y.call(i+"_finalExponentiation",v,v)),c.addCode(y.call(ot+"_eq",v,y.getLocal("c")))}function J(){const r=t.addFunction(i+"_pairing");r.addParam("p","i32"),r.addParam("q","i32"),r.addParam("r","i32");const c=r.getCodeBuilder(),y=c.i32_const(t.alloc(l));r.addCode(c.call(i+"_prepareG1",c.getLocal("p"),c.i32_const(W))),r.addCode(c.call(i+"_prepareG2",c.getLocal("q"),c.i32_const(Q))),r.addCode(c.call(i+"_millerLoop",c.i32_const(W),c.i32_const(Q),y)),r.addCode(c.call(i+"_finalExponentiation",y,c.getLocal("r")))}function rt(){const r=t.addFunction(z+"_inGroupAffine");r.addParam("p","i32"),r.setReturnType("i32");const c=r.getCodeBuilder(),y=[dt("2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279894"),dt("2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279893")],v=dt("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),B=[dt("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530"),dt("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530")],G=c.i32_const(t.alloc([...Wt.bigInt2BytesLE(T(y[0]),d),...Wt.bigInt2BytesLE(T(y[1]),d)])),j=c.i32_const(t.alloc(Wt.bigInt2BytesLE(T(v),d))),et=c.i32_const(t.alloc([...Wt.bigInt2BytesLE(T(B[0]),d),...Wt.bigInt2BytesLE(T(B[1]),d)])),ut=c.i32_const(t.alloc(Wt.bigInt2BytesLE(I,8))),ht=c.getLocal("p"),ct=c.i32_add(c.getLocal("p"),c.i32_const(f)),yt=c.i32_const(t.alloc(g)),xt=c.i32_const(t.alloc(f)),Rt=c.i32_const(t.alloc(f)),Ft=t.alloc(f*2),Ut=c.i32_const(Ft),Dt=c.i32_const(Ft),$t=c.i32_const(Ft),Gt=c.i32_const(Ft+g),kt=c.i32_const(Ft+f),Mt=c.i32_const(Ft+f),Vt=c.i32_const(Ft+f+g),Ie=t.alloc(f*3),ke=c.i32_const(Ie),yi=c.i32_const(Ie),Bn=c.i32_const(Ie),Tn=c.i32_const(Ie+g),Ai=c.i32_const(Ie+f),Rn=c.i32_const(Ie+f),On=c.i32_const(Ie+f+g),Li=c.i32_const(Ie+f*2);r.addCode(c.if(c.call(z+"_isZeroAffine",c.getLocal("p")),c.ret(c.i32_const(1))),c.if(c.i32_eqz(c.call(z+"_inCurveAffine",c.getLocal("p"))),c.ret(c.i32_const(0))),c.call(O+"_mul",ht,G,xt),c.call(O+"_mul",ct,G,Rt),c.call(O+"_mul1",xt,j,Dt),c.call(O+"_neg",Rt,kt),c.call(O+"_neg",xt,yi),c.call(O+"_mul",Rt,et,Ai),c.call(x+"_sub",$t,Gt,yt),c.call(x+"_add",$t,Gt,Gt),c.call(x+"_copy",yt,$t),c.call(x+"_sub",Mt,Vt,yt),c.call(x+"_add",Mt,Vt,Vt),c.call(x+"_copy",yt,Mt),c.call(x+"_add",Bn,Tn,yt),c.call(x+"_sub",Bn,Tn,Tn),c.call(x+"_copy",yt,Bn),c.call(x+"_sub",On,Rn,yt),c.call(x+"_add",Rn,On,On),c.call(x+"_copy",yt,Rn),c.call(O+"_one",Li),c.call(z+"_timesScalar",ke,ut,c.i32_const(8),ke),c.call(z+"_addMixed",ke,Ut,ke),c.ret(c.call(z+"_eqMixed",ke,c.getLocal("p"))));const In=t.addFunction(z+"_inGroup");In.addParam("pIn","i32"),In.setReturnType("i32");const sn=In.getCodeBuilder(),jn=sn.i32_const(t.alloc(f*2));In.addCode(sn.call(z+"_toAffine",sn.getLocal("pIn"),jn),sn.ret(sn.call(z+"_inGroupAffine",jn)))}function E(){const r=t.addFunction(k+"_inGroupAffine");r.addParam("p","i32"),r.setReturnType("i32");const c=r.getCodeBuilder(),y=dt("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),v=dt("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),B=I.times(I).minus(dt.one).divide(dt(3)),G=c.i32_const(t.alloc(Wt.bigInt2BytesLE(T(y),d))),j=c.i32_const(t.alloc(Wt.bigInt2BytesLE(T(v),d))),et=c.i32_const(t.alloc(Wt.bigInt2BytesLE(B,16))),ut=c.getLocal("p"),ht=c.i32_add(c.getLocal("p"),c.i32_const(g)),ct=t.alloc(g*3),yt=c.i32_const(ct),xt=c.i32_const(ct),Rt=c.i32_const(ct+g);c.i32_const(ct+2*g);const Ft=t.alloc(g*2),Ut=c.i32_const(Ft),Dt=c.i32_const(Ft),$t=c.i32_const(Ft+g);r.addCode(c.if(c.call(k+"_isZeroAffine",c.getLocal("p")),c.ret(c.i32_const(1))),c.if(c.i32_eqz(c.call(k+"_inCurveAffine",c.getLocal("p"))),c.ret(c.i32_const(0))),c.call(x+"_mul",ut,G,xt),c.call(x+"_copy",ht,Rt),c.call(x+"_mul",ut,j,Dt),c.call(x+"_copy",ht,$t),c.call(k+"_doubleAffine",yt,yt),c.call(k+"_subMixed",yt,c.getLocal("p"),yt),c.call(k+"_subMixed",yt,Ut,yt),c.call(k+"_timesScalar",yt,et,c.i32_const(16),yt),c.ret(c.call(k+"_eqMixed",yt,Ut)));const Gt=t.addFunction(k+"_inGroup");Gt.addParam("pIn","i32"),Gt.setReturnType("i32");const kt=Gt.getCodeBuilder(),Mt=kt.i32_const(t.alloc(g*2));Gt.addCode(kt.call(k+"_toAffine",kt.getLocal("pIn"),Mt),kt.ret(kt.call(k+"_inGroupAffine",Mt)))}for(let r=0;r<10;r++)Pt(r),t.exportFunction(ot+"_frobeniusMap"+r);E(),rt(),Nt(),At(),at(),Tt(),Bt(),P(),b();for(let r=1;r<=5;r++)X(r),t.exportFunction(i+"_pairingEq"+r);J(),t.exportFunction(i+"_pairing"),t.exportFunction(i+"_prepareG1"),t.exportFunction(i+"_prepareG2"),t.exportFunction(i+"_millerLoop"),t.exportFunction(i+"_finalExponentiation"),t.exportFunction(i+"_finalExponentiationOld"),t.exportFunction(i+"__cyclotomicSquare"),t.exportFunction(i+"__cyclotomicExp_w0"),t.exportFunction(nt+"_mul1"),t.exportFunction(nt+"_mul01"),t.exportFunction(ot+"_mul014"),t.exportFunction(k+"_inGroupAffine"),t.exportFunction(k+"_inGroup"),t.exportFunction(z+"_inGroupAffine"),t.exportFunction(z+"_inGroup")},Q_=M_,H_=q_;function Pr(e){if(typeof e=="bigint"||e.eq!==void 0)return e.toString(10);if(e instanceof Uint8Array)return Rc(e,0);if(Array.isArray(e))return e.map(Pr);if(typeof e=="object"){const t={};return Object.keys(e).forEach(i=>{t[i]=Pr(e[i])}),t}else return e}function xr(e){if(typeof e=="string"&&/^[0-9]+$/.test(e))return BigInt(e);if(typeof e=="string"&&/^0x[0-9a-fA-F]+$/.test(e))return BigInt(e);if(Array.isArray(e))return e.map(xr);if(typeof e=="object"){if(e===null)return null;const t={};return Object.keys(e).forEach(i=>{t[i]=xr(e[i])}),t}else return e}function z_(e){let t=BigInt(0),n=e.length,i=0;const o=new DataView(e.buffer,e.byteOffset,e.byteLength);for(;n>0;)n>=4?(n-=4,t+=BigInt(o.getUint32(n))<<BigInt(i*8),i+=4):n>=2?(n-=2,t+=BigInt(o.getUint16(n))<<BigInt(i*8),i+=2):(n-=1,t+=BigInt(o.getUint8(n))<<BigInt(i*8),i+=1);return t}function $_(e,t){let n=e;const i=new Uint8Array(t),o=new DataView(i.buffer);let a=t;for(;a>0;)a-4>=0?(a-=4,o.setUint32(a,Number(n&BigInt(4294967295))),n=n>>BigInt(32)):a-2>=0?(a-=2,o.setUint16(a,Number(n&BigInt(65535))),n=n>>BigInt(16)):(a-=1,o.setUint8(a,Number(n&BigInt(255))),n=n>>BigInt(8));if(n)throw new Error("Number does not fit in this length");return i}function Y_(e){let t=BigInt(0),n=0;const i=new DataView(e.buffer,e.byteOffset,e.byteLength);for(;n<e.length;)n+4<=e.length?(t+=BigInt(i.getUint32(n,!0))<<BigInt(n*8),n+=4):n+4<=e.length?(t+=BigInt(i.getUint16(n,!0))<<BigInt(n*8),n+=2):(t+=BigInt(i.getUint8(n,!0))<<BigInt(n*8),n+=1);return t}function j_(e,t){let n=e;typeof t=="undefined"&&(t=Math.floor((Oc(e)-1)/8)+1,t==0&&(t=1));const i=new Uint8Array(t),o=new DataView(i.buffer);let a=0;for(;a<t;)a+4<=t?(o.setUint32(a,Number(n&BigInt(4294967295)),!0),a+=4,n=n>>BigInt(32)):a+2<=t?(o.setUint16(Number(a,n&BigInt(65535)),!0),a+=2,n=n>>BigInt(16)):(o.setUint8(Number(a,n&BigInt(255)),!0),a+=1,n=n>>BigInt(8));if(n)throw new Error("Number does not fit in this length");return i}function Nr(e,t){if(typeof t=="bigint"||t.eq!==void 0)return t.toString(10);if(t instanceof Uint8Array)return e.toString(e.e(t));if(Array.isArray(t))return t.map(Nr.bind(this,e));if(typeof t=="object"){const n={};return Object.keys(t).forEach(o=>{n[o]=Nr(e,t[o])}),n}else return t}function Mr(e,t){if(typeof t=="string"&&/^[0-9]+$/.test(t))return e.e(t);if(typeof t=="string"&&/^0x[0-9a-fA-F]+$/.test(t))return e.e(t);if(Array.isArray(t))return t.map(Mr.bind(this,e));if(typeof t=="object"){if(t===null)return null;const n={};return Object.keys(t).forEach(o=>{n[o]=Mr(e,t[o])}),n}else return t}var K_=Object.freeze({__proto__:null,stringifyBigInts:Pr,unstringifyBigInts:xr,beBuff2int:z_,beInt2Buff:$_,leBuff2int:Y_,leInt2Buff:j_,stringifyFElements:Nr,unstringifyFElements:Mr});function Ur(e){if(typeof e=="bigint"||e.eq!==void 0)return e.toString(10);if(Array.isArray(e))return e.map(Ur);if(typeof e=="object"){const t={};return Object.keys(e).forEach(i=>{t[i]=Ur(e[i])}),t}else return e}function Dr(e){if(typeof e=="string"&&/^[0-9]+$/.test(e))return st(e);if(typeof e=="string"&&/^0x[0-9a-fA-F]+$/.test(e))return st(e);if(Array.isArray(e))return e.map(Dr);if(typeof e=="object"){const t={};return Object.keys(e).forEach(i=>{t[i]=Dr(e[i])}),t}else return e}function V_(e){let t=st.zero;for(let n=0;n<e.length;n++){const i=st(e[e.length-n-1]);t=t.add(i.shiftLeft(n*8))}return t}function Z_(e,t){let n=e,i=t-1;const o=new Uint8Array(t);for(;n.gt(st.zero)&&i>=0;){let a=Number(n.and(st("255")));o[i]=a,i--,n=n.shiftRight(8)}if(!n.eq(st.zero))throw new Error("Number does not fit in this length");return o}function J_(e){let t=st.zero;for(let n=0;n<e.length;n++){const i=st(e[n]);t=t.add(i.shiftLeft(n*8))}return t}function X_(e,t){let n=e,i=0;const o=new Uint8Array(t);for(;n.gt(st.zero)&&i<o.length;){let a=Number(n.and(st(255)));o[i]=a,i++,n=n.shiftRight(8)}if(!n.eq(st.zero))throw new Error("Number does not fit in this length");return o}var tg=Object.freeze({__proto__:null,stringifyBigInts:Ur,unstringifyBigInts:Dr,beBuff2int:V_,beInt2Buff:Z_,leBuff2int:J_,leInt2Buff:X_});let _n={};typeof BigInt=="function"?Object.assign(_n,K_):Object.assign(_n,tg);const Qi=[];for(let e=0;e<256;e++)Qi[e]=eg(e,8);function eg(e,t){let n=0,i=e;for(let o=0;o<t;o++)n<<=1,n=n|i&1,i>>=1;return n}_n.bitReverse=function(t,n){return(Qi[t>>>24]|Qi[t>>>16&255]<<8|Qi[t>>>8&255]<<16|Qi[t&255]<<24)>>>32-n},_n.log2=function(t){return((t&4294901760)!=0?(t&=4294901760,16):0)|((t&4278255360)!=0?(t&=4278255360,8):0)|((t&4042322160)!=0?(t&=4042322160,4):0)|((t&3435973836)!=0?(t&=3435973836,2):0)|(t&2863311530)!=0},_n.buffReverseBits=function(t,n){const i=t.byteLength/n,o=_n.log2(i);if(i!=1<<o)throw new Error("Invalid number of pointers");for(let a=0;a<i;a++){const s=_n.bitReverse(a,o);if(a>s){const d=t.slice(a*n,(a+1)*n);t.set(t.slice(s*n,(s+1)*n),a*n),t.set(d,s*n)}}},_n.array2buffer=function(e,t){const n=new Uint8Array(t*e.length);for(let i=0;i<e.length;i++)n.set(e[i],i*t);return n},_n.buffer2array=function(e,t){const n=e.byteLength/t,i=new Array(n);for(let o=0;o<n;o++)i[o]=e.slice(o*t,o*t+t);return i};const me=1<<30;class go{constructor(t){this.buffers=[],this.byteLength=t;for(let n=0;n<t;n+=me){const i=Math.min(t-n,me);this.buffers.push(new Uint8Array(i))}}slice(t,n){n===void 0&&(n=this.byteLength),t===void 0&&(t=0);const i=n-t,o=Math.floor(t/me),a=Math.floor((t+i-1)/me);if(o==a||i==0)return this.buffers[o].slice(t%me,t%me+i);let s,d=o,g=t%me,f=i;for(;f>0;){const l=g+f>me?me-g:f,m=new Uint8Array(this.buffers[d].buffer,this.buffers[d].byteOffset+g,l);if(l==i)return m.slice();s||(i<=me?s=new Uint8Array(i):s=new go(i)),s.set(m,i-f),f=f-l,d++,g=0}return s}set(t,n){n===void 0&&(n=0);const i=t.byteLength;if(i==0)return;const o=Math.floor(n/me),a=Math.floor((n+i-1)/me);if(o==a)return t instanceof go&&t.buffers.length==1?this.buffers[o].set(t.buffers[0],n%me):this.buffers[o].set(t,n%me);let s=o,d=n%me,g=i;for(;g>0;){const f=d+g>me?me-d:g,l=t.slice(i-g,i-g+f);new Uint8Array(this.buffers[s].buffer,this.buffers[s].byteOffset+d,f).set(l),g=g-f,s++,d=0}}}function ng(e){const t=32767;let n,i;e&&(e.onmessage=function(l){let m;if(l.data?m=l.data:m=l,m[0].cmd=="INIT")o(m[0]).then(function(){e.postMessage(m.result)});else if(m[0].cmd=="TERMINATE")e.close();else{const A=f(m);e.postMessage(A)}});async function o(l){const m=new Uint8Array(l.code),A=await WebAssembly.compile(m);i=new WebAssembly.Memory({initial:l.init,maximum:t}),n=await WebAssembly.instantiate(A,{env:{memory:i}})}function a(l){const m=new Uint32Array(i.buffer,0,1);for(;m[0]&3;)m[0]++;const A=m[0];if(m[0]+=l,m[0]+l>i.buffer.byteLength){const _=i.buffer.byteLength/65536;let R=Math.floor((m[0]+l)/65536)+1;R>t&&(R=t),i.grow(R-_)}return A}function s(l){const m=a(l.byteLength);return g(m,l),m}function d(l,m){const A=new Uint8Array(i.buffer);return new Uint8Array(A.buffer,A.byteOffset+l,m)}function g(l,m){new Uint8Array(i.buffer).set(new Uint8Array(m),l)}function f(l){if(l[0].cmd=="INIT")return o(l[0]);const m={vars:[],out:[]},_=new Uint32Array(i.buffer,0,1)[0];for(let x=0;x<l.length;x++)switch(l[x].cmd){case"ALLOCSET":m.vars[l[x].var]=s(l[x].buff);break;case"ALLOC":m.vars[l[x].var]=a(l[x].len);break;case"SET":g(m.vars[l[x].var],l[x].buff);break;case"CALL":{const C=[];for(let k=0;k<l[x].params.length;k++){const O=l[x].params[k];typeof O.var!="undefined"?C.push(m.vars[O.var]+(O.offset||0)):typeof O.val!="undefined"&&C.push(O.val)}n.exports[l[x].fnName](...C);break}case"GET":m.out[l[x].out]=d(m.vars[l[x].var],l[x].len).slice();break;default:throw new Error("Invalid cmd")}const R=new Uint32Array(i.buffer,0,1);return R[0]=_,m.out}return f}var po={},ig=Object.freeze({__proto__:null,default:po});function og(e){return globalThis.btoa(e)}og("("+ng.toString()+")(self)");var Ue={};const Fe=en.exports;function gn(e){let t;return typeof e=="string"&&e.slice(0,2).toLowerCase()=="0x"?t=Fe(e.slice(2),16):t=Fe(e),t}function rg(e){const t=[],n=gn(e);return t.push(n.and(255).toJSNumber()),t.push(n.shiftRight(8).and(255).toJSNumber()),t.push(n.shiftRight(16).and(255).toJSNumber()),t.push(n.shiftRight(24).and(255).toJSNumber()),t}function ag(e){const t=[],n=gn(e);return t.push(n.and(255).toJSNumber()),t.push(n.shiftRight(8).and(255).toJSNumber()),t.push(n.shiftRight(16).and(255).toJSNumber()),t.push(n.shiftRight(24).and(255).toJSNumber()),t.push(n.shiftRight(32).and(255).toJSNumber()),t.push(n.shiftRight(40).and(255).toJSNumber()),t.push(n.shiftRight(48).and(255).toJSNumber()),t.push(n.shiftRight(56).and(255).toJSNumber()),t}function sg(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t.push(i):i<2048?t.push(192|i>>6,128|i&63):i<55296||i>=57344?t.push(224|i>>12,128|i>>6&63,128|i&63):(n++,i=65536+((i&1023)<<10|e.charCodeAt(n)&1023),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return t}function cg(e){const t=sg(e);return[...Vc(t.length),...t]}function Gr(e){const t=[];let n=gn(e);if(n.isNegative())throw new Error("Number cannot be negative");for(;!n.isZero();)t.push(n.and(127).toJSNumber()),n=n.shiftRight(7);t.length==0&&t.push(0);for(let i=0;i<t.length-1;i++)t[i]=t[i]|128;return t}function Kc(e){let t,n;const i=e.bitLength().toJSNumber();e<0?(n=!0,t=Fe.one.shiftLeft(i).add(e)):(n=!1,t=gn(e));const o=7-i%7,a=Fe.one.shiftLeft(o).minus(1).shiftLeft(i),s=(1<<7-o)-1|128,d=Gr(t.add(a));return n||(d[d.length-1]=d[d.length-1]&s),d}function lg(e){let t=gn(e);if(t.greater(Fe("FFFFFFFF",16)))throw new Error("Number too big");if(t.greater(Fe("7FFFFFFF",16))&&(t=t.minus(Fe("100000000",16))),t.lesser(Fe("-80000000",16)))throw new Error("Number too small");return Kc(t)}function ug(e){let t=gn(e);if(t.greater(Fe("FFFFFFFFFFFFFFFF",16)))throw new Error("Number too big");if(t.greater(Fe("7FFFFFFFFFFFFFFF",16))&&(t=t.minus(Fe("10000000000000000",16))),t.lesser(Fe("-8000000000000000",16)))throw new Error("Number too small");return Kc(t)}function Vc(e){let t=gn(e);if(t.greater(Fe("FFFFFFFF",16)))throw new Error("Number too big");return Gr(t)}function fg(e){let t=gn(e);if(t.greater(Fe("FFFFFFFFFFFFFFFF",16)))throw new Error("Number too big");return Gr(t)}function dg(e){return Array.from(e,function(t){return("0"+(t&255).toString(16)).slice(-2)}).join("")}function Zc(e){if(typeof e=="string"){let t=e.split(`
`);for(let n=0;n<t.length;n++)t[n]&&(t[n]="    "+t[n]);return t.join(`
`)}else if(Array.isArray(e)){for(let t=0;t<e.length;t++)e[t]=Zc(e[t]);return e}}Ue.toNumber=gn,Ue.u32=rg,Ue.u64=ag,Ue.varuint32=Vc,Ue.varuint64=fg,Ue.varint32=lg,Ue.varint64=ug,Ue.string=cg,Ue.toHexString=dg,Ue.ident=Zc;const te=Ue;class hg{constructor(t){this.func=t,this.functionName=t.functionName,this.module=t.module}setLocal(t,n){const i=this.func.localIdxByName[t];if(i===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...n,33,...te.varuint32(i)]}teeLocal(t,n){const i=this.func.localIdxByName[t];if(i===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...n,34,...te.varuint32(i)]}getLocal(t){const n=this.func.localIdxByName[t];if(n===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[32,...te.varuint32(n)]}i64_load8_s(t,n,i){const o=n||0,a=i===void 0?0:i;return[...t,48,a,...te.varuint32(o)]}i64_load8_u(t,n,i){const o=n||0,a=i===void 0?0:i;return[...t,49,a,...te.varuint32(o)]}i64_load16_s(t,n,i){const o=n||0,a=i===void 0?1:i;return[...t,50,a,...te.varuint32(o)]}i64_load16_u(t,n,i){const o=n||0,a=i===void 0?1:i;return[...t,51,a,...te.varuint32(o)]}i64_load32_s(t,n,i){const o=n||0,a=i===void 0?2:i;return[...t,52,a,...te.varuint32(o)]}i64_load32_u(t,n,i){const o=n||0,a=i===void 0?2:i;return[...t,53,a,...te.varuint32(o)]}i64_load(t,n,i){const o=n||0,a=i===void 0?3:i;return[...t,41,a,...te.varuint32(o)]}i64_store(t,n,i,o){let a,s,d;return Array.isArray(n)?(a=0,s=3,d=n):Array.isArray(i)?(a=n,s=3,d=i):Array.isArray(o)&&(a=n,s=i,d=o),[...t,...d,55,s,...te.varuint32(a)]}i64_store32(t,n,i,o){let a,s,d;return Array.isArray(n)?(a=0,s=2,d=n):Array.isArray(i)?(a=n,s=2,d=i):Array.isArray(o)&&(a=n,s=i,d=o),[...t,...d,62,s,...te.varuint32(a)]}i64_store16(t,n,i,o){let a,s,d;return Array.isArray(n)?(a=0,s=1,d=n):Array.isArray(i)?(a=n,s=1,d=i):Array.isArray(o)&&(a=n,s=i,d=o),[...t,...d,61,s,...te.varuint32(a)]}i64_store8(t,n,i,o){let a,s,d;return Array.isArray(n)?(a=0,s=0,d=n):Array.isArray(i)?(a=n,s=0,d=i):Array.isArray(o)&&(a=n,s=i,d=o),[...t,...d,60,s,...te.varuint32(a)]}i32_load8_s(t,n,i){const o=n||0,a=i===void 0?0:i;return[...t,44,a,...te.varuint32(o)]}i32_load8_u(t,n,i){const o=n||0,a=i===void 0?0:i;return[...t,45,a,...te.varuint32(o)]}i32_load16_s(t,n,i){const o=n||0,a=i===void 0?1:i;return[...t,46,a,...te.varuint32(o)]}i32_load16_u(t,n,i){const o=n||0,a=i===void 0?1:i;return[...t,47,a,...te.varuint32(o)]}i32_load(t,n,i){const o=n||0,a=i===void 0?2:i;return[...t,40,a,...te.varuint32(o)]}i32_store(t,n,i,o){let a,s,d;return Array.isArray(n)?(a=0,s=2,d=n):Array.isArray(i)?(a=n,s=2,d=i):Array.isArray(o)&&(a=n,s=i,d=o),[...t,...d,54,s,...te.varuint32(a)]}i32_store16(t,n,i,o){let a,s,d;return Array.isArray(n)?(a=0,s=1,d=n):Array.isArray(i)?(a=n,s=1,d=i):Array.isArray(o)&&(a=n,s=i,d=o),[...t,...d,59,s,...te.varuint32(a)]}i32_store8(t,n,i,o){let a,s,d;return Array.isArray(n)?(a=0,s=0,d=n):Array.isArray(i)?(a=n,s=0,d=i):Array.isArray(o)&&(a=n,s=i,d=o),[...t,...d,58,s,...te.varuint32(a)]}call(t,...n){const i=this.module.functionIdxByName[t];if(i===void 0)throw new Error(`Function not defined: Function: ${t}`);return[...[].concat(...n),16,...te.varuint32(i)]}call_indirect(t,...n){return[...[].concat(...n),...t,17,0,0]}if(t,n,i){return i?[...t,4,64,...n,5,...i,11]:[...t,4,64,...n,11]}block(t){return[2,64,...t,11]}loop(...t){return[3,64,...[].concat(...t),11]}br_if(t,n){return[...n,13,...te.varuint32(t)]}br(t){return[12,...te.varuint32(t)]}ret(t){return[...t,15]}drop(t){return[...t,26]}i64_const(t){return[66,...te.varint64(t)]}i32_const(t){return[65,...te.varint32(t)]}i64_eqz(t){return[...t,80]}i64_eq(t,n){return[...t,...n,81]}i64_ne(t,n){return[...t,...n,82]}i64_lt_s(t,n){return[...t,...n,83]}i64_lt_u(t,n){return[...t,...n,84]}i64_gt_s(t,n){return[...t,...n,85]}i64_gt_u(t,n){return[...t,...n,86]}i64_le_s(t,n){return[...t,...n,87]}i64_le_u(t,n){return[...t,...n,88]}i64_ge_s(t,n){return[...t,...n,89]}i64_ge_u(t,n){return[...t,...n,90]}i64_add(t,n){return[...t,...n,124]}i64_sub(t,n){return[...t,...n,125]}i64_mul(t,n){return[...t,...n,126]}i64_div_s(t,n){return[...t,...n,127]}i64_div_u(t,n){return[...t,...n,128]}i64_rem_s(t,n){return[...t,...n,129]}i64_rem_u(t,n){return[...t,...n,130]}i64_and(t,n){return[...t,...n,131]}i64_or(t,n){return[...t,...n,132]}i64_xor(t,n){return[...t,...n,133]}i64_shl(t,n){return[...t,...n,134]}i64_shr_s(t,n){return[...t,...n,135]}i64_shr_u(t,n){return[...t,...n,136]}i64_extend_i32_s(t){return[...t,172]}i64_extend_i32_u(t){return[...t,173]}i64_clz(t){return[...t,121]}i64_ctz(t){return[...t,122]}i32_eqz(t){return[...t,69]}i32_eq(t,n){return[...t,...n,70]}i32_ne(t,n){return[...t,...n,71]}i32_lt_s(t,n){return[...t,...n,72]}i32_lt_u(t,n){return[...t,...n,73]}i32_gt_s(t,n){return[...t,...n,74]}i32_gt_u(t,n){return[...t,...n,75]}i32_le_s(t,n){return[...t,...n,76]}i32_le_u(t,n){return[...t,...n,77]}i32_ge_s(t,n){return[...t,...n,78]}i32_ge_u(t,n){return[...t,...n,79]}i32_add(t,n){return[...t,...n,106]}i32_sub(t,n){return[...t,...n,107]}i32_mul(t,n){return[...t,...n,108]}i32_div_s(t,n){return[...t,...n,109]}i32_div_u(t,n){return[...t,...n,110]}i32_rem_s(t,n){return[...t,...n,111]}i32_rem_u(t,n){return[...t,...n,112]}i32_and(t,n){return[...t,...n,113]}i32_or(t,n){return[...t,...n,114]}i32_xor(t,n){return[...t,...n,115]}i32_shl(t,n){return[...t,...n,116]}i32_shr_s(t,n){return[...t,...n,117]}i32_shr_u(t,n){return[...t,...n,118]}i32_rotl(t,n){return[...t,...n,119]}i32_rotr(t,n){return[...t,...n,120]}i32_wrap_i64(t){return[...t,167]}i32_clz(t){return[...t,103]}i32_ctz(t){return[...t,104]}unreachable(){return[0]}current_memory(){return[63,0]}comment(){return[]}}var _g=hg;const gg=_g,mo=Ue,kr={i32:127,i64:126,f32:125,f64:124,anyfunc:112,func:96,emptyblock:64};class pg{constructor(t,n,i,o,a){if(i=="import")this.fnType="import",this.moduleName=o,this.fieldName=a;else if(i=="internal")this.fnType="internal";else throw new Error("Invalid function fnType: "+i);this.module=t,this.fnName=n,this.params=[],this.locals=[],this.localIdxByName={},this.code=[],this.returnType=null,this.nextLocal=0}addParam(t,n){if(this.localIdxByName[t])throw new Error(`param already exists. Function: ${this.fnName}, Param: ${t} `);const i=this.nextLocal++;this.localIdxByName[t]=i,this.params.push({type:n})}addLocal(t,n,i){const o=i||1;if(this.localIdxByName[t])throw new Error(`local already exists. Function: ${this.fnName}, Param: ${t} `);const a=this.nextLocal++;this.localIdxByName[t]=a,this.locals.push({type:n,length:o})}setReturnType(t){if(this.returnType)throw new Error(`returnType already defined. Function: ${this.fnName}`);this.returnType=t}getSignature(){const t=[...mo.varuint32(this.params.length),...this.params.map(i=>kr[i.type])],n=this.returnType?[1,kr[this.returnType]]:[0];return[96,...t,...n]}getBody(){const t=this.locals.map(i=>[...mo.varuint32(i.length),kr[i.type]]),n=[...mo.varuint32(this.locals.length),...[].concat(...t),...this.code,11];return[...mo.varuint32(n.length),...n]}addCode(...t){this.code.push(...[].concat(...t))}getCodeBuilder(){return new gg(this)}}var mg=pg;const Jc=mg,Jt=Ue;class yg{constructor(){this.functions=[],this.functionIdxByName={},this.nImportFunctions=0,this.nInternalFunctions=0,this.memory={pagesSize:1,moduleName:"env",fieldName:"memory"},this.free=8,this.datas=[],this.modules={},this.exports=[],this.functionsTable=[]}build(){return this._setSignatures(),new Uint8Array([...Jt.u32(1836278016),...Jt.u32(1),...this._buildType(),...this._buildImport(),...this._buildFunctionDeclarations(),...this._buildFunctionsTable(),...this._buildExports(),...this._buildElements(),...this._buildCode(),...this._buildData()])}addFunction(t){if(typeof this.functionIdxByName[t]!="undefined")throw new Error(`Function already defined: ${t}`);const n=this.functions.length;return this.functionIdxByName[t]=n,this.functions.push(new Jc(this,t,"internal")),this.nInternalFunctions++,this.functions[n]}addIimportFunction(t,n,i){if(typeof this.functionIdxByName[t]!="undefined")throw new Error(`Function already defined: ${t}`);if(this.functions.length>0&&this.functions[this.functions.length-1].type=="internal")throw new Error(`Import functions must be declared before internal: ${t}`);let o=i||t;const a=this.functions.length;return this.functionIdxByName[t]=a,this.functions.push(new Jc(this,t,"import",n,o)),this.nImportFunctions++,this.functions[a]}setMemory(t,n,i){this.memory={pagesSize:t,moduleName:n||"env",fieldName:i||"memory"}}exportFunction(t,n){const i=n||t;if(typeof this.functionIdxByName[t]=="undefined")throw new Error(`Function not defined: ${t}`);const o=this.functionIdxByName[t];i!=t&&(this.functionIdxByName[i]=o),this.exports.push({exportName:i,idx:o})}addFunctionToTable(t){const n=this.functionIdxByName[t];this.functionsTable.push(n)}addData(t,n){this.datas.push({offset:t,bytes:n})}alloc(t,n){let i,o;(Array.isArray(t)||ArrayBuffer.isView(t))&&typeof n=="undefined"?(i=t.length,o=t):(i=t,o=n),i=(i-1>>3)+1<<3;const a=this.free;return this.free+=i,o&&this.addData(a,o),a}allocString(t){const i=new globalThis.TextEncoder().encode(t);return this.alloc([...i,0])}_setSignatures(){this.signatures=[];const t={};if(this.functionsTable.length>0){const n=this.functions[this.functionsTable[0]].getSignature(),i="s_"+Jt.toHexString(n);t[i]=0,this.signatures.push(n)}for(let n=0;n<this.functions.length;n++){const i=this.functions[n].getSignature(),o="s_"+Jt.toHexString(i);typeof t[o]=="undefined"&&(t[o]=this.signatures.length,this.signatures.push(i)),this.functions[n].signatureIdx=t[o]}}_buildSection(t,n){return[t,...Jt.varuint32(n.length),...n]}_buildType(){return this._buildSection(1,[...Jt.varuint32(this.signatures.length),...[].concat(...this.signatures)])}_buildImport(){const t=[];t.push([...Jt.string(this.memory.moduleName),...Jt.string(this.memory.fieldName),2,0,...Jt.varuint32(this.memory.pagesSize)]);for(let n=0;n<this.nImportFunctions;n++)t.push([...Jt.string(this.functions[n].moduleName),...Jt.string(this.functions[n].fieldName),0,...Jt.varuint32(this.functions[n].signatureIdx)]);return this._buildSection(2,Jt.varuint32(t.length).concat(...t))}_buildFunctionDeclarations(){const t=[];for(let n=this.nImportFunctions;n<this.nImportFunctions+this.nInternalFunctions;n++)t.push(...Jt.varuint32(this.functions[n].signatureIdx));return this._buildSection(3,[...Jt.varuint32(t.length),...t])}_buildFunctionsTable(){return this.functionsTable.length==0?[]:this._buildSection(4,[...Jt.varuint32(1),112,0,...Jt.varuint32(this.functionsTable.length)])}_buildElements(){if(this.functionsTable.length==0)return[];const t=[];for(let n=0;n<this.functionsTable.length;n++)t.push(...Jt.varuint32(this.functionsTable[n]));return this._buildSection(9,[...Jt.varuint32(1),...Jt.varuint32(0),65,...Jt.varint32(0),11,...Jt.varuint32(this.functionsTable.length),...t])}_buildExports(){const t=[];for(let n=0;n<this.exports.length;n++)t.push([...Jt.string(this.exports[n].exportName),0,...Jt.varuint32(this.exports[n].idx)]);return this._buildSection(7,Jt.varuint32(t.length).concat(...t))}_buildCode(){const t=[];for(let n=this.nImportFunctions;n<this.nImportFunctions+this.nInternalFunctions;n++)t.push(this.functions[n].getBody());return this._buildSection(10,Jt.varuint32(t.length).concat(...t))}_buildData(){const t=[];t.push([0,65,0,11,4,...Jt.u32(this.free)]);for(let n=0;n<this.datas.length;n++)t.push([0,65,...Jt.varint32(this.datas[n].offset),11,...Jt.varuint32(this.datas[n].bytes.length),...this.datas[n].bytes]);return this._buildSection(11,Jt.varuint32(t.length).concat(...t))}}var Ag=yg,Xc=Ag;globalThis.curve_bn128=null,globalThis.curve_bls12381=null,Gi("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),Gi("21888242871839275222246405745257275088548364400416034343698204186575808495617"),Gi("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),Gi("21888242871839275222246405745257275088696311157297823662689037894645226208583");const tl=l_;async function el(e,t,n,i){if(n=n||4096*64,["w+","wx+","r","ax+","a+"].indexOf(t)<0)throw new Error("Invalid open option");const o=await po.promises.open(e,t),a=await o.stat();return new Lg(o,a,n,i,e)}class Lg{constructor(t,n,i,o,a){for(this.fileName=a,this.fd=t,this.pos=0,this.pageSize=o||1<<8;this.pageSize<n.blksize;)this.pageSize*=2;this.totalSize=n.size,this.totalPages=Math.floor((n.size-1)/this.pageSize)+1,this.maxPagesLoaded=Math.floor(i/this.pageSize)+1,this.pages={},this.pendingLoads=[],this.writing=!1,this.reading=!1,this.avBuffs=[],this.history={}}_loadPage(t){const n=this,i=new Promise((o,a)=>{n.pendingLoads.push({page:t,resolve:o,reject:a})});return n.__statusPage("After Load request: ",t),i}__statusPage(t,n){const i=[],o=this;if(!o.logHistory)return;i.push("=="+t+" "+n);let a="";for(let s=0;s<o.pendingLoads.length;s++)o.pendingLoads[s].page==n&&(a=a+" "+s);if(a&&i.push("Pending loads:"+a),typeof o.pages[n]!="undefined"){const s=o.pages[n];i.push("Loaded"),i.push("pendingOps: "+s.pendingOps),s.loading&&i.push("loading: "+s.loading),s.writing&&i.push("writing"),s.dirty&&i.push("dirty")}i.push("=="),o.history[n]||(o.history[n]=[]),o.history[n].push(i)}__printHistory(t){const n=this;n.history[t]||console.log("Empty History ",t),console.log("History "+t);for(let i=0;i<n.history[t].length;i++)for(let o=0;o<n.history[t][i].length;o++)console.log("-> "+n.history[t][i][o])}_triggerLoad(){const t=this;if(t.reading||t.pendingLoads.length==0)return;const n=Object.keys(t.pages),i=[];for(let d=0;d<n.length;d++){const g=t.pages[parseInt(n[d])];g.dirty==!1&&g.pendingOps==0&&!g.writing&&!g.loading&&i.push(parseInt(n[d]))}let o=t.maxPagesLoaded-n.length;const a=[];for(;t.pendingLoads.length>0&&(typeof t.pages[t.pendingLoads[0].page]!="undefined"||o>0||i.length>0);){const d=t.pendingLoads.shift();if(typeof t.pages[d.page]!="undefined"){t.pages[d.page].pendingOps++;const g=i.indexOf(d.page);g>=0&&i.splice(g,1),t.pages[d.page].loading?t.pages[d.page].loading.push(d):d.resolve(),t.__statusPage("After Load (cached): ",d.page)}else{if(o)o--;else{const g=i.shift();t.__statusPage("Before Unload: ",g),t.avBuffs.unshift(t.pages[g]),delete t.pages[g],t.__statusPage("After Unload: ",g)}d.page>=t.totalPages?(t.pages[d.page]=s(),d.resolve(),t.__statusPage("After Load (new): ",d.page)):(t.reading=!0,t.pages[d.page]=s(),t.pages[d.page].loading=[d],a.push(t.fd.read(t.pages[d.page].buff,0,t.pageSize,d.page*t.pageSize).then(g=>{t.pages[d.page].size=g.bytesRead;const f=t.pages[d.page].loading;delete t.pages[d.page].loading;for(let l=0;l<f.length;l++)f[l].resolve();return t.__statusPage("After Load (loaded): ",d.page),g},g=>{d.reject(g)})),t.__statusPage("After Load (loading): ",d.page))}}Promise.all(a).then(()=>{t.reading=!1,t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t)),t._tryClose()});function s(){if(t.avBuffs.length>0){const d=t.avBuffs.shift();return d.dirty=!1,d.pendingOps=1,d.size=0,d}else return{dirty:!1,buff:new Uint8Array(t.pageSize),pendingOps:1,size:0}}}_triggerWrite(){const t=this;if(t.writing)return;const n=Object.keys(t.pages),i=[];for(let o=0;o<n.length;o++){const a=t.pages[parseInt(n[o])];a.dirty&&(a.dirty=!1,a.writing=!0,t.writing=!0,i.push(t.fd.write(a.buff,0,a.size,parseInt(n[o])*t.pageSize).then(()=>{a.writing=!1},s=>{console.log("ERROR Writing: "+s),t.error=s,t._tryClose()})))}t.writing&&Promise.all(i).then(()=>{t.writing=!1,setImmediate(t._triggerWrite.bind(t)),t._tryClose(),t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t))})}_getDirtyPage(){for(let t in this.pages)if(this.pages[t].dirty)return t;return-1}async write(t,n){if(t.byteLength==0)return;const i=this;if(typeof n=="undefined"&&(n=i.pos),i.pos=n+t.byteLength,i.totalSize<n+t.byteLength&&(i.totalSize=n+t.byteLength),i.pendingClose)throw new Error("Writing a closing file");const o=Math.floor(n/i.pageSize),a=Math.floor((n+t.byteLength-1)/i.pageSize),s=[];for(let l=o;l<=a;l++)s.push(i._loadPage(l));i._triggerLoad();let d=o,g=n%i.pageSize,f=t.byteLength;for(;f>0;){await s[d-o];const l=g+f>i.pageSize?i.pageSize-g:f,m=t.slice(t.byteLength-f,t.byteLength-f+l);new Uint8Array(i.pages[d].buff.buffer,g,l).set(m),i.pages[d].dirty=!0,i.pages[d].pendingOps--,i.pages[d].size=Math.max(g+l,i.pages[d].size),d>=i.totalPages&&(i.totalPages=d+1),f=f-l,d++,g=0,i.writing||setImmediate(i._triggerWrite.bind(i))}}async read(t,n){const i=this;let o=new Uint8Array(t);return await i.readToBuffer(o,0,t,n),o}async readToBuffer(t,n,i,o){if(i==0)return;const a=this;if(i>a.pageSize*a.maxPagesLoaded*.8){const A=Math.floor(i*1.1);this.maxPagesLoaded=Math.floor(A/a.pageSize)+1}if(typeof o=="undefined"&&(o=a.pos),a.pos=o+i,a.pendingClose)throw new Error("Reading a closing file");const s=Math.floor(o/a.pageSize),d=Math.floor((o+i-1)/a.pageSize),g=[];for(let A=s;A<=d;A++)g.push(a._loadPage(A));a._triggerLoad();let f=s,l=o%a.pageSize,m=o+i>a.totalSize?i-(o+i-a.totalSize):i;for(;m>0;){await g[f-s],a.__statusPage("After Await (read): ",f);const A=l+m>a.pageSize?a.pageSize-l:m,_=new Uint8Array(a.pages[f].buff.buffer,a.pages[f].buff.byteOffset+l,A);t.set(_,n+i-m),a.pages[f].pendingOps--,a.__statusPage("After Op done: ",f),m=m-A,f++,l=0,a.pendingLoads.length>0&&setImmediate(a._triggerLoad.bind(a))}this.pos=o+i}_tryClose(){const t=this;!t.pendingClose||(t.error&&t.pendingCloseReject(t.error),t._getDirtyPage()>=0||t.writing||t.reading||t.pendingLoads.length>0)||t.pendingClose()}close(){const t=this;if(t.pendingClose)throw new Error("Closing the file twice");return new Promise((n,i)=>{t.pendingClose=n,t.pendingCloseReject=i,t._tryClose()}).then(()=>{t.fd.close()},n=>{throw t.fd.close(),n})}async discard(){await this.close(),await po.promises.unlink(this.fileName)}async writeULE32(t,n){const i=this,o=new Uint8Array(4);new DataView(o.buffer).setUint32(0,t,!0),await i.write(o,n)}async writeUBE32(t,n){const i=this,o=new Uint8Array(4);new DataView(o.buffer).setUint32(0,t,!1),await i.write(o,n)}async writeULE64(t,n){const i=this,o=new Uint8Array(8),a=new DataView(o.buffer);a.setUint32(0,t&4294967295,!0),a.setUint32(4,Math.floor(t/4294967296),!0),await i.write(o,n)}async readULE32(t){const i=await this.read(4,t);return new Uint32Array(i.buffer)[0]}async readUBE32(t){const i=await this.read(4,t);return new DataView(i.buffer).getUint32(0,!1)}async readULE64(t){const i=await this.read(8,t),o=new Uint32Array(i.buffer);return o[1]*4294967296+o[0]}}function Ig(e){const t=e.initialSize||1<<20,n=new rl;return n.o=e,n.o.data=new Uint8Array(t),n.allocSize=t,n.totalSize=0,n.readOnly=!1,n.pos=0,n}function Eg(e){const t=new rl;return t.o=e,t.allocSize=e.data.byteLength,t.totalSize=e.data.byteLength,t.readOnly=!0,t.pos=0,t}const Wr=new Uint8Array(4),nl=new DataView(Wr.buffer),il=new Uint8Array(8),ol=new DataView(il.buffer);class rl{constructor(){this.pageSize=1<<14}_resizeIfNeeded(t){if(t>this.allocSize){const n=Math.max(this.allocSize+(1<<20),Math.floor(this.allocSize*1.1),t),i=new Uint8Array(n);i.set(this.o.data),this.o.data=i,this.allocSize=n}}async write(t,n){if(typeof n=="undefined"&&(n=this.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(n+t.byteLength),this.o.data.set(t.slice(),n),n+t.byteLength>this.totalSize&&(this.totalSize=n+t.byteLength),this.pos=n+t.byteLength}async readToBuffer(t,n,i,o){if(typeof o=="undefined"&&(o=this.pos),this.readOnly&&o+i>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(o+i);const s=new Uint8Array(this.o.data.buffer,this.o.data.byteOffset+o,i);t.set(s,n),this.pos=o+i}async read(t,n){const i=this,o=new Uint8Array(t);return await i.readToBuffer(o,0,t,n),o}close(){this.o.data.byteLength!=this.totalSize&&(this.o.data=this.o.data.slice(0,this.totalSize))}async discard(){}async writeULE32(t,n){const i=this;nl.setUint32(0,t,!0),await i.write(Wr,n)}async writeUBE32(t,n){const i=this;nl.setUint32(0,t,!1),await i.write(Wr,n)}async writeULE64(t,n){const i=this;ol.setUint32(0,t&4294967295,!0),ol.setUint32(4,Math.floor(t/4294967296),!0),await i.write(il,n)}async readULE32(t){const i=await this.read(4,t);return new Uint32Array(i.buffer)[0]}async readUBE32(t){const i=await this.read(4,t);return new DataView(i.buffer).getUint32(0,!1)}async readULE64(t){const i=await this.read(8,t),o=new Uint32Array(i.buffer);return o[1]*4294967296+o[0]}}const Be=1<<22;function wg(e){const t=e.initialSize||0,n=new ll;n.o=e;const i=t?Math.floor((t-1)/Be)+1:0;n.o.data=[];for(let o=0;o<i-1;o++)n.o.data.push(new Uint8Array(Be));return i&&n.o.data.push(new Uint8Array(t-Be*(i-1))),n.totalSize=0,n.readOnly=!1,n.pos=0,n}function Sg(e){const t=new ll;return t.o=e,t.totalSize=(e.data.length-1)*Be+e.data[e.data.length-1].byteLength,t.readOnly=!0,t.pos=0,t}const qr=new Uint8Array(4),al=new DataView(qr.buffer),sl=new Uint8Array(8),cl=new DataView(sl.buffer);class ll{constructor(){this.pageSize=1<<14}_resizeIfNeeded(t){if(t<=this.totalSize)return;if(this.readOnly)throw new Error("Reading out of file bounds");const n=Math.floor((t-1)/Be)+1;for(let i=Math.max(this.o.data.length-1,0);i<n;i++){const o=i<n-1?Be:t-(n-1)*Be,a=new Uint8Array(o);i==this.o.data.length-1&&a.set(this.o.data[i]),this.o.data[i]=a}this.totalSize=t}async write(t,n){const i=this;if(typeof n=="undefined"&&(n=i.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(n+t.byteLength);let a=Math.floor(n/Be),s=n%Be,d=t.byteLength;for(;d>0;){const g=s+d>Be?Be-s:d,f=t.slice(t.byteLength-d,t.byteLength-d+g);new Uint8Array(i.o.data[a].buffer,s,g).set(f),d=d-g,a++,s=0}this.pos=n+t.byteLength}async readToBuffer(t,n,i,o){const a=this;if(typeof o=="undefined"&&(o=a.pos),this.readOnly&&o+i>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(o+i);let d=Math.floor(o/Be),g=o%Be,f=i;for(;f>0;){const l=g+f>Be?Be-g:f,m=new Uint8Array(a.o.data[d].buffer,g,l);t.set(m,n+i-f),f=f-l,d++,g=0}this.pos=o+i}async read(t,n){const i=this,o=new Uint8Array(t);return await i.readToBuffer(o,0,t,n),o}close(){}async discard(){}async writeULE32(t,n){const i=this;al.setUint32(0,t,!0),await i.write(qr,n)}async writeUBE32(t,n){const i=this;al.setUint32(0,t,!1),await i.write(qr,n)}async writeULE64(t,n){const i=this;cl.setUint32(0,t&4294967295,!0),cl.setUint32(4,Math.floor(t/4294967296),!0),await i.write(sl,n)}async readULE32(t){const i=await this.read(4,t);return new Uint32Array(i.buffer)[0]}async readUBE32(t){const i=await this.read(4,t);return new DataView(i.buffer).getUint32(0,!1)}async readULE64(t){const i=await this.read(8,t),o=new Uint32Array(i.buffer);return o[1]*4294967296+o[0]}}const vg=1<<16,Cg=1<<13;async function bg(e,t,n){if(typeof e=="string"&&(e={type:"file",fileName:e,cacheSize:t||vg,pageSize:n||Cg}),e.type=="file")return await el(e.fileName,"w+",e.cacheSize,e.pageSize);if(e.type=="mem")return Ig(e);if(e.type=="bigMem")return wg(e);throw new Error("Invalid FastFile type: "+e.type)}async function Fg(e,t,n){if(e instanceof Uint8Array&&(e={type:"mem",data:e}),typeof e=="string"){const i=await fetch(e).then(function(o){return o.arrayBuffer()}).then(function(o){return new Uint8Array(o)});e={type:"mem",data:i}}if(e.type=="file")return await el(e.fileName,"r",e.cacheSize,e.pageSize);if(e.type=="mem")return await Eg(e);if(e.type=="bigMem")return await Sg(e);throw new Error("Invalid FastFile type: "+e.type)}async function $e(e,t,n,i,o){const a=await Fg(e),s=await a.read(4);let d="";for(let m=0;m<4;m++)d+=String.fromCharCode(s[m]);if(d!=t)throw new Error(e+": Invalid File format");if(await a.readULE32()>n)throw new Error("Version not supported");const f=await a.readULE32();let l=[];for(let m=0;m<f;m++){let A=await a.readULE32(),_=await a.readULE64();typeof l[A]=="undefined"&&(l[A]=[]),l[A].push({p:a.pos,size:_}),a.pos+=_}return{fd:a,sections:l}}async function Qr(e,t,n,i,o,a){const s=await bg(e,o,a),d=new Uint8Array(4);for(let g=0;g<4;g++)d[g]=t.charCodeAt(g);return await s.write(d,0),await s.writeULE32(n),await s.writeULE32(i),s}async function ue(e,t){if(typeof e.writingSection!="undefined")throw new Error("Already writing a section");await e.writeULE32(t),e.writingSection={pSectionSize:e.pos},await e.writeULE64(0)}async function fe(e){if(typeof e.writingSection=="undefined")throw new Error("Not writing a section");const t=e.pos-e.writingSection.pSectionSize-8,n=e.pos;e.pos=e.writingSection.pSectionSize,await e.writeULE64(t),e.pos=n,delete e.writingSection}async function pn(e,t,n){if(typeof e.readingSection!="undefined")throw new Error("Already reading a section");if(!t[n])throw new Error(e.fileName+": Missing section "+n);if(t[n].length>1)throw new Error(e.fileName+": Section Duplicated "+n);e.pos=t[n][0].p,e.readingSection=t[n][0]}async function mn(e,t){if(typeof e.readingSection=="undefined")throw new Error("Not reading a section");if(!t&&e.pos-e.readingSection.p!=e.readingSection.size)throw new Error("Invalid section size reading");delete e.readingSection}async function hi(e,t,n,i){const o=new Uint8Array(n);tl.toRprLE(o,0,t,n),await e.write(o,i)}async function _i(e,t,n){const i=await e.read(t,n);return tl.fromRprLE(i,0,t)}async function Hi(e,t,n,i,o){typeof o=="undefined"&&(o=t[i][0].size);const a=e.pageSize;await pn(e,t,i),await ue(n,i);for(let s=0;s<o;s+=a){const d=Math.min(o-s,a),g=await e.read(d);await n.write(g)}await fe(n),await mn(e,o!=t[i][0].size)}async function yn(e,t,n,i,o){if(i=typeof i=="undefined"?0:i,o=typeof o=="undefined"?t[n][0].size-i:o,i+o>t[n][0].size)throw new Error("Reading out of the range of the section");let a;return o<1<<30?a=new Uint8Array(o):a=new go(o),await e.readToBuffer(a,0,o,t[n][0].p+i),a}const Bg=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function ul(e,t){if(!t||t==10)return BigInt(e);if(t==16)return e.slice(0,2)=="0x"?BigInt(e):BigInt("0x"+e)}const Tg=ul;function Rg(e,t){let n=BigInt(0);t=BigInt(t);for(let i=0;i<e.length;i++)n=n*t+BigInt(e[i]);return n}function Og(e){const t=e.toString(16);return(t.length-1)*4+Bg[parseInt(t[0],16)]}function Pg(e){return BigInt(e)<BigInt(0)}function xg(e){return!e}function fl(e,t){return BigInt(e)<<BigInt(t)}function dl(e,t){return BigInt(e)>>BigInt(t)}const Ng=fl,Mg=dl;function Ug(e){return(BigInt(e)&BigInt(1))==BigInt(1)}function Dg(e){let t=BigInt(e);const n=[];for(;t;){if(t&BigInt(1)){const i=2-Number(t%BigInt(4));n.push(i),t=t-BigInt(i)}else n.push(0);t=t>>BigInt(1)}return n}function Gg(e){let t=BigInt(e);const n=[];for(;t;)t&BigInt(1)?n.push(1):n.push(0),t=t>>BigInt(1);return n}function kg(e){if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("Number too big");return Number(e)}function Wg(e,t){const n=[];let i=BigInt(e);for(t=BigInt(t);i;)n.unshift(Number(i%t)),i=i/t;return n}function qg(e,t){return BigInt(e)+BigInt(t)}function Qg(e,t){return BigInt(e)-BigInt(t)}function Hg(e){return-BigInt(e)}function zg(e,t){return BigInt(e)*BigInt(t)}function $g(e){return BigInt(e)*BigInt(e)}function Yg(e,t){return BigInt(e)**BigInt(t)}function jg(e,t){return BigInt(e)**BigInt(t)}function Kg(e){return BigInt(e)>=0?BigInt(e):-BigInt(e)}function Vg(e,t){return BigInt(e)/BigInt(t)}function Zg(e,t){return BigInt(e)%BigInt(t)}function Jg(e,t){return BigInt(e)==BigInt(t)}function Xg(e,t){return BigInt(e)!=BigInt(t)}function tp(e,t){return BigInt(e)<BigInt(t)}function ep(e,t){return BigInt(e)>BigInt(t)}function np(e,t){return BigInt(e)<=BigInt(t)}function ip(e,t){return BigInt(e)>=BigInt(t)}function op(e,t){return BigInt(e)&BigInt(t)}function rp(e,t){return BigInt(e)|BigInt(t)}function ap(e,t){return BigInt(e)^BigInt(t)}function sp(e,t){return BigInt(e)&&BigInt(t)}function cp(e,t){return BigInt(e)||BigInt(t)}function lp(e){return!BigInt(e)}var up=Object.freeze({__proto__:null,fromString:ul,e:Tg,fromArray:Rg,bitLength:Og,isNegative:Pg,isZero:xg,shiftLeft:fl,shiftRight:dl,shl:Ng,shr:Mg,isOdd:Ug,naf:Dg,bits:Gg,toNumber:kg,toArray:Wg,add:qg,sub:Qg,neg:Hg,mul:zg,square:$g,pow:Yg,exp:jg,abs:Kg,div:Vg,mod:Zg,eq:Jg,neq:Xg,lt:tp,gt:ep,leq:np,geq:ip,band:op,bor:rp,bxor:ap,land:sp,lor:cp,lnot:lp});function hl(e,t){return typeof e=="string"&&e.slice(0,2)=="0x"?st(e.slice(2),16):st(e,t)}const fp=hl;function dp(e,t){return st.fromArray(e,t)}function hp(e){return st(e).bitLength()}function _p(e){return st(e).isNegative()}function gp(e){return st(e).isZero()}function _l(e,t){return st(e).shiftLeft(t)}function gl(e,t){return st(e).shiftRight(t)}const pp=_l,mp=gl;function yp(e){return st(e).isOdd()}function Ap(e){let t=st(e);const n=[];for(;t.gt(st.zero);){if(t.isOdd()){const i=2-t.mod(4).toJSNumber();n.push(i),t=t.minus(i)}else n.push(0);t=t.shiftRight(1)}return n}function Lp(e){let t=st(e);const n=[];for(;t.gt(st.zero);)t.isOdd()?n.push(1):n.push(0),t=t.shiftRight(1);return n}function Ip(e){if(!e.lt(st("9007199254740992",10)))throw new Error("Number too big");return e.toJSNumber()}function Ep(e,t){return st(e).toArray(t)}function wp(e,t){return st(e).add(st(t))}function Sp(e,t){return st(e).minus(st(t))}function vp(e){return st.zero.minus(st(e))}function Cp(e,t){return st(e).times(st(t))}function bp(e){return st(e).square()}function Fp(e,t){return st(e).pow(st(t))}function Bp(e,t){return st(e).pow(st(t))}function Tp(e){return st(e).abs()}function Rp(e,t){return st(e).divide(st(t))}function Op(e,t){return st(e).mod(st(t))}function Pp(e,t){return st(e).eq(st(t))}function xp(e,t){return st(e).neq(st(t))}function Np(e,t){return st(e).lt(st(t))}function Mp(e,t){return st(e).gt(st(t))}function Up(e,t){return st(e).leq(st(t))}function Dp(e,t){return st(e).geq(st(t))}function Gp(e,t){return st(e).and(st(t))}function kp(e,t){return st(e).or(st(t))}function Wp(e,t){return st(e).xor(st(t))}function qp(e,t){return!st(e).isZero()&&!st(t).isZero()}function Qp(e,t){return!st(e).isZero()||!st(t).isZero()}function Hp(e){return st(e).isZero()}var zp=Object.freeze({__proto__:null,fromString:hl,e:fp,fromArray:dp,bitLength:hp,isNegative:_p,isZero:gp,shiftLeft:_l,shiftRight:gl,shl:pp,shr:mp,isOdd:yp,naf:Ap,bits:Lp,toNumber:Ip,toArray:Ep,add:wp,sub:Sp,neg:vp,mul:Cp,square:bp,pow:Fp,exp:Bp,abs:Tp,div:Rp,mod:Op,eq:Pp,neq:xp,lt:Np,gt:Mp,leq:Up,geq:Dp,band:Gp,bor:kp,bxor:Wp,land:qp,lor:Qp,lnot:Hp});const $p=typeof BigInt=="function";let le={};$p?Object.assign(le,up):Object.assign(le,zp),le.toRprLE=function(t,n,i,o){const a="0000000"+i.toString(16),s=new Uint32Array(t.buffer,n,o/4),d=((a.length-7)*4-1>>5)+1;for(let g=0;g<d;g++)s[g]=parseInt(a.substring(a.length-8*g-8,a.length-8*g),16);for(let g=d;g<s.length;g++)s[g]=0;for(let g=s.length*4;g<o;g++)t[g]=le.toNumber(le.band(le.shiftRight(i,g*8),255))},le.toRprBE=function(t,n,i,o){const a="0000000"+i.toString(16),s=new DataView(t.buffer,t.byteOffset+n,o),d=((a.length-7)*4-1>>5)+1;for(let g=0;g<d;g++)s.setUint32(o-g*4-4,parseInt(a.substring(a.length-8*g-8,a.length-8*g),16),!1);for(let g=0;g<o/4-d;g++)s[g]=0},le.fromRprLE=function(t,n,i){i=i||t.byteLength,n=n||0;const o=new Uint32Array(t.buffer,n,i/4),a=new Array(i/4);return o.forEach((s,d)=>a[a.length-d-1]=s.toString(16).padStart(8,"0")),le.fromString(a.join(""),16)},le.fromRprBE=function(t,n,i){i=i||t.byteLength,n=n||0;const o=new DataView(t.buffer,t.byteOffset+n,i),a=new Array(i/4);for(let s=0;s<i/4;s++)a[s]=o.getUint32(s*4,!1).toString(16).padStart(8,"0");return le.fromString(a.join(""),16)},le.toString=function(t,n){return t.toString(n)},le.toLEBuff=function(t){const n=new Uint8Array(Math.floor((le.bitLength(t)-1)/8)+1);return le.toRprLE(n,0,t,n.byteLength),n},le.zero=le.e(0),le.one=le.e(1);let{toRprLE:Hr,toRprBE:Yp,fromRprLE:yo,fromRprBE:jp,toString:zr,toLEBuff:gi,zero:pl,one:Qn,fromString:Kp,e:de,fromArray:Vp,bitLength:$r,isNegative:ml,isZero:Zp,shiftLeft:Yr,shiftRight:Ao,shl:Jp,shr:Xp,isOdd:yl,naf:t0,bits:e0,toNumber:n0,toArray:i0,add:jr,sub:Lo,neg:Al,mul:Ll,square:o0,pow:r0,exp:a0,abs:s0,div:c0,mod:Kr,eq:Vr,neq:l0,lt:u0,gt:Zr,leq:f0,geq:Il,band:El,bor:d0,bxor:h0,land:_0,lor:g0,lnot:p0}=le;var m0=Object.freeze({__proto__:null,toRprLE:Hr,toRprBE:Yp,fromRprLE:yo,fromRprBE:jp,toString:zr,toLEBuff:gi,zero:pl,one:Qn,fromString:Kp,e:de,fromArray:Vp,bitLength:$r,isNegative:ml,isZero:Zp,shiftLeft:Yr,shiftRight:Ao,shl:Jp,shr:Xp,isOdd:yl,naf:t0,bits:e0,toNumber:n0,toArray:i0,add:jr,sub:Lo,neg:Al,mul:Ll,square:o0,pow:r0,exp:a0,abs:s0,div:c0,mod:Kr,eq:Vr,neq:l0,lt:u0,gt:Zr,leq:f0,geq:Il,band:El,bor:d0,bxor:h0,land:_0,lor:g0,lnot:p0});const y0=[];for(let e=0;e<256;e++)y0[e]=A0(e,8);function A0(e,t){let n=0,i=e;for(let o=0;o<t;o++)n<<=1,n=n|i&1,i>>=1;return n}function bn(e,t,n,i,o){e[t]=e[t]+e[n]>>>0,e[o]=(e[o]^e[t])>>>0,e[o]=(e[o]<<16|e[o]>>>16&65535)>>>0,e[i]=e[i]+e[o]>>>0,e[n]=(e[n]^e[i])>>>0,e[n]=(e[n]<<12|e[n]>>>20&4095)>>>0,e[t]=e[t]+e[n]>>>0,e[o]=(e[o]^e[t])>>>0,e[o]=(e[o]<<8|e[o]>>>24&255)>>>0,e[i]=e[i]+e[o]>>>0,e[n]=(e[n]^e[i])>>>0,e[n]=(e[n]<<7|e[n]>>>25&127)>>>0}function L0(e){bn(e,0,4,8,12),bn(e,1,5,9,13),bn(e,2,6,10,14),bn(e,3,7,11,15),bn(e,0,5,10,15),bn(e,1,6,11,12),bn(e,2,7,8,13),bn(e,3,4,9,14)}class Jr{constructor(t){t=t||[0,0,0,0,0,0,0,0],this.state=[1634760805,857760878,2036477234,1797285236,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],0,0,0,0],this.idx=16,this.buff=new Array(16)}nextU32(){return this.idx==16&&this.update(),this.buff[this.idx++]}nextU64(){return jr(Ll(this.nextU32(),4294967296),this.nextU32())}nextBool(){return(this.nextU32()&1)==1}update(){for(let t=0;t<16;t++)this.buff[t]=this.state[t];for(let t=0;t<10;t++)L0(this.buff);for(let t=0;t<16;t++)this.buff[t]=this.buff[t]+this.state[t]>>>0;this.idx=0,this.state[12]=this.state[12]+1>>>0,this.state[12]==0&&(this.state[13]=this.state[13]+1>>>0,this.state[13]==0&&(this.state[14]=this.state[14]+1>>>0,this.state[14]==0&&(this.state[15]=this.state[15]+1>>>0)))}}function I0(e){let t=new Uint8Array(e);if(typeof globalThis.crypto!="undefined")globalThis.crypto.getRandomValues(t);else for(let n=0;n<e;n++)t[n]=Math.random()*4294967296>>>0;return t}function E0(){const e=I0(32),t=new Uint32Array(e.buffer),n=[];for(let i=0;i<8;i++)n.push(t[i]);return n}let Io=null;function Xr(){return Io||(Io=new Jr(E0()),Io)}function ta(e){if(typeof e=="bigint"||e.eq!==void 0)return e.toString(10);if(e instanceof Uint8Array)return yo(e,0);if(Array.isArray(e))return e.map(ta);if(typeof e=="object"){const t={};return Object.keys(e).forEach(i=>{t[i]=ta(e[i])}),t}else return e}function ea(e){if(typeof e=="string"&&/^[0-9]+$/.test(e))return BigInt(e);if(typeof e=="string"&&/^0x[0-9a-fA-F]+$/.test(e))return BigInt(e);if(Array.isArray(e))return e.map(ea);if(typeof e=="object"){if(e===null)return null;const t={};return Object.keys(e).forEach(i=>{t[i]=ea(e[i])}),t}else return e}function w0(e){let t=BigInt(0),n=e.length,i=0;const o=new DataView(e.buffer,e.byteOffset,e.byteLength);for(;n>0;)n>=4?(n-=4,t+=BigInt(o.getUint32(n))<<BigInt(i*8),i+=4):n>=2?(n-=2,t+=BigInt(o.getUint16(n))<<BigInt(i*8),i+=2):(n-=1,t+=BigInt(o.getUint8(n))<<BigInt(i*8),i+=1);return t}function S0(e,t){let n=e;const i=new Uint8Array(t),o=new DataView(i.buffer);let a=t;for(;a>0;)a-4>=0?(a-=4,o.setUint32(a,Number(n&BigInt(4294967295))),n=n>>BigInt(32)):a-2>=0?(a-=2,o.setUint16(a,Number(n&BigInt(65535))),n=n>>BigInt(16)):(a-=1,o.setUint8(a,Number(n&BigInt(255))),n=n>>BigInt(8));if(n)throw new Error("Number does not fit in this length");return i}function v0(e){let t=BigInt(0),n=0;const i=new DataView(e.buffer,e.byteOffset,e.byteLength);for(;n<e.length;)n+4<=e.length?(t+=BigInt(i.getUint32(n,!0))<<BigInt(n*8),n+=4):n+4<=e.length?(t+=BigInt(i.getUint16(n,!0))<<BigInt(n*8),n+=2):(t+=BigInt(i.getUint8(n,!0))<<BigInt(n*8),n+=1);return t}function C0(e,t){let n=e;typeof t=="undefined"&&(t=Math.floor(($r(e)-1)/8)+1,t==0&&(t=1));const i=new Uint8Array(t),o=new DataView(i.buffer);let a=0;for(;a<t;)a+4<=t?(o.setUint32(a,Number(n&BigInt(4294967295)),!0),a+=4,n=n>>BigInt(32)):a+2<=t?(o.setUint16(Number(a,n&BigInt(65535)),!0),a+=2,n=n>>BigInt(16)):(o.setUint8(Number(a,n&BigInt(255)),!0),a+=1,n=n>>BigInt(8));if(n)throw new Error("Number does not fit in this length");return i}function na(e,t){if(typeof t=="bigint"||t.eq!==void 0)return t.toString(10);if(t instanceof Uint8Array)return e.toString(e.e(t));if(Array.isArray(t))return t.map(na.bind(this,e));if(typeof t=="object"){const n={};return Object.keys(t).forEach(o=>{n[o]=na(e,t[o])}),n}else return t}function ia(e,t){if(typeof t=="string"&&/^[0-9]+$/.test(t))return e.e(t);if(typeof t=="string"&&/^0x[0-9a-fA-F]+$/.test(t))return e.e(t);if(Array.isArray(t))return t.map(ia.bind(this,e));if(typeof t=="object"){if(t===null)return null;const n={};return Object.keys(t).forEach(o=>{n[o]=ia(e,t[o])}),n}else return t}var b0=Object.freeze({__proto__:null,stringifyBigInts:ta,unstringifyBigInts:ea,beBuff2int:w0,beInt2Buff:S0,leBuff2int:v0,leInt2Buff:C0,stringifyFElements:na,unstringifyFElements:ia});function oa(e){if(typeof e=="bigint"||e.eq!==void 0)return e.toString(10);if(Array.isArray(e))return e.map(oa);if(typeof e=="object"){const t={};return Object.keys(e).forEach(i=>{t[i]=oa(e[i])}),t}else return e}function ra(e){if(typeof e=="string"&&/^[0-9]+$/.test(e))return st(e);if(typeof e=="string"&&/^0x[0-9a-fA-F]+$/.test(e))return st(e);if(Array.isArray(e))return e.map(ra);if(typeof e=="object"){const t={};return Object.keys(e).forEach(i=>{t[i]=ra(e[i])}),t}else return e}function F0(e){let t=st.zero;for(let n=0;n<e.length;n++){const i=st(e[e.length-n-1]);t=t.add(i.shiftLeft(n*8))}return t}function B0(e,t){let n=e,i=t-1;const o=new Uint8Array(t);for(;n.gt(st.zero)&&i>=0;){let a=Number(n.and(st("255")));o[i]=a,i--,n=n.shiftRight(8)}if(!n.eq(st.zero))throw new Error("Number does not fit in this length");return o}function T0(e){let t=st.zero;for(let n=0;n<e.length;n++){const i=st(e[n]);t=t.add(i.shiftLeft(n*8))}return t}function R0(e,t){let n=e,i=0;const o=new Uint8Array(t);for(;n.gt(st.zero)&&i<o.length;){let a=Number(n.and(st(255)));o[i]=a,i++,n=n.shiftRight(8)}if(!n.eq(st.zero))throw new Error("Number does not fit in this length");return o}var O0=Object.freeze({__proto__:null,stringifyBigInts:oa,unstringifyBigInts:ra,beBuff2int:F0,beInt2Buff:B0,leBuff2int:T0,leInt2Buff:R0});let nn={};typeof BigInt=="function"?Object.assign(nn,b0):Object.assign(nn,O0);const zi=[];for(let e=0;e<256;e++)zi[e]=P0(e,8);function P0(e,t){let n=0,i=e;for(let o=0;o<t;o++)n<<=1,n=n|i&1,i>>=1;return n}nn.bitReverse=function(t,n){return(zi[t>>>24]|zi[t>>>16&255]<<8|zi[t>>>8&255]<<16|zi[t&255]<<24)>>>32-n},nn.log2=function(t){return((t&4294901760)!=0?(t&=4294901760,16):0)|((t&4278255360)!=0?(t&=4278255360,8):0)|((t&4042322160)!=0?(t&=4042322160,4):0)|((t&3435973836)!=0?(t&=3435973836,2):0)|(t&2863311530)!=0},nn.buffReverseBits=function(t,n){const i=t.byteLength/n,o=nn.log2(i);if(i!=1<<o)throw new Error("Invalid number of pointers");for(let a=0;a<i;a++){const s=nn.bitReverse(a,o);if(a>s){const d=t.slice(a*n,(a+1)*n);t.set(t.slice(s*n,(s+1)*n),a*n),t.set(d,s*n)}}},nn.array2buffer=function(e,t){const n=new Uint8Array(t*e.length);for(let i=0;i<e.length;i++)n.set(e[i],i*t);return n},nn.buffer2array=function(e,t){const n=e.byteLength/t,i=new Array(n);for(let o=0;o<n;o++)i[o]=e.slice(o*t,o*t+t);return i};let{bitReverse:x0,log2:De,buffReverseBits:wl,stringifyBigInts:N0,unstringifyBigInts:M0,beBuff2int:U0,beInt2Buff:D0,leBuff2int:G0,leInt2Buff:Sl,array2buffer:aa,buffer2array:Eo,stringifyFElements:k0,unstringifyFElements:W0}=nn;var q0=Object.freeze({__proto__:null,bitReverse:x0,log2:De,buffReverseBits:wl,stringifyBigInts:N0,unstringifyBigInts:M0,beBuff2int:U0,beInt2Buff:D0,leBuff2int:G0,leInt2Buff:Sl,array2buffer:aa,buffer2array:Eo,stringifyFElements:k0,unstringifyFElements:W0});const ye=1<<30;class Kt{constructor(t){this.buffers=[],this.byteLength=t;for(let n=0;n<t;n+=ye){const i=Math.min(t-n,ye);this.buffers.push(new Uint8Array(i))}}slice(t,n){n===void 0&&(n=this.byteLength),t===void 0&&(t=0);const i=n-t,o=Math.floor(t/ye),a=Math.floor((t+i-1)/ye);if(o==a||i==0)return this.buffers[o].slice(t%ye,t%ye+i);let s,d=o,g=t%ye,f=i;for(;f>0;){const l=g+f>ye?ye-g:f,m=new Uint8Array(this.buffers[d].buffer,this.buffers[d].byteOffset+g,l);if(l==i)return m.slice();s||(i<=ye?s=new Uint8Array(i):s=new Kt(i)),s.set(m,i-f),f=f-l,d++,g=0}return s}set(t,n){n===void 0&&(n=0);const i=t.byteLength;if(i==0)return;const o=Math.floor(n/ye),a=Math.floor((n+i-1)/ye);if(o==a)return t instanceof Kt&&t.buffers.length==1?this.buffers[o].set(t.buffers[0],n%ye):this.buffers[o].set(t,n%ye);let s=o,d=n%ye,g=i;for(;g>0;){const f=d+g>ye?ye-d:g,l=t.slice(i-g,i-g+f);new Uint8Array(this.buffers[s].buffer,this.buffers[s].byteOffset+d,f).set(l),g=g-f,s++,d=0}}}function Fn(e,t,n,i){return async function(a){const s=Math.floor(a.byteLength/n);if(s*n!==a.byteLength)throw new Error("Invalid buffer size");const d=Math.floor(s/e.concurrency),g=[];for(let A=0;A<e.concurrency;A++){let _;if(A<e.concurrency-1?_=d:_=s-A*d,_==0)continue;const R=a.slice(A*d*n,A*d*n+_*n),x=[{cmd:"ALLOCSET",var:0,buff:R},{cmd:"ALLOC",var:1,len:i*_},{cmd:"CALL",fnName:t,params:[{var:0},{val:_},{var:1}]},{cmd:"GET",out:0,var:1,len:i*_}];g.push(e.queueAction(x))}const f=await Promise.all(g);let l;a instanceof Kt?l=new Kt(s*i):l=new Uint8Array(s*i);let m=0;for(let A=0;A<f.length;A++)l.set(f[A][0],m),m+=f[A][0].byteLength;return l}}class vl{constructor(t,n,i,o){if(this.tm=t,this.prefix=n,this.p=o,this.n8=i,this.type="F1",this.m=1,this.half=Ao(o,Qn),this.bitLength=$r(o),this.mask=Lo(Yr(Qn,this.bitLength),Qn),this.pOp1=t.alloc(i),this.pOp2=t.alloc(i),this.pOp3=t.alloc(i),this.tm.instance.exports[n+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,this.n8),this.tm.instance.exports[n+"_one"](this.pOp1),this.one=this.tm.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.n64=Math.floor(i/8),this.n32=Math.floor(i/4),this.n64*8!=this.n8)throw new Error("n8 must be a multiple of 8");this.half=Ao(this.p,Qn),this.nqr=this.two;let a=this.exp(this.nqr,this.half);for(;!this.eq(a,this.negone);)this.nqr=this.add(this.nqr,this.one),a=this.exp(this.nqr,this.half);this.shift=this.mul(this.nqr,this.nqr),this.shiftInv=this.inv(this.shift),this.s=0;let s=Lo(this.p,Qn);for(;!yl(s);)this.s=this.s+1,s=Ao(s,Qn);this.w=[],this.w[this.s]=this.exp(this.nqr,s);for(let d=this.s-1;d>=0;d--)this.w[d]=this.square(this.w[d+1]);if(!this.eq(this.w[0],this.one))throw new Error("Error calculating roots of unity");this.batchToMontgomery=Fn(t,n+"_batchToMontgomery",this.n8,this.n8),this.batchFromMontgomery=Fn(t,n+"_batchFromMontgomery",this.n8,this.n8)}op2(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,n){return this.tm.setBuff(this.pOp1,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,n){return this.op2("_add",t,n)}eq(t,n){return this.op2Bool("_eq",t,n)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,n){return this.op2("_sub",t,n)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,n){return this.op2("_mul",t,n)}div(t,n){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,n){return n instanceof Uint8Array||(n=gi(de(n))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,n.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}isNegative(t){return this.op1Bool("_isNegative",t)}e(t,n){if(t instanceof Uint8Array)return t;let i=de(t,n);ml(i)?(i=Al(i),Zr(i,this.p)&&(i=Kr(i,this.p)),i=Lo(this.p,i)):Zr(i,this.p)&&(i=Kr(i,this.p));const o=Sl(i,this.n8);return this.toMontgomery(o)}toString(t,n){const i=this.fromMontgomery(t),o=yo(i,0);return zr(o,n)}fromRng(t){let n;const i=new Uint8Array(this.n8);do{n=pl;for(let o=0;o<this.n64;o++)n=jr(n,Yr(t.nextU64(),64*o));n=El(n,this.mask)}while(Il(n,this.p));return Hr(i,0,n,this.n8),i}random(){return this.fromRng(Xr())}toObject(t){const n=this.fromMontgomery(t);return yo(n,0)}fromObject(t){const n=new Uint8Array(this.n8);return Hr(n,0,t,this.n8),this.toMontgomery(n)}toRprLE(t,n,i){t.set(this.fromMontgomery(i),n)}toRprBE(t,n,i){const o=this.fromMontgomery(i);for(let a=0;a<this.n8/2;a++){const s=o[a];o[a]=o[this.n8-1-a],o[this.n8-1-a]=s}t.set(o,n)}fromRprLE(t,n){n=n||0;const i=t.slice(n,n+this.n8);return this.toMontgomery(i)}async batchInverse(t){let n=!1;const i=this.n8,o=this.n8;Array.isArray(t)?(t=aa(t,i),n=!0):t=t.slice(0,t.byteLength);const a=Math.floor(t.byteLength/i);if(a*i!==t.byteLength)throw new Error("Invalid buffer size");const s=Math.floor(a/this.tm.concurrency),d=[];for(let m=0;m<this.tm.concurrency;m++){let A;if(m<this.tm.concurrency-1?A=s:A=a-m*s,A==0)continue;const _=t.slice(m*s*i,m*s*i+A*i),R=[{cmd:"ALLOCSET",var:0,buff:_},{cmd:"ALLOC",var:1,len:o*A},{cmd:"CALL",fnName:this.prefix+"_batchInverse",params:[{var:0},{val:i},{val:A},{var:1},{val:o}]},{cmd:"GET",out:0,var:1,len:o*A}];d.push(this.tm.queueAction(R))}const g=await Promise.all(d);let f;t instanceof Kt?f=new Kt(a*o):f=new Uint8Array(a*o);let l=0;for(let m=0;m<g.length;m++)f.set(g[m][0],l),l+=g[m][0].byteLength;return n?Eo(f,o):f}}class Cl{constructor(t,n,i){this.tm=t,this.prefix=n,this.F=i,this.type="F2",this.m=i.m*2,this.n8=this.F.n8*2,this.n32=this.F.n32*2,this.n64=this.F.n64*2,this.pOp1=t.alloc(i.n8*2),this.pOp2=t.alloc(i.n8*2),this.pOp3=t.alloc(i.n8*2),this.tm.instance.exports[n+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[n+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,n){return this.tm.setBuff(this.pOp1,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,n){return this.op2("_add",t,n)}eq(t,n){return this.op2Bool("_eq",t,n)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,n){return this.op2("_sub",t,n)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,n){return this.op2("_mul",t,n)}mul1(t,n){return this.op2("_mul1",t,n)}div(t,n){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,n){return n instanceof Uint8Array||(n=gi(de(n))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,n.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}e(t,n){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&t.length==2){const i=this.F.e(t[0],n),o=this.F.e(t[1],n),a=new Uint8Array(this.F.n8*2);return a.set(i),a.set(o,this.F.n8*2),a}else throw new Error("invalid F2")}toString(t,n){const i=this.F.toString(t.slice(0,this.F.n8),n),o=this.F.toString(t.slice(this.F.n8),n);return`[${i}, ${o}]`}fromRng(t){const n=this.F.fromRng(t),i=this.F.fromRng(t),o=new Uint8Array(this.F.n8*2);return o.set(n),o.set(i,this.F.n8),o}random(){return this.fromRng(Xr())}toObject(t){const n=this.F.toObject(t.slice(0,this.F.n8)),i=this.F.toObject(t.slice(this.F.n8,this.F.n8*2));return[n,i]}fromObject(t){const n=new Uint8Array(this.F.n8*2),i=this.F.fromObject(t[0]),o=this.F.fromObject(t[1]);return n.set(i),n.set(o,this.F.n8),n}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8)}}class Q0{constructor(t,n,i){this.tm=t,this.prefix=n,this.F=i,this.type="F3",this.m=i.m*3,this.n8=this.F.n8*3,this.n32=this.F.n32*3,this.n64=this.F.n64*3,this.pOp1=t.alloc(i.n8*3),this.pOp2=t.alloc(i.n8*3),this.pOp3=t.alloc(i.n8*3),this.tm.instance.exports[n+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[n+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,n){return this.tm.setBuff(this.pOp1,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}eq(t,n){return this.op2Bool("_eq",t,n)}isZero(t){return this.op1Bool("_isZero",t)}add(t,n){return this.op2("_add",t,n)}sub(t,n){return this.op2("_sub",t,n)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,n){return this.op2("_mul",t,n)}div(t,n){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,n){return n instanceof Uint8Array||(n=gi(de(n))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,n.byteLength,this.pOp3),this.getBuff(this.pOp3,this.n8)}e(t,n){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&t.length==3){const i=this.F.e(t[0],n),o=this.F.e(t[1],n),a=this.F.e(t[2],n),s=new Uint8Array(this.F.n8*3);return s.set(i),s.set(o,this.F.n8),s.set(a,this.F.n8*2),s}else throw new Error("invalid F3")}toString(t,n){const i=this.F.toString(t.slice(0,this.F.n8),n),o=this.F.toString(t.slice(this.F.n8,this.F.n8*2),n),a=this.F.toString(t.slice(this.F.n8*2),n);return`[${i}, ${o}, ${a}]`}fromRng(t){const n=this.F.fromRng(t),i=this.F.fromRng(t),o=this.F.fromRng(t),a=new Uint8Array(this.F.n8*3);return a.set(n),a.set(i,this.F.n8),a.set(o,this.F.n8*2),a}random(){return this.fromRng(Xr())}toObject(t){const n=this.F.toObject(t.slice(0,this.F.n8)),i=this.F.toObject(t.slice(this.F.n8,this.F.n8*2)),o=this.F.toObject(t.slice(this.F.n8*2,this.F.n8*3));return[n,i,o]}fromObject(t){const n=new Uint8Array(this.F.n8*3),i=this.F.fromObject(t[0]),o=this.F.fromObject(t[1]),a=this.F.fromObject(t[2]);return n.set(i),n.set(o,this.F.n8),n.set(a,this.F.n8*2),n}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8,this.F.n8*2)}c3(t){return t.slice(this.F.n8*2)}}class bl{constructor(t,n,i,o,a,s){this.tm=t,this.prefix=n,this.F=i,this.pOp1=t.alloc(i.n8*3),this.pOp2=t.alloc(i.n8*3),this.pOp3=t.alloc(i.n8*3),this.tm.instance.exports[n+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,i.n8*3),this.tm.instance.exports[n+"_zeroAffine"](this.pOp1),this.zeroAffine=this.tm.getBuff(this.pOp1,i.n8*2),this.one=this.tm.getBuff(o,i.n8*3),this.g=this.one,this.oneAffine=this.tm.getBuff(o,i.n8*2),this.gAffine=this.oneAffine,this.b=this.tm.getBuff(a,i.n8),s&&(this.cofactor=gi(s)),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.batchLEMtoC=Fn(t,n+"_batchLEMtoC",i.n8*2,i.n8),this.batchLEMtoU=Fn(t,n+"_batchLEMtoU",i.n8*2,i.n8*2),this.batchCtoLEM=Fn(t,n+"_batchCtoLEM",i.n8,i.n8*2),this.batchUtoLEM=Fn(t,n+"_batchUtoLEM",i.n8*2,i.n8*2),this.batchToJacobian=Fn(t,n+"_batchToJacobian",i.n8*2,i.n8*3),this.batchToAffine=Fn(t,n+"_batchToAffine",i.n8*3,i.n8*2)}op2(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}op2bool(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3)}op1(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}op1Affine(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*2)}op1Bool(t,n){return this.tm.setBuff(this.pOp1,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,n){if(t.byteLength==this.F.n8*3){if(n.byteLength==this.F.n8*3)return this.op2("_add",t,n);if(n.byteLength==this.F.n8*2)return this.op2("_addMixed",t,n);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(n.byteLength==this.F.n8*3)return this.op2("_addMixed",n,t);if(n.byteLength==this.F.n8*2)return this.op2("_addAffine",t,n);throw new Error("invalid point size")}else throw new Error("invalid point size")}sub(t,n){if(t.byteLength==this.F.n8*3){if(n.byteLength==this.F.n8*3)return this.op2("_sub",t,n);if(n.byteLength==this.F.n8*2)return this.op2("_subMixed",t,n);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(n.byteLength==this.F.n8*3)return this.op2("_subMixed",n,t);if(n.byteLength==this.F.n8*2)return this.op2("_subAffine",t,n);throw new Error("invalid point size")}else throw new Error("invalid point size")}neg(t){if(t.byteLength==this.F.n8*3)return this.op1("_neg",t);if(t.byteLength==this.F.n8*2)return this.op1Affine("_negAffine",t);throw new Error("invalid point size")}double(t){if(t.byteLength==this.F.n8*3)return this.op1("_double",t);if(t.byteLength==this.F.n8*2)return this.op1("_doubleAffine",t);throw new Error("invalid point size")}isZero(t){if(t.byteLength==this.F.n8*3)return this.op1Bool("_isZero",t);if(t.byteLength==this.F.n8*2)return this.op1Bool("_isZeroAffine",t);throw new Error("invalid point size")}timesScalar(t,n){n instanceof Uint8Array||(n=gi(de(n)));let i;if(t.byteLength==this.F.n8*3)i=this.prefix+"_timesScalar";else if(t.byteLength==this.F.n8*2)i=this.prefix+"_timesScalarAffine";else throw new Error("invalid point size");return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[i](this.pOp1,this.pOp2,n.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}timesFr(t,n){let i;if(t.byteLength==this.F.n8*3)i=this.prefix+"_timesFr";else if(t.byteLength==this.F.n8*2)i=this.prefix+"_timesFrAffine";else throw new Error("invalid point size");return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[i](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}eq(t,n){if(t.byteLength==this.F.n8*3){if(n.byteLength==this.F.n8*3)return this.op2bool("_eq",t,n);if(n.byteLength==this.F.n8*2)return this.op2bool("_eqMixed",t,n);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(n.byteLength==this.F.n8*3)return this.op2bool("_eqMixed",n,t);if(n.byteLength==this.F.n8*2)return this.op2bool("_eqAffine",t,n);throw new Error("invalid point size")}else throw new Error("invalid point size")}toAffine(t){if(t.byteLength==this.F.n8*3)return this.op1Affine("_toAffine",t);if(t.byteLength==this.F.n8*2)return t;throw new Error("invalid point size")}toJacobian(t){if(t.byteLength==this.F.n8*3)return t;if(t.byteLength==this.F.n8*2)return this.op1("_toJacobian",t);throw new Error("invalid point size")}toRprUncompressed(t,n,i){if(this.tm.setBuff(this.pOp1,i),i.byteLength==this.F.n8*3)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(i.byteLength!=this.F.n8*2)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoU"](this.pOp1,this.pOp1);const o=this.tm.getBuff(this.pOp1,this.F.n8*2);t.set(o,n)}fromRprUncompressed(t,n){const i=t.slice(n,n+this.F.n8*2);return this.tm.setBuff(this.pOp1,i),this.tm.instance.exports[this.prefix+"_UtoLEM"](this.pOp1,this.pOp1),this.tm.getBuff(this.pOp1,this.F.n8*2)}toRprCompressed(t,n,i){if(this.tm.setBuff(this.pOp1,i),i.byteLength==this.F.n8*3)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(i.byteLength!=this.F.n8*2)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoC"](this.pOp1,this.pOp1);const o=this.tm.getBuff(this.pOp1,this.F.n8);t.set(o,n)}fromRprCompressed(t,n){const i=t.slice(n,n+this.F.n8);return this.tm.setBuff(this.pOp1,i),this.tm.instance.exports[this.prefix+"_CtoLEM"](this.pOp1,this.pOp2),this.tm.getBuff(this.pOp2,this.F.n8*2)}toUncompressed(t){const n=new Uint8Array(this.F.n8*2);return this.toRprUncompressed(n,0,t),n}toRprLEM(t,n,i){if(i.byteLength==this.F.n8*2){t.set(i,n);return}else if(i.byteLength==this.F.n8*3){this.tm.setBuff(this.pOp1,i),this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);const o=this.tm.getBuff(this.pOp1,this.F.n8*2);t.set(o,n)}else throw new Error("invalid point size")}fromRprLEM(t,n){return n=n||0,t.slice(n,n+this.F.n8*2)}toString(t,n){if(t.byteLength==this.F.n8*3){const i=this.F.toString(t.slice(0,this.F.n8),n),o=this.F.toString(t.slice(this.F.n8,this.F.n8*2),n),a=this.F.toString(t.slice(this.F.n8*2),n);return`[ ${i}, ${o}, ${a} ]`}else if(t.byteLength==this.F.n8*2){const i=this.F.toString(t.slice(0,this.F.n8),n),o=this.F.toString(t.slice(this.F.n8),n);return`[ ${i}, ${o} ]`}else throw new Error("invalid point size")}isValid(t){if(this.isZero(t))return!0;const n=this.F,i=this.toAffine(t),o=i.slice(0,this.F.n8),a=i.slice(this.F.n8,this.F.n8*2),s=n.add(n.mul(n.square(o),o),this.b),d=n.square(a);return n.eq(s,d)}fromRng(t){const n=this.F;let i=[],o,a;do i[0]=n.fromRng(t),o=t.nextBool(),a=n.add(n.mul(n.square(i[0]),i[0]),this.b);while(!n.isSquare(a));i[1]=n.sqrt(a);const s=n.isNegative(i[1]);o^s&&(i[1]=n.neg(i[1]));let d=new Uint8Array(this.F.n8*2);return d.set(i[0]),d.set(i[1],this.F.n8),this.cofactor&&(d=this.timesScalar(d,this.cofactor)),d}toObject(t){if(this.isZero(t))return[this.F.toObject(this.F.zero),this.F.toObject(this.F.one),this.F.toObject(this.F.zero)];const n=this.F.toObject(t.slice(0,this.F.n8)),i=this.F.toObject(t.slice(this.F.n8,this.F.n8*2));let o;return t.byteLength==this.F.n8*3?o=this.F.toObject(t.slice(this.F.n8*2,this.F.n8*3)):o=this.F.toObject(this.F.one),[n,i,o]}fromObject(t){const n=this.F.fromObject(t[0]),i=this.F.fromObject(t[1]);let o;if(t.length==3?o=this.F.fromObject(t[2]):o=this.F.one,this.F.isZero(o,this.F.one))return this.zeroAffine;if(this.F.eq(o,this.F.one)){const a=new Uint8Array(this.F.n8*2);return a.set(n),a.set(i,this.F.n8),a}else{const a=new Uint8Array(this.F.n8*3);return a.set(n),a.set(i,this.F.n8),a.set(o,this.F.n8*2),a}}e(t){return t instanceof Uint8Array?t:this.fromObject(t)}x(t){return this.toAffine(t).slice(0,this.F.n8)}y(t){return this.toAffine(t).slice(this.F.n8)}}function Fl(e){const t=32767;let n,i;e&&(e.onmessage=function(l){let m;if(l.data?m=l.data:m=l,m[0].cmd=="INIT")o(m[0]).then(function(){e.postMessage(m.result)});else if(m[0].cmd=="TERMINATE")e.close();else{const A=f(m);e.postMessage(A)}});async function o(l){const m=new Uint8Array(l.code),A=await WebAssembly.compile(m);i=new WebAssembly.Memory({initial:l.init,maximum:t}),n=await WebAssembly.instantiate(A,{env:{memory:i}})}function a(l){const m=new Uint32Array(i.buffer,0,1);for(;m[0]&3;)m[0]++;const A=m[0];if(m[0]+=l,m[0]+l>i.buffer.byteLength){const _=i.buffer.byteLength/65536;let R=Math.floor((m[0]+l)/65536)+1;R>t&&(R=t),i.grow(R-_)}return A}function s(l){const m=a(l.byteLength);return g(m,l),m}function d(l,m){const A=new Uint8Array(i.buffer);return new Uint8Array(A.buffer,A.byteOffset+l,m)}function g(l,m){new Uint8Array(i.buffer).set(new Uint8Array(m),l)}function f(l){if(l[0].cmd=="INIT")return o(l[0]);const m={vars:[],out:[]},_=new Uint32Array(i.buffer,0,1)[0];for(let x=0;x<l.length;x++)switch(l[x].cmd){case"ALLOCSET":m.vars[l[x].var]=s(l[x].buff);break;case"ALLOC":m.vars[l[x].var]=a(l[x].len);break;case"SET":g(m.vars[l[x].var],l[x].buff);break;case"CALL":{const C=[];for(let k=0;k<l[x].params.length;k++){const O=l[x].params[k];typeof O.var!="undefined"?C.push(m.vars[O.var]+(O.offset||0)):typeof O.val!="undefined"&&C.push(O.val)}n.exports[l[x].fnName](...C);break}case"GET":m.out[l[x].out]=d(m.vars[l[x].var],l[x].len).slice();break;default:throw new Error("Invalid cmd")}const R=new Uint32Array(i.buffer,0,1);return R[0]=_,m.out}return f}const sa=25;class Bl{constructor(){this.promise=new Promise((t,n)=>{this.reject=n,this.resolve=t})}}function H0(e){return new Promise(t=>setTimeout(t,e))}function z0(e){return globalThis.btoa(e)}const $0=z0("("+Fl.toString()+")(self)"),Y0="data:application/javascript;base64,"+$0;async function j0(e,t){t=!0;const n=new K0;n.memory=new WebAssembly.Memory({initial:sa}),n.u8=new Uint8Array(n.memory.buffer),n.u32=new Uint32Array(n.memory.buffer);const i=await WebAssembly.compile(e.code);if(n.instance=await WebAssembly.instantiate(i,{env:{memory:n.memory}}),n.singleThread=t,n.initalPFree=n.u32[0],n.pq=e.pq,n.pr=e.pr,n.pG1gen=e.pG1gen,n.pG1zero=e.pG1zero,n.pG2gen=e.pG2gen,n.pG2zero=e.pG2zero,n.pOneT=e.pOneT,t)n.code=e.code,n.taskManager=Fl(),await n.taskManager([{cmd:"INIT",init:sa,code:n.code.slice()}]),n.concurrency=1;else{n.workers=[],n.pendingDeferreds=[],n.working=[];let a;typeof navigator=="object"&&navigator.hardwareConcurrency?a=navigator.hardwareConcurrency:a=po.cpus().length,a==0&&(a=2),a>64&&(a=64),n.concurrency=a;for(let d=0;d<a;d++)n.workers[d]=new St(Y0),n.workers[d].addEventListener("message",o(d)),n.working[d]=!1;const s=[];for(let d=0;d<n.workers.length;d++){const g=e.code.slice();s.push(n.postAction(d,[{cmd:"INIT",init:sa,code:g}],[g.buffer]))}await Promise.all(s)}return n;function o(a){return function(s){let d;s&&s.data?d=s.data:d=s,n.working[a]=!1,n.pendingDeferreds[a].resolve(d),n.processWorks()}}}class K0{constructor(){this.actionQueue=[],this.oldPFree=0}startSyncOp(){if(this.oldPFree!=0)throw new Error("Sync operation in progress");this.oldPFree=this.u32[0]}endSyncOp(){if(this.oldPFree==0)throw new Error("No sync operation in progress");this.u32[0]=this.oldPFree,this.oldPFree=0}postAction(t,n,i,o){if(this.working[t])throw new Error("Posting a job t a working worker");return this.working[t]=!0,this.pendingDeferreds[t]=o||new Bl,this.workers[t].postMessage(n,i),this.pendingDeferreds[t].promise}processWorks(){for(let t=0;t<this.workers.length&&this.actionQueue.length>0;t++)if(this.working[t]==!1){const n=this.actionQueue.shift();this.postAction(t,n.data,n.transfers,n.deferred)}}queueAction(t,n){const i=new Bl;if(this.singleThread){const o=this.taskManager(t);i.resolve(o)}else this.actionQueue.push({data:t,transfers:n,deferred:i}),this.processWorks();return i.promise}resetMemory(){this.u32[0]=this.initalPFree}allocBuff(t){const n=this.alloc(t.byteLength);return this.setBuff(n,t),n}getBuff(t,n){return this.u8.slice(t,t+n)}setBuff(t,n){this.u8.set(new Uint8Array(n),t)}alloc(t){for(;this.u32[0]&3;)this.u32[0]++;const n=this.u32[0];return this.u32[0]+=t,n}async terminate(){for(let t=0;t<this.workers.length;t++)this.workers[t].postMessage([{cmd:"TERMINATE"}]);await H0(200)}}function ca(e,t){const n=e[t],i=e.Fr,o=e.tm;e[t].batchApplyKey=async function(a,s,d,g,f){g=g||"affine",f=f||"affine";let l,m,A,_,R;if(t=="G1")g=="jacobian"?(A=n.F.n8*3,l="g1m_batchApplyKey"):(A=n.F.n8*2,l="g1m_batchApplyKeyMixed"),_=n.F.n8*3,f=="jacobian"?R=n.F.n8*3:(m="g1m_batchToAffine",R=n.F.n8*2);else if(t=="G2")g=="jacobian"?(A=n.F.n8*3,l="g2m_batchApplyKey"):(A=n.F.n8*2,l="g2m_batchApplyKeyMixed"),_=n.F.n8*3,f=="jacobian"?R=n.F.n8*3:(m="g2m_batchToAffine",R=n.F.n8*2);else if(t=="Fr")l="frm_batchApplyKey",A=n.n8,_=n.n8,R=n.n8;else throw new Error("Invalid group: "+t);const x=Math.floor(a.byteLength/A),C=Math.floor(x/o.concurrency),k=[];d=i.e(d);let O=i.e(s);for(let T=0;T<o.concurrency;T++){let p;if(T<o.concurrency-1?p=C:p=x-T*C,p==0)continue;const w=[];w.push({cmd:"ALLOCSET",var:0,buff:a.slice(T*C*A,T*C*A+p*A)}),w.push({cmd:"ALLOCSET",var:1,buff:O}),w.push({cmd:"ALLOCSET",var:2,buff:d}),w.push({cmd:"ALLOC",var:3,len:p*Math.max(_,R)}),w.push({cmd:"CALL",fnName:l,params:[{var:0},{val:p},{var:1},{var:2},{var:3}]}),m&&w.push({cmd:"CALL",fnName:m,params:[{var:3},{val:p},{var:3}]}),w.push({cmd:"GET",out:0,var:3,len:p*R}),k.push(o.queueAction(w)),O=i.mul(O,i.exp(d,p))}const Z=await Promise.all(k);let z;a instanceof Kt?z=new Kt(x*R):z=new Uint8Array(x*R);let K=0;for(let T=0;T<Z.length;T++)z.set(Z[T][0],K),K+=Z[T][0].byteLength;return z}}function V0(e){const t=e.tm;e.pairing=function(i,o){t.startSyncOp();const a=t.allocBuff(e.G1.toJacobian(i)),s=t.allocBuff(e.G2.toJacobian(o)),d=t.alloc(e.Gt.n8);t.instance.exports[e.name+"_pairing"](a,s,d);const g=t.getBuff(d,e.Gt.n8);return t.endSyncOp(),g},e.pairingEq=async function(){let i,o;arguments.length%2==1?(i=arguments[arguments.length-1],o=(arguments.length-1)/2):(i=e.Gt.one,o=arguments.length/2);const a=[];for(let l=0;l<o;l++){const m=[],A=e.G1.toJacobian(arguments[l*2]);m.push({cmd:"ALLOCSET",var:0,buff:A}),m.push({cmd:"ALLOC",var:1,len:e.prePSize});const _=e.G2.toJacobian(arguments[l*2+1]);m.push({cmd:"ALLOCSET",var:2,buff:_}),m.push({cmd:"ALLOC",var:3,len:e.preQSize}),m.push({cmd:"ALLOC",var:4,len:e.Gt.n8}),m.push({cmd:"CALL",fnName:e.name+"_prepareG1",params:[{var:0},{var:1}]}),m.push({cmd:"CALL",fnName:e.name+"_prepareG2",params:[{var:2},{var:3}]}),m.push({cmd:"CALL",fnName:e.name+"_millerLoop",params:[{var:1},{var:3},{var:4}]}),m.push({cmd:"GET",out:0,var:4,len:e.Gt.n8}),a.push(t.queueAction(m))}const s=await Promise.all(a);t.startSyncOp();const d=t.alloc(e.Gt.n8);t.instance.exports.ftm_one(d);for(let l=0;l<s.length;l++){const m=t.allocBuff(s[l][0]);t.instance.exports.ftm_mul(d,m,d)}t.instance.exports[e.name+"_finalExponentiation"](d,d);const g=t.allocBuff(i),f=!!t.instance.exports.ftm_eq(d,g);return t.endSyncOp(),f},e.prepareG1=function(n){this.tm.startSyncOp();const i=this.tm.allocBuff(n),o=this.tm.alloc(this.prePSize);this.tm.instance.exports[this.name+"_prepareG1"](i,o);const a=this.tm.getBuff(o,this.prePSize);return this.tm.endSyncOp(),a},e.prepareG2=function(n){this.tm.startSyncOp();const i=this.tm.allocBuff(n),o=this.tm.alloc(this.preQSize);this.tm.instance.exports[this.name+"_prepareG2"](i,o);const a=this.tm.getBuff(o,this.preQSize);return this.tm.endSyncOp(),a},e.millerLoop=function(n,i){this.tm.startSyncOp();const o=this.tm.allocBuff(n),a=this.tm.allocBuff(i),s=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_millerLoop"](o,a,s);const d=this.tm.getBuff(s,this.Gt.n8);return this.tm.endSyncOp(),d},e.finalExponentiation=function(n){this.tm.startSyncOp();const i=this.tm.allocBuff(n),o=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_finalExponentiation"](i,o);const a=this.tm.getBuff(o,this.Gt.n8);return this.tm.endSyncOp(),a}}const Tl=[1,1,1,1,2,3,4,5,6,7,7,8,9,10,11,12,13,13,14,15,16,16,17,17,17,17,17,17,17,17,17,17];function Rl(e,t){const n=e[t],i=n.tm;async function o(s,d,g,f,l){if(!(s instanceof Uint8Array))throw f&&f.error(`${l} _multiExpChunk buffBases is not Uint8Array`),new Error(`${l} _multiExpChunk buffBases is not Uint8Array`);if(!(d instanceof Uint8Array))throw f&&f.error(`${l} _multiExpChunk buffScalars is not Uint8Array`),new Error(`${l} _multiExpChunk buffScalars is not Uint8Array`);g=g||"affine";let m,A;if(t=="G1")g=="affine"?(A="g1m_multiexpAffine_chunk",m=n.F.n8*2):(A="g1m_multiexp_chunk",m=n.F.n8*3);else if(t=="G2")g=="affine"?(A="g2m_multiexpAffine_chunk",m=n.F.n8*2):(A="g2m_multiexp_chunk",m=n.F.n8*3);else throw new Error("Invalid group");const _=Math.floor(s.byteLength/m);if(_==0)return n.zero;const R=Math.floor(d.byteLength/_);if(R*_!=d.byteLength)throw new Error("Scalar size does not match");const x=Tl[De(_)],C=Math.floor((R*8-1)/x)+1,k=[];for(let z=0;z<C;z++){const K=[{cmd:"ALLOCSET",var:0,buff:s},{cmd:"ALLOCSET",var:1,buff:d},{cmd:"ALLOC",var:2,len:n.F.n8*3},{cmd:"CALL",fnName:A,params:[{var:0},{var:1},{val:R},{val:_},{val:z*x},{val:Math.min(R*8-z*x,x)},{var:2}]},{cmd:"GET",out:0,var:2,len:n.F.n8*3}];k.push(n.tm.queueAction(K))}const O=await Promise.all(k);let Z=n.zero;for(let z=O.length-1;z>=0;z--){if(!n.isZero(Z))for(let K=0;K<x;K++)Z=n.double(Z);Z=n.add(Z,O[z][0])}return Z}async function a(s,d,g,f,l){const m=1<<22,A=1<<10;let _;if(t=="G1")g=="affine"?_=n.F.n8*2:_=n.F.n8*3;else if(t=="G2")g=="affine"?_=n.F.n8*2:_=n.F.n8*3;else throw new Error("Invalid group");const R=Math.floor(s.byteLength/_),x=Math.floor(d.byteLength/R);if(x*R!=d.byteLength)throw new Error("Scalar size does not match");const C=Tl[De(R)],k=Math.floor((x*8-1)/C)+1;let O;O=Math.floor(R/(i.concurrency/k)),O>m&&(O=m),O<A&&(O=A);const Z=[];for(let T=0;T<R;T+=O){f&&f.debug(`Multiexp start: ${l}: ${T}/${R}`);const p=Math.min(R-T,O),w=s.slice(T*_,(T+p)*_),D=d.slice(T*x,(T+p)*x);Z.push(o(w,D,g,f,l).then($=>(f&&f.debug(`Multiexp end: ${l}: ${T}/${R}`),$)))}const z=await Promise.all(Z);let K=n.zero;for(let T=z.length-1;T>=0;T--)K=n.add(K,z[T]);return K}n.multiExp=async function(d,g,f,l){return await a(d,g,"jacobian",f,l)},n.multiExpAffine=async function(d,g,f,l){return await a(d,g,"affine",f,l)}}function la(e,t){const n=e[t],i=e.Fr,o=n.tm;async function a(f,l,m,A,_,R){m=m||"affine",A=A||"affine";const x=14;let C,k,O,Z,z,K,T,p;t=="G1"?(m=="affine"?(C=n.F.n8*2,Z="g1m_batchToJacobian"):C=n.F.n8*3,k=n.F.n8*3,l&&(p="g1m_fftFinal"),T="g1m_fftJoin",K="g1m_fftMix",A=="affine"?(O=n.F.n8*2,z="g1m_batchToAffine"):O=n.F.n8*3):t=="G2"?(m=="affine"?(C=n.F.n8*2,Z="g2m_batchToJacobian"):C=n.F.n8*3,k=n.F.n8*3,l&&(p="g2m_fftFinal"),T="g2m_fftJoin",K="g2m_fftMix",A=="affine"?(O=n.F.n8*2,z="g2m_batchToAffine"):O=n.F.n8*3):t=="Fr"&&(C=n.n8,k=n.n8,O=n.n8,l&&(p="frm_fftFinal"),K="frm_fftMix",T="frm_fftJoin");let w=!1;Array.isArray(f)?(f=aa(f,C),w=!0):f=f.slice(0,f.byteLength);const D=f.byteLength/C,$=De(D);if(1<<$!=D)throw new Error("fft must be multiple of 2");if($==i.s+1){let nt;return l?nt=await d(f,m,A,_,R):nt=await s(f,m,A,_,R),w?Eo(nt,O):nt}let U;l&&(U=i.inv(i.e(D)));let M;wl(f,C);let S,q=Math.min(1<<x,D),tt=D/q;for(;tt<o.concurrency&&q>=16;)tt*=2,q/=2;const ft=De(q),it=[];for(let nt=0;nt<tt;nt++){_&&_.debug(`${R}: fft ${$} mix start: ${nt}/${tt}`);const gt=[];gt.push({cmd:"ALLOC",var:0,len:k*q});const ot=f.slice(q*nt*C,q*(nt+1)*C);gt.push({cmd:"SET",var:0,buff:ot}),Z&&gt.push({cmd:"CALL",fnName:Z,params:[{var:0},{val:q},{var:0}]});for(let It=1;It<=ft;It++)gt.push({cmd:"CALL",fnName:K,params:[{var:0},{val:q},{val:It}]});ft==$?(p&&(gt.push({cmd:"ALLOCSET",var:1,buff:U}),gt.push({cmd:"CALL",fnName:p,params:[{var:0},{val:q},{var:1}]})),z&&gt.push({cmd:"CALL",fnName:z,params:[{var:0},{val:q},{var:0}]}),gt.push({cmd:"GET",out:0,var:0,len:q*O})):gt.push({cmd:"GET",out:0,var:0,len:k*q}),it.push(o.queueAction(gt).then(It=>(_&&_.debug(`${R}: fft ${$} mix end: ${nt}/${tt}`),It)))}S=await Promise.all(it);for(let nt=0;nt<tt;nt++)S[nt]=S[nt][0];for(let nt=ft+1;nt<=$;nt++){_&&_.debug(`${R}: fft  ${$}  join: ${nt}/${$}`);const gt=1<<$-nt,ot=tt/gt,It=[];for(let Lt=0;Lt<gt;Lt++)for(let vt=0;vt<ot/2;vt++){const L=i.exp(i.w[nt],vt*q),u=i.w[nt],F=Lt*ot+vt,h=Lt*ot+vt+ot/2,H=[];H.push({cmd:"ALLOCSET",var:0,buff:S[F]}),H.push({cmd:"ALLOCSET",var:1,buff:S[h]}),H.push({cmd:"ALLOCSET",var:2,buff:L}),H.push({cmd:"ALLOCSET",var:3,buff:u}),H.push({cmd:"CALL",fnName:T,params:[{var:0},{var:1},{val:q},{var:2},{var:3}]}),nt==$?(p&&(H.push({cmd:"ALLOCSET",var:4,buff:U}),H.push({cmd:"CALL",fnName:p,params:[{var:0},{val:q},{var:4}]}),H.push({cmd:"CALL",fnName:p,params:[{var:1},{val:q},{var:4}]})),z&&(H.push({cmd:"CALL",fnName:z,params:[{var:0},{val:q},{var:0}]}),H.push({cmd:"CALL",fnName:z,params:[{var:1},{val:q},{var:1}]})),H.push({cmd:"GET",out:0,var:0,len:q*O}),H.push({cmd:"GET",out:1,var:1,len:q*O})):(H.push({cmd:"GET",out:0,var:0,len:q*k}),H.push({cmd:"GET",out:1,var:1,len:q*k})),It.push(o.queueAction(H).then(N=>(_&&_.debug(`${R}: fft ${$} join  ${nt}/${$}  ${Lt+1}/${gt} ${vt}/${ot/2}`),N)))}const Ot=await Promise.all(It);for(let Lt=0;Lt<gt;Lt++)for(let vt=0;vt<ot/2;vt++){const L=Lt*ot+vt,u=Lt*ot+vt+ot/2,F=Ot.shift();S[L]=F[0],S[u]=F[1]}}if(f instanceof Kt?M=new Kt(D*O):M=new Uint8Array(D*O),l){M.set(S[0].slice((q-1)*O));let nt=O;for(let gt=tt-1;gt>0;gt--)M.set(S[gt],nt),nt+=q*O,delete S[gt];M.set(S[0].slice(0,(q-1)*O),nt),delete S[0]}else for(let nt=0;nt<tt;nt++)M.set(S[nt],q*O*nt),delete S[nt];return w?Eo(M,O):M}async function s(f,l,m,A,_){let R,x;R=f.slice(0,f.byteLength/2),x=f.slice(f.byteLength/2,f.byteLength);const C=[];[R,x]=await g(R,x,"fftJoinExt",i.one,i.shift,l,"jacobian",A,_),C.push(a(R,!1,"jacobian",m,A,_)),C.push(a(x,!1,"jacobian",m,A,_));const k=await Promise.all(C);let O;return k[0].byteLength>1<<28?O=new Kt(k[0].byteLength*2):O=new Uint8Array(k[0].byteLength*2),O.set(k[0]),O.set(k[1],k[0].byteLength),O}async function d(f,l,m,A,_){let R,x;R=f.slice(0,f.byteLength/2),x=f.slice(f.byteLength/2,f.byteLength);const C=[];C.push(a(R,!0,l,"jacobian",A,_)),C.push(a(x,!0,l,"jacobian",A,_)),[R,x]=await Promise.all(C);const k=await g(R,x,"fftJoinExtInv",i.one,i.shiftInv,"jacobian",m,A,_);let O;return k[0].byteLength>1<<28?O=new Kt(k[0].byteLength*2):O=new Uint8Array(k[0].byteLength*2),O.set(k[0]),O.set(k[1],k[0].byteLength),O}async function g(f,l,m,A,_,R,x,C,k){const O=1<<16,Z=1<<4;let z,K,T,p,w,D;if(t=="G1")R=="affine"?(w=n.F.n8*2,K="g1m_batchToJacobian"):w=n.F.n8*3,D=n.F.n8*3,z="g1m_"+m,x=="affine"?(T="g1m_batchToAffine",p=n.F.n8*2):p=n.F.n8*3;else if(t=="G2")R=="affine"?(w=n.F.n8*2,K="g2m_batchToJacobian"):w=n.F.n8*3,z="g2m_"+m,D=n.F.n8*3,x=="affine"?(T="g2m_batchToAffine",p=n.F.n8*2):p=n.F.n8*3;else if(t=="Fr")w=i.n8,p=i.n8,D=i.n8,z="frm_"+m;else throw new Error("Invalid group");if(f.byteLength!=l.byteLength)throw new Error("Invalid buffer size");const $=Math.floor(f.byteLength/w);if($!=1<<De($))throw new Error("Invalid number of points");let U=Math.floor($/o.concurrency);U<Z&&(U=Z),U>O&&(U=O);const M=[];for(let it=0;it<$;it+=U){C&&C.debug(`${k}: fftJoinExt Start: ${it}/${$}`);const nt=Math.min($-it,U),gt=i.mul(A,i.exp(_,it)),ot=[],It=f.slice(it*w,(it+nt)*w),Ot=l.slice(it*w,(it+nt)*w);ot.push({cmd:"ALLOC",var:0,len:D*nt}),ot.push({cmd:"SET",var:0,buff:It}),ot.push({cmd:"ALLOC",var:1,len:D*nt}),ot.push({cmd:"SET",var:1,buff:Ot}),ot.push({cmd:"ALLOCSET",var:2,buff:gt}),ot.push({cmd:"ALLOCSET",var:3,buff:_}),K&&(ot.push({cmd:"CALL",fnName:K,params:[{var:0},{val:nt},{var:0}]}),ot.push({cmd:"CALL",fnName:K,params:[{var:1},{val:nt},{var:1}]})),ot.push({cmd:"CALL",fnName:z,params:[{var:0},{var:1},{val:nt},{var:2},{var:3},{val:i.s}]}),T&&(ot.push({cmd:"CALL",fnName:T,params:[{var:0},{val:nt},{var:0}]}),ot.push({cmd:"CALL",fnName:T,params:[{var:1},{val:nt},{var:1}]})),ot.push({cmd:"GET",out:0,var:0,len:nt*p}),ot.push({cmd:"GET",out:1,var:1,len:nt*p}),M.push(o.queueAction(ot).then(Lt=>(C&&C.debug(`${k}: fftJoinExt End: ${it}/${$}`),Lt)))}const S=await Promise.all(M);let q,tt;$*p>1<<28?(q=new Kt($*p),tt=new Kt($*p)):(q=new Uint8Array($*p),tt=new Uint8Array($*p));let ft=0;for(let it=0;it<S.length;it++)q.set(S[it][0],ft),tt.set(S[it][1],ft),ft+=S[it][0].byteLength;return[q,tt]}n.fft=async function(f,l,m,A,_){return await a(f,!1,l,m,A,_)},n.ifft=async function(f,l,m,A,_){return await a(f,!0,l,m,A,_)},n.lagrangeEvaluations=async function(f,l,m,A,_){l=l||"affine",m=m||"affine";let R;if(t=="G1")l=="affine"?R=n.F.n8*2:R=n.F.n8*3;else if(t=="G2")l=="affine"?R=n.F.n8*2:R=n.F.n8*3;else if(t=="Fr")R=i.n8;else throw new Error("Invalid group");const x=f.byteLength/R,C=De(x);if(2**C*R!=f.byteLength)throw A&&A.error("lagrangeEvaluations iinvalid input size"),new Error("lagrangeEvaluations invalid Input size");if(C<=i.s)return await n.ifft(f,l,m,A,_);if(C>i.s+1)throw A&&A.error("lagrangeEvaluations input too big"),new Error("lagrangeEvaluations input too big");let k=f.slice(0,f.byteLength/2),O=f.slice(f.byteLength/2,f.byteLength);const Z=i.exp(i.shift,x/2),z=i.inv(i.sub(i.one,Z));[k,O]=await g(k,O,"prepareLagrangeEvaluation",z,i.shiftInv,l,"jacobian",A,_+" prep");const K=[];K.push(a(k,!0,"jacobian",m,A,_+" t0")),K.push(a(O,!0,"jacobian",m,A,_+" t1")),[k,O]=await Promise.all(K);let T;return k.byteLength>1<<28?T=new Kt(k.byteLength*2):T=new Uint8Array(k.byteLength*2),T.set(k),T.set(O,k.byteLength),T},n.fftMix=async function(l){const m=n.F.n8*3;let A,_;if(t=="G1")A="g1m_fftMix",_="g1m_fftJoin";else if(t=="G2")A="g2m_fftMix",_="g2m_fftJoin";else if(t=="Fr")A="frm_fftMix",_="frm_fftJoin";else throw new Error("Invalid group");const R=Math.floor(l.byteLength/m),x=De(R);let C=1<<De(o.concurrency);R<=C*2&&(C=1);const k=R/C,O=De(k),Z=[];for(let w=0;w<C;w++){const D=[],$=l.slice(w*k*m,(w+1)*k*m);D.push({cmd:"ALLOCSET",var:0,buff:$});for(let U=1;U<=O;U++)D.push({cmd:"CALL",fnName:A,params:[{var:0},{val:k},{val:U}]});D.push({cmd:"GET",out:0,var:0,len:k*m}),Z.push(o.queueAction(D))}const z=await Promise.all(Z),K=[];for(let w=0;w<z.length;w++)K[w]=z[w][0];for(let w=O+1;w<=x;w++){const D=1<<x-w,$=C/D,U=[];for(let S=0;S<D;S++)for(let q=0;q<$/2;q++){const tt=i.exp(i.w[w],q*k),ft=i.w[w],it=S*$+q,nt=S*$+q+$/2,gt=[];gt.push({cmd:"ALLOCSET",var:0,buff:K[it]}),gt.push({cmd:"ALLOCSET",var:1,buff:K[nt]}),gt.push({cmd:"ALLOCSET",var:2,buff:tt}),gt.push({cmd:"ALLOCSET",var:3,buff:ft}),gt.push({cmd:"CALL",fnName:_,params:[{var:0},{var:1},{val:k},{var:2},{var:3}]}),gt.push({cmd:"GET",out:0,var:0,len:k*m}),gt.push({cmd:"GET",out:1,var:1,len:k*m}),U.push(o.queueAction(gt))}const M=await Promise.all(U);for(let S=0;S<D;S++)for(let q=0;q<$/2;q++){const tt=S*$+q,ft=S*$+q+$/2,it=M.shift();K[tt]=it[0],K[ft]=it[1]}}let T;l instanceof Kt?T=new Kt(R*m):T=new Uint8Array(R*m);let p=0;for(let w=0;w<C;w++)T.set(K[w],p),p+=K[w].byteLength;return T},n.fftJoin=async function(l,m,A,_){const R=n.F.n8*3;let x;if(t=="G1")x="g1m_fftJoin";else if(t=="G2")x="g2m_fftJoin";else if(t=="Fr")x="frm_fftJoin";else throw new Error("Invalid group");if(l.byteLength!=m.byteLength)throw new Error("Invalid buffer size");const C=Math.floor(l.byteLength/R);if(C!=1<<De(C))throw new Error("Invalid number of points");let k=1<<De(o.concurrency);C<=k*2&&(k=1);const O=C/k,Z=[];for(let w=0;w<k;w++){const D=[],$=i.mul(A,i.exp(_,w*O)),U=l.slice(w*O*R,(w+1)*O*R),M=m.slice(w*O*R,(w+1)*O*R);D.push({cmd:"ALLOCSET",var:0,buff:U}),D.push({cmd:"ALLOCSET",var:1,buff:M}),D.push({cmd:"ALLOCSET",var:2,buff:$}),D.push({cmd:"ALLOCSET",var:3,buff:_}),D.push({cmd:"CALL",fnName:x,params:[{var:0},{var:1},{val:O},{var:2},{var:3}]}),D.push({cmd:"GET",out:0,var:0,len:O*R}),D.push({cmd:"GET",out:1,var:1,len:O*R}),Z.push(o.queueAction(D))}const z=await Promise.all(Z);let K,T;l instanceof Kt?(K=new Kt(C*R),T=new Kt(C*R)):(K=new Uint8Array(C*R),T=new Uint8Array(C*R));let p=0;for(let w=0;w<z.length;w++)K.set(z[w][0],p),T.set(z[w][1],p),p+=z[w][0].byteLength;return[K,T]},n.fftFinal=async function(l,m){const A=n.F.n8*3,_=n.F.n8*2;let R,x;if(t=="G1")R="g1m_fftFinal",x="g1m_batchToAffine";else if(t=="G2")R="g2m_fftFinal",x="g2m_batchToAffine";else throw new Error("Invalid group");const C=Math.floor(l.byteLength/A);if(C!=1<<De(C))throw new Error("Invalid number of points");const k=Math.floor(C/o.concurrency),O=[];for(let T=0;T<o.concurrency;T++){let p;if(T<o.concurrency-1?p=k:p=C-T*k,p==0)continue;const w=[],D=l.slice(T*k*A,(T*k+p)*A);w.push({cmd:"ALLOCSET",var:0,buff:D}),w.push({cmd:"ALLOCSET",var:1,buff:m}),w.push({cmd:"CALL",fnName:R,params:[{var:0},{val:p},{var:1}]}),w.push({cmd:"CALL",fnName:x,params:[{var:0},{val:p},{var:0}]}),w.push({cmd:"GET",out:0,var:0,len:p*_}),O.push(o.queueAction(w))}const Z=await Promise.all(O);let z;l instanceof Kt?z=new Kt(C*_):z=new Uint8Array(C*_);let K=0;for(let T=Z.length-1;T>=0;T--)z.set(Z[T][0],K),K+=Z[T][0].byteLength;return z}}async function Ol(e){const t=await j0(e.wasm,e.singleThread),n={};return n.q=de(e.wasm.q),n.r=de(e.wasm.r),n.name=e.name,n.tm=t,n.prePSize=e.wasm.prePSize,n.preQSize=e.wasm.preQSize,n.Fr=new vl(t,"frm",e.n8r,e.r),n.F1=new vl(t,"f1m",e.n8q,e.q),n.F2=new Cl(t,"f2m",n.F1),n.G1=new bl(t,"g1m",n.F1,e.wasm.pG1gen,e.wasm.pG1b,e.cofactorG1),n.G2=new bl(t,"g2m",n.F2,e.wasm.pG2gen,e.wasm.pG2b,e.cofactorG2),n.F6=new Q0(t,"f6m",n.F2),n.F12=new Cl(t,"ftm",n.F6),n.Gt=n.F12,ca(n,"G1"),ca(n,"G2"),ca(n,"Fr"),Rl(n,"G1"),Rl(n,"G2"),la(n,"G1"),la(n,"G2"),la(n,"Fr"),V0(n),n.array2buffer=function(i,o){const a=new Uint8Array(o*i.length);for(let s=0;s<i.length;s++)a.set(i[s],s*o);return a},n.buffer2array=function(i,o){const a=i.byteLength/o,s=new Array(a);for(let d=0;d<a;d++)s[d]=i.slice(d*o,d*o+o);return s},n}globalThis.curve_bn128=null;async function Pl(e,t){const n=new Xc;n.setMemory(25),Q_(n),t&&t(n);const i={};if(i.code=n.build(),i.pq=n.modules.f1m.pq,i.pr=n.modules.frm.pq,i.pG1gen=n.modules.bn128.pG1gen,i.pG1zero=n.modules.bn128.pG1zero,i.pG1b=n.modules.bn128.pG1b,i.pG2gen=n.modules.bn128.pG2gen,i.pG2zero=n.modules.bn128.pG2zero,i.pG2b=n.modules.bn128.pG2b,i.pOneT=n.modules.bn128.pOneT,i.prePSize=n.modules.bn128.prePSize,i.preQSize=n.modules.bn128.preQSize,i.n8q=32,i.n8r=32,i.q=n.modules.bn128.q,i.r=n.modules.bn128.r,!e&&globalThis.curve_bn128)return globalThis.curve_bn128;const o={name:"bn128",wasm:i,q:de("21888242871839275222246405745257275088696311157297823662689037894645226208583"),r:de("21888242871839275222246405745257275088548364400416034343698204186575808495617"),n8q:32,n8r:32,cofactorG2:de("30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d",16),singleThread:!!e},a=await Ol(o);return a.terminate=async function(){o.singleThread||(globalThis.curve_bn128=null,await this.tm.terminate())},e||(globalThis.curve_bn128=a),a}globalThis.curve_bls12381=null;async function xl(e,t){const n=new Xc;n.setMemory(25),H_(n),t&&t(n);const i={};if(i.code=n.build(),i.pq=n.modules.f1m.pq,i.pr=n.modules.frm.pq,i.pG1gen=n.modules.bls12381.pG1gen,i.pG1zero=n.modules.bls12381.pG1zero,i.pG1b=n.modules.bls12381.pG1b,i.pG2gen=n.modules.bls12381.pG2gen,i.pG2zero=n.modules.bls12381.pG2zero,i.pG2b=n.modules.bls12381.pG2b,i.pOneT=n.modules.bls12381.pOneT,i.prePSize=n.modules.bls12381.prePSize,i.preQSize=n.modules.bls12381.preQSize,i.n8q=48,i.n8r=32,i.q=n.modules.bn128.q,i.r=n.modules.bn128.r,!e&&globalThis.curve_bls12381)return globalThis.curve_bls12381;const o={name:"bls12381",wasm:i,q:de("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),r:de("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),n8q:48,n8r:32,cofactorG1:de("0x396c8c005555e1568c00aaab0000aaab",16),cofactorG2:de("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5",16),singleThread:!!e},a=await Ol(o);return a.terminate=async function(){o.singleThread||(globalThis.curve_bls12381=null,await this.tm.terminate())},e||(globalThis.curve_bls12381=a),a}const Z0=de("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),J0=de("21888242871839275222246405745257275088548364400416034343698204186575808495617");de("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),de("21888242871839275222246405745257275088696311157297823662689037894645226208583");async function X0(e,t,n){let i;if(Vr(e,J0))i=await Pl(t,n);else if(Vr(e,Z0))i=await xl(t,n);else throw new Error(`Curve not supported: ${zr(e)}`);return i}const re=m0,t1=q0;async function $i(e,t,n){const i={};return await pn(e,t,1),i.n8=await e.readULE32(),i.prime=await _i(e,i.n8),i.curve=await X0(i.prime,n),i.nVars=await e.readULE32(),i.nOutputs=await e.readULE32(),i.nPubInputs=await e.readULE32(),i.nPrvInputs=await e.readULE32(),i.nLabels=await e.readULE64(),i.nConstraints=await e.readULE32(),await mn(e),i}var e1=`//
// Copyright 2017 Christian Reitwiessner
// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
//
// 2019 OKIMS
//      ported to solidity 0.6
//      fixed linter warnings
//      added requiere error messages
//
//
// SPDX-License-Identifier: GPL-3.0
pragma solidity ^0.6.11;
library Pairing {
    struct G1Point {
        uint X;
        uint Y;
    }
    // Encoding of field elements is: X[0] * z + X[1]
    struct G2Point {
        uint[2] X;
        uint[2] Y;
    }
    /// @return the generator of G1
    function P1() internal pure returns (G1Point memory) {
        return G1Point(1, 2);
    }
    /// @return the generator of G2
    function P2() internal pure returns (G2Point memory) {
        // Original code point
        return G2Point(
            [11559732032986387107991004021392285783925812861821192530917403151452391805634,
             10857046999023057135944570762232829481370756359578518086990519993285655852781],
            [4082367875863433681332203403145435568316851327593401208105741076214120093531,
             8495653923123431417604973247489272438418190587263600148770280649306958101930]
        );

/*
        // Changed by Jordi point
        return G2Point(
            [10857046999023057135944570762232829481370756359578518086990519993285655852781,
             11559732032986387107991004021392285783925812861821192530917403151452391805634],
            [8495653923123431417604973247489272438418190587263600148770280649306958101930,
             4082367875863433681332203403145435568316851327593401208105741076214120093531]
        );
*/
    }
    /// @return r the negation of p, i.e. p.addition(p.negate()) should be zero.
    function negate(G1Point memory p) internal pure returns (G1Point memory r) {
        // The prime q in the base field F_q for G1
        uint q = 21888242871839275222246405745257275088696311157297823662689037894645226208583;
        if (p.X == 0 && p.Y == 0)
            return G1Point(0, 0);
        return G1Point(p.X, q - (p.Y % q));
    }
    /// @return r the sum of two points of G1
    function addition(G1Point memory p1, G1Point memory p2) internal view returns (G1Point memory r) {
        uint[4] memory input;
        input[0] = p1.X;
        input[1] = p1.Y;
        input[2] = p2.X;
        input[3] = p2.Y;
        bool success;
        // solium-disable-next-line security/no-inline-assembly
        assembly {
            success := staticcall(sub(gas(), 2000), 6, input, 0xc0, r, 0x60)
            // Use "invalid" to make gas estimation work
            switch success case 0 { invalid() }
        }
        require(success,"pairing-add-failed");
    }
    /// @return r the product of a point on G1 and a scalar, i.e.
    /// p == p.scalar_mul(1) and p.addition(p) == p.scalar_mul(2) for all points p.
    function scalar_mul(G1Point memory p, uint s) internal view returns (G1Point memory r) {
        uint[3] memory input;
        input[0] = p.X;
        input[1] = p.Y;
        input[2] = s;
        bool success;
        // solium-disable-next-line security/no-inline-assembly
        assembly {
            success := staticcall(sub(gas(), 2000), 7, input, 0x80, r, 0x60)
            // Use "invalid" to make gas estimation work
            switch success case 0 { invalid() }
        }
        require (success,"pairing-mul-failed");
    }
    /// @return the result of computing the pairing check
    /// e(p1[0], p2[0]) *  .... * e(p1[n], p2[n]) == 1
    /// For example pairing([P1(), P1().negate()], [P2(), P2()]) should
    /// return true.
    function pairing(G1Point[] memory p1, G2Point[] memory p2) internal view returns (bool) {
        require(p1.length == p2.length,"pairing-lengths-failed");
        uint elements = p1.length;
        uint inputSize = elements * 6;
        uint[] memory input = new uint[](inputSize);
        for (uint i = 0; i < elements; i++)
        {
            input[i * 6 + 0] = p1[i].X;
            input[i * 6 + 1] = p1[i].Y;
            input[i * 6 + 2] = p2[i].X[0];
            input[i * 6 + 3] = p2[i].X[1];
            input[i * 6 + 4] = p2[i].Y[0];
            input[i * 6 + 5] = p2[i].Y[1];
        }
        uint[1] memory out;
        bool success;
        // solium-disable-next-line security/no-inline-assembly
        assembly {
            success := staticcall(sub(gas(), 2000), 8, add(input, 0x20), mul(inputSize, 0x20), out, 0x20)
            // Use "invalid" to make gas estimation work
            switch success case 0 { invalid() }
        }
        require(success,"pairing-opcode-failed");
        return out[0] != 0;
    }
    /// Convenience method for a pairing check for two pairs.
    function pairingProd2(G1Point memory a1, G2Point memory a2, G1Point memory b1, G2Point memory b2) internal view returns (bool) {
        G1Point[] memory p1 = new G1Point[](2);
        G2Point[] memory p2 = new G2Point[](2);
        p1[0] = a1;
        p1[1] = b1;
        p2[0] = a2;
        p2[1] = b2;
        return pairing(p1, p2);
    }
    /// Convenience method for a pairing check for three pairs.
    function pairingProd3(
            G1Point memory a1, G2Point memory a2,
            G1Point memory b1, G2Point memory b2,
            G1Point memory c1, G2Point memory c2
    ) internal view returns (bool) {
        G1Point[] memory p1 = new G1Point[](3);
        G2Point[] memory p2 = new G2Point[](3);
        p1[0] = a1;
        p1[1] = b1;
        p1[2] = c1;
        p2[0] = a2;
        p2[1] = b2;
        p2[2] = c2;
        return pairing(p1, p2);
    }
    /// Convenience method for a pairing check for four pairs.
    function pairingProd4(
            G1Point memory a1, G2Point memory a2,
            G1Point memory b1, G2Point memory b2,
            G1Point memory c1, G2Point memory c2,
            G1Point memory d1, G2Point memory d2
    ) internal view returns (bool) {
        G1Point[] memory p1 = new G1Point[](4);
        G2Point[] memory p2 = new G2Point[](4);
        p1[0] = a1;
        p1[1] = b1;
        p1[2] = c1;
        p1[3] = d1;
        p2[0] = a2;
        p2[1] = b2;
        p2[2] = c2;
        p2[3] = d2;
        return pairing(p1, p2);
    }
}
contract Verifier {
    using Pairing for *;
    struct VerifyingKey {
        Pairing.G1Point alfa1;
        Pairing.G2Point beta2;
        Pairing.G2Point gamma2;
        Pairing.G2Point delta2;
        Pairing.G1Point[] IC;
    }
    struct Proof {
        Pairing.G1Point A;
        Pairing.G2Point B;
        Pairing.G1Point C;
    }
    function verifyingKey() internal pure returns (VerifyingKey memory vk) {
        vk.alfa1 = Pairing.G1Point(
            <%=vk_alpha_1[0]%>,
            <%=vk_alpha_1[1]%>
        );

        vk.beta2 = Pairing.G2Point(
            [<%=vk_beta_2[0][1]%>,
             <%=vk_beta_2[0][0]%>],
            [<%=vk_beta_2[1][1]%>,
             <%=vk_beta_2[1][0]%>]
        );
        vk.gamma2 = Pairing.G2Point(
            [<%=vk_gamma_2[0][1]%>,
             <%=vk_gamma_2[0][0]%>],
            [<%=vk_gamma_2[1][1]%>,
             <%=vk_gamma_2[1][0]%>]
        );
        vk.delta2 = Pairing.G2Point(
            [<%=vk_delta_2[0][1]%>,
             <%=vk_delta_2[0][0]%>],
            [<%=vk_delta_2[1][1]%>,
             <%=vk_delta_2[1][0]%>]
        );
        vk.IC = new Pairing.G1Point[](<%=IC.length%>);
        <% for (let i=0; i<IC.length; i++) { %>
        vk.IC[<%=i%>] = Pairing.G1Point( 
            <%=IC[i][0]%>,
            <%=IC[i][1]%>
        );                                      
        <% } %>
    }
    function verify(uint[] memory input, Proof memory proof) internal view returns (uint) {
        uint256 snark_scalar_field = 21888242871839275222246405745257275088548364400416034343698204186575808495617;
        VerifyingKey memory vk = verifyingKey();
        require(input.length + 1 == vk.IC.length,"verifier-bad-input");
        // Compute the linear combination vk_x
        Pairing.G1Point memory vk_x = Pairing.G1Point(0, 0);
        for (uint i = 0; i < input.length; i++) {
            require(input[i] < snark_scalar_field,"verifier-gte-snark-scalar-field");
            vk_x = Pairing.addition(vk_x, Pairing.scalar_mul(vk.IC[i + 1], input[i]));
        }
        vk_x = Pairing.addition(vk_x, vk.IC[0]);
        if (!Pairing.pairingProd4(
            Pairing.negate(proof.A), proof.B,
            vk.alfa1, vk.beta2,
            vk_x, vk.gamma2,
            proof.C, vk.delta2
        )) return 1;
        return 0;
    }
    /// @return r  bool true if proof is valid
    function verifyProof(
            uint[2] memory a,
            uint[2][2] memory b,
            uint[2] memory c,
            uint[<%=IC.length-1%>] memory input
        ) public view returns (bool r) {
        Proof memory proof;
        proof.A = Pairing.G1Point(a[0], a[1]);
        proof.B = Pairing.G2Point([b[0][0], b[0][1]], [b[1][0], b[1][1]]);
        proof.C = Pairing.G1Point(c[0], c[1]);
        uint[] memory inputValues = new uint[](input.length);
        for(uint i = 0; i < input.length; i++){
            inputValues[i] = input[i];
        }
        if (verify(inputValues, proof) == 0) {
            return true;
        } else {
            return false;
        }
    }
}
`,n1=`// SPDX-License-Identifier: GPL-3.0
/*
    Copyright 2021 0KIMS association.

    This file is generated with [snarkJS](https://github.com/iden3/snarkjs).

    snarkJS is a free software: you can redistribute it and/or modify it
    under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    snarkJS is distributed in the hope that it will be useful, but WITHOUT
    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public
    License for more details.

    You should have received a copy of the GNU General Public License
    along with snarkJS. If not, see <https://www.gnu.org/licenses/>.
*/


pragma solidity >=0.7.0 <0.9.0;

contract PlonkVerifier {
    
    uint<%=2**Math.ceil(Math.log2(power))%> constant n =   <%=2**power%>;
    uint16 constant nPublic =  <%=nPublic%>;
    uint16 constant nLagrange = <%=Math.max(nPublic, 1)%>;
    
    uint256 constant Qmx = <%=Qm[0]%>;
    uint256 constant Qmy = <%=Qm[0] == "0" ? "0" : Qm[1]%>;
    uint256 constant Qlx = <%=Ql[0]%>;
    uint256 constant Qly = <%=Ql[0] == "0" ? "0" : Ql[1]%>;
    uint256 constant Qrx = <%=Qr[0]%>;
    uint256 constant Qry = <%=Qr[0] == "0" ? "0" : Qr[1]%>;
    uint256 constant Qox = <%=Qo[0]%>;
    uint256 constant Qoy = <%=Qo[0] == "0" ? "0" : Qo[1]%>;
    uint256 constant Qcx = <%=Qc[0]%>;
    uint256 constant Qcy = <%=Qc[0] == "0" ? "0" : Qc[1]%>;
    uint256 constant S1x = <%=S1[0]%>;
    uint256 constant S1y = <%=S1[0] == "0" ? "0" : S1[1]%>;
    uint256 constant S2x = <%=S2[0]%>;
    uint256 constant S2y = <%=S2[0] == "0" ? "0" : S2[1]%>;
    uint256 constant S3x = <%=S3[0]%>;
    uint256 constant S3y = <%=S3[0] == "0" ? "0" : S3[1]%>;
    uint256 constant k1 = 2;
    uint256 constant k2 = 3;
    uint256 constant X2x1 = <%=X_2[0][0]%>;
    uint256 constant X2x2 = <%=X_2[0][1]%>;
    uint256 constant X2y1 = <%=X_2[1][0]%>;
    uint256 constant X2y2 = <%=X_2[1][1]%>;
    
    uint256 constant q = 21888242871839275222246405745257275088548364400416034343698204186575808495617;
    uint256 constant qf = 21888242871839275222246405745257275088696311157297823662689037894645226208583;
    uint256 constant w1 = <%=w%>;    
    
    uint256 constant G1x = 1;
    uint256 constant G1y = 2;
    uint256 constant G2x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
    uint256 constant G2x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
    uint256 constant G2y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
    uint256 constant G2y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;
    uint16 constant pA = 32;
    uint16 constant pB = 96;
    uint16 constant pC = 160;
    uint16 constant pZ = 224;
    uint16 constant pT1 = 288;
    uint16 constant pT2 = 352;
    uint16 constant pT3 = 416;
    uint16 constant pWxi = 480;
    uint16 constant pWxiw = 544;
    uint16 constant pEval_a = 608;
    uint16 constant pEval_b = 640;
    uint16 constant pEval_c = 672;
    uint16 constant pEval_s1 = 704;
    uint16 constant pEval_s2 = 736;
    uint16 constant pEval_zw = 768;
    uint16 constant pEval_r = 800;
    
    uint16 constant pAlpha = 0;
    uint16 constant pBeta = 32;
    uint16 constant pGamma = 64;
    uint16 constant pXi = 96;
    uint16 constant pXin = 128;
    uint16 constant pBetaXi = 160;
    uint16 constant pV1 = 192;
    uint16 constant pV2 = 224;
    uint16 constant pV3 = 256;
    uint16 constant pV4 = 288;
    uint16 constant pV5 = 320;
    uint16 constant pV6 = 352;
    uint16 constant pU = 384;
    uint16 constant pPl = 416;
    uint16 constant pEval_t = 448;
    uint16 constant pA1 = 480;
    uint16 constant pB1 = 544;
    uint16 constant pZh = 608;
    uint16 constant pZhInv = 640;
    <% for (let i=1; i<=Math.max(nPublic, 1); i++) { %>
    uint16 constant pEval_l<%=i%> = <%=640+i*32%>;
    <% } %>
    
    
    uint16 constant lastMem = <%=672+32*Math.max(nPublic,1)%>;


    function verifyProof(bytes memory proof, uint[] memory pubSignals) public view returns (bool) {
        assembly {
            /////////
            // Computes the inverse using the extended euclidean algorithm
            /////////
            function inverse(a, q) -> inv {
                let t := 0     
                let newt := 1
                let r := q     
                let newr := a
                let quotient
                let aux
                
                for { } newr { } {
                    quotient := sdiv(r, newr)
                    aux := sub(t, mul(quotient, newt))
                    t:= newt
                    newt:= aux
                    
                    aux := sub(r,mul(quotient, newr))
                    r := newr
                    newr := aux
                }
                
                if gt(r, 1) { revert(0,0) }
                if slt(t, 0) { t:= add(t, q) }

                inv := t
            }
            
            ///////
            // Computes the inverse of an array of values
            // See https://vitalik.ca/general/2018/07/21/starks_part_3.html in section where explain fields operations
            //////
            function inverseArray(pVals, n) {
    
                let pAux := mload(0x40)     // Point to the next free position
                let pIn := pVals
                let lastPIn := add(pVals, mul(n, 32))  // Read n elemnts
                let acc := mload(pIn)       // Read the first element
                pIn := add(pIn, 32)         // Point to the second element
                let inv
    
                
                for { } lt(pIn, lastPIn) { 
                    pAux := add(pAux, 32) 
                    pIn := add(pIn, 32)
                } 
                {
                    mstore(pAux, acc)
                    acc := mulmod(acc, mload(pIn), q)
                }
                acc := inverse(acc, q)
                
                // At this point pAux pint to the next free position we substract 1 to point to the last used
                pAux := sub(pAux, 32)
                // pIn points to the n+1 element, we substract to point to n
                pIn := sub(pIn, 32)
                lastPIn := pVals  // We don't process the first element 
                for { } gt(pIn, lastPIn) { 
                    pAux := sub(pAux, 32) 
                    pIn := sub(pIn, 32)
                } 
                {
                    inv := mulmod(acc, mload(pAux), q)
                    acc := mulmod(acc, mload(pIn), q)
                    mstore(pIn, inv)
                }
                // pIn points to first element, we just set it.
                mstore(pIn, acc)
            }
            
            function checkField(v) {
                if iszero(lt(v, q)) {
                    mstore(0, 0)
                    return(0,0x20)
                }
            }
            
            function checkInput(pProof) {
                if iszero(eq(mload(pProof), 800 )) {
                    mstore(0, 0)
                    return(0,0x20)
                }
                checkField(mload(add(pProof, pEval_a)))
                checkField(mload(add(pProof, pEval_b)))
                checkField(mload(add(pProof, pEval_c)))
                checkField(mload(add(pProof, pEval_s1)))
                checkField(mload(add(pProof, pEval_s2)))
                checkField(mload(add(pProof, pEval_zw)))
                checkField(mload(add(pProof, pEval_r)))

                // Points are checked in the point operations precompiled smart contracts
            }
            
            function calculateChallanges(pProof, pMem) {
            
                let a
                let b
                
                b := mod(keccak256(add(pProof, pA), 192), q) 
                mstore( add(pMem, pBeta), b)
                mstore( add(pMem, pGamma), mod(keccak256(add(pMem, pBeta), 32), q))
                mstore( add(pMem, pAlpha), mod(keccak256(add(pProof, pZ), 64), q))
                
                a := mod(keccak256(add(pProof, pT1), 192), q)
                mstore( add(pMem, pXi), a)
                mstore( add(pMem, pBetaXi), mulmod(b, a, q))
                <%for (let i=0; i<power;i++) {%>
                a:= mulmod(a, a, q)
                <%}%>
                mstore( add(pMem, pXin), a)
                a:= mod(add(sub(a, 1),q), q)
                mstore( add(pMem, pZh), a)
                mstore( add(pMem, pZhInv), a)  // We will invert later together with lagrange pols
                
                let v1 := mod(keccak256(add(pProof, pEval_a), 224), q)
                mstore( add(pMem, pV1), v1)
                a := mulmod(v1, v1, q)
                mstore( add(pMem, pV2), a)
                a := mulmod(a, v1, q)
                mstore( add(pMem, pV3), a)
                a := mulmod(a, v1, q)
                mstore( add(pMem, pV4), a)
                a := mulmod(a, v1, q)
                mstore( add(pMem, pV5), a)
                a := mulmod(a, v1, q)
                mstore( add(pMem, pV6), a)
                
                mstore( add(pMem, pU), mod(keccak256(add(pProof, pWxi), 128), q))
            }
            
            function calculateLagrange(pMem) {

                let w := 1                
                <% for (let i=1; i<=Math.max(nPublic, 1); i++) { %>
                mstore(
                    add(pMem, pEval_l<%=i%>), 
                    mulmod(
                        n, 
                        mod(
                            add(
                                sub(
                                    mload(add(pMem, pXi)), 
                                    w
                                ), 
                                q
                            ),
                            q
                        ), 
                        q
                    )
                )
                <% if (i<Math.max(nPublic, 1)) { %>
                w := mulmod(w, w1, q)
                <% } %>
                <% } %>
                
                inverseArray(add(pMem, pZhInv), <%=Math.max(nPublic, 1)+1%> )
                
                let zh := mload(add(pMem, pZh))
                w := 1
                <% for (let i=1; i<=Math.max(nPublic, 1); i++) { %>
                <% if (i==1) { %>
                mstore(
                    add(pMem, pEval_l1 ), 
                    mulmod(
                        mload(add(pMem, pEval_l1 )),
                        zh,
                        q
                    )
                )
                <% } else { %>
                mstore(
                    add(pMem, pEval_l<%=i%>), 
                    mulmod(
                        w,
                        mulmod(
                            mload(add(pMem, pEval_l<%=i%>)),
                            zh,
                            q
                        ),
                        q
                    )
                )
                <% } %>
                <% if (i<Math.max(nPublic, 1)) { %>
                w := mulmod(w, w1, q)
                <% } %>
                <% } %>


            }
            
            function calculatePl(pMem, pPub) {
                let pl := 0
                
                <% for (let i=0; i<nPublic; i++) { %> 
                pl := mod(
                    add(
                        sub(
                            pl,  
                            mulmod(
                                mload(add(pMem, pEval_l<%=i+1%>)),
                                mload(add(pPub, <%=32+i*32%>)),
                                q
                            )
                        ),
                        q
                    ),
                    q
                )
                <% } %>
                
                mstore(add(pMem, pPl), pl)
                

            }

            function calculateT(pProof, pMem) {
                let t
                let t1
                let t2
                t := addmod(
                    mload(add(pProof, pEval_r)), 
                    mload(add(pMem, pPl)), 
                    q
                )
                
                t1 := mulmod(
                    mload(add(pProof, pEval_s1)),
                    mload(add(pMem, pBeta)),
                    q
                )

                t1 := addmod(
                    t1,
                    mload(add(pProof, pEval_a)),
                    q
                )
                
                t1 := addmod(
                    t1,
                    mload(add(pMem, pGamma)),
                    q
                )

                t2 := mulmod(
                    mload(add(pProof, pEval_s2)),
                    mload(add(pMem, pBeta)),
                    q
                )

                t2 := addmod(
                    t2,
                    mload(add(pProof, pEval_b)),
                    q
                )
                
                t2 := addmod(
                    t2,
                    mload(add(pMem, pGamma)),
                    q
                )
                
                t1 := mulmod(t1, t2, q)
                
                t2 := addmod(
                    mload(add(pProof, pEval_c)),
                    mload(add(pMem, pGamma)),
                    q
                )

                t1 := mulmod(t1, t2, q)
                t1 := mulmod(t1, mload(add(pProof, pEval_zw)), q)
                t1 := mulmod(t1, mload(add(pMem, pAlpha)), q)
                
                t2 := mulmod(
                    mload(add(pMem, pEval_l1)), 
                    mload(add(pMem, pAlpha)), 
                    q
                )

                t2 := mulmod(
                    t2, 
                    mload(add(pMem, pAlpha)), 
                    q
                )

                t1 := addmod(t1, t2, q)
                
                t := mod(sub(add(t, q), t1), q)
                t := mulmod(t, mload(add(pMem, pZhInv)), q)
                
                mstore( add(pMem, pEval_t) , t)

            }
            
            function g1_set(pR, pP) {
                mstore(pR, mload(pP))
                mstore(add(pR, 32), mload(add(pP,32)))
            }

            function g1_acc(pR, pP) {
                let mIn := mload(0x40)
                mstore(mIn, mload(pR))
                mstore(add(mIn,32), mload(add(pR, 32)))
                mstore(add(mIn,64), mload(pP))
                mstore(add(mIn,96), mload(add(pP, 32)))

                let success := staticcall(sub(gas(), 2000), 6, mIn, 128, pR, 64)
                
                if iszero(success) {
                    mstore(0, 0)
                    return(0,0x20)
                }
            }

            function g1_mulAcc(pR, pP, s) {
                let success
                let mIn := mload(0x40)
                mstore(mIn, mload(pP))
                mstore(add(mIn,32), mload(add(pP, 32)))
                mstore(add(mIn,64), s)

                success := staticcall(sub(gas(), 2000), 7, mIn, 96, mIn, 64)
                
                if iszero(success) {
                    mstore(0, 0)
                    return(0,0x20)
                }
                
                mstore(add(mIn,64), mload(pR))
                mstore(add(mIn,96), mload(add(pR, 32)))

                success := staticcall(sub(gas(), 2000), 6, mIn, 128, pR, 64)
                
                if iszero(success) {
                    mstore(0, 0)
                    return(0,0x20)
                }
                
            }

            function g1_mulAccC(pR, x, y, s) {
                let success
                let mIn := mload(0x40)
                mstore(mIn, x)
                mstore(add(mIn,32), y)
                mstore(add(mIn,64), s)

                success := staticcall(sub(gas(), 2000), 7, mIn, 96, mIn, 64)
                
                if iszero(success) {
                    mstore(0, 0)
                    return(0,0x20)
                }
                
                mstore(add(mIn,64), mload(pR))
                mstore(add(mIn,96), mload(add(pR, 32)))

                success := staticcall(sub(gas(), 2000), 6, mIn, 128, pR, 64)
                
                if iszero(success) {
                    mstore(0, 0)
                    return(0,0x20)
                }
            }

            function g1_mulSetC(pR, x, y, s) {
                let success
                let mIn := mload(0x40)
                mstore(mIn, x)
                mstore(add(mIn,32), y)
                mstore(add(mIn,64), s)

                success := staticcall(sub(gas(), 2000), 7, mIn, 96, pR, 64)
                
                if iszero(success) {
                    mstore(0, 0)
                    return(0,0x20)
                }
            }


            function calculateA1(pProof, pMem) {
                let p := add(pMem, pA1)
                g1_set(p, add(pProof, pWxi))
                g1_mulAcc(p, add(pProof, pWxiw), mload(add(pMem, pU)))
            }
            
            
            function calculateB1(pProof, pMem) {
                let s
                let s1
                let p := add(pMem, pB1)
                
                // Calculate D
                s := mulmod( mload(add(pProof, pEval_a)), mload(add(pMem, pV1)), q)
                g1_mulSetC(p, Qlx, Qly, s)

                s := mulmod( s, mload(add(pProof, pEval_b)), q)                
                g1_mulAccC(p, Qmx, Qmy, s)

                s := mulmod( mload(add(pProof, pEval_b)), mload(add(pMem, pV1)), q)
                g1_mulAccC(p, Qrx, Qry, s)
                
                s := mulmod( mload(add(pProof, pEval_c)), mload(add(pMem, pV1)), q)
                g1_mulAccC(p, Qox, Qoy, s)

                s :=mload(add(pMem, pV1))
                g1_mulAccC(p, Qcx, Qcy, s)

                s := addmod(mload(add(pProof, pEval_a)), mload(add(pMem, pBetaXi)), q)
                s := addmod(s, mload(add(pMem, pGamma)), q)
                s1 := mulmod(k1, mload(add(pMem, pBetaXi)), q)
                s1 := addmod(s1, mload(add(pProof, pEval_b)), q)
                s1 := addmod(s1, mload(add(pMem, pGamma)), q)
                s := mulmod(s, s1, q)
                s1 := mulmod(k2, mload(add(pMem, pBetaXi)), q)
                s1 := addmod(s1, mload(add(pProof, pEval_c)), q)
                s1 := addmod(s1, mload(add(pMem, pGamma)), q)
                s := mulmod(s, s1, q)
                s := mulmod(s, mload(add(pMem, pAlpha)), q)
                s := mulmod(s, mload(add(pMem, pV1)), q)
                s1 := mulmod(mload(add(pMem, pEval_l1)), mload(add(pMem, pAlpha)), q)
                s1 := mulmod(s1, mload(add(pMem, pAlpha)), q)
                s1 := mulmod(s1, mload(add(pMem, pV1)), q)
                s := addmod(s, s1, q)
                s := addmod(s, mload(add(pMem, pU)), q)
                g1_mulAcc(p, add(pProof, pZ), s)
                
                s := mulmod(mload(add(pMem, pBeta)), mload(add(pProof, pEval_s1)), q)
                s := addmod(s, mload(add(pProof, pEval_a)), q)
                s := addmod(s, mload(add(pMem, pGamma)), q)
                s1 := mulmod(mload(add(pMem, pBeta)), mload(add(pProof, pEval_s2)), q)
                s1 := addmod(s1, mload(add(pProof, pEval_b)), q)
                s1 := addmod(s1, mload(add(pMem, pGamma)), q)
                s := mulmod(s, s1, q)
                s := mulmod(s, mload(add(pMem, pAlpha)), q)
                s := mulmod(s, mload(add(pMem, pV1)), q)
                s := mulmod(s, mload(add(pMem, pBeta)), q)
                s := mulmod(s, mload(add(pProof, pEval_zw)), q)
                s := mod(sub(q, s), q)
                g1_mulAccC(p, S3x, S3y, s)


                // calculate F
                g1_acc(p , add(pProof, pT1))

                s := mload(add(pMem, pXin))
                g1_mulAcc(p, add(pProof, pT2), s)
                
                s := mulmod(s, s, q)
                g1_mulAcc(p, add(pProof, pT3), s)
                
                g1_mulAcc(p, add(pProof, pA), mload(add(pMem, pV2)))
                g1_mulAcc(p, add(pProof, pB), mload(add(pMem, pV3)))
                g1_mulAcc(p, add(pProof, pC), mload(add(pMem, pV4)))
                g1_mulAccC(p, S1x, S1y, mload(add(pMem, pV5)))
                g1_mulAccC(p, S2x, S2y, mload(add(pMem, pV6)))
                
                // calculate E
                s := mload(add(pMem, pEval_t))
                s := addmod(s, mulmod(mload(add(pProof, pEval_r)), mload(add(pMem, pV1)), q), q)
                s := addmod(s, mulmod(mload(add(pProof, pEval_a)), mload(add(pMem, pV2)), q), q)
                s := addmod(s, mulmod(mload(add(pProof, pEval_b)), mload(add(pMem, pV3)), q), q)
                s := addmod(s, mulmod(mload(add(pProof, pEval_c)), mload(add(pMem, pV4)), q), q)
                s := addmod(s, mulmod(mload(add(pProof, pEval_s1)), mload(add(pMem, pV5)), q), q)
                s := addmod(s, mulmod(mload(add(pProof, pEval_s2)), mload(add(pMem, pV6)), q), q)
                s := addmod(s, mulmod(mload(add(pProof, pEval_zw)), mload(add(pMem, pU)), q), q)
                s := mod(sub(q, s), q)
                g1_mulAccC(p, G1x, G1y, s)
                
                
                // Last part of B
                s := mload(add(pMem, pXi))
                g1_mulAcc(p, add(pProof, pWxi), s)

                s := mulmod(mload(add(pMem, pU)), mload(add(pMem, pXi)), q)
                s := mulmod(s, w1, q)
                g1_mulAcc(p, add(pProof, pWxiw), s)

            }
            
            function checkPairing(pMem) -> isOk {
                let mIn := mload(0x40)
                mstore(mIn, mload(add(pMem, pA1)))
                mstore(add(mIn,32), mload(add(add(pMem, pA1), 32)))
                mstore(add(mIn,64), X2x2)
                mstore(add(mIn,96), X2x1)
                mstore(add(mIn,128), X2y2)
                mstore(add(mIn,160), X2y1)
                mstore(add(mIn,192), mload(add(pMem, pB1)))
                let s := mload(add(add(pMem, pB1), 32))
                s := mod(sub(qf, s), qf)
                mstore(add(mIn,224), s)
                mstore(add(mIn,256), G2x2)
                mstore(add(mIn,288), G2x1)
                mstore(add(mIn,320), G2y2)
                mstore(add(mIn,352), G2y1)
                
                let success := staticcall(sub(gas(), 2000), 8, mIn, 384, mIn, 0x20)
                
                isOk := and(success, mload(mIn))
            }
            
            let pMem := mload(0x40)
            mstore(0x40, add(pMem, lastMem))
            
            checkInput(proof)
            calculateChallanges(proof, pMem)
            calculateLagrange(pMem)
            calculatePl(pMem, pubSignals)
            calculateT(proof, pMem)
            calculateA1(proof, pMem)
            calculateB1(proof, pMem)
            let isValid := checkPairing(pMem)
            
            mstore(0x40, sub(pMem, lastMem))
            mstore(0, isValid)
            return(0,0x20)
        }
        
    }
}`;re.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),re.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");const i1=re.e("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),o1=re.e("21888242871839275222246405745257275088696311157297823662689037894645226208583");async function Hn(e){let t;if(re.eq(e,o1))t=await Pl();else if(re.eq(e,i1))t=await xl();else throw new Error(`Curve not supported: ${re.toString(e)}`);return t}var on={exports:{}},r1=Ml;class Nl extends Error{}Nl.prototype.name="AssertionError";function Ml(e,t){if(!e){var n=new Nl(t);throw Error.captureStackTrace&&Error.captureStackTrace(n,Ml),n}}function Ul(e){return e.length}function a1(e){const t=e.byteLength;let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}function s1(e,t,n=0,i=Ul(t)){const o=Math.min(i,e.byteLength-n);for(let a=0;a<o;a++)e[n+a]=t.charCodeAt(a);return o}var c1={byteLength:Ul,toString:a1,write:s1};const pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zn=new Uint8Array(256);for(let e=0;e<pi.length;e++)zn[pi.charCodeAt(e)]=e;zn[45]=62,zn[95]=63;function Dl(e){let t=e.length;return e.charCodeAt(t-1)===61&&t--,t>1&&e.charCodeAt(t-1)===61&&t--,t*3>>>2}function l1(e){const t=e.byteLength;let n="";for(let i=0;i<t;i+=3)n+=pi[e[i]>>2]+pi[(e[i]&3)<<4|e[i+1]>>4]+pi[(e[i+1]&15)<<2|e[i+2]>>6]+pi[e[i+2]&63];return t%3==2?n=n.substring(0,n.length-1)+"=":t%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function u1(e,t,n=0,i=Dl(t)){const o=Math.min(i,e.byteLength-n);for(let a=0,s=0;a<o;a+=4){const d=zn[t.charCodeAt(a)],g=zn[t.charCodeAt(a+1)],f=zn[t.charCodeAt(a+2)],l=zn[t.charCodeAt(a+3)];e[s++]=d<<2|g>>4,e[s++]=(g&15)<<4|f>>2,e[s++]=(f&3)<<6|l&63}return o}var f1={byteLength:Dl,toString:l1,write:u1};function Gl(e){return e.length>>>1}function d1(e){const t=e.byteLength;e=new DataView(e.buffer,e.byteOffset,t);let n="",i=0;for(let o=t-t%4;i<o;i+=4)n+=e.getUint32(i).toString(16).padStart(8,"0");for(;i<t;i++)n+=e.getUint8(i).toString(16).padStart(2,"0");return n}function h1(e,t,n=0,i=Gl(t)){const o=Math.min(i,e.byteLength-n);for(let a=0;a<o;a++){const s=kl(t.charCodeAt(a*2)),d=kl(t.charCodeAt(a*2+1));if(s===void 0||d===void 0)return e.subarray(0,a);e[n+a]=s<<4|d}return o}var _1={byteLength:Gl,toString:d1,write:h1};function kl(e){if(e>=48&&e<=57)return e-48;if(e>=65&&e<=70)return e-65+10;if(e>=97&&e<=102)return e-97+10}function ua(e){let t=0;for(let n=0,i=e.length;n<i;n++){const o=e.charCodeAt(n);if(o>=55296&&o<=56319&&n+1<i){const a=e.charCodeAt(n+1);if(a>=56320&&a<=57343){t+=4,n++;continue}}o<=127?t+=1:o<=2047?t+=2:t+=3}return t}let fa;if(typeof TextDecoder!="undefined"){const e=new TextDecoder;fa=function(n){return e.decode(n)}}else fa=function(t){const n=t.byteLength;let i="",o=0;for(;o<n;){let a=t[o];if(a<=127){i+=String.fromCharCode(a),o++;continue}let s=0,d=0;if(a<=223?(s=1,d=a&31):a<=239?(s=2,d=a&15):a<=244&&(s=3,d=a&7),n-o-s>0){let g=0;for(;g<s;)a=t[o+g+1],d=d<<6|a&63,g+=1}else d=65533,s=n-o;i+=String.fromCodePoint(d),o+=s+1}return i};let da;if(typeof TextEncoder!="undefined"){const e=new TextEncoder;da=function(n,i,o=0,a=ua(i)){const s=Math.min(a,n.byteLength-o);return e.encodeInto(i,n.subarray(o,o+s)),s}}else da=function(t,n,i=0,o=ua(n)){const a=Math.min(o,t.byteLength-i);t=t.subarray(i,i+a);let s=0,d=0;for(;s<n.length;){const g=n.codePointAt(s);if(g<=127){t[d++]=g,s++;continue}let f=0,l=0;for(g<=2047?(f=6,l=192):g<=65535?(f=12,l=224):g<=2097151&&(f=18,l=240),t[d++]=l|g>>f,f-=6;f>=0;)t[d++]=128|g>>f&63,f-=6;s+=g>=65536?2:1}return a};var g1={byteLength:ua,toString:fa,write:da};function Wl(e){return e.length*2}function p1(e){const t=e.byteLength;let n="";for(let i=0;i<t-1;i+=2)n+=String.fromCharCode(e[i]+e[i+1]*256);return n}function m1(e,t,n=0,i=Wl(t)){const o=Math.min(i,e.byteLength-n);let a=o;for(let s=0;s<t.length&&!((a-=2)<0);++s){const d=t.charCodeAt(s),g=d>>8,f=d%256;e[n+s*2]=f,e[n+s*2+1]=g}return o}var y1={byteLength:Wl,toString:p1,write:m1};const A1=c1,L1=f1,I1=_1,E1=g1,w1=y1;function wo(e){switch(e){case"ascii":return A1;case"base64":return L1;case"hex":return I1;case"utf8":case"utf-8":case void 0:return E1;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w1;default:throw new Error(`Unknown encoding: ${e}`)}}function ql(e){return e instanceof Uint8Array}function S1(e,t,n){const i=new Uint8Array(e);return t!==void 0&&t(i,t,0,i.byteLength,n),i}function v1(e){return new Uint8Array(e)}function C1(e){return new Uint8Array(e)}function b1(e,t){return wo(t).byteLength(e)}function F1(e,t){if(e===t)return 0;const n=Math.min(e.byteLength,t.byteLength);e=new DataView(e.buffer,e.byteOffset,e.byteLength),t=new DataView(t.buffer,t.byteOffset,t.byteLength);let i=0;for(let o=n-n%4;i<o;i+=4){const a=e.getUint32(i),s=t.getUint32(i);if(a<s)return-1;if(a>s)return 1}for(;i<n;i++){const o=e.getUint8(i),a=t.getUint8(i);if(o<a)return-1;if(o>a)return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}function B1(e,t){t===void 0&&(t=e.reduce((i,o)=>i+o.byteLength,0));const n=new Uint8Array(t);return e.reduce((i,o)=>(n.set(o,i),i+o.byteLength),0),n}function T1(e,t,n=0,i=0,o=e.byteLength){if(o>0&&o<i||o===i||e.byteLength===0||t.byteLength===0)return 0;if(n<0)throw new RangeError("targetStart is out of range");if(i<0||i>=e.byteLength)throw new RangeError("sourceStart is out of range");if(o<0)throw new RangeError("sourceEnd is out of range");n>=t.byteLength&&(n=t.byteLength),o>e.byteLength&&(o=e.byteLength),t.byteLength-n<o-i&&(o=t.length-n+i);const a=o-i;return e===t?t.copyWithin(n,i,o):t.set(e.subarray(i,o),n),a}function R1(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const n=e.byteLength;e=new DataView(e.buffer,e.byteOffset,e.byteLength),t=new DataView(t.buffer,t.byteOffset,t.byteLength);let i=0;for(let o=n-n%4;i<o;i+=4)if(e.getUint32(i)!==t.getUint32(i))return!1;for(;i<n;i++)if(e.getUint8(i)!==t.getUint8(i))return!1;return!0}function O1(e,t,n,i,o){if(typeof t=="string"?typeof n=="string"?(o=n,n=0,i=e.byteLength):typeof i=="string"&&(o=i,i=e.byteLength):typeof val=="number"?t=t&255:typeof val=="boolean"&&(t=+t),n<0||e.byteLength<n||e.byteLength<i)throw new RangeError("Out of range index");if(n===void 0&&(n=0),i===void 0&&(i=e.byteLength),i<=n)return e;if(t||(t=0),typeof t=="number")for(let a=n;a<i;++a)e[a]=t;else{t=ql(t)?t:Ql(t,o);const a=t.byteLength;for(let s=0;s<i-n;++s)e[s+n]=t[s%a]}return e}function Ql(e,t,n){return typeof e=="string"?P1(e,t):Array.isArray(e)?x1(e):ArrayBuffer.isView(e)?N1(e):M1(e,t,n)}function P1(e,t){const n=wo(t),i=new Uint8Array(n.byteLength(e));return n.write(i,e,0,i.byteLength),i}function x1(e){const t=new Uint8Array(e.length);return t.set(e),t}function N1(e){const t=new Uint8Array(e.byteLength);return t.set(e),t}function M1(e,t,n){return new Uint8Array(e,t,n)}function $n(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function U1(e){const t=e.byteLength;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)$n(e,n,n+1);return e}function D1(e){const t=e.byteLength;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)$n(e,n,n+3),$n(e,n+1,n+2);return e}function G1(e){const t=e.byteLength;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)$n(e,n,n+7),$n(e,n+1,n+6),$n(e,n+2,n+5),$n(e,n+3,n+4);return e}function k1(e){return e}function W1(e,t,n=0,i=e.byteLength){const o=e.byteLength;return n>=o||i<=n?"":(n<0&&(n=0),i>o&&(i=o),(n!==0||i<o)&&(e=e.subarray(n,i)),wo(t).toString(e))}function q1(e,t,n,i,o){return n===void 0?o="utf8":i===void 0&&typeof n=="string"?(o=n,n=void 0):o===void 0&&typeof i=="string"&&(o=i,i=void 0),wo(o).write(e,t,n,i)}var Q1={isBuffer:ql,alloc:S1,allocUnsafe:v1,allocUnsafeSlow:C1,byteLength:b1,compare:F1,concat:B1,copy:T1,equals:R1,fill:O1,from:Ql,swap16:U1,swap32:D1,swap64:G1,toBuffer:k1,toString:W1,write:q1},H1=(e,t)=>function(){return t||(0,e[Object.keys(e)[0]])((t={exports:{}}).exports,t),t.exports},z1=(()=>{for(var e=new Uint8Array(128),t=0;t<64;t++)e[t<26?t+65:t<52?t+71:t<62?t-4:t*4-205]=t;return n=>{for(var i=n.length,o=new Uint8Array((i-(n[i-1]=="=")-(n[i-2]=="="))*3/4|0),a=0,s=0;a<i;){var d=e[n.charCodeAt(a++)],g=e[n.charCodeAt(a++)],f=e[n.charCodeAt(a++)],l=e[n.charCodeAt(a++)];o[s++]=d<<2|g>>4,o[s++]=g<<4|f>>2,o[s++]=f<<6|l}return o}})(),$1=H1({"wasm-binary:./blake2b.wat"(e,t){t.exports=z1("AGFzbQEAAAABEANgAn9/AGADf39/AGABfwADBQQAAQICBQUBAQroBwdNBQZtZW1vcnkCAAxibGFrZTJiX2luaXQAAA5ibGFrZTJiX3VwZGF0ZQABDWJsYWtlMmJfZmluYWwAAhBibGFrZTJiX2NvbXByZXNzAAMKvz8EwAIAIABCADcDACAAQgA3AwggAEIANwMQIABCADcDGCAAQgA3AyAgAEIANwMoIABCADcDMCAAQgA3AzggAEIANwNAIABCADcDSCAAQgA3A1AgAEIANwNYIABCADcDYCAAQgA3A2ggAEIANwNwIABCADcDeCAAQoiS853/zPmE6gBBACkDAIU3A4ABIABCu86qptjQ67O7f0EIKQMAhTcDiAEgAEKr8NP0r+68tzxBECkDAIU3A5ABIABC8e30+KWn/aelf0EYKQMAhTcDmAEgAELRhZrv+s+Uh9EAQSApAwCFNwOgASAAQp/Y+dnCkdqCm39BKCkDAIU3A6gBIABC6/qG2r+19sEfQTApAwCFNwOwASAAQvnC+JuRo7Pw2wBBOCkDAIU3A7gBIABCADcDwAEgAEIANwPIASAAQgA3A9ABC20BA38gAEHAAWohAyAAQcgBaiEEIAQpAwCnIQUCQANAIAEgAkYNASAFQYABRgRAIAMgAykDACAFrXw3AwBBACEFIAAQAwsgACAFaiABLQAAOgAAIAVBAWohBSABQQFqIQEMAAsLIAQgBa03AwALYQEDfyAAQcABaiEBIABByAFqIQIgASABKQMAIAIpAwB8NwMAIABCfzcD0AEgAikDAKchAwJAA0AgA0GAAUYNASAAIANqQQA6AAAgA0EBaiEDDAALCyACIAOtNwMAIAAQAwuqOwIgfgl/IABBgAFqISEgAEGIAWohIiAAQZABaiEjIABBmAFqISQgAEGgAWohJSAAQagBaiEmIABBsAFqIScgAEG4AWohKCAhKQMAIQEgIikDACECICMpAwAhAyAkKQMAIQQgJSkDACEFICYpAwAhBiAnKQMAIQcgKCkDACEIQoiS853/zPmE6gAhCUK7zqqm2NDrs7t/IQpCq/DT9K/uvLc8IQtC8e30+KWn/aelfyEMQtGFmu/6z5SH0QAhDUKf2PnZwpHagpt/IQ5C6/qG2r+19sEfIQ9C+cL4m5Gjs/DbACEQIAApAwAhESAAKQMIIRIgACkDECETIAApAxghFCAAKQMgIRUgACkDKCEWIAApAzAhFyAAKQM4IRggACkDQCEZIAApA0ghGiAAKQNQIRsgACkDWCEcIAApA2AhHSAAKQNoIR4gACkDcCEfIAApA3ghICANIAApA8ABhSENIA8gACkD0AGFIQ8gASAFIBF8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSASfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgE3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBR8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAVfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgFnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBd8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAYfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgGXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBp8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAbfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgHHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIB18fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAefHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgH3x8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFICB8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAffHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgG3x8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBV8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAZfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgGnx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHICB8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAefHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggF3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBJ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAdfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgEXx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBN8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAcfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGHx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBZ8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAUfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgHHx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBl8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAdfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgEXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBZ8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByATfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggIHx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIB58fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAbfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgH3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBR8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAXfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggGHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBJ8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAafHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFXx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBh8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAafHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgFHx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBJ8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAefHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHXx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBx8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAffHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgE3x8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBd8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAWfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgG3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBV8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCARfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgIHx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBl8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAafHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEXx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBZ8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAYfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgE3x8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBV8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAbfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggIHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIB98fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiASfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgHHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIB18fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAXfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBR8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAefHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgE3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIB18fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAXfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgG3x8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBF8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAcfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggGXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBR8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAVfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBh8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAWfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggIHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIB98fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSASfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgGnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIB18fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAWfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgEnx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGICB8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAffHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBV8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAbfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgEXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBh8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAXfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgFHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBp8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCATfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgGXx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBx8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAefHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgHHx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBh8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAffHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgHXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBJ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAUfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGnx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBZ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiARfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgIHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBV8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAZfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggF3x8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBN8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAbfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgF3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFICB8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAffHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGnx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBx8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAUfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggEXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBl8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAdfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgE3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIB58fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAYfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggEnx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBV8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAbfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBt8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSATfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgGXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBV8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAYfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgF3x8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBJ8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAWfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgIHx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBx8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAafHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgH3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBR8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAdfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgHnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBF8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSARfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBN8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAUfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgFXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBZ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAXfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBl8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAafHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgG3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBx8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAdfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHnx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB98fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAgfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgH3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBt8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAVfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBp8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAgfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggHnx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBd8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiASfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBF8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByATfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBh8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAWfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgISAhKQMAIAEgCYWFNwMAICIgIikDACACIAqFhTcDACAjICMpAwAgAyALhYU3AwAgJCAkKQMAIAQgDIWFNwMAICUgJSkDACAFIA2FhTcDACAmICYpAwAgBiAOhYU3AwAgJyAnKQMAIAcgD4WFNwMAICggKCkDACAIIBCFhTcDAAs=")}}),Y1=$1(),j1=WebAssembly.compile(Y1),K1=async e=>(await WebAssembly.instantiate(await j1,e)).exports,Ge=r1,V1=Q1,An=null,Hl=typeof WebAssembly!="undefined"&&K1().then(e=>{An=e}),Ln=64,So=[];on.exports=Te;var zl=on.exports.BYTES_MIN=16,$l=on.exports.BYTES_MAX=64;on.exports.BYTES=32;var Yl=on.exports.KEYBYTES_MIN=16,jl=on.exports.KEYBYTES_MAX=64;on.exports.KEYBYTES=32;var Kl=on.exports.SALTBYTES=16,Vl=on.exports.PERSONALBYTES=16;function Te(e,t,n,i,o){if(!(this instanceof Te))return new Te(e,t,n,i,o);if(!An)throw new Error("WASM not loaded. Wait for Blake2b.ready(cb)");e||(e=32),o!==!0&&(Ge(e>=zl,"digestLength must be at least "+zl+", was given "+e),Ge(e<=$l,"digestLength must be at most "+$l+", was given "+e),t!=null&&(Ge(t instanceof Uint8Array,"key must be Uint8Array or Buffer"),Ge(t.length>=Yl,"key must be at least "+Yl+", was given "+t.length),Ge(t.length<=jl,"key must be at least "+jl+", was given "+t.length)),n!=null&&(Ge(n instanceof Uint8Array,"salt must be Uint8Array or Buffer"),Ge(n.length===Kl,"salt must be exactly "+Kl+", was given "+n.length)),i!=null&&(Ge(i instanceof Uint8Array,"personal must be Uint8Array or Buffer"),Ge(i.length===Vl,"personal must be exactly "+Vl+", was given "+i.length))),So.length||(So.push(Ln),Ln+=216),this.digestLength=e,this.finalized=!1,this.pointer=So.pop(),this._memory=new Uint8Array(An.memory.buffer),this._memory.fill(0,0,64),this._memory[0]=this.digestLength,this._memory[1]=t?t.length:0,this._memory[2]=1,this._memory[3]=1,n&&this._memory.set(n,32),i&&this._memory.set(i,48),this.pointer+216>this._memory.length&&this._realloc(this.pointer+216),An.blake2b_init(this.pointer,this.digestLength),t&&(this.update(t),this._memory.fill(0,Ln,Ln+t.length),this._memory[this.pointer+200]=128)}Te.prototype._realloc=function(e){An.memory.grow(Math.max(0,Math.ceil(Math.abs(e-this._memory.length)/65536))),this._memory=new Uint8Array(An.memory.buffer)},Te.prototype.update=function(e){return Ge(this.finalized===!1,"Hash instance finalized"),Ge(e instanceof Uint8Array,"input must be Uint8Array or Buffer"),Ln+e.length>this._memory.length&&this._realloc(Ln+e.length),this._memory.set(e,Ln),An.blake2b_update(this.pointer,Ln,Ln+e.length),this},Te.prototype.digest=function(e){if(Ge(this.finalized===!1,"Hash instance finalized"),this.finalized=!0,So.push(this.pointer),An.blake2b_final(this.pointer),!e||e==="binary")return this._memory.slice(this.pointer+128,this.pointer+128+this.digestLength);if(typeof e=="string")return V1.toString(this._memory,e,this.pointer+128,this.pointer+128+this.digestLength);Ge(e instanceof Uint8Array&&e.length>=this.digestLength,"input must be Uint8Array or Buffer");for(var t=0;t<this.digestLength;t++)e[t]=this._memory[this.pointer+128+t];return e},Te.prototype.final=Te.prototype.digest,Te.WASM=An,Te.SUPPORTED=typeof WebAssembly!="undefined",Te.ready=function(e){return e||(e=Z1),Hl?Hl.then(()=>e(),e):e(new Error("WebAssembly not supported"))},Te.prototype.ready=Te.ready,Te.prototype.getPartialHash=function(){return this._memory.slice(this.pointer,this.pointer+216)},Te.prototype.setPartialHash=function(e){this._memory.set(e,this.pointer)};function Z1(){}var Yn=on.exports;const J1=[];for(let e=0;e<256;e++)J1[e]=X1(e,8);function X1(e,t){let n=0,i=e;for(let o=0;o<t;o++)n<<=1,n=n|i&1,i>>=1;return n}function vo(e){return((e&4294901760)!=0?(e&=4294901760,16):0)|((e&4278255360)!=0?(e&=4278255360,8):0)|((e&4042322160)!=0?(e&=4042322160,4):0)|((e&3435973836)!=0?(e&=3435973836,2):0)|(e&2863311530)!=0}function ha(e,t){const n=new DataView(e.buffer,e.byteOffset,e.byteLength);let i="";for(let o=0;o<4;o++){o>0&&(i+=`
`),i+="		";for(let a=0;a<4;a++)a>0&&(i+=" "),i+=n.getUint32(o*16+a*4).toString(16).padStart(8,"0")}return t&&(i=t+`
`+i),i}function t3(){return window.prompt("Enter a random text. (Entropy): ","")}async function e3(e){for(;!e;)e=await t3();const t=Yn(64);t.update(h_.randomBytes(64));const n=new TextEncoder;t.update(n.encode(e));const i=Buffer.from(t.digest()),o=[];for(let s=0;s<8;s++)o[s]=i.readUInt32BE(s*4);return new Jr(o)}async function n3(e,t){await ue(e,1),await e.writeULE32(1),await fe(e);const n=await Hn(t.q);await ue(e,2);const i=n.q,o=(Math.floor((re.bitLength(i)-1)/64)+1)*8,a=n.r,s=(Math.floor((re.bitLength(a)-1)/64)+1)*8;await e.writeULE32(o),await hi(e,i,o),await e.writeULE32(s),await hi(e,a,s),await e.writeULE32(t.nVars),await e.writeULE32(t.nPublic),await e.writeULE32(t.domainSize),await mi(e,n,t.vk_alpha_1),await mi(e,n,t.vk_beta_1),await Co(e,n,t.vk_beta_2),await Co(e,n,t.vk_gamma_2),await mi(e,n,t.vk_delta_1),await Co(e,n,t.vk_delta_2),await fe(e)}async function mi(e,t,n){const i=new Uint8Array(t.G1.F.n8*2);t.G1.toRprLEM(i,0,n),await e.write(i)}async function Co(e,t,n){const i=new Uint8Array(t.G2.F.n8*2);t.G2.toRprLEM(i,0,n),await e.write(i)}async function xe(e,t,n){const i=await e.read(t.G1.F.n8*2),o=t.G1.fromRprLEM(i,0);return n?t.G1.toObject(o):o}async function Yi(e,t,n){const i=await e.read(t.G2.F.n8*2),o=t.G2.fromRprLEM(i,0);return n?t.G2.toObject(o):o}async function Zl(e,t,n){await pn(e,t,1);const i=await e.readULE32();if(await mn(e),i==1)return await i3(e,t,n);if(i==2)return await o3(e,t);throw new Error("Protocol not supported: ")}async function i3(e,t,n){const i={};i.protocol="groth16",await pn(e,t,2);const o=await e.readULE32();i.n8q=o,i.q=await _i(e,o);const a=await e.readULE32();i.n8r=a,i.r=await _i(e,a);let s=await Hn(i.q);return i.nVars=await e.readULE32(),i.nPublic=await e.readULE32(),i.domainSize=await e.readULE32(),i.power=vo(i.domainSize),i.vk_alpha_1=await xe(e,s,n),i.vk_beta_1=await xe(e,s,n),i.vk_beta_2=await Yi(e,s,n),i.vk_gamma_2=await Yi(e,s,n),i.vk_delta_1=await xe(e,s,n),i.vk_delta_2=await Yi(e,s,n),await mn(e),i}async function o3(e,t,n,i){const o={};o.protocol="plonk",await pn(e,t,2);const a=await e.readULE32();o.n8q=a,o.q=await _i(e,a);const s=await e.readULE32();o.n8r=s,o.r=await _i(e,s);let d=await Hn(o.q);return o.nVars=await e.readULE32(),o.nPublic=await e.readULE32(),o.domainSize=await e.readULE32(),o.power=vo(o.domainSize),o.nAdditions=await e.readULE32(),o.nConstrains=await e.readULE32(),o.k1=await e.read(s),o.k2=await e.read(s),o.Qm=await xe(e,d,i),o.Ql=await xe(e,d,i),o.Qr=await xe(e,d,i),o.Qo=await xe(e,d,i),o.Qc=await xe(e,d,i),o.S1=await xe(e,d,i),o.S2=await xe(e,d,i),o.S3=await xe(e,d,i),o.X_2=await Yi(e,d,i),await mn(e),o}async function r3(e,t,n){const i={delta:{}};i.deltaAfter=await xe(e,t,n),i.delta.g1_s=await xe(e,t,n),i.delta.g1_sx=await xe(e,t,n),i.delta.g2_spx=await Yi(e,t,n),i.transcript=await e.read(64),i.type=await e.readULE32();const o=await e.readULE32(),a=e.pos;let s=0;for(;e.pos-a<o;){const d=await e.read(1);if(d[0]<=s)throw new Error("Parameters in the contribution must be sorted");if(s=d[0],d[0]==1){const g=await e.read(1),f=await e.read(g[0]);i.name=new TextDecoder().decode(f)}else if(d[0]==2){const g=await e.read(1);i.numIterationsExp=g[0]}else if(d[0]==3){const g=await e.read(1);i.beaconHash=await e.read(g[0])}else throw new Error("Parameter not recognized")}if(e.pos!=a+o)throw new Error("Parametes do not match");return i}async function a3(e,t,n){await pn(e,n,10);const i={contributions:[]};i.csHash=await e.read(64);const o=await e.readULE32();for(let a=0;a<o;a++){const s=await r3(e,t);i.contributions.push(s)}return await mn(e),i}async function s3(e,t,n){await mi(e,t,n.deltaAfter),await mi(e,t,n.delta.g1_s),await mi(e,t,n.delta.g1_sx),await Co(e,t,n.delta.g2_spx),await e.write(n.transcript),await e.writeULE32(n.type||0);const i=[];if(n.name){i.push(1);const o=new TextEncoder("utf-8").encode(n.name.substring(0,64));i.push(o.byteLength);for(let a=0;a<o.byteLength;a++)i.push(o[a])}if(n.type==1){i.push(2),i.push(n.numIterationsExp),i.push(3),i.push(n.beaconHash.byteLength);for(let o=0;o<n.beaconHash.byteLength;o++)i.push(n.beaconHash[o])}if(i.length>0){const o=new Uint8Array(i);await e.writeULE32(o.byteLength),await e.write(o)}else await e.writeULE32(0)}async function c3(e,t,n){await ue(e,10),await e.write(n.csHash),await e.writeULE32(n.contributions.length);for(let i=0;i<n.contributions.length;i++)await s3(e,t,n.contributions[i]);await fe(e)}function ji(e,t,n){const i=new Uint8Array(t.G1.F.n8*2);t.G1.toRprUncompressed(i,0,n),e.update(i)}function l3(e,t,n){const i=new Uint8Array(t.G2.F.n8*2);t.G2.toRprUncompressed(i,0,n),e.update(i)}function Jl(e,t,n){ji(e,t,n.deltaAfter),ji(e,t,n.delta.g1_s),ji(e,t,n.delta.g1_sx),l3(e,t,n.delta.g2_spx),e.update(n.transcript)}function u3(e,t){const n=new DataView(t.buffer,t.byteOffset,t.byteLength),i=[];for(let s=0;s<8;s++)i[s]=n.getUint32(s*4);const o=new Jr(i);return e.G2.fromRng(o)}async function Xl(e,t){if(!t[1])throw new Error(e.fileName+": File has no  header");if(t[1].length>1)throw new Error(e.fileName+": File has more than one header");e.pos=t[1][0].p;const n=await e.readULE32(),i=await e.read(n),o=re.fromRprLE(i),a=await Hn(o);if(a.F1.n64*8!=n)throw new Error(e.fileName+": Invalid size");const s=await e.readULE32(),d=await e.readULE32();if(e.pos-t[1][0].p!=t[1][0].size)throw new Error("Invalid PTau header size");return{curve:a,power:s,ceremonyPower:d}}async function tu(e,t,n,i,o,a,s,d,g,f){const l=1<<16,m=o[a],A=m.F.n8*2,_=t[i][0].size/A;await pn(e,t,i),await ue(n,i);let R=s;for(let x=0;x<_;x+=l){f&&f.debug(`Applying key: ${g}: ${x}/${_}`);const C=Math.min(_-x,l);let k;k=await e.read(C*A),k=await m.batchApplyKey(k,R,d),await n.write(k),R=o.Fr.mul(R,o.Fr.exp(d,C))}await fe(n),await mn(e)}re.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),re.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");const rn=262144,f3={get:function(e,t){return isNaN(t)?e[t]:e.getElement(t)},set:function(e,t,n){return isNaN(t)?(e[t]=n,!0):e.setElement(t,n)}};class d3{constructor(t){this.length=t||0,this.arr=new Array(rn);for(let n=0;n<t;n+=rn)this.arr[n/rn]=new Array(Math.min(rn,t-n));return this}push(){for(let t=0;t<arguments.length;t++)this.setElement(this.length,arguments[t])}slice(t,n){const i=new Array(n-t);for(let o=t;o<n;o++)i[o-t]=this.getElement(o);return i}getElement(t){t=parseInt(t);const n=Math.floor(t/rn),i=t%rn;return this.arr[n]?this.arr[n][i]:void 0}setElement(t,n){t=parseInt(t);const i=Math.floor(t/rn);this.arr[i]||(this.arr[i]=new Array(rn));const o=t%rn;return this.arr[i][o]=n,t>=this.length&&(this.length=t+1),!0}getKeys(){const t=new an;for(let n=0;n<this.arr.length;n++)if(this.arr[n])for(let i=0;i<this.arr[n].length;i++)typeof this.arr[n][i]!="undefined"&&t.push(n*rn+i);return t}}class an{constructor(t){const n=new d3(t);return new Proxy(n,f3)}}async function h3(e,t,n,i){const o=0,a=1,s=2,d=3;await Yn.ready();const g=Yn(64),{fd:f,sections:l}=await $e(t,"ptau",1),{curve:m,power:A}=await Xl(f,l),{fd:_,sections:R}=await $e(e,"r1cs",1),x=await $i(_,R,!1),C=await Qr(n,"zkey",1,10,1<<22,1<<24),k=m.G1.F.n8*2,O=m.G2.F.n8*2;if(x.prime!=m.r)return i&&i.error("r1cs curve does not match powers of tau ceremony curve"),-1;const Z=vo(x.nConstraints+x.nPubInputs+x.nOutputs+1-1)+1;if(Z>A)return i&&i.error(`circuit too big for this power of tau ceremony. ${x.nConstraints}*2 > 2**${A}`),-1;if(!l[12])return i&&i.error("Powers of tau is not prepared."),-1;const z=x.nOutputs+x.nPubInputs,K=2**Z;await ue(C,1),await C.writeULE32(1),await fe(C),await ue(C,2);const T=m.q,p=(Math.floor((re.bitLength(T)-1)/64)+1)*8,w=m.r,D=(Math.floor((re.bitLength(w)-1)/64)+1)*8,$=re.mod(re.shl(1,D*8),w),U=m.Fr.e(re.mod(re.mul($,$),w));await C.writeULE32(p),await hi(C,T,p),await C.writeULE32(D),await hi(C,w,D),await C.writeULE32(x.nVars),await C.writeULE32(z),await C.writeULE32(K);let M;M=await f.read(k,l[4][0].p),await C.write(M),M=await m.G1.batchLEMtoU(M),g.update(M);let S;S=await f.read(k,l[5][0].p),await C.write(S),S=await m.G1.batchLEMtoU(S),g.update(S);let q;q=await f.read(O,l[6][0].p),await C.write(q),q=await m.G2.batchLEMtoU(q),g.update(q);const tt=new Uint8Array(k);m.G1.toRprLEM(tt,0,m.G1.g);const ft=new Uint8Array(O);m.G2.toRprLEM(ft,0,m.G2.g);const it=new Uint8Array(k);m.G1.toRprUncompressed(it,0,m.G1.g);const nt=new Uint8Array(O);m.G2.toRprUncompressed(nt,0,m.G2.g),await C.write(ft),await C.write(tt),await C.write(ft),g.update(nt),g.update(it),g.update(nt),await fe(C),i&&i.info("Reading r1cs");let gt=await yn(_,R,2);const ot=new an(x.nVars),It=new an(x.nVars),Ot=new an(x.nVars),Lt=new an(x.nVars-z-1),vt=new Array(z+1);i&&i.info("Reading tauG1");let L=await yn(f,l,12,(K-1)*k,K*k);i&&i.info("Reading tauG2");let u=await yn(f,l,13,(K-1)*O,K*O);i&&i.info("Reading alphatauG1");let F=await yn(f,l,14,(K-1)*k,K*k);i&&i.info("Reading betatauG1");let h=await yn(f,l,15,(K-1)*k,K*k);await I(),await V(3,"G1",vt,"IC"),await N(),await at(),await V(8,"G1",Lt,"C"),await V(5,"G1",ot,"A"),await V(6,"G1",It,"B1"),await V(7,"G2",Ot,"B2");const H=g.digest();return await ue(C,10),await C.write(H),await C.writeULE32(0),await fe(C),i&&i.info(ha(H,"Circuit hash: ")),await C.close(),await _.close(),await f.close(),H;async function N(){await ue(C,9);const bt=new Kt(K*k);if(Z<m.Fr.s){let wt=await yn(f,l,12,(K*2-1)*k,K*2*k);for(let pt=0;pt<K;pt++){i&&pt%1e4==0&&i.debug(`spliting buffer: ${pt}/${K}`);const Et=wt.slice((pt*2+1)*k,(pt*2+1)*k+k);bt.set(Et,pt*k)}}else if(Z==m.Fr.s){const wt=l[12][0].p+(2**(Z+1)-1)*k;await f.readToBuffer(bt,0,K*k,wt+K*k)}else throw i&&i.error("Circuit too big"),new Error("Circuit too big for this curve");await C.write(bt),await fe(C)}async function I(){const bt=new Uint8Array(12+m.Fr.n8),wt=new DataView(bt.buffer),pt=new Uint8Array(m.Fr.n8);m.Fr.toRprLE(pt,0,m.Fr.e(1));let Et=0;function Bt(){const Q=gt.slice(Et,Et+4);return Et+=4,new DataView(Q.buffer).getUint32(0,!0)}const Pt=new an;for(let Q=0;Q<x.nConstraints;Q++){i&&Q%1e4==0&&i.debug(`processing constraints: ${Q}/${x.nConstraints}`);const X=Bt();for(let E=0;E<X;E++){const r=Bt(),c=Et;Et+=m.Fr.n8;const y=o,v=k*Q,B=d,G=k*Q;typeof ot[r]=="undefined"&&(ot[r]=[]),ot[r].push([y,v,c]),r<=z?(typeof vt[r]=="undefined"&&(vt[r]=[]),vt[r].push([B,G,c])):(typeof Lt[r-z-1]=="undefined"&&(Lt[r-z-1]=[]),Lt[r-z-1].push([B,G,c])),Pt.push([0,Q,r,c])}const J=Bt();for(let E=0;E<J;E++){const r=Bt(),c=Et;Et+=m.Fr.n8;const y=o,v=k*Q,B=a,G=O*Q,j=s,et=k*Q;typeof It[r]=="undefined"&&(It[r]=[]),It[r].push([y,v,c]),typeof Ot[r]=="undefined"&&(Ot[r]=[]),Ot[r].push([B,G,c]),r<=z?(typeof vt[r]=="undefined"&&(vt[r]=[]),vt[r].push([j,et,c])):(typeof Lt[r-z-1]=="undefined"&&(Lt[r-z-1]=[]),Lt[r-z-1].push([j,et,c])),Pt.push([1,Q,r,c])}const rt=Bt();for(let E=0;E<rt;E++){const r=Bt(),c=Et;Et+=m.Fr.n8;const y=o,v=k*Q;r<=z?(typeof vt[r]=="undefined"&&(vt[r]=[]),vt[r].push([y,v,c])):(typeof Lt[r-z-1]=="undefined"&&(Lt[r-z-1]=[]),Lt[r-z-1].push([y,v,c]))}}for(let Q=0;Q<=z;Q++){const X=o,J=k*(x.nConstraints+Q),rt=d,E=k*(x.nConstraints+Q);typeof ot[Q]=="undefined"&&(ot[Q]=[]),ot[Q].push([X,J,-1]),typeof vt[Q]=="undefined"&&(vt[Q]=[]),vt[Q].push([rt,E,-1]),Pt.push([0,x.nConstraints+Q,Q,-1])}await ue(C,4);const Ct=new Kt(Pt.length*(12+m.Fr.n8)+4),Ht=new Uint8Array(4);new DataView(Ht.buffer).setUint32(0,Pt.length,!0),Ct.set(Ht);let P=4;for(let Q=0;Q<Pt.length;Q++)i&&Q%1e5==0&&i.debug(`writing coeffs: ${Q}/${Pt.length}`),W(Pt[Q]);await C.write(Ct),await fe(C);function W(Q){wt.setUint32(0,Q[0],!0),wt.setUint32(4,Q[1],!0),wt.setUint32(8,Q[2],!0);let X;Q[3]>=0?X=m.Fr.fromRprLE(gt.slice(Q[3],Q[3]+m.Fr.n8),0):X=m.Fr.fromRprLE(pt,0);const J=m.Fr.mul(X,U);m.Fr.toRprLE(bt,12,J),Ct.set(bt,P),P+=bt.length}}async function V(bt,wt,pt,Et){const Bt=1<<15,Pt=m[wt];Tt(pt.length),await ue(C,bt);let Ct=[],Ht=0;for(;Ht<pt.length;){let b=0;for(;Ht<pt.length&&b<m.tm.concurrency;){i&&i.debug(`Writing points start ${Et}: ${Ht}/${pt.length}`);let W=1,Q=pt[Ht]?pt[Ht].length:0;for(;Ht+W<pt.length&&Q+(pt[Ht+W]?pt[Ht+W].length:0)<Bt&&W<Bt;)Q+=pt[Ht+W]?pt[Ht+W].length:0,W++;const X=pt.slice(Ht,Ht+W),J=Ht;Ct.push(lt(wt,X,i,Et).then(rt=>(i&&i.debug(`Writing points end ${Et}: ${J}/${pt.length}`),rt))),Ht+=W,b++}const P=await Promise.all(Ct);for(let W=0;W<P.length;W++){await C.write(P[W][0]);const Q=await Pt.batchLEMtoU(P[W][0]);g.update(Q)}Ct=[]}await fe(C)}async function lt(bt,wt,pt,Et){const Bt=m[bt],Pt=Bt.F.n8*2,Ct=Bt.F.n8*3,Ht=Bt.F.n8*2;let b,P,W,Q;if(bt=="G1")b="g1m_timesScalarAffine",P="g1m_multiexpAffine",W="g1m_batchToAffine",Q="g1m_zero";else if(bt=="G2")b="g2m_timesScalarAffine",P="g2m_multiexpAffine",W="g2m_batchToAffine",Q="g2m_zero";else throw new Error("Invalid group");let X=0;for(let B=0;B<wt.length;B++)X+=wt[B]?wt[B].length:0;let J,rt;X>2<<14?(J=new Kt(X*Pt),rt=new Kt(X*m.Fr.n8)):(J=new Uint8Array(X*Pt),rt=new Uint8Array(X*m.Fr.n8));let E=0,r=0;const c=[L,u,F,h],y=new Uint8Array(m.Fr.n8);m.Fr.toRprLE(y,0,m.Fr.e(1));let v=0;for(let B=0;B<wt.length;B++)if(!!wt[B])for(let G=0;G<wt[B].length;G++)pt&&G&&G%1e4==0&&pt.debug(`Configuring big array ${Et}: ${G}/${wt[B].length}`),J.set(c[wt[B][G][0]].slice(wt[B][G][1],wt[B][G][1]+Pt),v*Pt),wt[B][G][2]>=0?rt.set(gt.slice(wt[B][G][2],wt[B][G][2]+m.Fr.n8),v*m.Fr.n8):rt.set(y,v*m.Fr.n8),v++;if(wt.length>1){const B=[];B.push({cmd:"ALLOCSET",var:0,buff:J}),B.push({cmd:"ALLOCSET",var:1,buff:rt}),B.push({cmd:"ALLOC",var:2,len:wt.length*Ct}),E=0,r=0;let G=0;for(let et=0;et<wt.length;et++){if(!wt[et]){B.push({cmd:"CALL",fnName:Q,params:[{var:2,offset:G}]}),G+=Ct;continue}wt[et].length==1?B.push({cmd:"CALL",fnName:b,params:[{var:0,offset:E},{var:1,offset:r},{val:m.Fr.n8},{var:2,offset:G}]}):B.push({cmd:"CALL",fnName:P,params:[{var:0,offset:E},{var:1,offset:r},{val:m.Fr.n8},{val:wt[et].length},{var:2,offset:G}]}),E+=Pt*wt[et].length,r+=m.Fr.n8*wt[et].length,G+=Ct}return B.push({cmd:"CALL",fnName:W,params:[{var:2},{val:wt.length},{var:2}]}),B.push({cmd:"GET",out:0,var:2,len:wt.length*Ht}),await m.tm.queueAction(B)}else{let B=await Bt.multiExpAffine(J,rt,pt,Et);return B=[Bt.toAffine(B)],B}}async function at(){const bt=1<<14;Tt(K-1);for(let wt=0;wt<K-1;wt+=bt){i&&i.debug(`HashingHPoints: ${wt}/${K}`);const pt=Math.min(K-1,bt);await At(wt,pt)}}async function At(bt,wt){const pt=await f.read(wt*k,l[2][0].p+(bt+K)*k),Et=await f.read(wt*k,l[2][0].p+bt*k),Bt=m.tm.concurrency,Pt=Math.floor(wt/Bt),Ct=[];for(let b=0;b<Bt;b++){let P;if(b<Bt-1?P=Pt:P=wt-b*Pt,P==0)continue;const W=pt.slice(b*Pt*k,(b*Pt+P)*k),Q=Et.slice(b*Pt*k,(b*Pt+P)*k);Ct.push(Nt(W,Q))}const Ht=await Promise.all(Ct);for(let b=0;b<Ht.length;b++)g.update(Ht[b][0])}async function Nt(bt,wt){const pt=bt.byteLength/k,Et=m.G1.F.n8*3,Bt=[];Bt.push({cmd:"ALLOCSET",var:0,buff:bt}),Bt.push({cmd:"ALLOCSET",var:1,buff:wt}),Bt.push({cmd:"ALLOC",var:2,len:pt*Et});for(let Ct=0;Ct<pt;Ct++)Bt.push({cmd:"CALL",fnName:"g1m_subAffine",params:[{var:0,offset:Ct*k},{var:1,offset:Ct*k},{var:2,offset:Ct*Et}]});return Bt.push({cmd:"CALL",fnName:"g1m_batchToAffine",params:[{var:2},{val:pt},{var:2}]}),Bt.push({cmd:"CALL",fnName:"g1m_batchLEMtoU",params:[{var:2},{val:pt},{var:2}]}),Bt.push({cmd:"GET",out:0,var:2,len:pt*k}),await m.tm.queueAction(Bt)}function Tt(bt){const wt=new Uint8Array(4);new DataView(wt.buffer,wt.byteOffset,wt.byteLength).setUint32(0,bt,!1),g.update(wt)}}async function _3(e,t,n,i,o){await Yn.ready();const{fd:a,sections:s}=await $e(e,"zkey",2),d=await Zl(a,s);if(d.protocol!="groth16")throw new Error("zkey file is not groth16");const g=await Hn(d.q),f=await a3(a,g,s),l=await Qr(t,"zkey",1,10),m=await e3(i),A=Yn(64);A.update(f.csHash);for(let k=0;k<f.contributions.length;k++)Jl(A,g,f.contributions[k]);const _={};_.delta={},_.delta.prvKey=g.Fr.fromRng(m),_.delta.g1_s=g.G1.toAffine(g.G1.fromRng(m)),_.delta.g1_sx=g.G1.toAffine(g.G1.timesFr(_.delta.g1_s,_.delta.prvKey)),ji(A,g,_.delta.g1_s),ji(A,g,_.delta.g1_sx),_.transcript=A.digest(),_.delta.g2_sp=u3(g,_.transcript),_.delta.g2_spx=g.G2.toAffine(g.G2.timesFr(_.delta.g2_sp,_.delta.prvKey)),d.vk_delta_1=g.G1.timesFr(d.vk_delta_1,_.delta.prvKey),d.vk_delta_2=g.G2.timesFr(d.vk_delta_2,_.delta.prvKey),_.deltaAfter=d.vk_delta_1,_.type=0,n&&(_.name=n),f.contributions.push(_),await n3(l,d),await Hi(a,s,l,3),await Hi(a,s,l,4),await Hi(a,s,l,5),await Hi(a,s,l,6),await Hi(a,s,l,7);const R=g.Fr.inv(_.delta.prvKey);await tu(a,s,l,8,g,"G1",R,g.Fr.e(1),"L Section",o),await tu(a,s,l,9,g,"G1",R,g.Fr.e(1),"H Section",o),await c3(l,g,f),await a.close(),await l.close();const x=Yn(64);Jl(x,g,_);const C=x.digest();return o&&o.info(ha(f.csHash,"Circuit Hash: ")),o&&o.info(ha(C,"Contribution Hash: ")),C}const{stringifyBigInts:eu}=t1;async function _a(e){const{fd:t,sections:n}=await $e(e,"zkey",2),i=await Zl(t,n);let o;if(i.protocol=="groth16")o=await g3(i,t,n);else if(i.protocol=="plonk")o=await p3(i);else throw new Error("zkey file is not groth16");return await t.close(),o}async function g3(e,t,n){const i=await Hn(e.q),o=i.G1.F.n8*2,a=await i.pairing(e.vk_alpha_1,e.vk_beta_2);let s={protocol:e.protocol,curve:i.name,nPublic:e.nPublic,vk_alpha_1:i.G1.toObject(e.vk_alpha_1),vk_beta_2:i.G2.toObject(e.vk_beta_2),vk_gamma_2:i.G2.toObject(e.vk_gamma_2),vk_delta_2:i.G2.toObject(e.vk_delta_2),vk_alphabeta_12:i.Gt.toObject(a)};await pn(t,n,3),s.IC=[];for(let d=0;d<=e.nPublic;d++){const g=await t.read(o),f=i.G1.toObject(g);s.IC.push(f)}return await mn(t),s=eu(s),s}async function p3(e){const t=await Hn(e.q);let n={protocol:e.protocol,curve:t.name,nPublic:e.nPublic,power:e.power,k1:t.Fr.toObject(e.k1),k2:t.Fr.toObject(e.k2),Qm:t.G1.toObject(e.Qm),Ql:t.G1.toObject(e.Ql),Qr:t.G1.toObject(e.Qr),Qo:t.G1.toObject(e.Qo),Qc:t.G1.toObject(e.Qc),S1:t.G1.toObject(e.S1),S2:t.G1.toObject(e.S2),S3:t.G1.toObject(e.S3),X_2:t.G2.toObject(e.X_2),w:t.Fr.toObject(t.Fr.w[e.power])};return n=eu(n),n}var nu={},iu=Na(ig),ou={};(function(e){var t=/[|\\{}()[\]^$+*?.]/g;e.escapeRegExpChars=function(s){return s?String(s).replace(t,"\\$&"):""};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},i=/[&<>'"]/g;function o(s){return n[s]||s}var a=`var _ENCODE_HTML_RULES = {
      "&": "&amp;"
    , "<": "&lt;"
    , ">": "&gt;"
    , '"': "&#34;"
    , "'": "&#39;"
    }
  , _MATCH_HTML = /[&<>'"]/g;
function encode_char(c) {
  return _ENCODE_HTML_RULES[c] || c;
};
`;e.escapeXML=function(s){return s==null?"":String(s).replace(i,o)},e.escapeXML.toString=function(){return Function.prototype.toString.call(this)+`;
`+a},e.shallowCopy=function(s,d){if(d=d||{},s!=null)for(var g in d)s[g]=d[g];return s},e.shallowCopyFromList=function(s,d,g){if(g=g||[],d=d||{},s!=null)for(var f=0;f<g.length;f++){var l=g[f];typeof d[l]!="undefined"&&(s[l]=d[l])}return s},e.cache={_data:{},set:function(s,d){this._data[s]=d},get:function(s){return this._data[s]},remove:function(s){delete this._data[s]},reset:function(){this._data={}}},e.hyphenToCamel=function(s){return s.replace(/-[a-z]/g,function(d){return d[1].toUpperCase()})},e.createNullProtoObjWherePossible=function(){return typeof Object.create=="function"?function(){return Object.create(null)}:{__proto__:null}instanceof Object?function(){return{}}:function(){return{__proto__:null}}}()})(ou);var m3={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"3.1.7",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",license:"Apache-2.0",bin:{ejs:"./bin/cli.js"},main:"./lib/ejs.js",jsdelivr:"ejs.min.js",unpkg:"ejs.min.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{jake:"^10.8.5"},devDependencies:{browserify:"^16.5.1",eslint:"^6.8.0","git-directory-deploy":"^1.5.1",jsdoc:"^3.6.7","lru-cache":"^4.0.1",mocha:"^7.1.1","uglify-js":"^3.3.16"},engines:{node:">=0.10.0"},scripts:{test:"mocha"}};(function(e){/**
 * @file Embedded JavaScript templating engine. {@link http://ejs.co}
 * @author Matthew Eernisse <mde@fleegix.org>
 * @author Tiancheng "Timothy" Gu <timothygu99@gmail.com>
 * @project EJS
 * @license {@link http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0}
 */var t=iu,n=iu,i=ou,o=!1,a=m3.version,s="<",d=">",g="%",f="locals",l="ejs",m="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",A=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],_=A.concat("cache"),R=/^\uFEFF/,x=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/;e.cache=i.cache,e.fileLoader=t.readFileSync,e.localsName=f,e.promiseImpl=new Function("return this;")().Promise,e.resolveInclude=function(D,$,U){var M=n.dirname,S=n.extname,q=n.resolve,tt=q(U?$:M($),D),ft=S(D);return ft||(tt+=".ejs"),tt};function C(D,$){var U;if($.some(function(M){return U=e.resolveInclude(D,M,!0),t.existsSync(U)}))return U}function k(D,$){var U,M,S=$.views,q=/^[A-Za-z]+:\\|^\//.exec(D);if(q&&q.length)D=D.replace(/^\/*/,""),Array.isArray($.root)?U=C(D,$.root):U=e.resolveInclude(D,$.root||"/",!0);else if($.filename&&(M=e.resolveInclude(D,$.filename),t.existsSync(M)&&(U=M)),!U&&Array.isArray(S)&&(U=C(D,S)),!U&&typeof $.includer!="function")throw new Error('Could not find the include file "'+$.escapeFunction(D)+'"');return U}function O(D,$){var U,M=D.filename,S=arguments.length>1;if(D.cache){if(!M)throw new Error("cache option requires a filename");if(U=e.cache.get(M),U)return U;S||($=z(M).toString().replace(R,""))}else if(!S){if(!M)throw new Error("Internal EJS error: no file name or template provided");$=z(M).toString().replace(R,"")}return U=e.compile($,D),D.cache&&e.cache.set(M,U),U}function Z(D,$,U){var M;if(U){try{M=O(D)($)}catch(S){return U(S)}U(null,M)}else{if(typeof e.promiseImpl=="function")return new e.promiseImpl(function(S,q){try{M=O(D)($),S(M)}catch(tt){q(tt)}});throw new Error("Please provide a callback function")}}function z(D){return e.fileLoader(D)}function K(D,$){var U=i.shallowCopy(i.createNullProtoObjWherePossible(),$);if(U.filename=k(D,U),typeof $.includer=="function"){var M=$.includer(D,U.filename);if(M&&(M.filename&&(U.filename=M.filename),M.template))return O(U,M.template)}return O(U)}function T(D,$,U,M,S){var q=$.split(`
`),tt=Math.max(M-3,0),ft=Math.min(q.length,M+3),it=S(U),nt=q.slice(tt,ft).map(function(gt,ot){var It=ot+tt+1;return(It==M?" >> ":"    ")+It+"| "+gt}).join(`
`);throw D.path=it,D.message=(it||"ejs")+":"+M+`
`+nt+`

`+D.message,D}function p(D){return D.replace(/;(\s*$)/,"$1")}e.compile=function($,U){var M;return U&&U.scope&&(o||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),o=!0),U.context||(U.context=U.scope),delete U.scope),M=new w($,U),M.compile()},e.render=function(D,$,U){var M=$||i.createNullProtoObjWherePossible(),S=U||i.createNullProtoObjWherePossible();return arguments.length==2&&i.shallowCopyFromList(S,M,A),O(S,D)(M)},e.renderFile=function(){var D=Array.prototype.slice.call(arguments),$=D.shift(),U,M={filename:$},S,q;return typeof arguments[arguments.length-1]=="function"&&(U=D.pop()),D.length?(S=D.shift(),D.length?i.shallowCopy(M,D.pop()):(S.settings&&(S.settings.views&&(M.views=S.settings.views),S.settings["view cache"]&&(M.cache=!0),q=S.settings["view options"],q&&i.shallowCopy(M,q)),i.shallowCopyFromList(M,S,_)),M.filename=$):S=i.createNullProtoObjWherePossible(),Z(M,S,U)},e.Template=w,e.clearCache=function(){e.cache.reset()};function w(D,$){$=$||i.createNullProtoObjWherePossible();var U=i.createNullProtoObjWherePossible();this.templateText=D,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",U.client=$.client||!1,U.escapeFunction=$.escape||$.escapeFunction||i.escapeXML,U.compileDebug=$.compileDebug!==!1,U.debug=!!$.debug,U.filename=$.filename,U.openDelimiter=$.openDelimiter||e.openDelimiter||s,U.closeDelimiter=$.closeDelimiter||e.closeDelimiter||d,U.delimiter=$.delimiter||e.delimiter||g,U.strict=$.strict||!1,U.context=$.context,U.cache=$.cache||!1,U.rmWhitespace=$.rmWhitespace,U.root=$.root,U.includer=$.includer,U.outputFunctionName=$.outputFunctionName,U.localsName=$.localsName||e.localsName||f,U.views=$.views,U.async=$.async,U.destructuredLocals=$.destructuredLocals,U.legacyInclude=typeof $.legacyInclude!="undefined"?!!$.legacyInclude:!0,U.strict?U._with=!1:U._with=typeof $._with!="undefined"?$._with:!0,this.opts=U,this.regex=this.createRegex()}w.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},w.prototype={createRegex:function(){var D=m,$=i.escapeRegExpChars(this.opts.delimiter),U=i.escapeRegExpChars(this.opts.openDelimiter),M=i.escapeRegExpChars(this.opts.closeDelimiter);return D=D.replace(/%/g,$).replace(/</g,U).replace(/>/g,M),new RegExp(D)},compile:function(){var D,$,U=this.opts,M="",S="",q=U.escapeFunction,tt,ft=U.filename?JSON.stringify(U.filename):"undefined";if(!this.source){if(this.generateSource(),M+=`  var __output = "";
  function __append(s) { if (s !== undefined && s !== null) __output += s }
`,U.outputFunctionName){if(!x.test(U.outputFunctionName))throw new Error("outputFunctionName is not a valid JS identifier.");M+="  var "+U.outputFunctionName+` = __append;
`}if(U.localsName&&!x.test(U.localsName))throw new Error("localsName is not a valid JS identifier.");if(U.destructuredLocals&&U.destructuredLocals.length){for(var it="  var __locals = ("+U.localsName+` || {}),
`,nt=0;nt<U.destructuredLocals.length;nt++){var gt=U.destructuredLocals[nt];if(!x.test(gt))throw new Error("destructuredLocals["+nt+"] is not a valid JS identifier.");nt>0&&(it+=`,
  `),it+=gt+" = __locals."+gt}M+=it+`;
`}U._with!==!1&&(M+="  with ("+U.localsName+` || {}) {
`,S+=`  }
`),S+=`  return __output;
`,this.source=M+this.source+S}U.compileDebug?D=`var __line = 1
  , __lines = `+JSON.stringify(this.templateText)+`
  , __filename = `+ft+`;
try {
`+this.source+`} catch (e) {
  rethrow(e, __lines, __filename, __line, escapeFn);
}
`:D=this.source,U.client&&(D="escapeFn = escapeFn || "+q.toString()+`;
`+D,U.compileDebug&&(D="rethrow = rethrow || "+T.toString()+`;
`+D)),U.strict&&(D=`"use strict";
`+D),U.debug&&console.log(D),U.compileDebug&&U.filename&&(D=D+`
//# sourceURL=`+ft+`
`);try{if(U.async)try{tt=new Function("return (async function(){}).constructor;")()}catch(Lt){throw Lt instanceof SyntaxError?new Error("This environment does not support async/await"):Lt}else tt=Function;$=new tt(U.localsName+", escapeFn, include, rethrow",D)}catch(Lt){throw Lt instanceof SyntaxError&&(U.filename&&(Lt.message+=" in "+U.filename),Lt.message+=` while compiling ejs

`,Lt.message+=`If the above error is not helpful, you may want to try EJS-Lint:
`,Lt.message+="https://github.com/RyanZim/EJS-Lint",U.async||(Lt.message+=`
`,Lt.message+="Or, if you meant to create an async function, pass `async: true` as an option.")),Lt}var ot=U.client?$:function(vt){var L=function(u,F){var h=i.shallowCopy(i.createNullProtoObjWherePossible(),vt);return F&&(h=i.shallowCopy(h,F)),K(u,U)(h)};return $.apply(U.context,[vt||i.createNullProtoObjWherePossible(),q,L,T])};if(U.filename&&typeof Object.defineProperty=="function"){var It=U.filename,Ot=n.basename(It,n.extname(It));try{Object.defineProperty(ot,"name",{value:Ot,writable:!1,enumerable:!1,configurable:!0})}catch{}}return ot},generateSource:function(){var D=this.opts;D.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,`
`).replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var $=this,U=this.parseTemplateText(),M=this.opts.delimiter,S=this.opts.openDelimiter,q=this.opts.closeDelimiter;U&&U.length&&U.forEach(function(tt,ft){var it;if(tt.indexOf(S+M)===0&&tt.indexOf(S+M+M)!==0&&(it=U[ft+2],!(it==M+q||it=="-"+M+q||it=="_"+M+q)))throw new Error('Could not find matching close tag for "'+tt+'".');$.scanLine(tt)})},parseTemplateText:function(){for(var D=this.templateText,$=this.regex,U=$.exec(D),M=[],S;U;)S=U.index,S!==0&&(M.push(D.substring(0,S)),D=D.slice(S)),M.push(U[0]),D=D.slice(U[0].length),U=$.exec(D);return D&&M.push(D),M},_addOutput:function(D){if(this.truncate&&(D=D.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!D)return D;D=D.replace(/\\/g,"\\\\"),D=D.replace(/\n/g,"\\n"),D=D.replace(/\r/g,"\\r"),D=D.replace(/"/g,'\\"'),this.source+='    ; __append("'+D+`")
`},scanLine:function(D){var $=this,U=this.opts.delimiter,M=this.opts.openDelimiter,S=this.opts.closeDelimiter,q=0;switch(q=D.split(`
`).length-1,D){case M+U:case M+U+"_":this.mode=w.modes.EVAL;break;case M+U+"=":this.mode=w.modes.ESCAPED;break;case M+U+"-":this.mode=w.modes.RAW;break;case M+U+"#":this.mode=w.modes.COMMENT;break;case M+U+U:this.mode=w.modes.LITERAL,this.source+='    ; __append("'+D.replace(M+U+U,M+U)+`")
`;break;case U+U+S:this.mode=w.modes.LITERAL,this.source+='    ; __append("'+D.replace(U+U+S,U+S)+`")
`;break;case U+S:case"-"+U+S:case"_"+U+S:this.mode==w.modes.LITERAL&&this._addOutput(D),this.mode=null,this.truncate=D.indexOf("-")===0||D.indexOf("_")===0;break;default:if(this.mode){switch(this.mode){case w.modes.EVAL:case w.modes.ESCAPED:case w.modes.RAW:D.lastIndexOf("//")>D.lastIndexOf(`
`)&&(D+=`
`)}switch(this.mode){case w.modes.EVAL:this.source+="    ; "+D+`
`;break;case w.modes.ESCAPED:this.source+="    ; __append(escapeFn("+p(D)+`))
`;break;case w.modes.RAW:this.source+="    ; __append("+p(D)+`)
`;break;case w.modes.COMMENT:break;case w.modes.LITERAL:this._addOutput(D);break}}else this._addOutput(D)}$.opts.compileDebug&&q&&(this.currentLine+=q,this.source+="    ; __line = "+this.currentLine+`
`)}},e.escapeXML=i.escapeXML,e.__express=e.renderFile,e.VERSION=a,e.name=l,typeof window!="undefined"&&(window.ejs=e)})(nu);async function ru(e,t,n){const i=await _a(e);let o=t[i.protocol];return nu.render(o,i)}async function y3(e,t,n,i){globalThis.gc&&globalThis.gc(),await Yn.ready();const{fd:o,sections:a}=await $e(t,"ptau",1),{curve:s,power:d}=await Xl(o,a),{fd:g,sections:f}=await $e(e,"r1cs",1),l=await $i(g,f,!1),m=s.G1.F.n8*2,A=s.G1,_=s.G2.F.n8*2,R=s.Fr,x=s.Fr.n8;i&&i.info("Reading r1cs");let C=await yn(g,f,2);const k=new an,O=new an;let Z=l.nVars;const z=l.nOutputs+l.nPubInputs;await q(),globalThis.gc&&globalThis.gc();const K=await Qr(n,"zkey",1,14,1<<22,1<<24);if(l.prime!=s.r)return i&&i.error("r1cs curve does not match powers of tau ceremony curve"),-1;let T=vo(k.length-1)+1;T<3&&(T=3);const p=2**T;if(i&&i.info("Plonk constraints: "+k.length),T>d)return i&&i.error(`circuit too big for this power of tau ceremony. ${k.length} > 2**${d}`),-1;if(!a[12])return i&&i.error("Powers of tau is not prepared."),-1;const w=new Kt(p*m),D=a[12][0].p+(2**T-1)*m;await o.readToBuffer(w,0,p*m,D);const[$,U]=Ot(),M={};await nt(3,"Additions"),globalThis.gc&&globalThis.gc(),await tt(4,0,"Amap"),globalThis.gc&&globalThis.gc(),await tt(5,1,"Bmap"),globalThis.gc&&globalThis.gc(),await tt(6,2,"Cmap"),globalThis.gc&&globalThis.gc(),await ft(7,3,"Qm"),globalThis.gc&&globalThis.gc(),await ft(8,4,"Ql"),globalThis.gc&&globalThis.gc(),await ft(9,5,"Qr"),globalThis.gc&&globalThis.gc(),await ft(10,6,"Qo"),globalThis.gc&&globalThis.gc(),await ft(11,7,"Qc"),globalThis.gc&&globalThis.gc(),await gt(12,"sigma"),globalThis.gc&&globalThis.gc(),await ot(13,"lagrange polynomials"),globalThis.gc&&globalThis.gc(),await ue(K,14);const S=new Kt((p+6)*m);await o.readToBuffer(S,0,(p+6)*m,a[2][0].p),await K.write(S),await fe(K),globalThis.gc&&globalThis.gc(),await It(),await K.close(),await g.close(),await o.close(),i&&i.info("Setup Finished");return;async function q(){let Lt=0;function vt(){const h=C.slice(Lt,Lt+4);return Lt+=4,new DataView(h.buffer).getUint32(0,!0)}function L(){const h=R.fromRprLE(C.slice(Lt,Lt+s.Fr.n8));return Lt+=s.Fr.n8,h}function u(){const h=[],H={k:s.Fr.zero},N=vt();for(let V=0;V<N;V++){const lt=vt(),at=L();lt==0?H.k=at:h.push([lt,at])}const I=F(h);return H.s=I[0],H.coef=I[1],H}function F(h){if(h.length==0)return[0,s.Fr.zero];if(h.length==1)return h[0];const H=h.slice(0,h.length>>1),N=h.slice(h.length>>1),I=F(H),V=F(N),lt=I[0],at=V[0],At=Z++,Nt=s.Fr.zero,Tt=R.neg(I[1]),bt=R.neg(V[1]),wt=s.Fr.one,pt=s.Fr.zero;return k.push([lt,at,At,Nt,Tt,bt,wt,pt]),O.push([lt,at,I[1],V[1]]),[At,s.Fr.one]}for(let h=1;h<=z;h++){const H=h,N=0,I=0,V=s.Fr.zero,lt=s.Fr.one,at=s.Fr.zero,At=s.Fr.zero,Nt=s.Fr.zero;k.push([H,N,I,V,lt,at,At,Nt])}for(let h=0;h<l.nConstraints;h++){i&&h%1e4==0&&i.debug(`processing constraints: ${h}/${l.nConstraints}`);const H=u(),N=u(),I=u(),V=H.s,lt=N.s,at=I.s,At=s.Fr.mul(H.coef,N.coef),Nt=s.Fr.mul(H.coef,N.k),Tt=s.Fr.mul(H.k,N.coef),bt=s.Fr.neg(I.coef),wt=s.Fr.sub(s.Fr.mul(H.k,N.k),I.k);k.push([V,lt,at,At,Nt,Tt,bt,wt])}}async function tt(Lt,vt,L){await ue(K,Lt);for(let u=0;u<k.length;u++)await K.writeULE32(k[u][vt]),i&&u%1e6==0&&i.debug(`writing ${L}: ${u}/${k.length}`);await fe(K)}async function ft(Lt,vt,L){let u=new Kt(p*x);for(let F=0;F<k.length;F++)u.set(k[F][vt],F*x),i&&F%1e6==0&&i.debug(`writing ${L}: ${F}/${k.length}`);await ue(K,Lt),await it(u),await fe(K),u=await R.batchFromMontgomery(u),M[L]=await s.G1.multiExpAffine(w,u,i,"multiexp "+L)}async function it(Lt){const vt=await R.ifft(Lt),L=new Kt(p*x*4);L.set(vt,0);const u=await R.fft(L);await K.write(vt),await K.write(u)}async function nt(Lt,vt){await ue(K,Lt);const L=new Uint8Array(2*4+2*x),u=new DataView(L.buffer);for(let F=0;F<O.length;F++){const h=O[F];let H=0;u.setUint32(H,h[0],!0),H+=4,u.setUint32(H,h[1],!0),H+=4,L.set(h[2],H),H+=x,L.set(h[3],H),H+=x,await K.write(L),i&&F%1e6==0&&i.debug(`writing ${vt}: ${F}/${O.length}`)}await fe(K)}async function gt(Lt,vt){const L=new Kt(x*p*3),u=new an(Z),F=new an(Z);let h=R.one;for(let lt=0;lt<p;lt++)lt<k.length?(V(k[lt][0],lt),V(k[lt][1],p+lt),V(k[lt][2],p*2+lt)):(V(0,lt),V(0,p+lt),V(0,p*2+lt)),h=R.mul(h,R.w[T]),i&&lt%1e6==0&&i.debug(`writing ${vt} phase1: ${lt}/${k.length}`);for(let lt=0;lt<Z;lt++)typeof F[lt]!="undefined"?L.set(u[lt],F[lt]*x):console.log("Variable not used"),i&&lt%1e6==0&&i.debug(`writing ${vt} phase2: ${lt}/${Z}`);globalThis.gc&&globalThis.gc(),await ue(K,Lt);let H=L.slice(0,p*x);await it(H),globalThis.gc&&globalThis.gc();let N=L.slice(p*x,p*x*2);await it(N),globalThis.gc&&globalThis.gc();let I=L.slice(p*x*2,p*x*3);await it(I),globalThis.gc&&globalThis.gc(),await fe(K),H=await R.batchFromMontgomery(H),N=await R.batchFromMontgomery(N),I=await R.batchFromMontgomery(I),M.S1=await s.G1.multiExpAffine(w,H,i,"multiexp S1"),globalThis.gc&&globalThis.gc(),M.S2=await s.G1.multiExpAffine(w,N,i,"multiexp S2"),globalThis.gc&&globalThis.gc(),M.S3=await s.G1.multiExpAffine(w,I,i,"multiexp S3"),globalThis.gc&&globalThis.gc();function V(lt,at){typeof u[lt]=="undefined"?F[lt]=at:L.set(u[lt],at*x);let At;at<p?At=h:at<2*p?At=R.mul(h,$):At=R.mul(h,U),u[lt]=At}}async function ot(Lt,vt){await ue(K,Lt);const L=Math.max(z,1);for(let u=0;u<L;u++){let F=new Kt(p*x);F.set(R.one,u*x),await it(F),i&&i.debug(`writing ${vt} ${u}/${L}`)}await fe(K)}async function It(){await ue(K,1),await K.writeULE32(2),await fe(K),await ue(K,2);const Lt=s.q,vt=(Math.floor((re.bitLength(Lt)-1)/64)+1)*8,L=s.r,u=(Math.floor((re.bitLength(L)-1)/64)+1)*8;await K.writeULE32(vt),await hi(K,Lt,vt),await K.writeULE32(u),await hi(K,L,u),await K.writeULE32(Z),await K.writeULE32(z),await K.writeULE32(p),await K.writeULE32(O.length),await K.writeULE32(k.length),await K.write($),await K.write(U),await K.write(A.toAffine(M.Qm)),await K.write(A.toAffine(M.Ql)),await K.write(A.toAffine(M.Qr)),await K.write(A.toAffine(M.Qo)),await K.write(A.toAffine(M.Qc)),await K.write(A.toAffine(M.S1)),await K.write(A.toAffine(M.S2)),await K.write(A.toAffine(M.S3));let F;F=await o.read(_,a[3][0].p+_),await K.write(F),await fe(K)}function Ot(){let Lt=R.two;for(;L(Lt,[],T);)R.add(Lt,R.one);let vt=R.add(Lt,R.one);for(;L(vt,[Lt],T);)R.add(vt,R.one);return[Lt,vt];function L(u,F,h){const H=2**h;let N=R.one;for(let I=0;I<H;I++){if(R.eq(u,N))return!0;for(let V=0;V<F.length;V++)if(R.eq(u,R.mul(F[V],N)))return!0;N=R.mul(N,R.w[h])}return!1}}}var A3={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(e){(function(){var t="input is invalid type",n="finalize already called",i=typeof window=="object",o=i?window:{};o.JS_SHA3_NO_WINDOW&&(i=!1);var a=!i&&typeof self=="object",s=!o.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?o=Mo:a&&(o=self);var d=!o.JS_SHA3_NO_COMMON_JS&&!0&&e.exports,g=!o.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",f="0123456789abcdef".split(""),l=[31,7936,2031616,520093696],m=[4,1024,262144,67108864],A=[1,256,65536,16777216],_=[6,1536,393216,100663296],R=[0,8,16,24],x=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],C=[224,256,384,512],k=[128,256],O=["hex","buffer","arrayBuffer","array","digest"],Z={"128":168,"256":136};(o.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(L){return Object.prototype.toString.call(L)==="[object Array]"}),g&&(o.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(L){return typeof L=="object"&&L.buffer&&L.buffer.constructor===ArrayBuffer});for(var z=function(L,u,F){return function(h){return new Ot(L,u,L).update(h)[F]()}},K=function(L,u,F){return function(h,H){return new Ot(L,u,H).update(h)[F]()}},T=function(L,u,F){return function(h,H,N,I){return q["cshake"+L].update(h,H,N,I)[F]()}},p=function(L,u,F){return function(h,H,N,I){return q["kmac"+L].update(h,H,N,I)[F]()}},w=function(L,u,F,h){for(var H=0;H<O.length;++H){var N=O[H];L[N]=u(F,h,N)}return L},D=function(L,u){var F=z(L,u,"hex");return F.create=function(){return new Ot(L,u,L)},F.update=function(h){return F.create().update(h)},w(F,z,L,u)},$=function(L,u){var F=K(L,u,"hex");return F.create=function(h){return new Ot(L,u,h)},F.update=function(h,H){return F.create(H).update(h)},w(F,K,L,u)},U=function(L,u){var F=Z[L],h=T(L,u,"hex");return h.create=function(H,N,I){return!N&&!I?q["shake"+L].create(H):new Ot(L,u,H).bytepad([N,I],F)},h.update=function(H,N,I,V){return h.create(N,I,V).update(H)},w(h,T,L,u)},M=function(L,u){var F=Z[L],h=p(L,u,"hex");return h.create=function(H,N,I){return new Lt(L,u,N).bytepad(["KMAC",I],F).bytepad([H],F)},h.update=function(H,N,I,V){return h.create(H,I,V).update(N)},w(h,p,L,u)},S=[{name:"keccak",padding:A,bits:C,createMethod:D},{name:"sha3",padding:_,bits:C,createMethod:D},{name:"shake",padding:l,bits:k,createMethod:$},{name:"cshake",padding:m,bits:k,createMethod:U},{name:"kmac",padding:m,bits:k,createMethod:M}],q={},tt=[],ft=0;ft<S.length;++ft)for(var it=S[ft],nt=it.bits,gt=0;gt<nt.length;++gt){var ot=it.name+"_"+nt[gt];if(tt.push(ot),q[ot]=it.createMethod(nt[gt],it.padding),it.name!=="sha3"){var It=it.name+nt[gt];tt.push(It),q[It]=q[ot]}}function Ot(L,u,F){this.blocks=[],this.s=[],this.padding=u,this.outputBits=F,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(L<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=F>>5,this.extraBytes=(F&31)>>3;for(var h=0;h<50;++h)this.s[h]=0}Ot.prototype.update=function(L){if(this.finalized)throw new Error(n);var u,F=typeof L;if(F!=="string"){if(F==="object"){if(L===null)throw new Error(t);if(g&&L.constructor===ArrayBuffer)L=new Uint8Array(L);else if(!Array.isArray(L)&&(!g||!ArrayBuffer.isView(L)))throw new Error(t)}else throw new Error(t);u=!0}for(var h=this.blocks,H=this.byteCount,N=L.length,I=this.blockCount,V=0,lt=this.s,at,At;V<N;){if(this.reset)for(this.reset=!1,h[0]=this.block,at=1;at<I+1;++at)h[at]=0;if(u)for(at=this.start;V<N&&at<H;++V)h[at>>2]|=L[V]<<R[at++&3];else for(at=this.start;V<N&&at<H;++V)At=L.charCodeAt(V),At<128?h[at>>2]|=At<<R[at++&3]:At<2048?(h[at>>2]|=(192|At>>6)<<R[at++&3],h[at>>2]|=(128|At&63)<<R[at++&3]):At<55296||At>=57344?(h[at>>2]|=(224|At>>12)<<R[at++&3],h[at>>2]|=(128|At>>6&63)<<R[at++&3],h[at>>2]|=(128|At&63)<<R[at++&3]):(At=65536+((At&1023)<<10|L.charCodeAt(++V)&1023),h[at>>2]|=(240|At>>18)<<R[at++&3],h[at>>2]|=(128|At>>12&63)<<R[at++&3],h[at>>2]|=(128|At>>6&63)<<R[at++&3],h[at>>2]|=(128|At&63)<<R[at++&3]);if(this.lastByteIndex=at,at>=H){for(this.start=at-H,this.block=h[I],at=0;at<I;++at)lt[at]^=h[at];vt(lt),this.reset=!0}else this.start=at}return this},Ot.prototype.encode=function(L,u){var F=L&255,h=1,H=[F];for(L=L>>8,F=L&255;F>0;)H.unshift(F),L=L>>8,F=L&255,++h;return u?H.push(h):H.unshift(h),this.update(H),H.length},Ot.prototype.encodeString=function(L){var u,F=typeof L;if(F!=="string"){if(F==="object"){if(L===null)throw new Error(t);if(g&&L.constructor===ArrayBuffer)L=new Uint8Array(L);else if(!Array.isArray(L)&&(!g||!ArrayBuffer.isView(L)))throw new Error(t)}else throw new Error(t);u=!0}var h=0,H=L.length;if(u)h=H;else for(var N=0;N<L.length;++N){var I=L.charCodeAt(N);I<128?h+=1:I<2048?h+=2:I<55296||I>=57344?h+=3:(I=65536+((I&1023)<<10|L.charCodeAt(++N)&1023),h+=4)}return h+=this.encode(h*8),this.update(L),h},Ot.prototype.bytepad=function(L,u){for(var F=this.encode(u),h=0;h<L.length;++h)F+=this.encodeString(L[h]);var H=u-F%u,N=[];return N.length=H,this.update(N),this},Ot.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var L=this.blocks,u=this.lastByteIndex,F=this.blockCount,h=this.s;if(L[u>>2]|=this.padding[u&3],this.lastByteIndex===this.byteCount)for(L[0]=L[F],u=1;u<F+1;++u)L[u]=0;for(L[F-1]|=2147483648,u=0;u<F;++u)h[u]^=L[u];vt(h)}},Ot.prototype.toString=Ot.prototype.hex=function(){this.finalize();for(var L=this.blockCount,u=this.s,F=this.outputBlocks,h=this.extraBytes,H=0,N=0,I="",V;N<F;){for(H=0;H<L&&N<F;++H,++N)V=u[H],I+=f[V>>4&15]+f[V&15]+f[V>>12&15]+f[V>>8&15]+f[V>>20&15]+f[V>>16&15]+f[V>>28&15]+f[V>>24&15];N%L==0&&(vt(u),H=0)}return h&&(V=u[H],I+=f[V>>4&15]+f[V&15],h>1&&(I+=f[V>>12&15]+f[V>>8&15]),h>2&&(I+=f[V>>20&15]+f[V>>16&15])),I},Ot.prototype.arrayBuffer=function(){this.finalize();var L=this.blockCount,u=this.s,F=this.outputBlocks,h=this.extraBytes,H=0,N=0,I=this.outputBits>>3,V;h?V=new ArrayBuffer(F+1<<2):V=new ArrayBuffer(I);for(var lt=new Uint32Array(V);N<F;){for(H=0;H<L&&N<F;++H,++N)lt[N]=u[H];N%L==0&&vt(u)}return h&&(lt[H]=u[H],V=V.slice(0,I)),V},Ot.prototype.buffer=Ot.prototype.arrayBuffer,Ot.prototype.digest=Ot.prototype.array=function(){this.finalize();for(var L=this.blockCount,u=this.s,F=this.outputBlocks,h=this.extraBytes,H=0,N=0,I=[],V,lt;N<F;){for(H=0;H<L&&N<F;++H,++N)V=N<<2,lt=u[H],I[V]=lt&255,I[V+1]=lt>>8&255,I[V+2]=lt>>16&255,I[V+3]=lt>>24&255;N%L==0&&vt(u)}return h&&(V=N<<2,lt=u[H],I[V]=lt&255,h>1&&(I[V+1]=lt>>8&255),h>2&&(I[V+2]=lt>>16&255)),I};function Lt(L,u,F){Ot.call(this,L,u,F)}Lt.prototype=new Ot,Lt.prototype.finalize=function(){return this.encode(this.outputBits,!0),Ot.prototype.finalize.call(this)};var vt=function(L){var u,F,h,H,N,I,V,lt,at,At,Nt,Tt,bt,wt,pt,Et,Bt,Pt,Ct,Ht,b,P,W,Q,X,J,rt,E,r,c,y,v,B,G,j,et,ut,ht,ct,yt,xt,Rt,Ft,Ut,Dt,$t,Gt,kt,Mt,Vt,Ie,ke,yi,Bn,Tn,Ai,Rn,On,Li,In,sn,jn,Fo;for(h=0;h<48;h+=2)H=L[0]^L[10]^L[20]^L[30]^L[40],N=L[1]^L[11]^L[21]^L[31]^L[41],I=L[2]^L[12]^L[22]^L[32]^L[42],V=L[3]^L[13]^L[23]^L[33]^L[43],lt=L[4]^L[14]^L[24]^L[34]^L[44],at=L[5]^L[15]^L[25]^L[35]^L[45],At=L[6]^L[16]^L[26]^L[36]^L[46],Nt=L[7]^L[17]^L[27]^L[37]^L[47],Tt=L[8]^L[18]^L[28]^L[38]^L[48],bt=L[9]^L[19]^L[29]^L[39]^L[49],u=Tt^(I<<1|V>>>31),F=bt^(V<<1|I>>>31),L[0]^=u,L[1]^=F,L[10]^=u,L[11]^=F,L[20]^=u,L[21]^=F,L[30]^=u,L[31]^=F,L[40]^=u,L[41]^=F,u=H^(lt<<1|at>>>31),F=N^(at<<1|lt>>>31),L[2]^=u,L[3]^=F,L[12]^=u,L[13]^=F,L[22]^=u,L[23]^=F,L[32]^=u,L[33]^=F,L[42]^=u,L[43]^=F,u=I^(At<<1|Nt>>>31),F=V^(Nt<<1|At>>>31),L[4]^=u,L[5]^=F,L[14]^=u,L[15]^=F,L[24]^=u,L[25]^=F,L[34]^=u,L[35]^=F,L[44]^=u,L[45]^=F,u=lt^(Tt<<1|bt>>>31),F=at^(bt<<1|Tt>>>31),L[6]^=u,L[7]^=F,L[16]^=u,L[17]^=F,L[26]^=u,L[27]^=F,L[36]^=u,L[37]^=F,L[46]^=u,L[47]^=F,u=At^(H<<1|N>>>31),F=Nt^(N<<1|H>>>31),L[8]^=u,L[9]^=F,L[18]^=u,L[19]^=F,L[28]^=u,L[29]^=F,L[38]^=u,L[39]^=F,L[48]^=u,L[49]^=F,wt=L[0],pt=L[1],$t=L[11]<<4|L[10]>>>28,Gt=L[10]<<4|L[11]>>>28,E=L[20]<<3|L[21]>>>29,r=L[21]<<3|L[20]>>>29,In=L[31]<<9|L[30]>>>23,sn=L[30]<<9|L[31]>>>23,Rt=L[40]<<18|L[41]>>>14,Ft=L[41]<<18|L[40]>>>14,G=L[2]<<1|L[3]>>>31,j=L[3]<<1|L[2]>>>31,Et=L[13]<<12|L[12]>>>20,Bt=L[12]<<12|L[13]>>>20,kt=L[22]<<10|L[23]>>>22,Mt=L[23]<<10|L[22]>>>22,c=L[33]<<13|L[32]>>>19,y=L[32]<<13|L[33]>>>19,jn=L[42]<<2|L[43]>>>30,Fo=L[43]<<2|L[42]>>>30,Bn=L[5]<<30|L[4]>>>2,Tn=L[4]<<30|L[5]>>>2,et=L[14]<<6|L[15]>>>26,ut=L[15]<<6|L[14]>>>26,Pt=L[25]<<11|L[24]>>>21,Ct=L[24]<<11|L[25]>>>21,Vt=L[34]<<15|L[35]>>>17,Ie=L[35]<<15|L[34]>>>17,v=L[45]<<29|L[44]>>>3,B=L[44]<<29|L[45]>>>3,Q=L[6]<<28|L[7]>>>4,X=L[7]<<28|L[6]>>>4,Ai=L[17]<<23|L[16]>>>9,Rn=L[16]<<23|L[17]>>>9,ht=L[26]<<25|L[27]>>>7,ct=L[27]<<25|L[26]>>>7,Ht=L[36]<<21|L[37]>>>11,b=L[37]<<21|L[36]>>>11,ke=L[47]<<24|L[46]>>>8,yi=L[46]<<24|L[47]>>>8,Ut=L[8]<<27|L[9]>>>5,Dt=L[9]<<27|L[8]>>>5,J=L[18]<<20|L[19]>>>12,rt=L[19]<<20|L[18]>>>12,On=L[29]<<7|L[28]>>>25,Li=L[28]<<7|L[29]>>>25,yt=L[38]<<8|L[39]>>>24,xt=L[39]<<8|L[38]>>>24,P=L[48]<<14|L[49]>>>18,W=L[49]<<14|L[48]>>>18,L[0]=wt^~Et&Pt,L[1]=pt^~Bt&Ct,L[10]=Q^~J&E,L[11]=X^~rt&r,L[20]=G^~et&ht,L[21]=j^~ut&ct,L[30]=Ut^~$t&kt,L[31]=Dt^~Gt&Mt,L[40]=Bn^~Ai&On,L[41]=Tn^~Rn&Li,L[2]=Et^~Pt&Ht,L[3]=Bt^~Ct&b,L[12]=J^~E&c,L[13]=rt^~r&y,L[22]=et^~ht&yt,L[23]=ut^~ct&xt,L[32]=$t^~kt&Vt,L[33]=Gt^~Mt&Ie,L[42]=Ai^~On&In,L[43]=Rn^~Li&sn,L[4]=Pt^~Ht&P,L[5]=Ct^~b&W,L[14]=E^~c&v,L[15]=r^~y&B,L[24]=ht^~yt&Rt,L[25]=ct^~xt&Ft,L[34]=kt^~Vt&ke,L[35]=Mt^~Ie&yi,L[44]=On^~In&jn,L[45]=Li^~sn&Fo,L[6]=Ht^~P&wt,L[7]=b^~W&pt,L[16]=c^~v&Q,L[17]=y^~B&X,L[26]=yt^~Rt&G,L[27]=xt^~Ft&j,L[36]=Vt^~ke&Ut,L[37]=Ie^~yi&Dt,L[46]=In^~jn&Bn,L[47]=sn^~Fo&Tn,L[8]=P^~wt&Et,L[9]=W^~pt&Bt,L[18]=v^~Q&J,L[19]=B^~X&rt,L[28]=Rt^~G&et,L[29]=Ft^~j&ut,L[38]=ke^~Ut&$t,L[39]=yi^~Dt&Gt,L[48]=jn^~Bn&Ai,L[49]=Fo^~Tn&Rn,L[0]^=x[h],L[1]^=x[h+1]};if(d)e.exports=q;else for(ft=0;ft<tt.length;++ft)o[tt[ft]]=q[tt[ft]]})()})(A3);let bo,ae;async function L3(e){var Z,z,K;const t=await Ui,n=performance.now();for(var i of e)t.fs.writeFileSync(i.name,wc(i.value));const o=((Z=e.find(T=>T.active&&T.value.includes("component main")))==null?void 0:Z.name)||((z=e.find(T=>T.name==="main.circom"))==null?void 0:z.name)||((K=e.find(T=>T.value.includes("component main")))==null?void 0:K.name)||"main.circom";ae=o.replace(/\..*$/,"");const a=e.find(T=>T.name===o).value,s=/\/\/\s*zkrepl:\s*(.*)/i.exec(a),d=s?s[1].split(/[\s,]+/):[],g={nowasm:d.includes("nowasm"),nor1cs:d.includes("nor1cs"),nosym:d.includes("nosym"),nowtns:d.includes("nowtns")};await th(o,g);const f=t.fs.readFileSync("/dev/stderr","utf8");f&&postMessage({type:"stderr",text:f});let l=await t.getStdOut();postMessage({type:"stdout",text:l+`Compiled in ${((performance.now()-n)/1e3).toFixed(2)}s`});let m,A=[],_,R;g.nowasm||(_=t.fs.readFileSync(`${ae}_js/${ae}.wasm`),g.nowtns||(m=await we(_,{log(T){A.push(T.toString())}})));let x;if(!g.nor1cs){R=t.fs.readFileSync(`${ae}.r1cs`);const{fd:T,sections:p}=await $e(R,"r1cs",1);x=await $i(T,p,!0),await T.close()}const C=/\/*\s*INPUT\s*=\s*(\{[\s\S]+\})\s*\*\//.exec(a);let k={};if(C?k=JSON.parse(C[1]):x&&x.nPrvInputs+x.nPubInputs>0&&postMessage({type:"stderr",text:`To specify inputs, add to your circuit: 

INPUT = { "a": "1234" }`}),m&&(bo=await m.calculateWTNSBin(k,!0)),A.length>0&&postMessage({type:"log",text:A.join(`
`)}),x&&x.nOutputs>0){const{fd:T,sections:p}=await $e(bo,"wtns",2),w=await ga(T,p),D=await yn(T,p,2);let $={};if(!g.nosym){const M=t.fs.readFileSync(`${ae}.sym`);let S=0,q=new TextDecoder("utf-8");for(let tt=0;tt<M.length;tt++)if(M[tt]===10){let ft=q.decode(M.slice(S,tt)),it=+ft.split(",")[0];it<=x.nOutputs&&($[it]=ft.split(",")[3].replace("main.","")+" = "),S=tt}}let U=[];for(let M=1;M<=x.nOutputs;M++){const S=D.slice(M*w.n8,M*w.n8+w.n8),q=$[M]||"";U.push(q+re.fromRprLE(S).toString())}postMessage({type:"Output",text:U.join(`
`)}),await T.close()}postMessage({type:"Artifacts",text:"",files:Object.fromEntries(Object.entries({[`${ae}.wasm`]:_,[`${ae}.js`]:_&&t.fs.readFileSync(`${ae}_js/witness_calculator.js`),[`${ae}.wtns`]:!g.nowtns&&!g.nowasm&&bo,[`${ae}.r1cs`]:R,[`${ae}.sym`]:!g.nosym&&t.fs.readFileSync(`${ae}.sym`)}).filter(([T,p])=>p))});const O=performance.now()-n;postMessage({type:"done",time:O,text:`Finished in ${(O/1e3).toFixed(2)}s`})}function I3(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}async function E3(e){const t=await Ui;let n=new RegExp("\\b"+I3(e)+"(\\b|$)"),i=g=>n.test(g),o=[];const a=t.fs.readFileSync(`${ae}.sym`);let s=0,d=new TextDecoder("utf-8");for(let g=0;g<a.length;g++){if(a[g]!==10)continue;const l=d.decode(a.slice(s,g)).split(",");if(l[3]&&i(l[3])){const{fd:m,sections:A}=await $e(bo,"wtns",2),_=await ga(m,A),R=await yn(m,A,2),x=parseInt(l[1]);if(x!==-1){const C=R.slice(x*_.n8,x*_.n8+_.n8);o.push("*"+l[3].replace("main.","")+" =* "+re.fromRprLE(C).toString())}if(await m.close(),o.length>3){o.push("...");break}}s=g+1}postMessage({type:"hover",text:o.join(`

`)})}onmessage=e=>{const t=e.data;t.type==="run"?L3(t.files).catch(n=>{postMessage({type:"fail",text:n.message})}):t.type==="hover"?E3(t.symbol).catch(n=>{console.log("hover err",n),postMessage({type:"hover",text:""})}):t.type==="groth16"?S3().catch(n=>{postMessage({type:"fail",text:n.message})}):t.type==="plonk"&&w3().catch(n=>{postMessage({type:"fail",text:n.message})})};async function w3(){const t=(await Ui).fs.readFileSync(`${ae}.r1cs`),{fd:n,sections:i}=await $e(t,"r1cs",1),o=await $i(n,i,!0);await n.close();const a=await su(4*3*o.nConstraints+o.nPubInputs+o.nOutputs),s={type:"mem",data:null},[d,g]=au();await y3(t,a,s,d);const f=JSON.stringify(await _a(s.data),null,"  "),l=await ru(s.data,{plonk:n1});postMessage({type:"keys",files:{[ae+".plonk.zkey"]:s.data,[ae+".plonk.vkey.json"]:f,[ae+".plonk.sol"]:l}})}function au(){const e=[];return[{info(n){e.push(n),console.log("INFO",n)},warn(n){console.log("WARN",n)},debug(n){},error(n){console.log("ERROR",n)}},e]}async function S3(){const t=(await Ui).fs.readFileSync(ae+".r1cs"),{fd:n,sections:i}=await $e(t,"r1cs",1),o=await $i(n,i,!0);await n.close();const a=await su(o.nConstraints),s={type:"mem",data:null},[d,g]=au(),f=await h3(t,a,s,d),l={type:"mem",data:null},m=globalThis.crypto.getRandomValues(new Uint8Array(512)),A=await _3(s.data,l,"zkrepl",m);console.log("ZKEY",f,l,A);const _=JSON.stringify(await _a(l.data),null,"  "),R=await ru(l.data,{groth16:e1});postMessage({type:"keys",files:{[ae+".groth16.zkey"]:l.data,[ae+".groth16.vkey.json"]:_,[ae+".groth16.sol"]:R}})}async function su(e){const n=[{url:"https://cloudflare-ipfs.com/ipfs/bafybeierwc3pmc2id2zfpgb42njkzvvvj4s333dcq4gr5ri2ixa6vuxi6a",name:"powersOfTau28_hez_final_11.ptau",maxConstraints:1<<11,size:2442392},{url:"https://cloudflare-ipfs.com/ipfs/bafybeibyoizq4sfp7sfomoofgczak3lgispbvviljjgdpchsxjrb4p6qsi",name:"powersOfTau28_hez_final_12.ptau",maxConstraints:1<<12,size:4801688},{url:"https://cloudflare-ipfs.com/ipfs/bafybeiderqjodw2mc6m5fqnc7edsun5eu4niupyw3cdsiruospa66y5vam",name:"powersOfTau28_hez_final_13.ptau",maxConstraints:1<<13,size:9520280},{url:"https://cloudflare-ipfs.com/ipfs/bafybeihuh2cuustfaraum3txs2scrl5vaukkc6u5ztf27jlyx5xhtsz5ti",name:"powersOfTau28_hez_final_14.ptau",maxConstraints:1<<14,size:18957464},{url:"https://dweb.link/ipfs/bafybeihfv3pmjkfmefpwdxwmxxqtsax4ljshnhl3qai4v62q5r2wszix34",name:"powersOfTau28_hez_final_15.ptau",maxConstraints:1<<15,size:37831832},{url:"https://cloudflare-ipfs.com/ipfs/bafybeiajy6lpqym5fvszu4klbzoqzljwhv4ocxvqmwvlwrg6pd6rieggd4",name:"powersOfTau28_hez_final_16.ptau",maxConstraints:1<<16,size:75580568},{url:"https://dweb.link/ipfs/bafybeib6a55iwy4666wxcwo7vy756sn36cwyx7u2u5idqcjxopwa7wpb3m",name:"powersOfTau28_hez_final_17.ptau",maxConstraints:1<<17,size:151078040},{url:"https://dweb.link/ipfs/bafybeidmnn4gwlirvok6vllpu4b7hkgheyemmptmeqgmhk3ony6aanv77e",name:"powersOfTau28_hez_final_18.ptau",maxConstraints:1<<18,size:302072984}].find(d=>d.maxConstraints>=e);if(!n)throw new Error("No powers of tau supported for "+e+" constraints");console.log(e,n),postMessage({type:"progress",fraction:null});const i=await fetch(n.url);let o=0;const a=new Response(new ReadableStream({async start(d){const g=i.body.getReader();for(;;){const{done:f,value:l}=await g.read();if(f)break;o+=l.byteLength,postMessage({type:"progress",fraction:o/n.size}),d.enqueue(l)}d.close()}}));return new Uint8Array(await a.arrayBuffer())}async function ga(e,t){await pn(e,t,1);const n=await e.readULE32(),i=await _i(e,n),o=await e.readULE32();return await mn(e),{n8:n,q:i,nWitness:o}}return Ee.readWtnsHeader=ga,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee})({});
