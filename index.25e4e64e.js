import{l as h,R as N,w as $,a as e,e as R,K as y,b as E,_ as S,c as C}from"./vendor.bfb6eff5.js";const L=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function d(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerpolicy&&(t.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?t.credentials="include":r.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(r){if(r.ep)return;r.ep=!0;const t=d(r);fetch(r.href,t)}};L();h.register({id:"circom"});let w=m=>{};h.registerHoverProvider("circom",{provideHover:async function(m,o){if(k.running)return null;const d=m.getLineContent(o.lineNumber),c=/([a-z$_][a-z0-9$_]*)(\.[a-z$_][a-z0-9$_]*)*(\[\d+\])?/g,r=o.column;let t;if(t=/(include\s+)"([^"]+)"/g.exec(d),t){let i=[];return t[2].startsWith("circomlib/")?i.push({value:`[View Source](https://github.com/iden3/circomlib/blob/master/circuits/${t[2].replace("circomlib/","")})`}):t[2].startsWith("gist:")&&i.push({value:`[View Source](https://gist.github.com/${t[2].replace("gist:","")})`}),{range:new N(o.lineNumber,1+t.index+t[1].length,o.lineNumber,1+t.index+t[0].length),contents:i}}for(;(t=c.exec(d))&&!(t.index>r);){if(t.index+t[0].length<r)continue;const i=t[0],s=await new Promise(g=>{w=l=>{g(l.text),w=()=>{}},k.postMessage({type:"hover",symbol:i})});return{range:new N(o.lineNumber,1+t.index,o.lineNumber,1+t.index+t[0].length),contents:[{value:s}]}}return null}});h.setLanguageConfiguration("circom",{wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:h.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:h.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|(\ \ ))*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:h.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|(\ \ ))*\ \*\/\s*$/,action:{indentAction:h.IndentAction.None,removeText:1}}],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/**",close:" */",notIn:["string"]}],folding:{markers:{start:new RegExp("^\\s*//\\s*#?region\\b"),end:new RegExp("^\\s*//\\s*#?endregion\\b")}}});h.setMonarchTokensProvider("circom",{keywords:["signal","input","output","public","template","component","var","function","return","if","else","for","while","do","log","assert","include","pragma"],typeKeywords:["input","output","public"],operators:["!","~","-","||","&&","==","!=","<",">","<=",">=","|","&","<<",">>","+","-","*","/","\\","%","**","^","=","<--","<=="],escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/@\s*[a-zA-Z_\$][\w\$]*/,{token:"annotation",log:"annotation token: $0"}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[[/[^\/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[\/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]}});var T=`pragma circom 2.0.1;

include "circomlib/poseidon.circom";

template Example () {
    signal input a;
    signal input b;
    signal output c;
    
    c <== a * b;

    assert(a > 2);
    
    component hash = Poseidon(2);
    hash.inputs[0] <== a;
    hash.inputs[1] <== b;

    log(hash.out);
}

component main { public [ a ] } = Example();

/* INPUT = {
    "a": "5",
    "b": "77"
} */`;function I(){return new Worker("worker.cd25f6f1.js",{type:"module"})}var P="circomlib.acbc52cb.zip";console.log(P,$);var k;function z(){const[m,o]=e.useState(!1),[d,c]=e.useState([]),[r,t]=e.useState(null),i=e.useRef(null),s=e.useRef(null),g=new URLSearchParams(location.search).get("gist");return e.useEffect(()=>{if(i&&!r){const l=new URLSearchParams(location.search).get("code");l&&(history.replaceState(null,"","/"),fetch("https://kikks470wl.execute-api.us-west-1.amazonaws.com/access_token?code="+l,{method:"POST"}).then(n=>n.formData()).then(n=>{n.get("access_token")?(localStorage.GithubAccessToken=n.get("access_token"),u.getModel().setValue(localStorage.GithubNavigationCodeSnapshot),v()):alert("Failed to get access token")})),g&&fetch("https://api.github.com/gists/"+g).then(n=>n.json()).then(n=>{var a,f;u.getModel().setValue(((f=(a=n==null?void 0:n.files)==null?void 0:a["main.circom"])==null?void 0:f.content)||"// Unable to load gist"),p()});const u=R.create(i.current,{value:g?"// Loading from Github...":T,language:"circom",theme:"vs",automaticLayout:!0,hover:{enabled:!0}}),p=()=>{(!s.current||s.current.running)&&(s.current&&(s.current.terminate(),s.current=null),s.current=new I,k=s.current,s.current.onmessage=n=>{const a=n.data;if(a.type==="fail")o(!1),s.current.running=!1;else if(a.type==="done")o(!1),s.current.running=!1;else{if(a.type==="hover")return w(a);a.type==="debug"&&console.log(a.text)}c(f=>[...f,a])},s.current.onerror=n=>{console.error(n),c(a=>[...a,{type:"error",text:n.message}])}),s.current.running=!0,o(Math.random()+1),c([]),s.current.postMessage({type:"run",code:u.getValue()})},v=()=>{const n=new URLSearchParams(location.search).get("gist"),a=()=>{localStorage.GithubNavigationCodeSnapshot=u.getValue(),location.href="https://github.com/login/oauth/authorize?client_id=85123c5a3a8a8f73f015&scope=gist"},f=u.getValue();if(history.state===f)console.log("Already saved!");else if(localStorage.GithubAccessToken){o(Math.random()+1);const x={"main.circom":{content:f}};n&&(x["about_zkrepl.md"]={content:`Open this in [zkREPL \u2192](https://zkrepl.dev/?gist=${n})

This file can be included into other zkREPLs with \`\`\`include "gist:`+n+'";```'}),fetch(n?"https://api.github.com/gists/"+n:"https://api.github.com/gists",{method:"POST",body:JSON.stringify({files:x}),headers:{Authorization:"token "+localStorage.GithubAccessToken}}).then(b=>b.json()).then(b=>{b.id?(history.replaceState(f,"","/?gist="+b.id),c(A=>[...A,{type:"save",url:`https://gist.github.com/${b.id}`,text:"Saved to Github"}])):b.message==="Bad credentials"?a():b.message==="Not Found"&&n&&(history.replaceState(null,"","/"),v()),o(!1)})}else a()};u.addCommand(y.CtrlCmd|E.KeyS,v),u.addCommand(y.CtrlCmd|E.Enter,p),u.addCommand(y.Shift|E.Enter,p),u.addCommand(y.CtrlCmd|E.Period,function(){console.log("Abort kernel!"),o(!1),c(n=>[...n,{type:"abort",text:"Execution manually interrupted"}]),s.current&&(s.current.terminate(),s.current=null)}),g||p(),t(u)}return()=>r==null?void 0:r.dispose()},[i.current]),e.createElement("div",{className:"layout"},e.createElement("div",{className:"editor",ref:i}),e.createElement("div",{className:"sidebar"},e.createElement("div",{className:"output"},e.createElement("div",{className:"heading"},e.createElement("div",{className:"description"},e.createElement("b",null,"Shift-Enter")," to run ",e.createElement("br",null),e.createElement("b",null,"Cmd-S")," to save as"," ",g?e.createElement("a",{href:`https://gist.github.com/${g}`,target:"_blank"},"Github Gist"):"Github Gist"),e.createElement("img",{className:"logo",src:new URL("logo.effa8f98.png",self.location).toString(),alt:"zkrepl"})),e.createElement("br",null),d.map((l,u)=>e.createElement("div",{key:u,className:"message"},e.createElement("div",{className:"label"},l.type,": "),l.url?e.createElement("a",{href:l.url},e.createElement(S,null,l.text)):e.createElement(S,null,l.text),l.files&&e.createElement("div",{className:"files"},Object.entries(l.files).map(([p,v])=>e.createElement("li",{key:p},e.createElement("a",{href:URL.createObjectURL(new Blob([v],{type:"application/octet-stream"})),download:p},p)," ","(",(v.length/1e3).toFixed(2),"KB)"))))),m?e.createElement(O,{key:m}):null)))}function O(){const[m,o]=e.useState(0);return e.useEffect(()=>{const d=Date.now(),c=setInterval(()=>{o(Date.now()-d)},16);return()=>clearInterval(c)},[]),e.createElement("div",{className:"loading"},e.createElement("div",{className:"lds-ellipsis"},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null)),m>200&&e.createElement("div",{className:"time"},(m/1e3).toFixed(2),"s"))}C.createRoot(document.getElementById("root")).render(e.createElement(z,null));
