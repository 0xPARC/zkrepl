import{l as y,R as T,w as I,a as e,e as k,U as M,K as C,b as A,_ as L,c as _}from"./vendor.74e29366.js";const G=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&d(a)}).observe(document,{childList:!0,subtree:!0});function g(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(t){if(t.ep)return;t.ep=!0;const n=g(t);fetch(t.href,n)}};G();y.register({id:"circom"});let R=f=>{};y.registerHoverProvider("circom",{provideHover:async function(f,i){if(P.running)return null;const g=f.getLineContent(i.lineNumber),d=/([a-z$_][a-z0-9$_]*)(\.[a-z$_][a-z0-9$_]*)*(\[\d+\])?/g,t=i.column;let n;if(n=/(include\s+)"([^"]+)"/g.exec(g),n){let a=[];return n[2].startsWith("circomlib/")?a.push({value:`[View Source](https://github.com/iden3/circomlib/blob/master/circuits/${n[2].replace("circomlib/","")})`}):n[2].startsWith("gist:")?a.push({value:`[View Source](https://gist.github.com/${n[2].replace("gist:","")})`}):(n[2].startsWith("http://")||n[2].startsWith("https://"))&&a.push({value:`[View Source](${n[2]})`}),{range:new T(i.lineNumber,1+n.index+n[1].length,i.lineNumber,1+n.index+n[0].length),contents:a}}for(;(n=d.exec(g))&&!(n.index>t);){if(n.index+n[0].length<t)continue;const a=n[0],v=await new Promise(l=>{R=N=>{l(N.text),R=()=>{}},P.postMessage({type:"hover",symbol:a})});return{range:new T(i.lineNumber,1+n.index,i.lineNumber,1+n.index+n[0].length),contents:[{value:v}]}}return null}});y.setLanguageConfiguration("circom",{wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:y.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:y.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|(\ \ ))*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:y.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|(\ \ ))*\ \*\/\s*$/,action:{indentAction:y.IndentAction.None,removeText:1}}],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/**",close:" */",notIn:["string"]}],folding:{markers:{start:new RegExp("^\\s*//\\s*#?region\\b"),end:new RegExp("^\\s*//\\s*#?endregion\\b")}}});y.setMonarchTokensProvider("circom",{keywords:["signal","input","output","public","template","component","var","function","return","if","else","for","while","do","log","assert","include","pragma"],typeKeywords:["input","output","public"],operators:["!","~","-","||","&&","==","!=","<",">","<=",">=","|","&","<<",">>","+","-","*","/","\\","%","**","^","=","<--","<=="],escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/@\s*[a-zA-Z_\$][\w\$]*/,{token:"annotation",log:"annotation token: $0"}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[[/[^\/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[\/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]}});var F=`pragma circom 2.0.3;

include "circomlib/poseidon.circom";
//include "https://github.com/0xPARC/circom-secp256k1/blob/master/circuits/bigint.circom";

template Example () {
    signal input a;
    signal input b;
    signal output c;
    
    c <== a * b;

    assert(a > 2);
    
    component hash = Poseidon(2);
    hash.inputs[0] <== a;
    hash.inputs[1] <== b;

    log(hash.out);
}

component main { public [ a ] } = Example();

/* INPUT = {
    "a": "5",
    "b": "77"
} */`;function U(){return new Worker("worker.bb482fef.js",{type:"module"})}var K="circomlib.acbc52cb.zip";console.log(K,I);var P;function W(){const[f,i]=e.useState(!1),[g,d]=e.useState([]),[t,n]=e.useState(null),a=e.useRef([]),v=e.useRef(null),l=e.useRef(null),[N,O]=e.useState(1),$=e.useRef({}),x=new URLSearchParams(location.search).get("gist");e.useEffect(()=>{if(v&&!t){const r=new URLSearchParams(location.search).get("code");r&&(history.replaceState(null,"","/"),fetch("https://kikks470wl.execute-api.us-west-1.amazonaws.com/access_token?code="+r,{method:"POST"}).then(s=>s.formData()).then(s=>{s.get("access_token")?(localStorage.GithubAccessToken=s.get("access_token"),E(JSON.parse(localStorage.GithubNavigationCodeSnapshot)),b()):alert("Failed to get access token")}));const u=k.create(v.current,{language:"circom",theme:"vs",automaticLayout:!0,hover:{enabled:!0}}),o=s=>s.map(c=>({value:c.getValue(),name:c.uri.path.slice(1),active:c.isAttachedToEditor()})),p=()=>{(!l.current||l.current.running)&&(l.current&&(l.current.terminate(),l.current=null),l.current=new U,P=l.current,l.current.onmessage=s=>{const c=s.data;if(c.type==="fail")i(!1),l.current.running=!1;else if(c.type==="done")i(!1),l.current.running=!1;else if(c.type==="keys")i(!1),l.current.running=!1;else{if(c.type==="hover")return R(c);if(c.type==="debug")console.log(c.text);else if(c.type==="progress"){O(c.fraction);return}}d(h=>[...h,c])},l.current.onerror=s=>{console.error(s),d(c=>[...c,{type:"error",text:s.message}])}),l.current.running=!0,i(Math.random()+1),d([]),l.current.postMessage({type:"run",files:o(a.current)})},E=s=>{const c=[];for(const h in s==null?void 0:s.files){if(h==="about_zkrepl.md")continue;const m=k.createModel((s==null?void 0:s.files[h].content)||"// Unable to load gist","circom",new M().with({path:h}));c.push(m)}a.current=c,u.setModel(c[0])},b=()=>{const s=new URLSearchParams(location.search).get("gist"),c=()=>{localStorage.GithubNavigationCodeSnapshot=JSON.stringify(o(a.current)),location.href="https://github.com/login/oauth/authorize?client_id=85123c5a3a8a8f73f015&scope=gist"};if(history.state===JSON.stringify(o(a.current)))console.log("Already saved!");else if(localStorage.GithubAccessToken){i(Math.random()+1);const h=async m=>{const w={};for(const S of o(a.current))w[S.name]={content:S.value};return m&&(w["about_zkrepl.md"]={content:`Open this in [zkREPL \u2192](https://zkrepl.dev/?gist=${m})

This file can be included into other zkREPLs with \`\`\`include "gist:`+m+'";```'}),fetch(m?"https://api.github.com/gists/"+m:"https://api.github.com/gists",{method:"POST",body:JSON.stringify({files:w}),headers:{Authorization:"token "+localStorage.GithubAccessToken}}).then(S=>S.json())};h(s).then(m=>m.id&&!s?h(m.id):m).then(m=>{m.id?(history.replaceState(JSON.stringify(o(a.current)),"","/?gist="+m.id),d(w=>[...w,{type:"save",url:`https://gist.github.com/${m.id}`,text:"Saved to Github"}])):m.message==="Bad credentials"?c():m.message==="Not Found"&&s&&(history.replaceState(null,"","/"),b()),i(!1)})}else c()};if(u.addCommand(C.CtrlCmd|A.KeyS,b),u.addCommand(C.CtrlCmd|A.Enter,p),u.addCommand(C.Shift|A.Enter,p),u.addCommand(C.CtrlCmd|A.Period,function(){console.log("Abort kernel!"),i(!1),d(s=>[...s,{type:"abort",text:"Execution manually interrupted"}]),l.current&&(l.current.terminate(),l.current=null)}),x)fetch("https://api.github.com/gists/"+x).then(s=>s.json()).then(s=>{E(s),p()});else{const s=[],c={"main.circom":F};for(const h in c){const m=k.createModel(c[h],"circom",new M().with({path:h}));s.push(m)}a.current=s,u.setModel(s[0]),p()}n(u)}return()=>t==null?void 0:t.dispose()},[v.current]);const z=r=>{const u=t==null?void 0:t.saveViewState();u&&(t==null?void 0:t.getModel())&&($.current[t==null?void 0:t.getModel().uri.path]=u),t==null||t.setModel(r),$.current[r.uri.path]&&(t==null||t.restoreViewState($.current[r.uri.path])),d(o=>o.slice(0))};return e.createElement("div",{className:"layout"},e.createElement("div",{className:"primary"},e.createElement("div",{className:"tabs"},a.current.map((r,u)=>e.createElement("div",{className:"tab "+((t==null?void 0:t.getModel().uri.path)===r.uri.path?"active":"inactive"),onClick:o=>z(r),key:u},e.createElement("input",{value:r.uri.path.slice(1),spellCheck:!1,onChange:o=>{const p=o.target.value;if(!a.current.some(b=>b.uri.path==="/"+p)){const b=k.createModel(r.getValue(),"circom",new M().with({path:p}));r.dispose(),a.current.splice(u,1,b),t==null||t.setModel(b)}o.target.style.width="0px",o.target.style.width=o.target.scrollWidth+2+"px",d(b=>b.slice(0))},ref:o=>{o&&(o.style.width="0px",o.style.width=o.scrollWidth+2+"px")}}),e.createElement("div",{className:"x",onClick:o=>{var p;a.current.length!=1&&((((p=r==null?void 0:r.getValue())==null?void 0:p.length)||0)<30||confirm(`Are you sure you want to remove "${r.uri.path.slice(1)}"?`))&&(r.dispose(),a.current.splice(u,1),t==null||t.setModel(a.current[0]),d(E=>E.slice(0)),o.stopPropagation())}},e.createElement("div",null,"\xD7")))),e.createElement("div",{className:"add",onClick:()=>{let r="untitled.circom";for(let o=2;a.current.some(p=>p.uri.path=="/"+r);o++)r=`untitled${o}.circom`;const u=k.createModel("// Type your code here","circom",new M().with({path:r}));a.current.push(u),t.setModel(u),d(g.slice(0))}},"+ Add File")),e.createElement("div",{className:"editor",ref:v})),e.createElement("div",{className:"sidebar"},e.createElement("div",{className:"output"},e.createElement("div",{className:"heading"},e.createElement("div",{className:"description"},e.createElement("b",null,"Shift-Enter")," to run ",e.createElement("br",null),e.createElement("b",null,"Cmd-S")," to save as"," ",x?e.createElement("a",{href:`https://gist.github.com/${x}`,target:"_blank"},"Github Gist"):"Github Gist"),e.createElement("img",{className:"logo",src:new URL("logo.effa8f98.png",self.location).toString(),alt:"zkrepl"})),e.createElement("br",null),g.map((r,u)=>e.createElement("div",{key:u,className:"message"},e.createElement("div",{className:"label"},r.type,": "),r.url?e.createElement("a",{href:r.url},e.createElement(L,null,r.text)):e.createElement(L,null,r.text),r.files&&e.createElement("div",{className:"files"},Object.entries(r.files).map(([o,p])=>e.createElement("li",{key:o},e.createElement("a",{href:URL.createObjectURL(new Blob([p],{type:"application/octet-stream"})),download:o},o)," ","(",(p.length/1e3).toFixed(2),"KB)"))))),g.some(r=>r.type==="done")&&!g.some(r=>r.type==="keys")&&!f&&l.current&&e.createElement("div",null,e.createElement("div",{className:"label"},"Prove/Verify Keys: "),e.createElement("div",{className:"phase2"},e.createElement("button",{onClick:()=>{l.current.postMessage({type:"groth16"}),i(Math.random())}},"Groth16"),e.createElement("button",{onClick:()=>{l.current.postMessage({type:"plonk"}),i(Math.random())}},"PLONK"))),N!==1&&e.createElement("div",{className:"progress-container"},e.createElement("progress",{value:N})),f?e.createElement(V,{key:f}):null)))}function V(){const[f,i]=e.useState(0);return e.useEffect(()=>{const g=Date.now(),d=setInterval(()=>{i(Date.now()-g)},16);return()=>clearInterval(d)},[]),e.createElement("div",{className:"loading"},e.createElement("div",{className:"lds-ellipsis"},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null)),f>200&&e.createElement("div",{className:"time"},(f/1e3).toFixed(2),"s"))}_.createRoot(document.getElementById("root")).render(e.createElement(W,null));
