var M3=Object.defineProperty,U3=Object.defineProperties;var D3=Object.getOwnPropertyDescriptors;var gu=Object.getOwnPropertySymbols;var G3=Object.prototype.hasOwnProperty,k3=Object.prototype.propertyIsEnumerable;var va=(Ee,he,we)=>he in Ee?M3(Ee,he,{enumerable:!0,configurable:!0,writable:!0,value:we}):Ee[he]=we,Mo=(Ee,he)=>{for(var we in he||(he={}))G3.call(he,we)&&va(Ee,we,he[we]);if(gu)for(var we of gu(he))k3.call(he,we)&&va(Ee,we,he[we]);return Ee},Ca=(Ee,he)=>U3(Ee,D3(he));var Kn=(Ee,he,we)=>(va(Ee,typeof he!="symbol"?he+"":he,we),we);(function(Ee){"use strict";function he(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}async function we(e,t){t=t||{};const n=await WebAssembly.compile(e);let i;const o=await WebAssembly.instantiate(n,{runtime:{exceptionHandler:function(_){let d;throw _==1?d="Signal not found. ":_==2?d="Too many signals set. ":_==3?d="Signal already set. ":_==4?d="Assert Failed. ":_==5?d="Not enough memory. ":d=`Unknown error
`,d+=s(),new Error(d)},showSharedRWMemory:function(){u()}}}),a=!0;return i=new mu(o,a),i;function s(){for(var _="",d=o.exports.getMessageChar();d!=0;)_+=String.fromCharCode(d),d=o.exports.getMessageChar();return _}function u(){const _=o.exports.getFieldNumLen32(),d=new Uint32Array(_);for(let l=0;l<_;l++)d[_-1-l]=o.exports.readSharedRWMemory(l);t.log(Uo(d))}}class mu{constructor(t,n){Kn(this,"instance");Kn(this,"version");Kn(this,"n32");Kn(this,"witnessSize");Kn(this,"prime");Kn(this,"sanityCheck");this.instance=t,this.version=this.instance.exports.getVersion(),this.n32=this.instance.exports.getFieldNumLen32(),this.instance.exports.getRawPrime();const i=new Array(this.n32);for(let o=0;o<this.n32;o++)i[this.n32-1-o]=this.instance.exports.readSharedRWMemory(o);this.prime=Uo(i),this.witnessSize=this.instance.exports.getWitnessSize(),this.sanityCheck=n}circom_version(){return this.instance.exports.getVersion()}async _doCalculateWitness(t,n){this.instance.exports.init(this.sanityCheck||n?1:0);const i=Object.keys(t);var o=0;if(i.forEach(a=>{const s=Iu(a),u=parseInt(s.slice(0,8),16),_=parseInt(s.slice(8,16),16),d=Au(t[a]);for(let l=0;l<d.length;l++){const m=yu(d[l],this.n32);for(let A=0;A<this.n32;A++)this.instance.exports.writeSharedRWMemory(A,m[this.n32-1-A]);try{this.instance.exports.setInputSignal(u,_,l),o++}catch(A){throw A.message.includes("Signal not found.")?new Error(`Unexpected input signal "${a}".`):new Error(A)}}}),o<this.instance.exports.getInputSize())throw new Error(`Not all inputs have been set. Only ${o} out of ${this.instance.exports.getInputSize()}`)}async calculateWitness(t,n){const i=[];await this._doCalculateWitness(t,n);for(let o=0;o<this.witnessSize;o++){this.instance.exports.getWitness(o);const a=new Uint32Array(this.n32);for(let s=0;s<this.n32;s++)a[this.n32-1-s]=this.instance.exports.readSharedRWMemory(s);i.push(Uo(a))}return i}async calculateBinWitness(t,n){const i=new Uint32Array(this.witnessSize*this.n32),o=new Uint8Array(i.buffer);await this._doCalculateWitness(t,n);for(let a=0;a<this.witnessSize;a++){this.instance.exports.getWitness(a);const s=a*this.n32;for(let u=0;u<this.n32;u++)i[s+u]=this.instance.exports.readSharedRWMemory(u)}return o}async calculateWTNSBin(t,n){const i=new Uint32Array(this.witnessSize*this.n32+this.n32+11),o=new Uint8Array(i.buffer);await this._doCalculateWitness(t,n),o[0]="w".charCodeAt(0),o[1]="t".charCodeAt(0),o[2]="n".charCodeAt(0),o[3]="s".charCodeAt(0),i[1]=2,i[2]=2,i[3]=1;const a=this.n32*4,u=(8+a).toString(16);i[4]=parseInt(u.slice(0,8),16),i[5]=parseInt(u.slice(8,16),16),i[6]=a,this.instance.exports.getRawPrime();var _=7;for(let m=0;m<this.n32;m++)i[_+m]=this.instance.exports.readSharedRWMemory(m);_+=this.n32,i[_]=this.witnessSize,_++,i[_]=2,_++;const l=(a*this.witnessSize).toString(16);i[_]=parseInt(l.slice(0,8),16),i[_+1]=parseInt(l.slice(8,16),16),_+=2;for(let m=0;m<this.witnessSize;m++){this.instance.exports.getWitness(m);for(let A=0;A<this.n32;A++)i[_+A]=this.instance.exports.readSharedRWMemory(A);_+=this.n32}return o}}function yu(e,t){const n=[];let i=BigInt(e);const o=BigInt(4294967296);for(;i;)n.unshift(Number(i%o)),i=i/o;if(t)for(var a=t-n.length;a>0;)n.unshift(0),a--;return n}function Uo(e){var t=BigInt(0);const n=BigInt(4294967296);for(let i=0;i<e.length;i++)t=t*n+BigInt(e[i]);return t}function Au(e){var t=[];return n(t,e),t;function n(i,o){if(Array.isArray(o))for(let a=0;a<o.length;a++)n(i,o[a]);else i.push(o)}}function Iu(e){const t=BigInt(2)**BigInt(64);let n=BigInt("0xCBF29CE484222325");for(var i=0;i<e.length;i++)n^=BigInt(e[i].charCodeAt(0)),n*=BigInt(1099511628211),n%=t;let o=n.toString(16),a=16-o.length;return o="0".repeat(a).concat(o),o}var Ke=[],He=[],Lu=typeof Uint8Array!="undefined"?Uint8Array:Array,Do=!1;function ba(){Do=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)Ke[t]=e[t],He[e.charCodeAt(t)]=t;He["-".charCodeAt(0)]=62,He["_".charCodeAt(0)]=63}function Eu(e){Do||ba();var t,n,i,o,a,s,u=e.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a=e[u-2]==="="?2:e[u-1]==="="?1:0,s=new Lu(u*3/4-a),i=a>0?u-4:u;var _=0;for(t=0,n=0;t<i;t+=4,n+=3)o=He[e.charCodeAt(t)]<<18|He[e.charCodeAt(t+1)]<<12|He[e.charCodeAt(t+2)]<<6|He[e.charCodeAt(t+3)],s[_++]=o>>16&255,s[_++]=o>>8&255,s[_++]=o&255;return a===2?(o=He[e.charCodeAt(t)]<<2|He[e.charCodeAt(t+1)]>>4,s[_++]=o&255):a===1&&(o=He[e.charCodeAt(t)]<<10|He[e.charCodeAt(t+1)]<<4|He[e.charCodeAt(t+2)]>>2,s[_++]=o>>8&255,s[_++]=o&255),s}function wu(e){return Ke[e>>18&63]+Ke[e>>12&63]+Ke[e>>6&63]+Ke[e&63]}function Su(e,t,n){for(var i,o=[],a=t;a<n;a+=3)i=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(wu(i));return o.join("")}function Fa(e){Do||ba();for(var t,n=e.length,i=n%3,o="",a=[],s=16383,u=0,_=n-i;u<_;u+=s)a.push(Su(e,u,u+s>_?_:u+s));return i===1?(t=e[n-1],o+=Ke[t>>2],o+=Ke[t<<4&63],o+="=="):i===2&&(t=(e[n-2]<<8)+e[n-1],o+=Ke[t>>10],o+=Ke[t>>4&63],o+=Ke[t<<2&63],o+="="),a.push(o),a.join("")}function Zi(e,t,n,i,o){var a,s,u=o*8-i-1,_=(1<<u)-1,d=_>>1,l=-7,m=n?o-1:0,A=n?-1:1,p=e[t+m];for(m+=A,a=p&(1<<-l)-1,p>>=-l,l+=u;l>0;a=a*256+e[t+m],m+=A,l-=8);for(s=a&(1<<-l)-1,a>>=-l,l+=i;l>0;s=s*256+e[t+m],m+=A,l-=8);if(a===0)a=1-d;else{if(a===_)return s?NaN:(p?-1:1)*(1/0);s=s+Math.pow(2,i),a=a-d}return(p?-1:1)*s*Math.pow(2,a-i)}function Ba(e,t,n,i,o,a){var s,u,_,d=a*8-o-1,l=(1<<d)-1,m=l>>1,A=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:a-1,R=i?1:-1,P=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(_=Math.pow(2,-s))<1&&(s--,_*=2),s+m>=1?t+=A/_:t+=A*Math.pow(2,1-m),t*_>=2&&(s++,_/=2),s+m>=l?(u=0,s=l):s+m>=1?(u=(t*_-1)*Math.pow(2,o),s=s+m):(u=t*Math.pow(2,m-1)*Math.pow(2,o),s=0));o>=8;e[n+p]=u&255,p+=R,u/=256,o-=8);for(s=s<<o|u,d+=o;d>0;e[n+p]=s&255,p+=R,s/=256,d-=8);e[n+p-R]|=P*128}var vu={}.toString,Ta=Array.isArray||function(e){return vu.call(e)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var Cu=50;vt.TYPED_ARRAY_SUPPORT=!0;function Go(){return vt.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function fn(e,t){if(Go()<t)throw new RangeError("Invalid typed array length");return vt.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=vt.prototype):(e===null&&(e=new vt(t)),e.length=t),e}function vt(e,t,n){if(!vt.TYPED_ARRAY_SUPPORT&&!(this instanceof vt))return new vt(e,t,n);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return ko(this,e)}return Ra(this,e,t,n)}vt.poolSize=8192,vt._augment=function(e){return e.__proto__=vt.prototype,e};function Ra(e,t,n,i){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer?Bu(e,t,n,i):typeof t=="string"?Fu(e,t,n):Tu(e,t)}vt.from=function(e,t,n){return Ra(null,e,t,n)},vt.TYPED_ARRAY_SUPPORT&&(vt.prototype.__proto__=Uint8Array.prototype,vt.__proto__=Uint8Array);function Oa(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function bu(e,t,n,i){return Oa(t),t<=0?fn(e,t):n!==void 0?typeof i=="string"?fn(e,t).fill(n,i):fn(e,t).fill(n):fn(e,t)}vt.alloc=function(e,t,n){return bu(null,e,t,n)};function ko(e,t){if(Oa(t),e=fn(e,t<0?0:qo(t)|0),!vt.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}vt.allocUnsafe=function(e){return ko(null,e)},vt.allocUnsafeSlow=function(e){return ko(null,e)};function Fu(e,t,n){if((typeof n!="string"||n==="")&&(n="utf8"),!vt.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=Pa(t,n)|0;e=fn(e,i);var o=e.write(t,n);return o!==i&&(e=e.slice(0,o)),e}function Wo(e,t){var n=t.length<0?0:qo(t.length)|0;e=fn(e,n);for(var i=0;i<n;i+=1)e[i]=t[i]&255;return e}function Bu(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return n===void 0&&i===void 0?t=new Uint8Array(t):i===void 0?t=new Uint8Array(t,n):t=new Uint8Array(t,n,i),vt.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=vt.prototype):e=Wo(e,t),e}function Tu(e,t){if(Ze(t)){var n=qo(t.length)|0;return e=fn(e,n),e.length===0||t.copy(e,0,0,n),e}if(t){if(typeof ArrayBuffer!="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||Vu(t.length)?fn(e,0):Wo(e,t);if(t.type==="Buffer"&&Ta(t.data))return Wo(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function qo(e){if(e>=Go())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Go().toString(16)+" bytes");return e|0}vt.isBuffer=Ku;function Ze(e){return!!(e!=null&&e._isBuffer)}vt.compare=function(t,n){if(!Ze(t)||!Ze(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var i=t.length,o=n.length,a=0,s=Math.min(i,o);a<s;++a)if(t[a]!==n[a]){i=t[a],o=n[a];break}return i<o?-1:o<i?1:0},vt.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},vt.concat=function(t,n){if(!Ta(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return vt.alloc(0);var i;if(n===void 0)for(n=0,i=0;i<t.length;++i)n+=t[i].length;var o=vt.allocUnsafe(n),a=0;for(i=0;i<t.length;++i){var s=t[i];if(!Ze(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,a),a+=s.length}return o};function Pa(e,t){if(Ze(e))return e.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var n=e.length;if(n===0)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return to(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return qa(e).length;default:if(i)return to(e).length;t=(""+t).toLowerCase(),i=!0}}vt.byteLength=Pa;function Ru(e,t,n){var i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Wu(this,t,n);case"utf8":case"utf-8":return Ua(this,t,n);case"ascii":return Gu(this,t,n);case"latin1":case"binary":return ku(this,t,n);case"base64":return Uu(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qu(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}vt.prototype._isBuffer=!0;function Nn(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}vt.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)Nn(this,n,n+1);return this},vt.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)Nn(this,n,n+3),Nn(this,n+1,n+2);return this},vt.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)Nn(this,n,n+7),Nn(this,n+1,n+6),Nn(this,n+2,n+5),Nn(this,n+3,n+4);return this},vt.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?Ua(this,0,t):Ru.apply(this,arguments)},vt.prototype.equals=function(t){if(!Ze(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:vt.compare(this,t)===0},vt.prototype.inspect=function(){var t="",n=Cu;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},vt.prototype.compare=function(t,n,i,o,a){if(!Ze(t))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),i===void 0&&(i=t?t.length:0),o===void 0&&(o=0),a===void 0&&(a=this.length),n<0||i>t.length||o<0||a>this.length)throw new RangeError("out of range index");if(o>=a&&n>=i)return 0;if(o>=a)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,o>>>=0,a>>>=0,this===t)return 0;for(var s=a-o,u=i-n,_=Math.min(s,u),d=this.slice(o,a),l=t.slice(n,i),m=0;m<_;++m)if(d[m]!==l[m]){s=d[m],u=l[m];break}return s<u?-1:u<s?1:0};function xa(e,t,n,i,o){if(e.length===0)return-1;if(typeof n=="string"?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0)if(o)n=0;else return-1;if(typeof t=="string"&&(t=vt.from(t,i)),Ze(t))return t.length===0?-1:Na(e,t,n,i,o);if(typeof t=="number")return t=t&255,vt.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Na(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function Na(e,t,n,i,o){var a=1,s=e.length,u=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function _(p,R){return a===1?p[R]:p.readUInt16BE(R*a)}var d;if(o){var l=-1;for(d=n;d<s;d++)if(_(e,d)===_(t,l===-1?0:d-l)){if(l===-1&&(l=d),d-l+1===u)return l*a}else l!==-1&&(d-=d-l),l=-1}else for(n+u>s&&(n=s-u),d=n;d>=0;d--){for(var m=!0,A=0;A<u;A++)if(_(e,d+A)!==_(t,A)){m=!1;break}if(m)return d}return-1}vt.prototype.includes=function(t,n,i){return this.indexOf(t,n,i)!==-1},vt.prototype.indexOf=function(t,n,i){return xa(this,t,n,i,!0)},vt.prototype.lastIndexOf=function(t,n,i){return xa(this,t,n,i,!1)};function Ou(e,t,n,i){n=Number(n)||0;var o=e.length-n;i?(i=Number(i),i>o&&(i=o)):i=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var s=0;s<i;++s){var u=parseInt(t.substr(s*2,2),16);if(isNaN(u))return s;e[n+s]=u}return s}function Pu(e,t,n,i){return eo(to(t,e.length-n),e,n,i)}function Ma(e,t,n,i){return eo(ju(t),e,n,i)}function xu(e,t,n,i){return Ma(e,t,n,i)}function Nu(e,t,n,i){return eo(qa(t),e,n,i)}function Mu(e,t,n,i){return eo(Yu(t,e.length-n),e,n,i)}vt.prototype.write=function(t,n,i,o){if(n===void 0)o="utf8",i=this.length,n=0;else if(i===void 0&&typeof n=="string")o=n,i=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(i)?(i=i|0,o===void 0&&(o="utf8")):(o=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-n;if((i===void 0||i>a)&&(i=a),t.length>0&&(i<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var s=!1;;)switch(o){case"hex":return Ou(this,t,n,i);case"utf8":case"utf-8":return Pu(this,t,n,i);case"ascii":return Ma(this,t,n,i);case"latin1":case"binary":return xu(this,t,n,i);case"base64":return Nu(this,t,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Mu(this,t,n,i);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}},vt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Uu(e,t,n){return t===0&&n===e.length?Fa(e):Fa(e.slice(t,n))}function Ua(e,t,n){n=Math.min(e.length,n);for(var i=[],o=t;o<n;){var a=e[o],s=null,u=a>239?4:a>223?3:a>191?2:1;if(o+u<=n){var _,d,l,m;switch(u){case 1:a<128&&(s=a);break;case 2:_=e[o+1],(_&192)==128&&(m=(a&31)<<6|_&63,m>127&&(s=m));break;case 3:_=e[o+1],d=e[o+2],(_&192)==128&&(d&192)==128&&(m=(a&15)<<12|(_&63)<<6|d&63,m>2047&&(m<55296||m>57343)&&(s=m));break;case 4:_=e[o+1],d=e[o+2],l=e[o+3],(_&192)==128&&(d&192)==128&&(l&192)==128&&(m=(a&15)<<18|(_&63)<<12|(d&63)<<6|l&63,m>65535&&m<1114112&&(s=m))}}s===null?(s=65533,u=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),o+=u}return Du(i)}var Da=4096;function Du(e){var t=e.length;if(t<=Da)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=Da));return n}function Gu(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(e[o]&127);return i}function ku(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(e[o]);return i}function Wu(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",a=t;a<n;++a)o+=$u(e[a]);return o}function qu(e,t,n){for(var i=e.slice(t,n),o="",a=0;a<i.length;a+=2)o+=String.fromCharCode(i[a]+i[a+1]*256);return o}vt.prototype.slice=function(t,n){var i=this.length;t=~~t,n=n===void 0?i:~~n,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),n<0?(n+=i,n<0&&(n=0)):n>i&&(n=i),n<t&&(n=t);var o;if(vt.TYPED_ARRAY_SUPPORT)o=this.subarray(t,n),o.__proto__=vt.prototype;else{var a=n-t;o=new vt(a,void 0);for(var s=0;s<a;++s)o[s]=this[s+t]}return o};function _e(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}vt.prototype.readUIntLE=function(t,n,i){t=t|0,n=n|0,i||_e(t,n,this.length);for(var o=this[t],a=1,s=0;++s<n&&(a*=256);)o+=this[t+s]*a;return o},vt.prototype.readUIntBE=function(t,n,i){t=t|0,n=n|0,i||_e(t,n,this.length);for(var o=this[t+--n],a=1;n>0&&(a*=256);)o+=this[t+--n]*a;return o},vt.prototype.readUInt8=function(t,n){return n||_e(t,1,this.length),this[t]},vt.prototype.readUInt16LE=function(t,n){return n||_e(t,2,this.length),this[t]|this[t+1]<<8},vt.prototype.readUInt16BE=function(t,n){return n||_e(t,2,this.length),this[t]<<8|this[t+1]},vt.prototype.readUInt32LE=function(t,n){return n||_e(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},vt.prototype.readUInt32BE=function(t,n){return n||_e(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},vt.prototype.readIntLE=function(t,n,i){t=t|0,n=n|0,i||_e(t,n,this.length);for(var o=this[t],a=1,s=0;++s<n&&(a*=256);)o+=this[t+s]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*n)),o},vt.prototype.readIntBE=function(t,n,i){t=t|0,n=n|0,i||_e(t,n,this.length);for(var o=n,a=1,s=this[t+--o];o>0&&(a*=256);)s+=this[t+--o]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*n)),s},vt.prototype.readInt8=function(t,n){return n||_e(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},vt.prototype.readInt16LE=function(t,n){n||_e(t,2,this.length);var i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i},vt.prototype.readInt16BE=function(t,n){n||_e(t,2,this.length);var i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i},vt.prototype.readInt32LE=function(t,n){return n||_e(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},vt.prototype.readInt32BE=function(t,n){return n||_e(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},vt.prototype.readFloatLE=function(t,n){return n||_e(t,4,this.length),Zi(this,t,!0,23,4)},vt.prototype.readFloatBE=function(t,n){return n||_e(t,4,this.length),Zi(this,t,!1,23,4)},vt.prototype.readDoubleLE=function(t,n){return n||_e(t,8,this.length),Zi(this,t,!0,52,8)},vt.prototype.readDoubleBE=function(t,n){return n||_e(t,8,this.length),Zi(this,t,!1,52,8)};function Re(e,t,n,i,o,a){if(!Ze(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}vt.prototype.writeUIntLE=function(t,n,i,o){if(t=+t,n=n|0,i=i|0,!o){var a=Math.pow(2,8*i)-1;Re(this,t,n,i,a,0)}var s=1,u=0;for(this[n]=t&255;++u<i&&(s*=256);)this[n+u]=t/s&255;return n+i},vt.prototype.writeUIntBE=function(t,n,i,o){if(t=+t,n=n|0,i=i|0,!o){var a=Math.pow(2,8*i)-1;Re(this,t,n,i,a,0)}var s=i-1,u=1;for(this[n+s]=t&255;--s>=0&&(u*=256);)this[n+s]=t/u&255;return n+i},vt.prototype.writeUInt8=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,1,255,0),vt.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=t&255,n+1};function Xi(e,t,n,i){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-n,2);o<a;++o)e[n+o]=(t&255<<8*(i?o:1-o))>>>(i?o:1-o)*8}vt.prototype.writeUInt16LE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,2,65535,0),vt.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8):Xi(this,t,n,!0),n+2},vt.prototype.writeUInt16BE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,2,65535,0),vt.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t&255):Xi(this,t,n,!1),n+2};function Ji(e,t,n,i){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-n,4);o<a;++o)e[n+o]=t>>>(i?o:3-o)*8&255}vt.prototype.writeUInt32LE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,4,4294967295,0),vt.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255):Ji(this,t,n,!0),n+4},vt.prototype.writeUInt32BE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,4,4294967295,0),vt.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255):Ji(this,t,n,!1),n+4},vt.prototype.writeIntLE=function(t,n,i,o){if(t=+t,n=n|0,!o){var a=Math.pow(2,8*i-1);Re(this,t,n,i,a-1,-a)}var s=0,u=1,_=0;for(this[n]=t&255;++s<i&&(u*=256);)t<0&&_===0&&this[n+s-1]!==0&&(_=1),this[n+s]=(t/u>>0)-_&255;return n+i},vt.prototype.writeIntBE=function(t,n,i,o){if(t=+t,n=n|0,!o){var a=Math.pow(2,8*i-1);Re(this,t,n,i,a-1,-a)}var s=i-1,u=1,_=0;for(this[n+s]=t&255;--s>=0&&(u*=256);)t<0&&_===0&&this[n+s+1]!==0&&(_=1),this[n+s]=(t/u>>0)-_&255;return n+i},vt.prototype.writeInt8=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,1,127,-128),vt.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=t&255,n+1},vt.prototype.writeInt16LE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,2,32767,-32768),vt.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8):Xi(this,t,n,!0),n+2},vt.prototype.writeInt16BE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,2,32767,-32768),vt.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t&255):Xi(this,t,n,!1),n+2},vt.prototype.writeInt32LE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,4,2147483647,-2147483648),vt.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):Ji(this,t,n,!0),n+4},vt.prototype.writeInt32BE=function(t,n,i){return t=+t,n=n|0,i||Re(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),vt.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255):Ji(this,t,n,!1),n+4};function Ga(e,t,n,i,o,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function ka(e,t,n,i,o){return o||Ga(e,t,n,4),Ba(e,t,n,i,23,4),n+4}vt.prototype.writeFloatLE=function(t,n,i){return ka(this,t,n,!0,i)},vt.prototype.writeFloatBE=function(t,n,i){return ka(this,t,n,!1,i)};function Wa(e,t,n,i,o){return o||Ga(e,t,n,8),Ba(e,t,n,i,52,8),n+8}vt.prototype.writeDoubleLE=function(t,n,i){return Wa(this,t,n,!0,i)},vt.prototype.writeDoubleBE=function(t,n,i){return Wa(this,t,n,!1,i)},vt.prototype.copy=function(t,n,i,o){if(i||(i=0),!o&&o!==0&&(o=this.length),n>=t.length&&(n=t.length),n||(n=0),o>0&&o<i&&(o=i),o===i||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-n<o-i&&(o=t.length-n+i);var a=o-i,s;if(this===t&&i<n&&n<o)for(s=a-1;s>=0;--s)t[s+n]=this[s+i];else if(a<1e3||!vt.TYPED_ARRAY_SUPPORT)for(s=0;s<a;++s)t[s+n]=this[s+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+a),n);return a},vt.prototype.fill=function(t,n,i,o){if(typeof t=="string"){if(typeof n=="string"?(o=n,n=0,i=this.length):typeof i=="string"&&(o=i,i=this.length),t.length===1){var a=t.charCodeAt(0);a<256&&(t=a)}if(o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!vt.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else typeof t=="number"&&(t=t&255);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;n=n>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);var s;if(typeof t=="number")for(s=n;s<i;++s)this[s]=t;else{var u=Ze(t)?t:to(new vt(t,o).toString()),_=u.length;for(s=0;s<i-n;++s)this[s+n]=u[s%_]}return this};var Qu=/[^+\/0-9A-Za-z-_]/g;function Hu(e){if(e=zu(e).replace(Qu,""),e.length<2)return"";for(;e.length%4!=0;)e=e+"=";return e}function zu(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function $u(e){return e<16?"0"+e.toString(16):e.toString(16)}function to(e,t){t=t||1/0;for(var n,i=e.length,o=null,a=[],s=0;s<i;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(s+1===i){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return a}function ju(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function Yu(e,t){for(var n,i,o,a=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),i=n>>8,o=n%256,a.push(o),a.push(i);return a}function qa(e){return Eu(Hu(e))}function eo(e,t,n,i){for(var o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function Vu(e){return e!==e}function Ku(e){return e!=null&&(!!e._isBuffer||Qa(e)||Zu(e))}function Qa(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Zu(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Qa(e.slice(0,0))}var Qo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ha(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),t}var Zn={},Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});const Xu=typeof globalThis!="undefined"?globalThis:typeof Qo!="undefined"?Qo:{};Ei.BigIntPolyfill=typeof BigInt!="undefined"?BigInt:Xu.BigInt||Number;var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});const Ju=Ei;let no=DataView;no.prototype.setBigUint64||(no.prototype.setBigUint64=function(e,t,n){let i,o;if(t<2**32)i=Number(t),o=0;else{for(var a=t.toString(2),s="",u=0;u<64-a.length;u++)s+="0";s+=a,o=parseInt(s.substring(0,32),2),i=parseInt(s.substring(32),2)}this.setUint32(e+(n?0:4),i,n),this.setUint32(e+(n?4:0),o,n)},no.prototype.getBigUint64=function(e,t){let n=this.getUint32(e+(t?0:4),t),i=this.getUint32(e+(t?4:0),t);for(var o=n.toString(2),a=i.toString(2),s="",u=0;u<32-o.length;u++)s+="0";return s+=o,Ju.BigIntPolyfill("0b"+a+s)}),Ho.DataViewPolyfill=no;var tf=Object.freeze({__proto__:null,default:vt}),ef=Ha(tf),za={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ei;e.WASI_ESUCCESS=0,e.WASI_E2BIG=1,e.WASI_EACCES=2,e.WASI_EADDRINUSE=3,e.WASI_EADDRNOTAVAIL=4,e.WASI_EAFNOSUPPORT=5,e.WASI_EAGAIN=6,e.WASI_EALREADY=7,e.WASI_EBADF=8,e.WASI_EBADMSG=9,e.WASI_EBUSY=10,e.WASI_ECANCELED=11,e.WASI_ECHILD=12,e.WASI_ECONNABORTED=13,e.WASI_ECONNREFUSED=14,e.WASI_ECONNRESET=15,e.WASI_EDEADLK=16,e.WASI_EDESTADDRREQ=17,e.WASI_EDOM=18,e.WASI_EDQUOT=19,e.WASI_EEXIST=20,e.WASI_EFAULT=21,e.WASI_EFBIG=22,e.WASI_EHOSTUNREACH=23,e.WASI_EIDRM=24,e.WASI_EILSEQ=25,e.WASI_EINPROGRESS=26,e.WASI_EINTR=27,e.WASI_EINVAL=28,e.WASI_EIO=29,e.WASI_EISCONN=30,e.WASI_EISDIR=31,e.WASI_ELOOP=32,e.WASI_EMFILE=33,e.WASI_EMLINK=34,e.WASI_EMSGSIZE=35,e.WASI_EMULTIHOP=36,e.WASI_ENAMETOOLONG=37,e.WASI_ENETDOWN=38,e.WASI_ENETRESET=39,e.WASI_ENETUNREACH=40,e.WASI_ENFILE=41,e.WASI_ENOBUFS=42,e.WASI_ENODEV=43,e.WASI_ENOENT=44,e.WASI_ENOEXEC=45,e.WASI_ENOLCK=46,e.WASI_ENOLINK=47,e.WASI_ENOMEM=48,e.WASI_ENOMSG=49,e.WASI_ENOPROTOOPT=50,e.WASI_ENOSPC=51,e.WASI_ENOSYS=52,e.WASI_ENOTCONN=53,e.WASI_ENOTDIR=54,e.WASI_ENOTEMPTY=55,e.WASI_ENOTRECOVERABLE=56,e.WASI_ENOTSOCK=57,e.WASI_ENOTSUP=58,e.WASI_ENOTTY=59,e.WASI_ENXIO=60,e.WASI_EOVERFLOW=61,e.WASI_EOWNERDEAD=62,e.WASI_EPERM=63,e.WASI_EPIPE=64,e.WASI_EPROTO=65,e.WASI_EPROTONOSUPPORT=66,e.WASI_EPROTOTYPE=67,e.WASI_ERANGE=68,e.WASI_EROFS=69,e.WASI_ESPIPE=70,e.WASI_ESRCH=71,e.WASI_ESTALE=72,e.WASI_ETIMEDOUT=73,e.WASI_ETXTBSY=74,e.WASI_EXDEV=75,e.WASI_ENOTCAPABLE=76,e.WASI_SIGABRT=0,e.WASI_SIGALRM=1,e.WASI_SIGBUS=2,e.WASI_SIGCHLD=3,e.WASI_SIGCONT=4,e.WASI_SIGFPE=5,e.WASI_SIGHUP=6,e.WASI_SIGILL=7,e.WASI_SIGINT=8,e.WASI_SIGKILL=9,e.WASI_SIGPIPE=10,e.WASI_SIGQUIT=11,e.WASI_SIGSEGV=12,e.WASI_SIGSTOP=13,e.WASI_SIGTERM=14,e.WASI_SIGTRAP=15,e.WASI_SIGTSTP=16,e.WASI_SIGTTIN=17,e.WASI_SIGTTOU=18,e.WASI_SIGURG=19,e.WASI_SIGUSR1=20,e.WASI_SIGUSR2=21,e.WASI_SIGVTALRM=22,e.WASI_SIGXCPU=23,e.WASI_SIGXFSZ=24,e.WASI_FILETYPE_UNKNOWN=0,e.WASI_FILETYPE_BLOCK_DEVICE=1,e.WASI_FILETYPE_CHARACTER_DEVICE=2,e.WASI_FILETYPE_DIRECTORY=3,e.WASI_FILETYPE_REGULAR_FILE=4,e.WASI_FILETYPE_SOCKET_DGRAM=5,e.WASI_FILETYPE_SOCKET_STREAM=6,e.WASI_FILETYPE_SYMBOLIC_LINK=7,e.WASI_FDFLAG_APPEND=1,e.WASI_FDFLAG_DSYNC=2,e.WASI_FDFLAG_NONBLOCK=4,e.WASI_FDFLAG_RSYNC=8,e.WASI_FDFLAG_SYNC=16,e.WASI_RIGHT_FD_DATASYNC=t.BigIntPolyfill(1),e.WASI_RIGHT_FD_READ=t.BigIntPolyfill(2),e.WASI_RIGHT_FD_SEEK=t.BigIntPolyfill(4),e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS=t.BigIntPolyfill(8),e.WASI_RIGHT_FD_SYNC=t.BigIntPolyfill(16),e.WASI_RIGHT_FD_TELL=t.BigIntPolyfill(32),e.WASI_RIGHT_FD_WRITE=t.BigIntPolyfill(64),e.WASI_RIGHT_FD_ADVISE=t.BigIntPolyfill(128),e.WASI_RIGHT_FD_ALLOCATE=t.BigIntPolyfill(256),e.WASI_RIGHT_PATH_CREATE_DIRECTORY=t.BigIntPolyfill(512),e.WASI_RIGHT_PATH_CREATE_FILE=t.BigIntPolyfill(1024),e.WASI_RIGHT_PATH_LINK_SOURCE=t.BigIntPolyfill(2048),e.WASI_RIGHT_PATH_LINK_TARGET=t.BigIntPolyfill(4096),e.WASI_RIGHT_PATH_OPEN=t.BigIntPolyfill(8192),e.WASI_RIGHT_FD_READDIR=t.BigIntPolyfill(16384),e.WASI_RIGHT_PATH_READLINK=t.BigIntPolyfill(32768),e.WASI_RIGHT_PATH_RENAME_SOURCE=t.BigIntPolyfill(65536),e.WASI_RIGHT_PATH_RENAME_TARGET=t.BigIntPolyfill(131072),e.WASI_RIGHT_PATH_FILESTAT_GET=t.BigIntPolyfill(262144),e.WASI_RIGHT_PATH_FILESTAT_SET_SIZE=t.BigIntPolyfill(524288),e.WASI_RIGHT_PATH_FILESTAT_SET_TIMES=t.BigIntPolyfill(1048576),e.WASI_RIGHT_FD_FILESTAT_GET=t.BigIntPolyfill(2097152),e.WASI_RIGHT_FD_FILESTAT_SET_SIZE=t.BigIntPolyfill(4194304),e.WASI_RIGHT_FD_FILESTAT_SET_TIMES=t.BigIntPolyfill(8388608),e.WASI_RIGHT_PATH_SYMLINK=t.BigIntPolyfill(16777216),e.WASI_RIGHT_PATH_REMOVE_DIRECTORY=t.BigIntPolyfill(33554432),e.WASI_RIGHT_PATH_UNLINK_FILE=t.BigIntPolyfill(67108864),e.WASI_RIGHT_POLL_FD_READWRITE=t.BigIntPolyfill(134217728),e.WASI_RIGHT_SOCK_SHUTDOWN=t.BigIntPolyfill(268435456),e.RIGHTS_ALL=e.WASI_RIGHT_FD_DATASYNC|e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_SEEK|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_SYNC|e.WASI_RIGHT_FD_TELL|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_ADVISE|e.WASI_RIGHT_FD_ALLOCATE|e.WASI_RIGHT_PATH_CREATE_DIRECTORY|e.WASI_RIGHT_PATH_CREATE_FILE|e.WASI_RIGHT_PATH_LINK_SOURCE|e.WASI_RIGHT_PATH_LINK_TARGET|e.WASI_RIGHT_PATH_OPEN|e.WASI_RIGHT_FD_READDIR|e.WASI_RIGHT_PATH_READLINK|e.WASI_RIGHT_PATH_RENAME_SOURCE|e.WASI_RIGHT_PATH_RENAME_TARGET|e.WASI_RIGHT_PATH_FILESTAT_GET|e.WASI_RIGHT_PATH_FILESTAT_SET_SIZE|e.WASI_RIGHT_PATH_FILESTAT_SET_TIMES|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_FD_FILESTAT_SET_TIMES|e.WASI_RIGHT_FD_FILESTAT_SET_SIZE|e.WASI_RIGHT_PATH_SYMLINK|e.WASI_RIGHT_PATH_UNLINK_FILE|e.WASI_RIGHT_PATH_REMOVE_DIRECTORY|e.WASI_RIGHT_POLL_FD_READWRITE|e.WASI_RIGHT_SOCK_SHUTDOWN,e.RIGHTS_BLOCK_DEVICE_BASE=e.RIGHTS_ALL,e.RIGHTS_BLOCK_DEVICE_INHERITING=e.RIGHTS_ALL,e.RIGHTS_CHARACTER_DEVICE_BASE=e.RIGHTS_ALL,e.RIGHTS_CHARACTER_DEVICE_INHERITING=e.RIGHTS_ALL,e.RIGHTS_REGULAR_FILE_BASE=e.WASI_RIGHT_FD_DATASYNC|e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_SEEK|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_SYNC|e.WASI_RIGHT_FD_TELL|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_ADVISE|e.WASI_RIGHT_FD_ALLOCATE|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_FD_FILESTAT_SET_SIZE|e.WASI_RIGHT_FD_FILESTAT_SET_TIMES|e.WASI_RIGHT_POLL_FD_READWRITE,e.RIGHTS_REGULAR_FILE_INHERITING=t.BigIntPolyfill(0),e.RIGHTS_DIRECTORY_BASE=e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_SYNC|e.WASI_RIGHT_FD_ADVISE|e.WASI_RIGHT_PATH_CREATE_DIRECTORY|e.WASI_RIGHT_PATH_CREATE_FILE|e.WASI_RIGHT_PATH_LINK_SOURCE|e.WASI_RIGHT_PATH_LINK_TARGET|e.WASI_RIGHT_PATH_OPEN|e.WASI_RIGHT_FD_READDIR|e.WASI_RIGHT_PATH_READLINK|e.WASI_RIGHT_PATH_RENAME_SOURCE|e.WASI_RIGHT_PATH_RENAME_TARGET|e.WASI_RIGHT_PATH_FILESTAT_GET|e.WASI_RIGHT_PATH_FILESTAT_SET_SIZE|e.WASI_RIGHT_PATH_FILESTAT_SET_TIMES|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_FD_FILESTAT_SET_TIMES|e.WASI_RIGHT_PATH_SYMLINK|e.WASI_RIGHT_PATH_UNLINK_FILE|e.WASI_RIGHT_PATH_REMOVE_DIRECTORY|e.WASI_RIGHT_POLL_FD_READWRITE,e.RIGHTS_DIRECTORY_INHERITING=e.RIGHTS_DIRECTORY_BASE|e.RIGHTS_REGULAR_FILE_BASE,e.RIGHTS_SOCKET_BASE=e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_POLL_FD_READWRITE|e.WASI_RIGHT_SOCK_SHUTDOWN,e.RIGHTS_SOCKET_INHERITING=e.RIGHTS_ALL,e.RIGHTS_TTY_BASE=e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_POLL_FD_READWRITE,e.RIGHTS_TTY_INHERITING=t.BigIntPolyfill(0),e.WASI_CLOCK_REALTIME=0,e.WASI_CLOCK_MONOTONIC=1,e.WASI_CLOCK_PROCESS_CPUTIME_ID=2,e.WASI_CLOCK_THREAD_CPUTIME_ID=3,e.WASI_EVENTTYPE_CLOCK=0,e.WASI_EVENTTYPE_FD_READ=1,e.WASI_EVENTTYPE_FD_WRITE=2,e.WASI_FILESTAT_SET_ATIM=1<<0,e.WASI_FILESTAT_SET_ATIM_NOW=1<<1,e.WASI_FILESTAT_SET_MTIM=1<<2,e.WASI_FILESTAT_SET_MTIM_NOW=1<<3,e.WASI_O_CREAT=1<<0,e.WASI_O_DIRECTORY=1<<1,e.WASI_O_EXCL=1<<2,e.WASI_O_TRUNC=1<<3,e.WASI_PREOPENTYPE_DIR=0,e.WASI_DIRCOOKIE_START=0,e.WASI_STDIN_FILENO=0,e.WASI_STDOUT_FILENO=1,e.WASI_STDERR_FILENO=2,e.WASI_WHENCE_SET=0,e.WASI_WHENCE_CUR=1,e.WASI_WHENCE_END=2,e.ERROR_MAP={E2BIG:e.WASI_E2BIG,EACCES:e.WASI_EACCES,EADDRINUSE:e.WASI_EADDRINUSE,EADDRNOTAVAIL:e.WASI_EADDRNOTAVAIL,EAFNOSUPPORT:e.WASI_EAFNOSUPPORT,EALREADY:e.WASI_EALREADY,EAGAIN:e.WASI_EAGAIN,EBADF:e.WASI_EBADF,EBADMSG:e.WASI_EBADMSG,EBUSY:e.WASI_EBUSY,ECANCELED:e.WASI_ECANCELED,ECHILD:e.WASI_ECHILD,ECONNABORTED:e.WASI_ECONNABORTED,ECONNREFUSED:e.WASI_ECONNREFUSED,ECONNRESET:e.WASI_ECONNRESET,EDEADLOCK:e.WASI_EDEADLK,EDESTADDRREQ:e.WASI_EDESTADDRREQ,EDOM:e.WASI_EDOM,EDQUOT:e.WASI_EDQUOT,EEXIST:e.WASI_EEXIST,EFAULT:e.WASI_EFAULT,EFBIG:e.WASI_EFBIG,EHOSTDOWN:e.WASI_EHOSTUNREACH,EHOSTUNREACH:e.WASI_EHOSTUNREACH,EIDRM:e.WASI_EIDRM,EILSEQ:e.WASI_EILSEQ,EINPROGRESS:e.WASI_EINPROGRESS,EINTR:e.WASI_EINTR,EINVAL:e.WASI_EINVAL,EIO:e.WASI_EIO,EISCONN:e.WASI_EISCONN,EISDIR:e.WASI_EISDIR,ELOOP:e.WASI_ELOOP,EMFILE:e.WASI_EMFILE,EMLINK:e.WASI_EMLINK,EMSGSIZE:e.WASI_EMSGSIZE,EMULTIHOP:e.WASI_EMULTIHOP,ENAMETOOLONG:e.WASI_ENAMETOOLONG,ENETDOWN:e.WASI_ENETDOWN,ENETRESET:e.WASI_ENETRESET,ENETUNREACH:e.WASI_ENETUNREACH,ENFILE:e.WASI_ENFILE,ENOBUFS:e.WASI_ENOBUFS,ENODEV:e.WASI_ENODEV,ENOENT:e.WASI_ENOENT,ENOEXEC:e.WASI_ENOEXEC,ENOLCK:e.WASI_ENOLCK,ENOLINK:e.WASI_ENOLINK,ENOMEM:e.WASI_ENOMEM,ENOMSG:e.WASI_ENOMSG,ENOPROTOOPT:e.WASI_ENOPROTOOPT,ENOSPC:e.WASI_ENOSPC,ENOSYS:e.WASI_ENOSYS,ENOTCONN:e.WASI_ENOTCONN,ENOTDIR:e.WASI_ENOTDIR,ENOTEMPTY:e.WASI_ENOTEMPTY,ENOTRECOVERABLE:e.WASI_ENOTRECOVERABLE,ENOTSOCK:e.WASI_ENOTSOCK,ENOTTY:e.WASI_ENOTTY,ENXIO:e.WASI_ENXIO,EOVERFLOW:e.WASI_EOVERFLOW,EOWNERDEAD:e.WASI_EOWNERDEAD,EPERM:e.WASI_EPERM,EPIPE:e.WASI_EPIPE,EPROTO:e.WASI_EPROTO,EPROTONOSUPPORT:e.WASI_EPROTONOSUPPORT,EPROTOTYPE:e.WASI_EPROTOTYPE,ERANGE:e.WASI_ERANGE,EROFS:e.WASI_EROFS,ESPIPE:e.WASI_ESPIPE,ESRCH:e.WASI_ESRCH,ESTALE:e.WASI_ESTALE,ETIMEDOUT:e.WASI_ETIMEDOUT,ETXTBSY:e.WASI_ETXTBSY,EXDEV:e.WASI_EXDEV},e.SIGNAL_MAP={[e.WASI_SIGHUP]:"SIGHUP",[e.WASI_SIGINT]:"SIGINT",[e.WASI_SIGQUIT]:"SIGQUIT",[e.WASI_SIGILL]:"SIGILL",[e.WASI_SIGTRAP]:"SIGTRAP",[e.WASI_SIGABRT]:"SIGABRT",[e.WASI_SIGBUS]:"SIGBUS",[e.WASI_SIGFPE]:"SIGFPE",[e.WASI_SIGKILL]:"SIGKILL",[e.WASI_SIGUSR1]:"SIGUSR1",[e.WASI_SIGSEGV]:"SIGSEGV",[e.WASI_SIGUSR2]:"SIGUSR2",[e.WASI_SIGPIPE]:"SIGPIPE",[e.WASI_SIGALRM]:"SIGALRM",[e.WASI_SIGTERM]:"SIGTERM",[e.WASI_SIGCHLD]:"SIGCHLD",[e.WASI_SIGCONT]:"SIGCONT",[e.WASI_SIGSTOP]:"SIGSTOP",[e.WASI_SIGTSTP]:"SIGTSTP",[e.WASI_SIGTTIN]:"SIGTTIN",[e.WASI_SIGTTOU]:"SIGTTOU",[e.WASI_SIGURG]:"SIGURG",[e.WASI_SIGXCPU]:"SIGXCPU",[e.WASI_SIGXFSZ]:"SIGXFSZ",[e.WASI_SIGVTALRM]:"SIGVTALRM"}})(za),Object.defineProperty(Zn,"__esModule",{value:!0});const Qt=Ei,nf=Ho,ie=ef;let $a;const j=za,of=j.WASI_RIGHT_FD_DATASYNC|j.WASI_RIGHT_FD_READ|j.WASI_RIGHT_FD_SYNC|j.WASI_RIGHT_FD_ADVISE|j.WASI_RIGHT_FD_FILESTAT_GET|j.WASI_RIGHT_POLL_FD_READWRITE,ja=j.WASI_RIGHT_FD_DATASYNC|j.WASI_RIGHT_FD_WRITE|j.WASI_RIGHT_FD_SYNC|j.WASI_RIGHT_FD_ADVISE|j.WASI_RIGHT_FD_FILESTAT_GET|j.WASI_RIGHT_POLL_FD_READWRITE,rf=ja,Mn=e=>{const t=Math.trunc(e),n=Qt.BigIntPolyfill(Math.round((e-t)*1e6));return Qt.BigIntPolyfill(t)*Qt.BigIntPolyfill(1e6)+n},Xn=e=>{typeof e=="number"&&(e=Math.trunc(e));const t=Qt.BigIntPolyfill(e);return Number(t/Qt.BigIntPolyfill(1e6))},Zt=e=>(...t)=>{try{return e(...t)}catch(n){if(n&&n.code&&typeof n.code=="string")return j.ERROR_MAP[n.code]||j.WASI_EINVAL;if(n instanceof Jn)return n.errno;throw n}},Ya=(e,t)=>{const n=e.FD_MAP.get(t);if(!n)throw new Jn(j.WASI_EBADF);if(n.filetype===void 0){const i=e.bindings.fs.fstatSync(n.real),{filetype:o,rightsBase:a,rightsInheriting:s}=Va(e,t,i);n.filetype=o,n.rights||(n.rights={base:a,inheriting:s})}return n},Va=(e,t,n)=>{switch(!0){case n.isBlockDevice():return{filetype:j.WASI_FILETYPE_BLOCK_DEVICE,rightsBase:j.RIGHTS_BLOCK_DEVICE_BASE,rightsInheriting:j.RIGHTS_BLOCK_DEVICE_INHERITING};case n.isCharacterDevice():{const i=j.WASI_FILETYPE_CHARACTER_DEVICE;return t!==void 0&&e.bindings.isTTY(t)?{filetype:i,rightsBase:j.RIGHTS_TTY_BASE,rightsInheriting:j.RIGHTS_TTY_INHERITING}:{filetype:i,rightsBase:j.RIGHTS_CHARACTER_DEVICE_BASE,rightsInheriting:j.RIGHTS_CHARACTER_DEVICE_INHERITING}}case n.isDirectory():return{filetype:j.WASI_FILETYPE_DIRECTORY,rightsBase:j.RIGHTS_DIRECTORY_BASE,rightsInheriting:j.RIGHTS_DIRECTORY_INHERITING};case n.isFIFO():return{filetype:j.WASI_FILETYPE_SOCKET_STREAM,rightsBase:j.RIGHTS_SOCKET_BASE,rightsInheriting:j.RIGHTS_SOCKET_INHERITING};case n.isFile():return{filetype:j.WASI_FILETYPE_REGULAR_FILE,rightsBase:j.RIGHTS_REGULAR_FILE_BASE,rightsInheriting:j.RIGHTS_REGULAR_FILE_INHERITING};case n.isSocket():return{filetype:j.WASI_FILETYPE_SOCKET_STREAM,rightsBase:j.RIGHTS_SOCKET_BASE,rightsInheriting:j.RIGHTS_SOCKET_INHERITING};case n.isSymbolicLink():return{filetype:j.WASI_FILETYPE_SYMBOLIC_LINK,rightsBase:Qt.BigIntPolyfill(0),rightsInheriting:Qt.BigIntPolyfill(0)};default:return{filetype:j.WASI_FILETYPE_UNKNOWN,rightsBase:Qt.BigIntPolyfill(0),rightsInheriting:Qt.BigIntPolyfill(0)}}};class Jn extends Error{constructor(t){super();this.errno=t,Object.setPrototypeOf(this,Jn.prototype)}}Zn.WASIError=Jn;class zo extends Error{constructor(t){super(`WASI Exit error: ${t}`);this.code=t,Object.setPrototypeOf(this,zo.prototype)}}var af=Zn.WASIExitError=zo;class $o extends Error{constructor(t){super(`WASI Kill signal: ${t}`);this.signal=t,Object.setPrototypeOf(this,$o.prototype)}}var sf=Zn.WASIKillError=$o;class jo{constructor(t){let n={};t&&t.preopens?n=t.preopens:t&&t.preopenDirectories&&(n=t.preopenDirectories);let i={};t&&t.env&&(i=t.env);let o=[];t&&t.args&&(o=t.args);let a=$a;t&&t.bindings&&(a=t.bindings),this.memory=void 0,this.view=void 0,this.bindings=a,this.FD_MAP=new Map([[j.WASI_STDIN_FILENO,{real:0,filetype:j.WASI_FILETYPE_CHARACTER_DEVICE,rights:{base:of,inheriting:Qt.BigIntPolyfill(0)},path:void 0}],[j.WASI_STDOUT_FILENO,{real:1,filetype:j.WASI_FILETYPE_CHARACTER_DEVICE,rights:{base:ja,inheriting:Qt.BigIntPolyfill(0)},path:void 0}],[j.WASI_STDERR_FILENO,{real:2,filetype:j.WASI_FILETYPE_CHARACTER_DEVICE,rights:{base:rf,inheriting:Qt.BigIntPolyfill(0)},path:void 0}]]);let s=this.bindings.fs,u=this.bindings.path;for(const[A,p]of Object.entries(n)){const R=s.openSync(p,s.constants.O_RDONLY),P=[...this.FD_MAP.keys()].reverse()[0]+1;this.FD_MAP.set(P,{real:R,filetype:j.WASI_FILETYPE_DIRECTORY,rights:{base:j.RIGHTS_DIRECTORY_BASE,inheriting:j.RIGHTS_DIRECTORY_INHERITING},fakePath:A,path:p})}const _=(A,p)=>(this.refreshMemory(),Array.from({length:p},(P,C)=>{const G=A+C*8,O=this.view.getUint32(G,!0),Z=this.view.getUint32(G+4,!0);return new Uint8Array(this.memory.buffer,O,Z)})),d=(A,p)=>{const R=Ya(this,A);if(p!==Qt.BigIntPolyfill(0)&&(R.rights.base&p)===Qt.BigIntPolyfill(0))throw new Jn(j.WASI_EPERM);return R},l=a.hrtime(),m=A=>{switch(A){case j.WASI_CLOCK_MONOTONIC:return a.hrtime();case j.WASI_CLOCK_REALTIME:return Mn(Date.now());case j.WASI_CLOCK_PROCESS_CPUTIME_ID:case j.WASI_CLOCK_THREAD_CPUTIME_ID:return a.hrtime()-l;default:return null}};this.wasiImport={args_get:(A,p)=>{this.refreshMemory();let R=A,P=p;return o.forEach(C=>{this.view.setUint32(R,P,!0),R+=4,P+=ie.default.from(this.memory.buffer).write(`${C}\0`,P)}),j.WASI_ESUCCESS},args_sizes_get:(A,p)=>{this.refreshMemory(),this.view.setUint32(A,o.length,!0);const R=o.reduce((P,C)=>P+ie.default.byteLength(C)+1,0);return this.view.setUint32(p,R,!0),j.WASI_ESUCCESS},environ_get:(A,p)=>{this.refreshMemory();let R=A,P=p;return Object.entries(i).forEach(([C,G])=>{this.view.setUint32(R,P,!0),R+=4,P+=ie.default.from(this.memory.buffer).write(`${C}=${G}\0`,P)}),j.WASI_ESUCCESS},environ_sizes_get:(A,p)=>{this.refreshMemory();const R=Object.entries(i).map(([C,G])=>`${C}=${G}\0`),P=R.reduce((C,G)=>C+ie.default.byteLength(G),0);return this.view.setUint32(A,R.length,!0),this.view.setUint32(p,P,!0),j.WASI_ESUCCESS},clock_res_get:(A,p)=>{let R;switch(A){case j.WASI_CLOCK_MONOTONIC:case j.WASI_CLOCK_PROCESS_CPUTIME_ID:case j.WASI_CLOCK_THREAD_CPUTIME_ID:{R=Qt.BigIntPolyfill(1);break}case j.WASI_CLOCK_REALTIME:{R=Qt.BigIntPolyfill(1e3);break}}return this.view.setBigUint64(p,R),j.WASI_ESUCCESS},clock_time_get:(A,p,R)=>{this.refreshMemory();const P=m(A);return P===null?j.WASI_EINVAL:(this.view.setBigUint64(R,Qt.BigIntPolyfill(P),!0),j.WASI_ESUCCESS)},fd_advise:Zt((A,p,R,P)=>(d(A,j.WASI_RIGHT_FD_ADVISE),j.WASI_ENOSYS)),fd_allocate:Zt((A,p,R)=>(d(A,j.WASI_RIGHT_FD_ALLOCATE),j.WASI_ENOSYS)),fd_close:Zt(A=>{const p=d(A,Qt.BigIntPolyfill(0));return s.closeSync(p.real),this.FD_MAP.delete(A),j.WASI_ESUCCESS}),fd_datasync:Zt(A=>{const p=d(A,j.WASI_RIGHT_FD_DATASYNC);return s.fdatasyncSync(p.real),j.WASI_ESUCCESS}),fd_fdstat_get:Zt((A,p)=>{const R=d(A,Qt.BigIntPolyfill(0));return this.refreshMemory(),this.view.setUint8(p,R.filetype),this.view.setUint16(p+2,0,!0),this.view.setUint16(p+4,0,!0),this.view.setBigUint64(p+8,Qt.BigIntPolyfill(R.rights.base),!0),this.view.setBigUint64(p+8+8,Qt.BigIntPolyfill(R.rights.inheriting),!0),j.WASI_ESUCCESS}),fd_fdstat_set_flags:Zt((A,p)=>(d(A,j.WASI_RIGHT_FD_FDSTAT_SET_FLAGS),j.WASI_ENOSYS)),fd_fdstat_set_rights:Zt((A,p,R)=>{const P=d(A,Qt.BigIntPolyfill(0));return(P.rights.base|p)>P.rights.base||(P.rights.inheriting|R)>P.rights.inheriting?j.WASI_EPERM:(P.rights.base=p,P.rights.inheriting=R,j.WASI_ESUCCESS)}),fd_filestat_get:Zt((A,p)=>{const R=d(A,j.WASI_RIGHT_FD_FILESTAT_GET),P=s.fstatSync(R.real);return this.refreshMemory(),this.view.setBigUint64(p,Qt.BigIntPolyfill(P.dev),!0),p+=8,this.view.setBigUint64(p,Qt.BigIntPolyfill(P.ino),!0),p+=8,this.view.setUint8(p,R.filetype),p+=8,this.view.setBigUint64(p,Qt.BigIntPolyfill(P.nlink),!0),p+=8,this.view.setBigUint64(p,Qt.BigIntPolyfill(P.size),!0),p+=8,this.view.setBigUint64(p,Mn(P.atimeMs),!0),p+=8,this.view.setBigUint64(p,Mn(P.mtimeMs),!0),p+=8,this.view.setBigUint64(p,Mn(P.ctimeMs),!0),j.WASI_ESUCCESS}),fd_filestat_set_size:Zt((A,p)=>{const R=d(A,j.WASI_RIGHT_FD_FILESTAT_SET_SIZE);return s.ftruncateSync(R.real,Number(p)),j.WASI_ESUCCESS}),fd_filestat_set_times:Zt((A,p,R,P)=>{const C=d(A,j.WASI_RIGHT_FD_FILESTAT_SET_TIMES),G=s.fstatSync(C.real);let O=G.atime,Z=G.mtime;const $=Xn(m(j.WASI_CLOCK_REALTIME)),Y=j.WASI_FILESTAT_SET_ATIM|j.WASI_FILESTAT_SET_ATIM_NOW;if((P&Y)===Y)return j.WASI_EINVAL;const B=j.WASI_FILESTAT_SET_MTIM|j.WASI_FILESTAT_SET_MTIM_NOW;return(P&B)===B?j.WASI_EINVAL:((P&j.WASI_FILESTAT_SET_ATIM)===j.WASI_FILESTAT_SET_ATIM?O=Xn(p):(P&j.WASI_FILESTAT_SET_ATIM_NOW)===j.WASI_FILESTAT_SET_ATIM_NOW&&(O=$),(P&j.WASI_FILESTAT_SET_MTIM)===j.WASI_FILESTAT_SET_MTIM?Z=Xn(R):(P&j.WASI_FILESTAT_SET_MTIM_NOW)===j.WASI_FILESTAT_SET_MTIM_NOW&&(Z=$),s.futimesSync(C.real,new Date(O),new Date(Z)),j.WASI_ESUCCESS)}),fd_prestat_get:Zt((A,p)=>{const R=d(A,Qt.BigIntPolyfill(0));return R.path?(this.refreshMemory(),this.view.setUint8(p,j.WASI_PREOPENTYPE_DIR),this.view.setUint32(p+4,ie.default.byteLength(R.fakePath),!0),j.WASI_ESUCCESS):j.WASI_EINVAL}),fd_prestat_dir_name:Zt((A,p,R)=>{const P=d(A,Qt.BigIntPolyfill(0));return P.path?(this.refreshMemory(),ie.default.from(this.memory.buffer).write(P.fakePath,p,R,"utf8"),j.WASI_ESUCCESS):j.WASI_EINVAL}),fd_pwrite:Zt((A,p,R,P,C)=>{const G=d(A,j.WASI_RIGHT_FD_WRITE|j.WASI_RIGHT_FD_SEEK);let O=0;return _(p,R).forEach(Z=>{let $=0;for(;$<Z.byteLength;)$+=s.writeSync(G.real,Z,$,Z.byteLength-$,Number(P)+O+$);O+=$}),this.view.setUint32(C,O,!0),j.WASI_ESUCCESS}),fd_write:Zt((A,p,R,P)=>{const C=d(A,j.WASI_RIGHT_FD_WRITE);let G=0;return _(p,R).forEach(O=>{let Z=0;for(;Z<O.byteLength;){const $=s.writeSync(C.real,O,Z,O.byteLength-Z,C.offset!==void 0?Number(C.offset):null);C.offset!==void 0&&(C.offset+=Qt.BigIntPolyfill($)),Z+=$}G+=Z}),this.view.setUint32(P,G,!0),j.WASI_ESUCCESS}),fd_pread:Zt((A,p,R,P,C)=>{const G=d(A,j.WASI_RIGHT_FD_READ|j.WASI_RIGHT_FD_SEEK);let O=0;t:for(const Z of _(p,R)){let $=0;for(;$<Z.byteLength;){const Y=Z.byteLength-$,B=s.readSync(G.real,Z,$,Z.byteLength-$,Number(P)+O+$);if($+=B,O+=B,B===0||B<Y)break t}O+=$}return this.view.setUint32(C,O,!0),j.WASI_ESUCCESS}),fd_read:Zt((A,p,R,P)=>{const C=d(A,j.WASI_RIGHT_FD_READ),G=C.real===0;let O=0;t:for(const Z of _(p,R)){let $=0;for(;$<Z.byteLength;){let Y=Z.byteLength-$,B=G||C.offset===void 0?null:Number(C.offset),g=s.readSync(C.real,Z,$,Y,B);if(G||(C.offset=(C.offset?C.offset:Qt.BigIntPolyfill(0))+Qt.BigIntPolyfill(g)),$+=g,O+=g,g===0||g<Y)break t}}return this.view.setUint32(P,O,!0),j.WASI_ESUCCESS}),fd_readdir:Zt((A,p,R,P,C)=>{const G=d(A,j.WASI_RIGHT_FD_READDIR);this.refreshMemory();const O=s.readdirSync(G.path,{withFileTypes:!0}),Z=p;for(let Y=Number(P);Y<O.length;Y+=1){const B=O[Y];let g=ie.default.byteLength(B.name);if(p-Z>R||(this.view.setBigUint64(p,Qt.BigIntPolyfill(Y+1),!0),p+=8,p-Z>R))break;const I=s.statSync(u.resolve(G.path,B.name));if(this.view.setBigUint64(p,Qt.BigIntPolyfill(I.ino),!0),p+=8,p-Z>R||(this.view.setUint32(p,g,!0),p+=4,p-Z>R))break;let D;switch(!0){case I.isBlockDevice():D=j.WASI_FILETYPE_BLOCK_DEVICE;break;case I.isCharacterDevice():D=j.WASI_FILETYPE_CHARACTER_DEVICE;break;case I.isDirectory():D=j.WASI_FILETYPE_DIRECTORY;break;case I.isFIFO():D=j.WASI_FILETYPE_SOCKET_STREAM;break;case I.isFile():D=j.WASI_FILETYPE_REGULAR_FILE;break;case I.isSocket():D=j.WASI_FILETYPE_SOCKET_STREAM;break;case I.isSymbolicLink():D=j.WASI_FILETYPE_SYMBOLIC_LINK;break;default:D=j.WASI_FILETYPE_UNKNOWN;break}if(this.view.setUint8(p,D),p+=1,p+=3,p+g>=Z+R)break;ie.default.from(this.memory.buffer).write(B.name,p),p+=g}const $=p-Z;return this.view.setUint32(C,Math.min($,R),!0),j.WASI_ESUCCESS}),fd_renumber:Zt((A,p)=>(d(A,Qt.BigIntPolyfill(0)),d(p,Qt.BigIntPolyfill(0)),s.closeSync(this.FD_MAP.get(A).real),this.FD_MAP.set(A,this.FD_MAP.get(p)),this.FD_MAP.delete(p),j.WASI_ESUCCESS)),fd_seek:Zt((A,p,R,P)=>{const C=d(A,j.WASI_RIGHT_FD_SEEK);switch(this.refreshMemory(),R){case j.WASI_WHENCE_CUR:C.offset=(C.offset?C.offset:Qt.BigIntPolyfill(0))+Qt.BigIntPolyfill(p);break;case j.WASI_WHENCE_END:const{size:G}=s.fstatSync(C.real);C.offset=Qt.BigIntPolyfill(G)+Qt.BigIntPolyfill(p);break;case j.WASI_WHENCE_SET:C.offset=Qt.BigIntPolyfill(p);break}return this.view.setBigUint64(P,C.offset,!0),j.WASI_ESUCCESS}),fd_tell:Zt((A,p)=>{const R=d(A,j.WASI_RIGHT_FD_TELL);return this.refreshMemory(),R.offset||(R.offset=Qt.BigIntPolyfill(0)),this.view.setBigUint64(p,R.offset,!0),j.WASI_ESUCCESS}),fd_sync:Zt(A=>{const p=d(A,j.WASI_RIGHT_FD_SYNC);return s.fsyncSync(p.real),j.WASI_ESUCCESS}),path_create_directory:Zt((A,p,R)=>{const P=d(A,j.WASI_RIGHT_PATH_CREATE_DIRECTORY);if(!P.path)return j.WASI_EINVAL;this.refreshMemory();const C=ie.default.from(this.memory.buffer,p,R).toString();return s.mkdirSync(u.resolve(P.path,C)),j.WASI_ESUCCESS}),path_filestat_get:Zt((A,p,R,P,C)=>{const G=d(A,j.WASI_RIGHT_PATH_FILESTAT_GET);if(!G.path)return j.WASI_EINVAL;this.refreshMemory();const O=ie.default.from(this.memory.buffer,R,P).toString(),Z=s.statSync(u.resolve(G.path,O));return this.view.setBigUint64(C,Qt.BigIntPolyfill(Z.dev),!0),C+=8,this.view.setBigUint64(C,Qt.BigIntPolyfill(Z.ino),!0),C+=8,this.view.setUint8(C,Va(this,void 0,Z).filetype),C+=8,this.view.setBigUint64(C,Qt.BigIntPolyfill(Z.nlink),!0),C+=8,this.view.setBigUint64(C,Qt.BigIntPolyfill(Z.size),!0),C+=8,this.view.setBigUint64(C,Mn(Z.atimeMs),!0),C+=8,this.view.setBigUint64(C,Mn(Z.mtimeMs),!0),C+=8,this.view.setBigUint64(C,Mn(Z.ctimeMs),!0),j.WASI_ESUCCESS}),path_filestat_set_times:Zt((A,p,R,P,C,G,O)=>{const Z=d(A,j.WASI_RIGHT_PATH_FILESTAT_SET_TIMES);if(!Z.path)return j.WASI_EINVAL;this.refreshMemory();const $=s.fstatSync(Z.real);let Y=$.atime,B=$.mtime;const g=Xn(m(j.WASI_CLOCK_REALTIME)),I=j.WASI_FILESTAT_SET_ATIM|j.WASI_FILESTAT_SET_ATIM_NOW;if((O&I)===I)return j.WASI_EINVAL;const D=j.WASI_FILESTAT_SET_MTIM|j.WASI_FILESTAT_SET_MTIM_NOW;if((O&D)===D)return j.WASI_EINVAL;(O&j.WASI_FILESTAT_SET_ATIM)===j.WASI_FILESTAT_SET_ATIM?Y=Xn(C):(O&j.WASI_FILESTAT_SET_ATIM_NOW)===j.WASI_FILESTAT_SET_ATIM_NOW&&(Y=g),(O&j.WASI_FILESTAT_SET_MTIM)===j.WASI_FILESTAT_SET_MTIM?B=Xn(G):(O&j.WASI_FILESTAT_SET_MTIM_NOW)===j.WASI_FILESTAT_SET_MTIM_NOW&&(B=g);const z=ie.default.from(this.memory.buffer,R,P).toString();return s.utimesSync(u.resolve(Z.path,z),new Date(Y),new Date(B)),j.WASI_ESUCCESS}),path_link:Zt((A,p,R,P,C,G,O)=>{const Z=d(A,j.WASI_RIGHT_PATH_LINK_SOURCE),$=d(C,j.WASI_RIGHT_PATH_LINK_TARGET);if(!Z.path||!$.path)return j.WASI_EINVAL;this.refreshMemory();const Y=ie.default.from(this.memory.buffer,R,P).toString(),B=ie.default.from(this.memory.buffer,G,O).toString();return s.linkSync(u.resolve(Z.path,Y),u.resolve($.path,B)),j.WASI_ESUCCESS}),path_open:Zt((A,p,R,P,C,G,O,Z,$)=>{const Y=d(A,j.WASI_RIGHT_PATH_OPEN);G=Qt.BigIntPolyfill(G),O=Qt.BigIntPolyfill(O);const B=(G&(j.WASI_RIGHT_FD_READ|j.WASI_RIGHT_FD_READDIR))!==Qt.BigIntPolyfill(0),g=(G&(j.WASI_RIGHT_FD_DATASYNC|j.WASI_RIGHT_FD_WRITE|j.WASI_RIGHT_FD_ALLOCATE|j.WASI_RIGHT_FD_FILESTAT_SET_SIZE))!==Qt.BigIntPolyfill(0);let I;g&&B?I=s.constants.O_RDWR:B?I=s.constants.O_RDONLY:g&&(I=s.constants.O_WRONLY);let D=G|j.WASI_RIGHT_PATH_OPEN,z=G|O;(C&j.WASI_O_CREAT)!=0&&(I|=s.constants.O_CREAT,D|=j.WASI_RIGHT_PATH_CREATE_FILE),(C&j.WASI_O_DIRECTORY)!=0&&(I|=s.constants.O_DIRECTORY),(C&j.WASI_O_EXCL)!=0&&(I|=s.constants.O_EXCL),(C&j.WASI_O_TRUNC)!=0&&(I|=s.constants.O_TRUNC,D|=j.WASI_RIGHT_PATH_FILESTAT_SET_SIZE),(Z&j.WASI_FDFLAG_APPEND)!=0&&(I|=s.constants.O_APPEND),(Z&j.WASI_FDFLAG_DSYNC)!=0&&(s.constants.O_DSYNC?I|=s.constants.O_DSYNC:I|=s.constants.O_SYNC,z|=j.WASI_RIGHT_FD_DATASYNC),(Z&j.WASI_FDFLAG_NONBLOCK)!=0&&(I|=s.constants.O_NONBLOCK),(Z&j.WASI_FDFLAG_RSYNC)!=0&&(s.constants.O_RSYNC?I|=s.constants.O_RSYNC:I|=s.constants.O_SYNC,z|=j.WASI_RIGHT_FD_SYNC),(Z&j.WASI_FDFLAG_SYNC)!=0&&(I|=s.constants.O_SYNC,z|=j.WASI_RIGHT_FD_SYNC),g&&(I&(s.constants.O_APPEND|s.constants.O_TRUNC))==0&&(z|=j.WASI_RIGHT_FD_SEEK),this.refreshMemory();const U=ie.default.from(this.memory.buffer,R,P).toString(),N=u.resolve(Y.path,U);if(u.relative(Y.path,N).startsWith(".."))return j.WASI_ENOTCAPABLE;let S;try{if(S=s.realpathSync(N),u.relative(Y.path,S).startsWith(".."))return j.WASI_ENOTCAPABLE}catch(ot){if(ot.code==="ENOENT")S=N;else throw ot}let W;try{W=s.statSync(S).isDirectory()}catch{}let J;!g&&W?J=s.openSync(S,s.constants.O_RDONLY):J=s.openSync(S,I);const it=[...this.FD_MAP.keys()].reverse()[0]+1;return this.FD_MAP.set(it,{real:J,filetype:void 0,offset:BigInt(0),rights:{base:D,inheriting:z},path:S}),Ya(this,it),this.view.setUint32($,it,!0),j.WASI_ESUCCESS}),path_readlink:Zt((A,p,R,P,C,G)=>{const O=d(A,j.WASI_RIGHT_PATH_READLINK);if(!O.path)return j.WASI_EINVAL;this.refreshMemory();const Z=ie.default.from(this.memory.buffer,p,R).toString(),$=u.resolve(O.path,Z),Y=s.readlinkSync($),B=ie.default.from(this.memory.buffer).write(Y,P,C);return this.view.setUint32(G,B,!0),j.WASI_ESUCCESS}),path_remove_directory:Zt((A,p,R)=>{const P=d(A,j.WASI_RIGHT_PATH_REMOVE_DIRECTORY);if(!P.path)return j.WASI_EINVAL;this.refreshMemory();const C=ie.default.from(this.memory.buffer,p,R).toString();return s.rmdirSync(u.resolve(P.path,C)),j.WASI_ESUCCESS}),path_rename:Zt((A,p,R,P,C,G)=>{const O=d(A,j.WASI_RIGHT_PATH_RENAME_SOURCE),Z=d(P,j.WASI_RIGHT_PATH_RENAME_TARGET);if(!O.path||!Z.path)return j.WASI_EINVAL;this.refreshMemory();const $=ie.default.from(this.memory.buffer,p,R).toString(),Y=ie.default.from(this.memory.buffer,C,G).toString();return s.renameSync(u.resolve(O.path,$),u.resolve(Z.path,Y)),j.WASI_ESUCCESS}),path_symlink:Zt((A,p,R,P,C)=>{const G=d(R,j.WASI_RIGHT_PATH_SYMLINK);if(!G.path)return j.WASI_EINVAL;this.refreshMemory();const O=ie.default.from(this.memory.buffer,A,p).toString(),Z=ie.default.from(this.memory.buffer,P,C).toString();return s.symlinkSync(O,u.resolve(G.path,Z)),j.WASI_ESUCCESS}),path_unlink_file:Zt((A,p,R)=>{const P=d(A,j.WASI_RIGHT_PATH_UNLINK_FILE);if(!P.path)return j.WASI_EINVAL;this.refreshMemory();const C=ie.default.from(this.memory.buffer,p,R).toString();return s.unlinkSync(u.resolve(P.path,C)),j.WASI_ESUCCESS}),poll_oneoff:(A,p,R,P)=>{let C=0,G=0;this.refreshMemory();for(let O=0;O<R;O+=1){const Z=this.view.getBigUint64(A,!0);A+=8;const $=this.view.getUint8(A);switch(A+=1,$){case j.WASI_EVENTTYPE_CLOCK:{A+=7,this.view.getBigUint64(A,!0),A+=8;const Y=this.view.getUint32(A,!0);A+=4,A+=4;const B=this.view.getBigUint64(A,!0);A+=8,this.view.getBigUint64(A,!0),A+=8;const g=this.view.getUint16(A,!0);A+=2,A+=6;const I=g===1;let D=j.WASI_ESUCCESS;const z=Qt.BigIntPolyfill(m(Y));if(z===null)D=j.WASI_EINVAL;else{const U=I?B:z+B;G=U>G?U:G}this.view.setBigUint64(p,Z,!0),p+=8,this.view.setUint16(p,D,!0),p+=2,this.view.setUint8(p,j.WASI_EVENTTYPE_CLOCK),p+=1,p+=5,C+=1;break}case j.WASI_EVENTTYPE_FD_READ:case j.WASI_EVENTTYPE_FD_WRITE:{A+=3,this.view.getUint32(A,!0),A+=4,this.view.setBigUint64(p,Z,!0),p+=8,this.view.setUint16(p,j.WASI_ENOSYS,!0),p+=2,this.view.setUint8(p,$),p+=1,p+=5,C+=1;break}default:return j.WASI_EINVAL}}for(this.view.setUint32(P,C,!0);a.hrtime()<G;);return j.WASI_ESUCCESS},proc_exit:A=>(a.exit(A),j.WASI_ESUCCESS),proc_raise:A=>A in j.SIGNAL_MAP?(a.kill(j.SIGNAL_MAP[A]),j.WASI_ESUCCESS):j.WASI_EINVAL,random_get:(A,p)=>(this.refreshMemory(),a.randomFillSync(new Uint8Array(this.memory.buffer),A,p),j.WASI_ESUCCESS),sched_yield(){return j.WASI_ESUCCESS},sock_recv(){return j.WASI_ENOSYS},sock_send(){return j.WASI_ENOSYS},sock_shutdown(){return j.WASI_ENOSYS}},t.traceSyscalls&&Object.keys(this.wasiImport).forEach(A=>{const p=this.wasiImport[A];this.wasiImport[A]=function(...R){console.log(`WASI: wasiImport called: ${A} (${R})`);try{let P=p(...R);return console.log(`WASI:  => ${P}`),P}catch(P){throw console.log(`Catched error: ${P}`),P}}})}refreshMemory(){(!this.view||this.view.buffer.byteLength===0)&&(this.view=new nf.DataViewPolyfill(this.memory.buffer))}setMemory(t){this.memory=t}start(t){const n=t.exports;if(n===null||typeof n!="object")throw new Error(`instance.exports must be an Object. Received ${n}.`);const{memory:i}=n;if(!(i instanceof WebAssembly.Memory))throw new Error(`instance.exports.memory must be a WebAssembly.Memory. Recceived ${i}.`);this.setMemory(i),n._start&&n._start()}getImportNamespace(t){let n=null;for(let i of WebAssembly.Module.imports(t))if(i.kind==="function"&&!!i.module.startsWith("wasi_")){if(!n)n=i.module;else if(n!==i.module)throw new Error("Multiple namespaces detected.")}return n}getImports(t){switch(this.getImportNamespace(t)){case"wasi_unstable":return{wasi_unstable:this.wasiImport};case"wasi_snapshot_preview1":return{wasi_snapshot_preview1:this.wasiImport};default:throw new Error("Can't detect a WASI namespace for the WebAssembly Module")}}}Zn.default=jo,jo.defaultBindings=$a;var cf=Zn.WASI=jo;function Xe(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function Ka(e,t){for(var n="",i=0,o=-1,a=0,s,u=0;u<=e.length;++u){if(u<e.length)s=e.charCodeAt(u);else{if(s===47)break;s=47}if(s===47){if(!(o===u-1||a===1))if(o!==u-1&&a===2){if(n.length<2||i!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var _=n.lastIndexOf("/");if(_!==n.length-1){_===-1?(n="",i=0):(n=n.slice(0,_),i=n.length-1-n.lastIndexOf("/")),o=u,a=0;continue}}else if(n.length===2||n.length===1){n="",i=0,o=u,a=0;continue}}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(o+1,u):n=e.slice(o+1,u),i=u-o-1;o=u,a=0}else s===46&&a!==-1?++a:a=-1}return n}function lf(e,t){var n=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+i:n+e+i:i}var ti={resolve:function(){for(var t="",n=!1,i,o=arguments.length-1;o>=-1&&!n;o--){var a;o>=0?a=arguments[o]:(i===void 0&&(i=process.cwd()),a=i),Xe(a),a.length!==0&&(t=a+"/"+t,n=a.charCodeAt(0)===47)}return t=Ka(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(Xe(t),t.length===0)return".";var n=t.charCodeAt(0)===47,i=t.charCodeAt(t.length-1)===47;return t=Ka(t,!n),t.length===0&&!n&&(t="."),t.length>0&&i&&(t+="/"),n?"/"+t:t},isAbsolute:function(t){return Xe(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,n=0;n<arguments.length;++n){var i=arguments[n];Xe(i),i.length>0&&(t===void 0?t=i:t+="/"+i)}return t===void 0?".":ti.normalize(t)},relative:function(t,n){if(Xe(t),Xe(n),t===n||(t=ti.resolve(t),n=ti.resolve(n),t===n))return"";for(var i=1;i<t.length&&t.charCodeAt(i)===47;++i);for(var o=t.length,a=o-i,s=1;s<n.length&&n.charCodeAt(s)===47;++s);for(var u=n.length,_=u-s,d=a<_?a:_,l=-1,m=0;m<=d;++m){if(m===d){if(_>d){if(n.charCodeAt(s+m)===47)return n.slice(s+m+1);if(m===0)return n.slice(s+m)}else a>d&&(t.charCodeAt(i+m)===47?l=m:m===0&&(l=0));break}var A=t.charCodeAt(i+m),p=n.charCodeAt(s+m);if(A!==p)break;A===47&&(l=m)}var R="";for(m=i+l+1;m<=o;++m)(m===o||t.charCodeAt(m)===47)&&(R.length===0?R+="..":R+="/..");return R.length>0?R+n.slice(s+l):(s+=l,n.charCodeAt(s)===47&&++s,n.slice(s))},_makeLong:function(t){return t},dirname:function(t){if(Xe(t),t.length===0)return".";for(var n=t.charCodeAt(0),i=n===47,o=-1,a=!0,s=t.length-1;s>=1;--s)if(n=t.charCodeAt(s),n===47){if(!a){o=s;break}}else a=!1;return o===-1?i?"/":".":i&&o===1?"//":t.slice(0,o)},basename:function(t,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');Xe(t);var i=0,o=-1,a=!0,s;if(n!==void 0&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var u=n.length-1,_=-1;for(s=t.length-1;s>=0;--s){var d=t.charCodeAt(s);if(d===47){if(!a){i=s+1;break}}else _===-1&&(a=!1,_=s+1),u>=0&&(d===n.charCodeAt(u)?--u==-1&&(o=s):(u=-1,o=_))}return i===o?o=_:o===-1&&(o=t.length),t.slice(i,o)}else{for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!a){i=s+1;break}}else o===-1&&(a=!1,o=s+1);return o===-1?"":t.slice(i,o)}},extname:function(t){Xe(t);for(var n=-1,i=0,o=-1,a=!0,s=0,u=t.length-1;u>=0;--u){var _=t.charCodeAt(u);if(_===47){if(!a){i=u+1;break}continue}o===-1&&(a=!1,o=u+1),_===46?n===-1?n=u:s!==1&&(s=1):n!==-1&&(s=-1)}return n===-1||o===-1||s===0||s===1&&n===o-1&&n===i+1?"":t.slice(n,o)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return lf("/",t)},parse:function(t){Xe(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return n;var i=t.charCodeAt(0),o=i===47,a;o?(n.root="/",a=1):a=0;for(var s=-1,u=0,_=-1,d=!0,l=t.length-1,m=0;l>=a;--l){if(i=t.charCodeAt(l),i===47){if(!d){u=l+1;break}continue}_===-1&&(d=!1,_=l+1),i===46?s===-1?s=l:m!==1&&(m=1):s!==-1&&(m=-1)}return s===-1||_===-1||m===0||m===1&&s===_-1&&s===u+1?_!==-1&&(u===0&&o?n.base=n.name=t.slice(1,_):n.base=n.name=t.slice(u,_)):(u===0&&o?(n.name=t.slice(1,s),n.base=t.slice(1,_)):(n.name=t.slice(u,s),n.base=t.slice(u,_)),n.ext=t.slice(s,_)),u>0?n.dir=t.slice(0,u-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};ti.posix=ti;var Yo=ti,uf=he({__proto__:null,default:Yo},[Yo]);function ff(e,t,n,i){return new(n||(n=Promise))(function(o,a){function s(d){try{_(i.next(d))}catch(l){a(l)}}function u(d){try{_(i.throw(d))}catch(l){a(l)}}function _(d){d.done?o(d.value):new n(function(l){l(d.value)}).then(s,u)}_((i=i.apply(e,t||[])).next())})}function df(e,t){function n(d){return function(l){return i([d,l])}}function i(d){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,s&&(u=d[0]&2?s.return:d[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,d[1])).done)return u;switch(s=0,u&&(d=[d[0]&2,u.value]),d[0]){case 0:case 1:u=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,s=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(u=o.trys,!(u=0<u.length&&u[u.length-1])&&(d[0]===6||d[0]===2)){o=0;continue}if(d[0]===3&&(!u||d[1]>u[0]&&d[1]<u[3]))o.label=d[1];else if(d[0]===6&&o.label<u[1])o.label=u[1],u=d;else if(u&&o.label<u[2])o.label=u[2],o.ops.push(d);else{u[2]&&o.ops.pop(),o.trys.pop();continue}}d=t.call(e,o)}catch(l){d=[6,l],s=0}finally{a=u=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}var o={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,s,u,_;return _={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_}function Vo(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function hf(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;e=n.call(e);var i,o=[];try{for(;(t===void 0||0<t--)&&!(i=e.next()).done;)o.push(i.value)}catch(s){var a={error:s}}finally{try{i&&!i.done&&(n=e.return)&&n.call(e)}finally{if(a)throw a.error}}return o}function _f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(hf(arguments[t]));return e}var ae=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Se(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ae(e,t){return t={exports:{}},e(t,t.exports),t.exports}var jt=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}});Se(jt);var pf=Ae(function(e,t){t.default=typeof BigInt=="function"?BigInt:function(){throw Error("BigInt is not supported in this environment.")}}),ei=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=jt.constants.S_IFMT,i=jt.constants.S_IFDIR,o=jt.constants.S_IFREG,a=jt.constants.S_IFBLK,s=jt.constants.S_IFCHR,u=jt.constants.S_IFLNK,_=jt.constants.S_IFIFO,d=jt.constants.S_IFSOCK;e=function(){function l(){}return l.build=function(m,A){A===void 0&&(A=!1);var p=new l,R=m.gid,P=m.atime,C=m.mtime,G=m.ctime;return A=A?pf.default:function(O){return O},p.uid=A(m.uid),p.gid=A(R),p.rdev=A(0),p.blksize=A(4096),p.ino=A(m.ino),p.size=A(m.getSize()),p.blocks=A(1),p.atime=P,p.mtime=C,p.ctime=G,p.birthtime=G,p.atimeMs=A(P.getTime()),p.mtimeMs=A(C.getTime()),R=A(G.getTime()),p.ctimeMs=R,p.birthtimeMs=R,p.dev=A(0),p.mode=A(m.mode),p.nlink=A(m.nlink),p},l.prototype._checkModeProperty=function(m){return(Number(this.mode)&n)===m},l.prototype.isDirectory=function(){return this._checkModeProperty(i)},l.prototype.isFile=function(){return this._checkModeProperty(o)},l.prototype.isBlockDevice=function(){return this._checkModeProperty(a)},l.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},l.prototype.isSymbolicLink=function(){return this._checkModeProperty(u)},l.prototype.isFIFO=function(){return this._checkModeProperty(_)},l.prototype.isSocket=function(){return this._checkModeProperty(d)},l}(),t.Stats=e,t.default=e});Se(ei);var Un=typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{},Je=[],ze=[],gf=typeof Uint8Array!="undefined"?Uint8Array:Array,Ko=!1;function Za(){Ko=!0;for(var e=0;64>e;++e)Je[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e],ze["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;ze[45]=62,ze[95]=63}function mf(e,t,n){for(var i=[],o=t;o<n;o+=3)t=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(Je[t>>18&63]+Je[t>>12&63]+Je[t>>6&63]+Je[t&63]);return i.join("")}function Xa(e){Ko||Za();for(var t=e.length,n=t%3,i="",o=[],a=0,s=t-n;a<s;a+=16383)o.push(mf(e,a,a+16383>s?s:a+16383));return n===1?(e=e[t-1],i+=Je[e>>2],i+=Je[e<<4&63],i+="=="):n===2&&(e=(e[t-2]<<8)+e[t-1],i+=Je[e>>10],i+=Je[e>>4&63],i+=Je[e<<2&63],i+="="),o.push(i),o.join("")}function io(e,t,n,i,o){var a=8*o-i-1,s=(1<<a)-1,u=s>>1,_=-7;o=n?o-1:0;var d=n?-1:1,l=e[t+o];for(o+=d,n=l&(1<<-_)-1,l>>=-_,_+=a;0<_;n=256*n+e[t+o],o+=d,_-=8);for(a=n&(1<<-_)-1,n>>=-_,_+=i;0<_;a=256*a+e[t+o],o+=d,_-=8);if(n===0)n=1-u;else{if(n===s)return a?NaN:1/0*(l?-1:1);a+=Math.pow(2,i),n-=u}return(l?-1:1)*a*Math.pow(2,n-i)}function oo(e,t,n,i,o,a){var s,u=8*a-o-1,_=(1<<u)-1,d=_>>1,l=o===23?Math.pow(2,-24)-Math.pow(2,-77):0;a=i?0:a-1;var m=i?1:-1,A=0>t||t===0&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(t=isNaN(t)?1:0,i=_):(i=Math.floor(Math.log(t)/Math.LN2),1>t*(s=Math.pow(2,-i))&&(i--,s*=2),t=1<=i+d?t+l/s:t+l*Math.pow(2,1-d),2<=t*s&&(i++,s/=2),i+d>=_?(t=0,i=_):1<=i+d?(t=(t*s-1)*Math.pow(2,o),i+=d):(t=t*Math.pow(2,d-1)*Math.pow(2,o),i=0));8<=o;e[n+a]=t&255,a+=m,t/=256,o-=8);for(i=i<<o|t,u+=o;0<u;e[n+a]=i&255,a+=m,i/=256,u-=8);e[n+a-m]|=128*A}var yf={}.toString,Ja=Array.isArray||function(e){return yf.call(e)=="[object Array]"};At.TYPED_ARRAY_SUPPORT=Un.TYPED_ARRAY_SUPPORT!==void 0?Un.TYPED_ARRAY_SUPPORT:!0;var Af=At.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function dn(e,t){if((At.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<t)throw new RangeError("Invalid typed array length");return At.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=At.prototype):(e===null&&(e=new At(t)),e.length=t),e}function At(e,t,n){if(!(At.TYPED_ARRAY_SUPPORT||this instanceof At))return new At(e,t,n);if(typeof e=="number"){if(typeof t=="string")throw Error("If encoding is specified then the first argument must be a string");return Zo(this,e)}return ts(this,e,t,n)}At.poolSize=8192,At._augment=function(e){return e.__proto__=At.prototype,e};function ts(e,t,n,i){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');if(typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer){if(t.byteLength,0>n||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=n===void 0&&i===void 0?new Uint8Array(t):i===void 0?new Uint8Array(t,n):new Uint8Array(t,n,i),At.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=At.prototype):e=Xo(e,t),e}if(typeof t=="string"){if(i=e,e=n,(typeof e!="string"||e==="")&&(e="utf8"),!At.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return n=ns(t,e)|0,i=dn(i,n),t=i.write(t,e),t!==n&&(i=i.slice(0,t)),i}return If(e,t)}At.from=function(e,t,n){return ts(null,e,t,n)},At.TYPED_ARRAY_SUPPORT&&(At.prototype.__proto__=Uint8Array.prototype,At.__proto__=Uint8Array);function es(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative')}At.alloc=function(e,t,n){return es(e),e=0>=e?dn(null,e):t!==void 0?typeof n=="string"?dn(null,e).fill(t,n):dn(null,e).fill(t):dn(null,e),e};function Zo(e,t){if(es(t),e=dn(e,0>t?0:Jo(t)|0),!At.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}At.allocUnsafe=function(e){return Zo(null,e)},At.allocUnsafeSlow=function(e){return Zo(null,e)};function Xo(e,t){var n=0>t.length?0:Jo(t.length)|0;e=dn(e,n);for(var i=0;i<n;i+=1)e[i]=t[i]&255;return e}function If(e,t){if(tn(t)){var n=Jo(t.length)|0;return e=dn(e,n),e.length===0||t.copy(e,0,0,n),e}if(t){if(typeof ArrayBuffer!="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t)return(n=typeof t.length!="number")||(n=t.length,n=n!==n),n?dn(e,0):Xo(e,t);if(t.type==="Buffer"&&Ja(t.data))return Xo(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Jo(e){if(e>=(At.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(At.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return e|0}At.isBuffer=hn;function tn(e){return!(e==null||!e._isBuffer)}At.compare=function(e,t){if(!tn(e)||!tn(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},At.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},At.concat=function(e,t){if(!Ja(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return At.alloc(0);var n;if(t===void 0)for(n=t=0;n<e.length;++n)t+=e[n].length;t=At.allocUnsafe(t);var i=0;for(n=0;n<e.length;++n){var o=e[n];if(!tn(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(t,i),i+=o.length}return t};function ns(e,t){if(tn(e))return e.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var n=e.length;if(n===0)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return co(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return cs(e).length;default:if(i)return co(e).length;t=(""+t).toLowerCase(),i=!0}}At.byteLength=ns;function Lf(e,t,n){var i=!1;if((t===void 0||0>t)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),0>=n)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":for(e=t,t=n,n=this.length,(!e||0>e)&&(e=0),(!t||0>t||t>n)&&(t=n),i="",n=e;n<t;++n)e=i,i=this[n],i=16>i?"0"+i.toString(16):i.toString(16),i=e+i;return i;case"utf8":case"utf-8":return rs(this,t,n);case"ascii":for(e="",n=Math.min(this.length,n);t<n;++t)e+=String.fromCharCode(this[t]&127);return e;case"latin1":case"binary":for(e="",n=Math.min(this.length,n);t<n;++t)e+=String.fromCharCode(this[t]);return e;case"base64":return t=t===0&&n===this.length?Xa(this):Xa(this.slice(t,n)),t;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(t=this.slice(t,n),n="",e=0;e<t.length;e+=2)n+=String.fromCharCode(t[e]+256*t[e+1]);return n;default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}At.prototype._isBuffer=!0;function Dn(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}At.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Dn(this,t,t+1);return this},At.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Dn(this,t,t+3),Dn(this,t+1,t+2);return this},At.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Dn(this,t,t+7),Dn(this,t+1,t+6),Dn(this,t+2,t+5),Dn(this,t+3,t+4);return this},At.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?rs(this,0,e):Lf.apply(this,arguments)},At.prototype.equals=function(e){if(!tn(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:At.compare(this,e)===0},At.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},At.prototype.compare=function(e,t,n,i,o){if(!tn(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),0>t||n>e.length||0>i||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;var a=o-i,s=n-t,u=Math.min(a,s);for(i=this.slice(i,o),e=e.slice(t,n),t=0;t<u;++t)if(i[t]!==e[t]){a=i[t],s=e[t];break}return a<s?-1:s<a?1:0};function is(e,t,n,i,o){if(e.length===0)return-1;if(typeof n=="string"?(i=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(0>n)if(o)n=0;else return-1;if(typeof t=="string"&&(t=At.from(t,i)),tn(t))return t.length===0?-1:os(e,t,n,i,o);if(typeof t=="number")return t&=255,At.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):os(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function os(e,t,n,i,o){function a(d,l){return s===1?d[l]:d.readUInt16BE(l*s)}var s=1,u=e.length,_=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(2>e.length||2>t.length)return-1;s=2,u/=2,_/=2,n/=2}if(o)for(i=-1;n<u;n++)if(a(e,n)===a(t,i===-1?0:n-i)){if(i===-1&&(i=n),n-i+1===_)return i*s}else i!==-1&&(n-=n-i),i=-1;else for(n+_>u&&(n=u-_);0<=n;n--){for(u=!0,i=0;i<_;i++)if(a(e,n+i)!==a(t,i)){u=!1;break}if(u)return n}return-1}At.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},At.prototype.indexOf=function(e,t,n){return is(this,e,t,n,!0)},At.prototype.lastIndexOf=function(e,t,n){return is(this,e,t,n,!1)},At.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((n===void 0||n>o)&&(n=o),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(i||(i="utf8"),o=!1;;)switch(i){case"hex":t:{if(t=Number(t)||0,i=this.length-t,n?(n=Number(n),n>i&&(n=i)):n=i,i=e.length,i%2!=0)throw new TypeError("Invalid hex string");for(n>i/2&&(n=i/2),i=0;i<n;++i){if(o=parseInt(e.substr(2*i,2),16),isNaN(o)){e=i;break t}this[t+i]=o}e=i}return e;case"utf8":case"utf-8":return wi(co(e,this.length-t),this,t,n);case"ascii":return wi(ss(e),this,t,n);case"latin1":case"binary":return wi(ss(e),this,t,n);case"base64":return wi(cs(e),this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=e,o=this.length-t;for(var a=[],s=0;s<i.length&&!(0>(o-=2));++s){var u=i.charCodeAt(s);e=u>>8,u%=256,a.push(u),a.push(e)}return wi(a,this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},At.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function rs(e,t,n){n=Math.min(e.length,n);for(var i=[];t<n;){var o=e[t],a=null,s=239<o?4:223<o?3:191<o?2:1;if(t+s<=n)switch(s){case 1:128>o&&(a=o);break;case 2:var u=e[t+1];(u&192)==128&&(o=(o&31)<<6|u&63,127<o&&(a=o));break;case 3:u=e[t+1];var _=e[t+2];(u&192)==128&&(_&192)==128&&(o=(o&15)<<12|(u&63)<<6|_&63,2047<o&&(55296>o||57343<o)&&(a=o));break;case 4:u=e[t+1],_=e[t+2];var d=e[t+3];(u&192)==128&&(_&192)==128&&(d&192)==128&&(o=(o&15)<<18|(u&63)<<12|(_&63)<<6|d&63,65535<o&&1114112>o&&(a=o))}a===null?(a=65533,s=1):65535<a&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|a&1023),i.push(a),t+=s}if(e=i.length,e<=as)i=String.fromCharCode.apply(String,i);else{for(n="",t=0;t<e;)n+=String.fromCharCode.apply(String,i.slice(t,t+=as));i=n}return i}var as=4096;At.prototype.slice=function(e,t){var n=this.length;if(e=~~e,t=t===void 0?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e),At.TYPED_ARRAY_SUPPORT)t=this.subarray(e,t),t.__proto__=At.prototype;else{n=t-e,t=new At(n,void 0);for(var i=0;i<n;++i)t[i]=this[i+e]}return t};function pe(e,t,n){if(e%1!=0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}At.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||pe(e,t,this.length),n=this[e];for(var i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},At.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||pe(e,t,this.length),n=this[e+--t];for(var i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},At.prototype.readUInt8=function(e,t){return t||pe(e,1,this.length),this[e]},At.prototype.readUInt16LE=function(e,t){return t||pe(e,2,this.length),this[e]|this[e+1]<<8},At.prototype.readUInt16BE=function(e,t){return t||pe(e,2,this.length),this[e]<<8|this[e+1]},At.prototype.readUInt32LE=function(e,t){return t||pe(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},At.prototype.readUInt32BE=function(e,t){return t||pe(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},At.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||pe(e,t,this.length),n=this[e];for(var i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=128*i&&(n-=Math.pow(2,8*t)),n},At.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||pe(e,t,this.length),n=t;for(var i=1,o=this[e+--n];0<n&&(i*=256);)o+=this[e+--n]*i;return o>=128*i&&(o-=Math.pow(2,8*t)),o},At.prototype.readInt8=function(e,t){return t||pe(e,1,this.length),this[e]&128?-1*(255-this[e]+1):this[e]},At.prototype.readInt16LE=function(e,t){return t||pe(e,2,this.length),e=this[e]|this[e+1]<<8,e&32768?e|4294901760:e},At.prototype.readInt16BE=function(e,t){return t||pe(e,2,this.length),e=this[e+1]|this[e]<<8,e&32768?e|4294901760:e},At.prototype.readInt32LE=function(e,t){return t||pe(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},At.prototype.readInt32BE=function(e,t){return t||pe(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},At.prototype.readFloatLE=function(e,t){return t||pe(e,4,this.length),io(this,e,!0,23,4)},At.prototype.readFloatBE=function(e,t){return t||pe(e,4,this.length),io(this,e,!1,23,4)},At.prototype.readDoubleLE=function(e,t){return t||pe(e,8,this.length),io(this,e,!0,52,8)},At.prototype.readDoubleBE=function(e,t){return t||pe(e,8,this.length),io(this,e,!1,52,8)};function Oe(e,t,n,i,o,a){if(!tn(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}At.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||Oe(this,e,t,n,Math.pow(2,8*n)-1,0),i=1;var o=0;for(this[t]=e&255;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},At.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||Oe(this,e,t,n,Math.pow(2,8*n)-1,0),i=n-1;var o=1;for(this[t+i]=e&255;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},At.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,1,255,0),At.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function ro(e,t,n,i){0>t&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-n,2);o<a;++o)e[n+o]=(t&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}At.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,2,65535,0),At.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):ro(this,e,t,!0),t+2},At.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,2,65535,0),At.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):ro(this,e,t,!1),t+2};function ao(e,t,n,i){0>t&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-n,4);o<a;++o)e[n+o]=t>>>8*(i?o:3-o)&255}At.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,4,4294967295,0),At.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):ao(this,e,t,!0),t+4},At.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,4,4294967295,0),At.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):ao(this,e,t,!1),t+4},At.prototype.writeIntLE=function(e,t,n,i){e=+e,t|=0,i||(i=Math.pow(2,8*n-1),Oe(this,e,t,n,i-1,-i)),i=0;var o=1,a=0;for(this[t]=e&255;++i<n&&(o*=256);)0>e&&a===0&&this[t+i-1]!==0&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},At.prototype.writeIntBE=function(e,t,n,i){e=+e,t|=0,i||(i=Math.pow(2,8*n-1),Oe(this,e,t,n,i-1,-i)),i=n-1;var o=1,a=0;for(this[t+i]=e&255;0<=--i&&(o*=256);)0>e&&a===0&&this[t+i+1]!==0&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},At.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,1,127,-128),At.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e&255,t+1},At.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,2,32767,-32768),At.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):ro(this,e,t,!0),t+2},At.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,2,32767,-32768),At.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):ro(this,e,t,!1),t+2},At.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,4,2147483647,-2147483648),At.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):ao(this,e,t,!0),t+4},At.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),At.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):ao(this,e,t,!1),t+4};function so(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}At.prototype.writeFloatLE=function(e,t,n){return n||so(this,e,t,4),oo(this,e,t,!0,23,4),t+4},At.prototype.writeFloatBE=function(e,t,n){return n||so(this,e,t,4),oo(this,e,t,!1,23,4),t+4},At.prototype.writeDoubleLE=function(e,t,n){return n||so(this,e,t,8),oo(this,e,t,!0,52,8),t+8},At.prototype.writeDoubleBE=function(e,t,n){return n||so(this,e,t,8),oo(this,e,t,!1,52,8),t+8},At.prototype.copy=function(e,t,n,i){if(n||(n=0),i||i===0||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),0<i&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n;if(this===e&&n<t&&t<i)for(i=o-1;0<=i;--i)e[i+t]=this[i+n];else if(1e3>o||!At.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},At.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var o=e.charCodeAt(0);256>o&&(e=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!At.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0),typeof e=="number")for(i=t;i<n;++i)this[i]=e;else for(e=tn(e)?e:co(new At(e,i).toString()),o=e.length,i=0;i<n-t;++i)this[i+t]=e[i%o];return this};var Ef=/[^+\/0-9A-Za-z-_]/g;function co(e,t){t=t||1/0;for(var n,i=e.length,o=null,a=[],s=0;s<i;++s){if(n=e.charCodeAt(s),55295<n&&57344>n){if(!o){if(56319<n){-1<(t-=3)&&a.push(239,191,189);continue}else if(s+1===i){-1<(t-=3)&&a.push(239,191,189);continue}o=n;continue}if(56320>n){-1<(t-=3)&&a.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&-1<(t-=3)&&a.push(239,191,189);if(o=null,128>n){if(0>--t)break;a.push(n)}else if(2048>n){if(0>(t-=2))break;a.push(n>>6|192,n&63|128)}else if(65536>n){if(0>(t-=3))break;a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(1114112>n){if(0>(t-=4))break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw Error("Invalid code point")}return a}function ss(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function cs(e){if(e=(e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(Ef,""),2>e.length)e="";else for(;e.length%4!=0;)e+="=";Ko||Za();var t=e.length;if(0<t%4)throw Error("Invalid string. Length must be a multiple of 4");var n=e[t-2]==="="?2:e[t-1]==="="?1:0,i=new gf(3*t/4-n),o=0<n?t-4:t,a=0;for(t=0;t<o;t+=4){var s=ze[e.charCodeAt(t)]<<18|ze[e.charCodeAt(t+1)]<<12|ze[e.charCodeAt(t+2)]<<6|ze[e.charCodeAt(t+3)];i[a++]=s>>16&255,i[a++]=s>>8&255,i[a++]=s&255}return n===2?(s=ze[e.charCodeAt(t)]<<2|ze[e.charCodeAt(t+1)]>>4,i[a++]=s&255):n===1&&(s=ze[e.charCodeAt(t)]<<10|ze[e.charCodeAt(t+1)]<<4|ze[e.charCodeAt(t+2)]>>2,i[a++]=s>>8&255,i[a++]=s&255),i}function wi(e,t,n,i){for(var o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function hn(e){return e!=null&&(!!e._isBuffer||ls(e)||typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&ls(e.slice(0,0)))}function ls(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var Si=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:Af,Buffer:At,SlowBuffer:function(e){return+e!=e&&(e=0),At.alloc(+e)},isBuffer:hn}),ne=Ae(function(e,t){function n(o){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return new(Si.Buffer.bind.apply(Si.Buffer,i([void 0,o],a)))}var i=ae&&ae.__spreadArrays||function(){for(var o=0,a=0,s=arguments.length;a<s;a++)o+=arguments[a].length;o=Array(o);var u=0;for(a=0;a<s;a++)for(var _=arguments[a],d=0,l=_.length;d<l;d++,u++)o[u]=_[d];return o};Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=Si.Buffer,t.bufferAllocUnsafe=Si.Buffer.allocUnsafe||n,t.bufferFrom=Si.Buffer.from||n});Se(ne);function us(){throw Error("setTimeout has not been defined")}function fs(){throw Error("clearTimeout has not been defined")}var wn=us,Sn=fs;typeof Un.setTimeout=="function"&&(wn=setTimeout),typeof Un.clearTimeout=="function"&&(Sn=clearTimeout);function ds(e){if(wn===setTimeout)return setTimeout(e,0);if((wn===us||!wn)&&setTimeout)return wn=setTimeout,setTimeout(e,0);try{return wn(e,0)}catch{try{return wn.call(null,e,0)}catch{return wn.call(this,e,0)}}}function wf(e){if(Sn===clearTimeout)return clearTimeout(e);if((Sn===fs||!Sn)&&clearTimeout)return Sn=clearTimeout,clearTimeout(e);try{return Sn(e)}catch{try{return Sn.call(null,e)}catch{return Sn.call(this,e)}}}var _n=[],ni=!1,Gn,lo=-1;function Sf(){ni&&Gn&&(ni=!1,Gn.length?_n=Gn.concat(_n):lo=-1,_n.length&&hs())}function hs(){if(!ni){var e=ds(Sf);ni=!0;for(var t=_n.length;t;){for(Gn=_n,_n=[];++lo<t;)Gn&&Gn[lo].run();lo=-1,t=_n.length}Gn=null,ni=!1,wf(e)}}function Ue(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];_n.push(new _s(e,t)),_n.length!==1||ni||ds(hs)}function _s(e,t){this.fun=e,this.array=t}_s.prototype.run=function(){this.fun.apply(null,this.array)};function kn(){}var ii=Un.performance||{},vf=ii.now||ii.mozNow||ii.msNow||ii.oNow||ii.webkitNow||function(){return new Date().getTime()},Cf=new Date,oi={nextTick:Ue,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:kn,addListener:kn,once:kn,off:kn,removeListener:kn,removeAllListeners:kn,emit:kn,binding:function(){throw Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*vf.call(ii),n=Math.floor(t);return t=Math.floor(t%1*1e9),e&&(n-=e[0],t-=e[1],0>t&&(n--,t+=1e9)),[n,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Cf)/1e3}},vn=typeof Object.create=="function"?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){function n(){}e.super_=t,n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},bf=/%[sdj%]/g;function tr(e){if(!Wn(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(en(arguments[n]));return t.join(" ")}n=1;var i=arguments,o=i.length;t=String(e).replace(bf,function(s){if(s==="%%")return"%";if(n>=o)return s;switch(s){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch{return"[Circular]"}default:return s}});for(var a=i[n];n<o;a=i[++n])t=a!==null&&Cn(a)?t+(" "+en(a)):t+(" "+a);return t}function er(e,t){if(pn(Un.process))return function(){return er(e,t).apply(this,arguments)};if(oi.noDeprecation===!0)return e;var n=!1;return function(){if(!n){if(oi.throwDeprecation)throw Error(t);oi.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}}var uo={},nr;function ps(e){return pn(nr)&&(nr=oi.env.NODE_DEBUG||""),e=e.toUpperCase(),uo[e]||(new RegExp("\\b"+e+"\\b","i").test(nr)?uo[e]=function(){var t=tr.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:uo[e]=function(){}),uo[e]}function en(e,t){var n={seen:[],stylize:Bf};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),rr(t)?n.showHidden=t:t&&ys(n,t),pn(n.showHidden)&&(n.showHidden=!1),pn(n.depth)&&(n.depth=2),pn(n.colors)&&(n.colors=!1),pn(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Ff),fo(n,e,n.depth)}en.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},en.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Ff(e,t){return(t=en.styles[t])?"["+en.colors[t][0]+"m"+e+"["+en.colors[t][1]+"m":e}function Bf(e){return e}function Tf(e){var t={};return e.forEach(function(n){t[n]=!0}),t}function fo(e,t,n){if(e.customInspect&&t&&ai(t.inspect)&&t.inspect!==en&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return Wn(i)||(i=fo(e,i,n)),i}if(i=Rf(e,t))return i;var o=Object.keys(t),a=Tf(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Ci(t)&&(0<=o.indexOf("message")||0<=o.indexOf("description")))return ir(t);if(o.length===0){if(ai(t))return e.stylize("[Function"+(t.name?": "+t.name:"")+"]","special");if(ri(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(vi(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Ci(t))return ir(t)}i="";var s=!1,u=["{","}"];return gs(t)&&(s=!0,u=["[","]"]),ai(t)&&(i=" [Function"+(t.name?": "+t.name:"")+"]"),ri(t)&&(i=" "+RegExp.prototype.toString.call(t)),vi(t)&&(i=" "+Date.prototype.toUTCString.call(t)),Ci(t)&&(i=" "+ir(t)),o.length===0&&(!s||t.length==0)?u[0]+i+u[1]:0>n?ri(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),o=s?Of(e,t,n,a,o):o.map(function(_){return or(e,t,n,a,_,s)}),e.seen.pop(),Pf(o,i,u))}function Rf(e,t){if(pn(t))return e.stylize("undefined","undefined");if(Wn(t))return t="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",e.stylize(t,"string");if(ms(t))return e.stylize(""+t,"number");if(rr(t))return e.stylize(""+t,"boolean");if(t===null)return e.stylize("null","null")}function ir(e){return"["+Error.prototype.toString.call(e)+"]"}function Of(e,t,n,i,o){for(var a=[],s=0,u=t.length;s<u;++s)Object.prototype.hasOwnProperty.call(t,String(s))?a.push(or(e,t,n,i,String(s),!0)):a.push("");return o.forEach(function(_){_.match(/^\d+$/)||a.push(or(e,t,n,i,_,!0))}),a}function or(e,t,n,i,o,a){var s,u;if(t=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},t.get?u=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(u=e.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(i,o)||(s="["+o+"]"),u||(0>e.seen.indexOf(t.value)?(u=n===null?fo(e,t.value,null):fo(e,t.value,n-1),-1<u.indexOf(`
`)&&(u=a?u.split(`
`).map(function(_){return"  "+_}).join(`
`).substr(2):`
`+u.split(`
`).map(function(_){return"   "+_}).join(`
`))):u=e.stylize("[Circular]","special")),pn(s)){if(a&&o.match(/^\d+$/))return u;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function Pf(e,t,n){return 60<e.reduce(function(i,o){return o.indexOf(`
`),i+o.replace(/\u001b\[\d\d?m/g,"").length+1},0)?n[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function gs(e){return Array.isArray(e)}function rr(e){return typeof e=="boolean"}function ms(e){return typeof e=="number"}function Wn(e){return typeof e=="string"}function pn(e){return e===void 0}function ri(e){return Cn(e)&&Object.prototype.toString.call(e)==="[object RegExp]"}function Cn(e){return typeof e=="object"&&e!==null}function vi(e){return Cn(e)&&Object.prototype.toString.call(e)==="[object Date]"}function Ci(e){return Cn(e)&&(Object.prototype.toString.call(e)==="[object Error]"||e instanceof Error)}function ai(e){return typeof e=="function"}function ar(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e=="undefined"}function sr(e){return 10>e?"0"+e.toString(10):e.toString(10)}var xf="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");function Nf(){var e=new Date,t=[sr(e.getHours()),sr(e.getMinutes()),sr(e.getSeconds())].join(":");return[e.getDate(),xf[e.getMonth()],t].join(" ")}function ys(e,t){if(!t||!Cn(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}var bi={inherits:vn,_extend:ys,log:function(){console.log("%s - %s",Nf(),tr.apply(null,arguments))},isBuffer:function(e){return hn(e)},isPrimitive:ar,isFunction:ai,isError:Ci,isDate:vi,isObject:Cn,isRegExp:ri,isUndefined:pn,isSymbol:function(e){return typeof e=="symbol"},isString:Wn,isNumber:ms,isNullOrUndefined:function(e){return e==null},isNull:function(e){return e===null},isBoolean:rr,isArray:gs,inspect:en,deprecate:er,format:tr,debuglog:ps};function As(e,t){if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0}var Mf=Object.prototype.hasOwnProperty,Is=Object.keys||function(e){var t=[],n;for(n in e)Mf.call(e,n)&&t.push(n);return t},Ls=Array.prototype.slice,cr;function Es(){return typeof cr!="undefined"?cr:cr=function(){return function(){}.name==="foo"}()}function ws(e){return hn(e)||typeof Un.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e?!!(e instanceof DataView||e.buffer&&e.buffer instanceof ArrayBuffer):!1}function oe(e,t){e||Pe(e,!0,t,"==",ur)}var Uf=/\s*function\s+([^\(\s]*)\s*/;function Ss(e){if(ai(e))return Es()?e.name:(e=e.toString().match(Uf))&&e[1]}oe.AssertionError=lr;function lr(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=vs(Cs(this.actual),128)+" "+this.operator+" "+vs(Cs(this.expected),128),this.generatedMessage=!0);var t=e.stackStartFunction||Pe;Error.captureStackTrace?Error.captureStackTrace(this,t):(e=Error(),e.stack&&(e=e.stack,t=Ss(t),t=e.indexOf(`
`+t),0<=t&&(t=e.indexOf(`
`,t+1),e=e.substring(t+1)),this.stack=e))}vn(lr,Error);function vs(e,t){return typeof e=="string"?e.length<t?e:e.slice(0,t):e}function Cs(e){return Es()||!ai(e)?en(e):(e=Ss(e),"[Function"+(e?": "+e:"")+"]")}function Pe(e,t,n,i,o){throw new lr({message:n,actual:e,expected:t,operator:i,stackStartFunction:o})}oe.fail=Pe;function ur(e,t){e||Pe(e,!0,t,"==",ur)}oe.ok=ur,oe.equal=bs;function bs(e,t,n){e!=t&&Pe(e,t,n,"==",bs)}oe.notEqual=Fs;function Fs(e,t,n){e==t&&Pe(e,t,n,"!=",Fs)}oe.deepEqual=Bs;function Bs(e,t,n){si(e,t,!1)||Pe(e,t,n,"deepEqual",Bs)}oe.deepStrictEqual=Ts;function Ts(e,t,n){si(e,t,!0)||Pe(e,t,n,"deepStrictEqual",Ts)}function si(e,t,n,i){if(e===t)return!0;if(hn(e)&&hn(t))return As(e,t)===0;if(vi(e)&&vi(t))return e.getTime()===t.getTime();if(ri(e)&&ri(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(e!==null&&typeof e=="object"||t!==null&&typeof t=="object"){if(!ws(e)||!ws(t)||Object.prototype.toString.call(e)!==Object.prototype.toString.call(t)||e instanceof Float32Array||e instanceof Float64Array){if(hn(e)!==hn(t))return!1;i=i||{actual:[],expected:[]};var o=i.actual.indexOf(e);return o!==-1&&o===i.expected.indexOf(t)?!0:(i.actual.push(e),i.expected.push(t),Df(e,t,n,i))}return As(new Uint8Array(e.buffer),new Uint8Array(t.buffer))===0}return n?e===t:e==t}function Rs(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function Df(e,t,n,i){if(e==null||t===null||t===void 0)return!1;if(ar(e)||ar(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=Rs(e),a=Rs(t);if(o&&!a||!o&&a)return!1;if(o)return e=Ls.call(e),t=Ls.call(t),si(e,t,n);o=Is(e);var s=Is(t);if(o.length!==s.length)return!1;for(o.sort(),s.sort(),a=o.length-1;0<=a;a--)if(o[a]!==s[a])return!1;for(a=o.length-1;0<=a;a--)if(s=o[a],!si(e[s],t[s],n,i))return!1;return!0}oe.notDeepEqual=Os;function Os(e,t,n){si(e,t,!1)&&Pe(e,t,n,"notDeepEqual",Os)}oe.notDeepStrictEqual=Ps;function Ps(e,t,n){si(e,t,!0)&&Pe(e,t,n,"notDeepStrictEqual",Ps)}oe.strictEqual=xs;function xs(e,t,n){e!==t&&Pe(e,t,n,"===",xs)}oe.notStrictEqual=Ns;function Ns(e,t,n){e===t&&Pe(e,t,n,"!==",Ns)}function Ms(e,t){if(!e||!t)return!1;if(Object.prototype.toString.call(t)=="[object RegExp]")return t.test(e);try{if(e instanceof t)return!0}catch{}return Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function Us(e,t,n,i){if(typeof t!="function")throw new TypeError('"block" argument must be a function');typeof n=="string"&&(i=n,n=null);try{t()}catch(u){var o=u}t=o,i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),e&&!t&&Pe(t,n,"Missing expected exception"+i),o=typeof i=="string";var a=!e&&Ci(t),s=!e&&t&&!n;if((a&&o&&Ms(t,n)||s)&&Pe(t,n,"Got unwanted exception"+i),e&&t&&n&&!Ms(t,n)||!e&&t)throw t}oe.throws=Gf;function Gf(e,t,n){Us(!0,e,t,n)}oe.doesNotThrow=kf;function kf(e,t,n){Us(!1,e,t,n)}oe.ifError=Wf;function Wf(e){if(e)throw e}var Fi=Ae(function(e,t){function n(d){return function(l){function m(A){for(var p=[],R=1;R<arguments.length;R++)p[R-1]=arguments[R];return p=l.call(this,i(A,p))||this,p.code=A,p[u]=A,p.name=l.prototype.name+" ["+p[u]+"]",p}return s(m,l),m}(d)}function i(d,l){oe.strictEqual(typeof d,"string");var m=_[d];if(oe(m,"An invalid error message key was used: "+d+"."),typeof m=="function")d=m;else{if(d=bi.format,l===void 0||l.length===0)return m;l.unshift(m)}return String(d.apply(null,l))}function o(d,l){_[d]=typeof l=="function"?l:String(l)}function a(d,l){if(oe(d,"expected is required"),oe(typeof l=="string","thing is required"),Array.isArray(d)){var m=d.length;return oe(0<m,"At least one expected value needs to be specified"),d=d.map(function(A){return String(A)}),2<m?"one of "+l+" "+d.slice(0,m-1).join(", ")+", or "+d[m-1]:m===2?"one of "+l+" "+d[0]+" or "+d[1]:"of "+l+" "+d[0]}return"of "+l+" "+String(d)}var s=ae&&ae.__extends||function(){function d(l,m){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,p){A.__proto__=p}||function(A,p){for(var R in p)p.hasOwnProperty(R)&&(A[R]=p[R])},d(l,m)}return function(l,m){function A(){this.constructor=l}d(l,m),l.prototype=m===null?Object.create(m):(A.prototype=m.prototype,new A)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=typeof Symbol=="undefined"?"_kCode":Symbol("code"),_={};e=function(d){function l(m){if(typeof m!="object"||m===null)throw new t.TypeError("ERR_INVALID_ARG_TYPE","options","object");var A=m.message?d.call(this,m.message)||this:d.call(this,bi.inspect(m.actual).slice(0,128)+" "+(m.operator+" "+bi.inspect(m.expected).slice(0,128)))||this;return A.generatedMessage=!m.message,A.name="AssertionError [ERR_ASSERTION]",A.code="ERR_ASSERTION",A.actual=m.actual,A.expected=m.expected,A.operator=m.operator,t.Error.captureStackTrace(A,m.stackStartFunction),A}return s(l,d),l}(ae.Error),t.AssertionError=e,t.message=i,t.E=o,t.Error=n(ae.Error),t.TypeError=n(ae.TypeError),t.RangeError=n(ae.RangeError),o("ERR_ARG_NOT_ITERABLE","%s must be iterable"),o("ERR_ASSERTION","%s"),o("ERR_BUFFER_OUT_OF_BOUNDS",function(d,l){return l?"Attempt to write outside buffer bounds":'"'+d+'" is outside of buffer bounds'}),o("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),o("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),o("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),o("ERR_DNS_SET_SERVERS_FAILED",function(d,l){return'c-ares failed to set servers: "'+d+'" ['+l+"]"}),o("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),o("ERR_ENCODING_NOT_SUPPORTED",function(d){return'The "'+d+'" encoding is not supported'}),o("ERR_ENCODING_INVALID_ENCODED_DATA",function(d){return"The encoded data was not valid for encoding "+d}),o("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),o("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),o("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),o("ERR_INDEX_OUT_OF_RANGE","Index out of range"),o("ERR_INVALID_ARG_TYPE",function(d,l,m){if(oe(d,"name is required"),l.includes("not ")){var A="must not be";l=l.split("not ")[1]}else A="must be";if(Array.isArray(d))A="The "+d.map(function(R){return'"'+R+'"'}).join(", ")+" arguments "+A+" "+a(l,"type");else if(d.includes(" argument"))A="The "+d+" "+A+" "+a(l,"type");else{var p=d.includes(".")?"property":"argument";A='The "'+d+'" '+p+" "+A+" "+a(l,"type")}return 3<=arguments.length&&(A+=". Received type "+(m!==null?typeof m:"null")),A}),o("ERR_INVALID_ARRAY_LENGTH",function(d,l,m){return oe.strictEqual(typeof m,"number"),'The array "'+d+'" (length '+m+") must be of length "+l+"."}),o("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),o("ERR_INVALID_CALLBACK","Callback must be a function"),o("ERR_INVALID_CHAR","Invalid character in %s"),o("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),o("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),o("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),o("ERR_INVALID_FILE_URL_PATH","File URL path %s"),o("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),o("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),o("ERR_INVALID_OPT_VALUE",function(d,l){return'The value "'+String(l)+'" is invalid for option "'+d+'"'}),o("ERR_INVALID_OPT_VALUE_ENCODING",function(d){return'The value "'+String(d)+'" is invalid for option "encoding"'}),o("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),o("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),o("ERR_INVALID_THIS",'Value of "this" must be of type %s'),o("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),o("ERR_INVALID_URL","Invalid URL: %s"),o("ERR_INVALID_URL_SCHEME",function(d){return"The URL must be "+a(d,"scheme")}),o("ERR_IPC_CHANNEL_CLOSED","Channel closed"),o("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),o("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),o("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),o("ERR_MISSING_ARGS",function(){for(var d=[],l=0;l<arguments.length;l++)d[l]=arguments[l];oe(0<d.length,"At least one arg needs to be specified"),l="The ";var m=d.length;switch(d=d.map(function(A){return'"'+A+'"'}),m){case 1:l+=d[0]+" argument";break;case 2:l+=d[0]+" and "+d[1]+" arguments";break;default:l+=d.slice(0,m-1).join(", "),l+=", and "+d[m-1]+" arguments"}return l+" must be specified"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),o("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),o("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),o("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),o("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),o("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),o("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),o("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),o("ERR_SOCKET_CANNOT_SEND","Unable to send data"),o("ERR_SOCKET_CLOSED","Socket is closed"),o("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),o("ERR_STDERR_CLOSE","process.stderr cannot be closed"),o("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),o("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),o("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),o("ERR_TLS_DH_PARAM_SIZE",function(d){return"DH parameter size "+d+" is less than 2048"}),o("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),o("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),o("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),o("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),o("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),o("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),o("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),o("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),o("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),o("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),o("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl")});Se(Fi);var $e=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ENCODING_UTF8="utf8",t.assertEncoding=function(n){if(n&&!ne.Buffer.isEncoding(n))throw new Fi.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",n)},t.strToEncoding=function(n,i){return i&&i!==t.ENCODING_UTF8?i==="buffer"?new ne.Buffer(n):new ne.Buffer(n).toString(i):n}});Se($e);var fr=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=jt.constants.S_IFMT,i=jt.constants.S_IFDIR,o=jt.constants.S_IFREG,a=jt.constants.S_IFBLK,s=jt.constants.S_IFCHR,u=jt.constants.S_IFLNK,_=jt.constants.S_IFIFO,d=jt.constants.S_IFSOCK;e=function(){function l(){this.name="",this.mode=0}return l.build=function(m,A){var p=new l,R=m.getNode().mode;return p.name=$e.strToEncoding(m.getName(),A),p.mode=R,p},l.prototype._checkModeProperty=function(m){return(this.mode&n)===m},l.prototype.isDirectory=function(){return this._checkModeProperty(i)},l.prototype.isFile=function(){return this._checkModeProperty(o)},l.prototype.isBlockDevice=function(){return this._checkModeProperty(a)},l.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},l.prototype.isSymbolicLink=function(){return this._checkModeProperty(u)},l.prototype.isFIFO=function(){return this._checkModeProperty(_)},l.prototype.isSocket=function(){return this._checkModeProperty(d)},l}(),t.Dirent=e,t.default=e});Se(fr);function Ds(e,t){for(var n=0,i=e.length-1;0<=i;i--){var o=e[i];o==="."?e.splice(i,1):o===".."?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var dr=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function hr(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){var i=0<=n?arguments[n]:"/";if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,t=i.charAt(0)==="/")}return e=Ds(gr(e.split("/"),function(o){return!!o}),!t).join("/"),(t?"/":"")+e||"."}function Gs(e){var t=ks(e),n=qf(e,-1)==="/";return(e=Ds(gr(e.split("/"),function(i){return!!i}),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function ks(e){return e.charAt(0)==="/"}function _r(e,t){function n(s){for(var u=0;u<s.length&&s[u]==="";u++);for(var _=s.length-1;0<=_&&s[_]==="";_--);return u>_?[]:s.slice(u,_-u+1)}e=hr(e).substr(1),t=hr(t).substr(1),e=n(e.split("/")),t=n(t.split("/"));for(var i=Math.min(e.length,t.length),o=i,a=0;a<i;a++)if(e[a]!==t[a]){o=a;break}for(i=[],a=o;a<e.length;a++)i.push("..");return i=i.concat(t.slice(o)),i.join("/")}var pr={extname:function(e){return dr.exec(e).slice(1)[3]},basename:function(e,t){return e=dr.exec(e).slice(1)[2],t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},dirname:function(e){var t=dr.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.substr(0,t.length-1)),e+t)},sep:"/",delimiter:":",relative:_r,join:function(){var e=Array.prototype.slice.call(arguments,0);return Gs(gr(e,function(t){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},isAbsolute:ks,normalize:Gs,resolve:hr};function gr(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}var qf="ab".substr(-1)==="b"?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)},ci=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),e=typeof setImmediate=="function"?setImmediate.bind(ae):setTimeout.bind(ae),t.default=e});Se(ci);var ve=Ae(function(e,t){function n(){var i=oi||{};return i.getuid||(i.getuid=function(){return 0}),i.getgid||(i.getgid=function(){return 0}),i.cwd||(i.cwd=function(){return"/"}),i.nextTick||(i.nextTick=ci.default),i.emitWarning||(i.emitWarning=function(o,a){console.warn(""+a+(a?": ":"")+o)}),i.env||(i.env={}),i}Object.defineProperty(t,"__esModule",{value:!0}),t.createProcess=n,t.default=n()});Se(ve);function bn(){}bn.prototype=Object.create(null);function Yt(){Yt.init.call(this)}Yt.EventEmitter=Yt,Yt.usingDomains=!1,Yt.prototype.domain=void 0,Yt.prototype._events=void 0,Yt.prototype._maxListeners=void 0,Yt.defaultMaxListeners=10,Yt.init=function(){this.domain=null,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new bn,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Yt.prototype.setMaxListeners=function(e){if(typeof e!="number"||0>e||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},Yt.prototype.getMaxListeners=function(){return this._maxListeners===void 0?Yt.defaultMaxListeners:this._maxListeners},Yt.prototype.emit=function(e){var t,n,i=e==="error";if(t=this._events)i=i&&t.error==null;else if(!i)return!1;var o=this.domain;if(i){if(t=arguments[1],o)t||(t=Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=o,t.domainThrown=!1,o.emit("error",t);else throw t instanceof Error?t:(o=Error('Uncaught, unspecified "error" event. ('+t+")"),o.context=t,o);return!1}if(o=t[e],!o)return!1;t=typeof o=="function";var a=arguments.length;switch(a){case 1:if(t)o.call(this);else for(t=o.length,o=Bi(o,t),i=0;i<t;++i)o[i].call(this);break;case 2:if(i=arguments[1],t)o.call(this,i);else for(t=o.length,o=Bi(o,t),a=0;a<t;++a)o[a].call(this,i);break;case 3:if(i=arguments[1],a=arguments[2],t)o.call(this,i,a);else for(t=o.length,o=Bi(o,t),n=0;n<t;++n)o[n].call(this,i,a);break;case 4:if(i=arguments[1],a=arguments[2],n=arguments[3],t)o.call(this,i,a,n);else{t=o.length,o=Bi(o,t);for(var s=0;s<t;++s)o[s].call(this,i,a,n)}break;default:for(i=Array(a-1),n=1;n<a;n++)i[n-1]=arguments[n];if(t)o.apply(this,i);else for(t=o.length,o=Bi(o,t),a=0;a<t;++a)o[a].apply(this,i)}return!0};function Ws(e,t,n,i){var o;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(o=e._events){o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events);var a=o[t]}else o=e._events=new bn,e._eventsCount=0;return a?(typeof a=="function"?a=o[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),a.warned||(n=e._maxListeners===void 0?Yt.defaultMaxListeners:e._maxListeners)&&0<n&&a.length>n&&(a.warned=!0,n=Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit"),n.name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=a.length,typeof console.warn=="function"?console.warn(n):console.log(n))):(o[t]=n,++e._eventsCount),e}Yt.prototype.addListener=function(e,t){return Ws(this,e,t,!1)},Yt.prototype.on=Yt.prototype.addListener,Yt.prototype.prependListener=function(e,t){return Ws(this,e,t,!0)};function qs(e,t,n){function i(){e.removeListener(t,i),o||(o=!0,n.apply(e,arguments))}var o=!1;return i.listener=n,i}Yt.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,qs(this,e,t)),this},Yt.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,qs(this,e,t)),this},Yt.prototype.removeListener=function(e,t){var n;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');var i=this._events;if(!i)return this;var o=i[e];if(!o)return this;if(o===t||o.listener&&o.listener===t)--this._eventsCount==0?this._events=new bn:(delete i[e],i.removeListener&&this.emit("removeListener",e,o.listener||t));else if(typeof o!="function"){var a=-1;for(n=o.length;0<n--;)if(o[n]===t||o[n].listener&&o[n].listener===t){var s=o[n].listener;a=n;break}if(0>a)return this;if(o.length===1){if(o[0]=void 0,--this._eventsCount==0)return this._events=new bn,this;delete i[e]}else{n=a+1;for(var u=o.length;n<u;a+=1,n+=1)o[a]=o[n];o.pop()}i.removeListener&&this.emit("removeListener",e,s||t)}return this},Yt.prototype.removeAllListeners=function(e){var t=this._events;if(!t)return this;if(!t.removeListener)return arguments.length===0?(this._events=new bn,this._eventsCount=0):t[e]&&(--this._eventsCount==0?this._events=new bn:delete t[e]),this;if(arguments.length===0){t=Object.keys(t);for(var n=0,i;n<t.length;++n)i=t[n],i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=new bn,this._eventsCount=0,this}if(t=t[e],typeof t=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this},Yt.prototype.listeners=function(e){var t=this._events;if(t)if(e=t[e])if(typeof e=="function")e=[e.listener||e];else{t=Array(e.length);for(var n=0;n<t.length;++n)t[n]=e[n].listener||e[n];e=t}else e=[];else e=[];return e},Yt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Qs.call(e,t)},Yt.prototype.listenerCount=Qs;function Qs(e){var t=this._events;if(t){if(e=t[e],typeof e=="function")return 1;if(e)return e.length}return 0}Yt.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};function Bi(e,t){for(var n=Array(t);t--;)n[t]=e[t];return n}var Ti=Ae(function(e,t){var n=ae&&ae.__extends||function(){function _(d,l){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,A){m.__proto__=A}||function(m,A){for(var p in A)A.hasOwnProperty(p)&&(m[p]=A[p])},_(d,l)}return function(d,l){function m(){this.constructor=d}_(d,l),d.prototype=l===null?Object.create(l):(m.prototype=l.prototype,new m)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=jt.constants.S_IFMT,o=jt.constants.S_IFDIR,a=jt.constants.S_IFREG,s=jt.constants.S_IFLNK,u=jt.constants.O_APPEND;t.SEP="/",e=function(_){function d(l,m){m===void 0&&(m=438);var A=_.call(this)||this;return A.uid=ve.default.getuid(),A.gid=ve.default.getgid(),A.atime=new Date,A.mtime=new Date,A.ctime=new Date,A.perm=438,A.mode=a,A.nlink=1,A.perm=m,A.mode|=m,A.ino=l,A}return n(d,_),d.prototype.getString=function(l){return l===void 0&&(l="utf8"),this.getBuffer().toString(l)},d.prototype.setString=function(l){this.buf=ne.bufferFrom(l,"utf8"),this.touch()},d.prototype.getBuffer=function(){return this.buf||this.setBuffer(ne.bufferAllocUnsafe(0)),ne.bufferFrom(this.buf)},d.prototype.setBuffer=function(l){this.buf=ne.bufferFrom(l),this.touch()},d.prototype.getSize=function(){return this.buf?this.buf.length:0},d.prototype.setModeProperty=function(l){this.mode=this.mode&~i|l},d.prototype.setIsFile=function(){this.setModeProperty(a)},d.prototype.setIsDirectory=function(){this.setModeProperty(o)},d.prototype.setIsSymlink=function(){this.setModeProperty(s)},d.prototype.isFile=function(){return(this.mode&i)===a},d.prototype.isDirectory=function(){return(this.mode&i)===o},d.prototype.isSymlink=function(){return(this.mode&i)===s},d.prototype.makeSymlink=function(l){this.symlink=l,this.setIsSymlink()},d.prototype.write=function(l,m,A,p){if(m===void 0&&(m=0),A===void 0&&(A=l.length),p===void 0&&(p=0),this.buf||(this.buf=ne.bufferAllocUnsafe(0)),p+A>this.buf.length){var R=ne.bufferAllocUnsafe(p+A);this.buf.copy(R,0,0,this.buf.length),this.buf=R}return l.copy(this.buf,p,m,m+A),this.touch(),A},d.prototype.read=function(l,m,A,p){return m===void 0&&(m=0),A===void 0&&(A=l.byteLength),p===void 0&&(p=0),this.buf||(this.buf=ne.bufferAllocUnsafe(0)),A>l.byteLength&&(A=l.byteLength),A+p>this.buf.length&&(A=this.buf.length-p),this.buf.copy(l,m,p,p+A),A},d.prototype.truncate=function(l){if(l===void 0&&(l=0),l)if(this.buf||(this.buf=ne.bufferAllocUnsafe(0)),l<=this.buf.length)this.buf=this.buf.slice(0,l);else{var m=ne.bufferAllocUnsafe(0);this.buf.copy(m),m.fill(0,l)}else this.buf=ne.bufferAllocUnsafe(0);this.touch()},d.prototype.chmod=function(l){this.perm=l,this.mode=this.mode&-512|l,this.touch()},d.prototype.chown=function(l,m){this.uid=l,this.gid=m,this.touch()},d.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},d.prototype.canRead=function(l,m){return l===void 0&&(l=ve.default.getuid()),m===void 0&&(m=ve.default.getgid()),!!(this.perm&4||m===this.gid&&this.perm&32||l===this.uid&&this.perm&256)},d.prototype.canWrite=function(l,m){return l===void 0&&(l=ve.default.getuid()),m===void 0&&(m=ve.default.getgid()),!!(this.perm&2||m===this.gid&&this.perm&16||l===this.uid&&this.perm&128)},d.prototype.del=function(){this.emit("delete",this)},d.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},d}(Yt.EventEmitter),t.Node=e,e=function(_){function d(l,m,A){var p=_.call(this)||this;return p.children={},p.steps=[],p.ino=0,p.length=0,p.vol=l,p.parent=m,p.steps=m?m.steps.concat([A]):[A],p}return n(d,_),d.prototype.setNode=function(l){this.node=l,this.ino=l.ino},d.prototype.getNode=function(){return this.node},d.prototype.createChild=function(l,m){m===void 0&&(m=this.vol.createNode());var A=new d(this.vol,this,l);return A.setNode(m),m.isDirectory(),this.setChild(l,A),A},d.prototype.setChild=function(l,m){return m===void 0&&(m=new d(this.vol,this,l)),this.children[l]=m,m.parent=this,this.length++,this.emit("child:add",m,this),m},d.prototype.deleteChild=function(l){delete this.children[l.getName()],this.length--,this.emit("child:delete",l,this)},d.prototype.getChild=function(l){if(Object.hasOwnProperty.call(this.children,l))return this.children[l]},d.prototype.getPath=function(){return this.steps.join(t.SEP)},d.prototype.getName=function(){return this.steps[this.steps.length-1]},d.prototype.walk=function(l,m,A){if(m===void 0&&(m=l.length),A===void 0&&(A=0),A>=l.length||A>=m)return this;var p=this.getChild(l[A]);return p?p.walk(l,m,A+1):null},d.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},d}(Yt.EventEmitter),t.Link=e,e=function(){function _(d,l,m,A){this.position=0,this.link=d,this.node=l,this.flags=m,this.fd=A}return _.prototype.getString=function(){return this.node.getString()},_.prototype.setString=function(d){this.node.setString(d)},_.prototype.getBuffer=function(){return this.node.getBuffer()},_.prototype.setBuffer=function(d){this.node.setBuffer(d)},_.prototype.getSize=function(){return this.node.getSize()},_.prototype.truncate=function(d){this.node.truncate(d)},_.prototype.seekTo=function(d){this.position=d},_.prototype.stats=function(){return ei.default.build(this.node)},_.prototype.write=function(d,l,m,A){return l===void 0&&(l=0),m===void 0&&(m=d.length),typeof A!="number"&&(A=this.position),this.flags&u&&(A=this.getSize()),d=this.node.write(d,l,m,A),this.position=A+d,d},_.prototype.read=function(d,l,m,A){return l===void 0&&(l=0),m===void 0&&(m=d.byteLength),typeof A!="number"&&(A=this.position),d=this.node.read(d,l,m,A),this.position=A+d,d},_.prototype.chmod=function(d){this.node.chmod(d)},_.prototype.chown=function(d,l){this.node.chown(d,l)},_}(),t.File=e});Se(Ti);var Qf=Ti.Node,Hs=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,i,o){var a=setTimeout.apply(null,arguments);return a&&typeof a=="object"&&typeof a.unref=="function"&&a.unref(),a}});Se(Hs);function qn(){this.tail=this.head=null,this.length=0}qn.prototype.push=function(e){e={data:e,next:null},0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},qn.prototype.unshift=function(e){e={data:e,next:this.head},this.length===0&&(this.tail=e),this.head=e,++this.length},qn.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,e}},qn.prototype.clear=function(){this.head=this.tail=null,this.length=0},qn.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},qn.prototype.concat=function(e){if(this.length===0)return At.alloc(0);if(this.length===1)return this.head.data;e=At.allocUnsafe(e>>>0);for(var t=this.head,n=0;t;)t.data.copy(e,n),n+=t.data.length,t=t.next;return e};var Hf=At.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ri(e){if(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),e&&!Hf(e))throw Error("Unknown encoding: "+e);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=$f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=jf;break;default:this.write=zf;return}this.charBuffer=new At(6),this.charLength=this.charReceived=0}Ri.prototype.write=function(e){for(var t="";this.charLength;){if(t=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length,e.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived<this.charLength)return"";e=e.slice(t,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(55296<=n&&56319>=n)this.charLength+=this.surrogateSize,t="";else{if(this.charReceived=this.charLength=0,e.length===0)return t;break}}this.detectIncompleteChar(e);var i=e.length;return this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i),i=t.length-1,n=t.charCodeAt(i),55296<=n&&56319>=n?(n=this.surrogateSize,this.charLength+=n,this.charReceived+=n,this.charBuffer.copy(this.charBuffer,n,0,n),e.copy(this.charBuffer,0,0,n),t.substring(0,i)):t},Ri.prototype.detectIncompleteChar=function(e){for(var t=3<=e.length?3:e.length;0<t;t--){var n=e[e.length-t];if(t==1&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},Ri.prototype.end=function(e){var t="";return e&&e.length&&(t=this.write(e)),this.charReceived&&(e=this.encoding,t+=this.charBuffer.slice(0,this.charReceived).toString(e)),t};function zf(e){return e.toString(this.encoding)}function $f(e){this.charLength=(this.charReceived=e.length%2)?2:0}function jf(e){this.charLength=(this.charReceived=e.length%3)?3:0}re.ReadableState=zs;var Jt=ps("stream");vn(re,Yt);function Yf(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function zs(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof je&&(this.objectMode=this.objectMode||!!e.readableObjectMode),t=e.highWaterMark;var n=this.objectMode?16:16384;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new qn,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.reading=this.endEmitted=this.ended=!1,this.sync=!0,this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.encoding=this.decoder=null,e.encoding&&(this.decoder=new Ri(e.encoding),this.encoding=e.encoding)}function re(e){if(!(this instanceof re))return new re(e);this._readableState=new zs(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),Yt.call(this)}re.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||typeof e!="string"||(t=t||n.defaultEncoding,t!==n.encoding&&(e=At.from(e,t),t="")),$s(this,n,e,t,!1)},re.prototype.unshift=function(e){return $s(this,this._readableState,e,"",!0)},re.prototype.isPaused=function(){return this._readableState.flowing===!1};function $s(e,t,n,i,o){var a=n,s=null;if(hn(a)||typeof a=="string"||a===null||a===void 0||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),a=s)e.emit("error",a);else if(n===null)t.reading=!1,t.ended||(t.decoder&&(n=t.decoder.end())&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length),t.ended=!0,ho(e));else if(t.objectMode||n&&0<n.length)if(t.ended&&!o)e.emit("error",Error("stream.push() after EOF"));else if(t.endEmitted&&o)e.emit("error",Error("stream.unshift() after end event"));else{if(t.decoder&&!o&&!i){n=t.decoder.write(n);var u=!t.objectMode&&n.length===0}o||(t.reading=!1),u||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&ho(e))),t.readingMore||(t.readingMore=!0,Ue(Vf,e,t))}else o||(t.reading=!1);return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}re.prototype.setEncoding=function(e){return this._readableState.decoder=new Ri(e),this._readableState.encoding=e,this};function js(e,t){if(0>=e||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e)return t.flowing&&t.length?t.buffer.head.data.length:t.length;if(e>t.highWaterMark){var n=e;8388608<=n?n=8388608:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),t.highWaterMark=n}return e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)}re.prototype.read=function(e){Jt("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return Jt("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?yr(this):ho(this),null;if(e=js(e,t),e===0&&t.ended)return t.length===0&&yr(this),null;var i=t.needReadable;return Jt("need readable",i),(t.length===0||t.length-e<t.highWaterMark)&&(i=!0,Jt("length less than watermark",i)),t.ended||t.reading?Jt("reading or ended",!1):i&&(Jt("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=js(n,t))),i=0<e?Vs(e,t):null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&yr(this)),i!==null&&this.emit("data",i),i};function ho(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(Jt("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Ue(Ys,e):Ys(e))}function Ys(e){Jt("emit readable"),e.emit("readable"),mr(e)}function Vf(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(Jt("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}re.prototype._read=function(){this.emit("error",Error("not implemented"))},re.prototype.pipe=function(e,t){function n(P){Jt("onunpipe"),P===l&&o()}function i(){Jt("onend"),e.end()}function o(){Jt("cleanup"),e.removeListener("close",u),e.removeListener("finish",_),e.removeListener("drain",A),e.removeListener("error",s),e.removeListener("unpipe",n),l.removeListener("end",i),l.removeListener("end",o),l.removeListener("data",a),p=!0,!m.awaitDrain||e._writableState&&!e._writableState.needDrain||A()}function a(P){Jt("ondata"),R=!1,e.write(P)!==!1||R||((m.pipesCount===1&&m.pipes===e||1<m.pipesCount&&Ks(m.pipes,e)!==-1)&&!p&&(Jt("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,R=!0),l.pause())}function s(P){Jt("onerror",P),d(),e.removeListener("error",s),e.listeners("error").length===0&&e.emit("error",P)}function u(){e.removeListener("finish",_),d()}function _(){Jt("onfinish"),e.removeListener("close",u),d()}function d(){Jt("unpipe"),l.unpipe(e)}var l=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=e;break;case 1:m.pipes=[m.pipes,e];break;default:m.pipes.push(e)}m.pipesCount+=1,Jt("pipe count=%d opts=%j",m.pipesCount,t),t=t&&t.end===!1?o:i,m.endEmitted?Ue(t):l.once("end",t),e.on("unpipe",n);var A=Kf(l);e.on("drain",A);var p=!1,R=!1;return l.on("data",a),Yf(e,"error",s),e.once("close",u),e.once("finish",_),e.emit("pipe",l),m.flowing||(Jt("pipe resume"),l.resume()),e};function Kf(e){return function(){var t=e._readableState;Jt("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,mr(e))}}re.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){e=t.pipes;var n=t.pipesCount;for(t.pipes=null,t.pipesCount=0,t.flowing=!1,t=0;t<n;t++)e[t].emit("unpipe",this);return this}return n=Ks(t.pipes,e),n===-1?this:(t.pipes.splice(n,1),--t.pipesCount,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},re.prototype.on=function(e,t){return t=Yt.prototype.on.call(this,e,t),e==="data"?this._readableState.flowing!==!1&&this.resume():e==="readable"&&(e=this._readableState,e.endEmitted||e.readableListening||(e.readableListening=e.needReadable=!0,e.emittedReadable=!1,e.reading?e.length&&ho(this):Ue(Zf,this))),t},re.prototype.addListener=re.prototype.on;function Zf(e){Jt("readable nexttick read 0"),e.read(0)}re.prototype.resume=function(){var e=this._readableState;return e.flowing||(Jt("resume"),e.flowing=!0,e.resumeScheduled||(e.resumeScheduled=!0,Ue(Xf,this,e))),this};function Xf(e,t){t.reading||(Jt("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),mr(e),t.flowing&&!t.reading&&e.read(0)}re.prototype.pause=function(){return Jt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Jt("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function mr(e){var t=e._readableState;for(Jt("flow",t.flowing);t.flowing&&e.read()!==null;);}re.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(Jt("wrapped end"),t.decoder&&!t.ended){var a=t.decoder.end();a&&a.length&&i.push(a)}i.push(null)}),e.on("data",function(a){Jt("wrapped data"),t.decoder&&(a=t.decoder.write(a)),t.objectMode&&a==null||!(t.objectMode||a&&a.length)||i.push(a)||(n=!0,e.pause())});for(var o in e)this[o]===void 0&&typeof e[o]=="function"&&(this[o]=function(a){return function(){return e[a].apply(e,arguments)}}(o));return td(["error","close","destroy","pause","resume"],function(a){e.on(a,i.emit.bind(i,a))}),i._read=function(a){Jt("wrapped _read",a),n&&(n=!1,e.resume())},i},re._fromList=Vs;function Vs(e,t){if(t.length===0)return null;if(t.objectMode)var n=t.buffer.shift();else if(!e||e>=t.length)n=t.decoder?t.buffer.join(""):t.buffer.length===1?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear();else{if(n=t.buffer,t=t.decoder,e<n.head.data.length)t=n.head.data.slice(0,e),n.head.data=n.head.data.slice(e);else{if(e===n.head.data.length)n=n.shift();else if(t){t=n.head;var i=1,o=t.data;for(e-=o.length;t=t.next;){var a=t.data,s=e>a.length?a.length:e;if(o=s===a.length?o+a:o+a.slice(0,e),e-=s,e===0){s===a.length?(++i,n.head=t.next?t.next:n.tail=null):(n.head=t,t.data=a.slice(s));break}++i}n.length-=i,n=o}else{for(t=At.allocUnsafe(e),i=n.head,o=1,i.data.copy(t),e-=i.data.length;i=i.next;){if(a=i.data,s=e>a.length?a.length:e,a.copy(t,t.length-e,0,s),e-=s,e===0){s===a.length?(++o,n.head=i.next?i.next:n.tail=null):(n.head=i,i.data=a.slice(s));break}++o}n.length-=o,n=t}t=n}n=t}return n}function yr(e){var t=e._readableState;if(0<t.length)throw Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Ue(Jf,t,e))}function Jf(e,t){e.endEmitted||e.length!==0||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function td(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)}function Ks(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}Ie.WritableState=Ar,vn(Ie,Yt);function ed(){}function nd(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function Ar(e,t){Object.defineProperty(this,"buffer",{get:er(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof je&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||n===0?n:i,this.highWaterMark=~~this.highWaterMark,this.finished=this.ended=this.ending=this.needDrain=!1,this.decodeStrings=e.decodeStrings!==!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){var a=t._writableState,s=a.sync,u=a.writecb;a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0,o?(--a.pendingcb,s?Ue(u,o):u(o),t._writableState.errorEmitted=!0,t.emit("error",o)):((o=Js(a))||a.corked||a.bufferProcessing||!a.bufferedRequest||Xs(t,a),s?Ue(Zs,t,a,o,u):Zs(t,a,o,u))},this.writecb=null,this.writelen=0,this.lastBufferedRequest=this.bufferedRequest=null,this.pendingcb=0,this.errorEmitted=this.prefinished=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ec(this)}Ar.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};function Ie(e){if(!(this instanceof Ie||this instanceof je))return new Ie(e);this._writableState=new Ar(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),Yt.call(this)}Ie.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))},Ie.prototype.write=function(e,t,n){var i=this._writableState,o=!1;if(typeof t=="function"&&(n=t,t=null),At.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),typeof n!="function"&&(n=ed),i.ended)i=n,e=Error("write after end"),this.emit("error",e),Ue(i,e);else{var a=n,s=!0,u=!1;e===null?u=new TypeError("May not write null values to stream"):At.isBuffer(e)||typeof e=="string"||e===void 0||i.objectMode||(u=new TypeError("Invalid non-string/buffer chunk")),u&&(this.emit("error",u),Ue(a,u),s=!1),s&&(i.pendingcb++,o=t,i.objectMode||i.decodeStrings===!1||typeof e!="string"||(e=At.from(e,o)),At.isBuffer(e)&&(o="buffer"),a=i.objectMode?1:e.length,i.length+=a,t=i.length<i.highWaterMark,t||(i.needDrain=!0),i.writing||i.corked?(a=i.lastBufferedRequest,i.lastBufferedRequest=new nd(e,o,n),a?a.next=i.lastBufferedRequest:i.bufferedRequest=i.lastBufferedRequest,i.bufferedRequestCount+=1):Ir(this,i,!1,a,e,o,n),o=t)}return o},Ie.prototype.cork=function(){this._writableState.corked++},Ie.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||Xs(this,e))},Ie.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function Ir(e,t,n,i,o,a,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,a,t.onwrite),t.sync=!1}function Zs(e,t,n,i){!n&&t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain")),t.pendingcb--,i(),tc(e,t)}function Xs(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=Array(t.bufferedRequestCount),o=t.corkedRequestsFree;o.entry=n;for(var a=0;n;)i[a]=n,n=n.next,a+=1;Ir(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new ec(t)}else{for(;n&&(i=n.chunk,Ir(e,t,!1,t.objectMode?1:i.length,i,n.encoding,n.callback),n=n.next,!t.writing););n===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}Ie.prototype._write=function(e,t,n){n(Error("not implemented"))},Ie.prototype._writev=null,Ie.prototype.end=function(e,t,n){var i=this._writableState;typeof e=="function"?(n=e,t=e=null):typeof t=="function"&&(n=t,t=null),e!=null&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&(e=n,i.ending=!0,tc(this,i),e&&(i.finished?Ue(e):this.once("finish",e)),i.ended=!0,this.writable=!1)};function Js(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function tc(e,t){var n=Js(t);return n&&(t.pendingcb===0?(t.prefinished||(t.prefinished=!0,e.emit("prefinish")),t.finished=!0,e.emit("finish")):t.prefinished||(t.prefinished=!0,e.emit("prefinish"))),n}function ec(e){var t=this;this.entry=this.next=null,this.finish=function(n){var i=t.entry;for(t.entry=null;i;){var o=i.callback;e.pendingcb--,o(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}vn(je,re);for(var nc=Object.keys(Ie.prototype),Lr=0;Lr<nc.length;Lr++){var Er=nc[Lr];je.prototype[Er]||(je.prototype[Er]=Ie.prototype[Er])}function je(e){if(!(this instanceof je))return new je(e);re.call(this,e),Ie.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",id)}function id(){this.allowHalfOpen||this._writableState.ended||Ue(od,this)}function od(e){e.end()}vn(nn,je);function rd(e){this.afterTransform=function(t,n){var i=e._transformState;i.transforming=!1;var o=i.writecb;return o?(i.writechunk=null,i.writecb=null,n!=null&&e.push(n),o(t),t=e._readableState,t.reading=!1,(t.needReadable||t.length<t.highWaterMark)&&e._read(t.highWaterMark),t=void 0):t=e.emit("error",Error("no writecb in Transform class")),t},this.transforming=this.needTransform=!1,this.writeencoding=this.writechunk=this.writecb=null}function nn(e){if(!(this instanceof nn))return new nn(e);je.call(this,e),this._transformState=new rd(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(n){ic(t,n)}):ic(t)})}nn.prototype.push=function(e,t){return this._transformState.needTransform=!1,je.prototype.push.call(this,e,t)},nn.prototype._transform=function(){throw Error("Not implemented")},nn.prototype._write=function(e,t,n){var i=this._transformState;i.writecb=n,i.writechunk=e,i.writeencoding=t,i.transforming||(e=this._readableState,(i.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark))},nn.prototype._read=function(){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function ic(e,t){if(t)return e.emit("error",t);if(t=e._transformState,e._writableState.length)throw Error("Calling transform done when ws.length != 0");if(t.transforming)throw Error("Calling transform done when still transforming");return e.push(null)}vn(Oi,nn);function Oi(e){if(!(this instanceof Oi))return new Oi(e);nn.call(this,e)}Oi.prototype._transform=function(e,t,n){n(null,e)},vn(De,Yt),De.Readable=re,De.Writable=Ie,De.Duplex=je,De.Transform=nn,De.PassThrough=Oi,De.Stream=De;function De(){Yt.call(this)}De.prototype.pipe=function(e,t){function n(l){e.writable&&e.write(l)===!1&&_.pause&&_.pause()}function i(){_.readable&&_.resume&&_.resume()}function o(){d||(d=!0,e.end())}function a(){d||(d=!0,typeof e.destroy=="function"&&e.destroy())}function s(l){if(u(),Yt.listenerCount(this,"error")===0)throw l}function u(){_.removeListener("data",n),e.removeListener("drain",i),_.removeListener("end",o),_.removeListener("close",a),_.removeListener("error",s),e.removeListener("error",s),_.removeListener("end",u),_.removeListener("close",u),e.removeListener("close",u)}var _=this;_.on("data",n),e.on("drain",i),e._isStdio||t&&t.end===!1||(_.on("end",o),_.on("close",a));var d=!1;return _.on("error",s),e.on("error",s),_.on("end",u),_.on("close",u),e.on("close",u),e.emit("pipe",_),e};var ad=Array.prototype.slice,sd={extend:function e(t,n){for(var i in n)t[i]=n[i];return 3>arguments.length?t:e.apply(null,[t].concat(ad.call(arguments,2)))}},oc=Ae(function(e,t){function n(a,s,u){return u===void 0&&(u=function(_){return _}),function(){for(var _=[],d=0;d<arguments.length;d++)_[d]=arguments[d];return new Promise(function(l,m){a[s].bind(a).apply(void 0,i(_,[function(A,p){return A?m(A):l(u(p))}]))})}}var i=ae&&ae.__spreadArrays||function(){for(var a=0,s=0,u=arguments.length;s<u;s++)a+=arguments[s].length;a=Array(a);var _=0;for(s=0;s<u;s++)for(var d=arguments[s],l=0,m=d.length;l<m;l++,_++)a[_]=d[l];return a};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function a(s,u){this.vol=s,this.fd=u}return a.prototype.appendFile=function(s,u){return n(this.vol,"appendFile")(this.fd,s,u)},a.prototype.chmod=function(s){return n(this.vol,"fchmod")(this.fd,s)},a.prototype.chown=function(s,u){return n(this.vol,"fchown")(this.fd,s,u)},a.prototype.close=function(){return n(this.vol,"close")(this.fd)},a.prototype.datasync=function(){return n(this.vol,"fdatasync")(this.fd)},a.prototype.read=function(s,u,_,d){return n(this.vol,"read",function(l){return{bytesRead:l,buffer:s}})(this.fd,s,u,_,d)},a.prototype.readFile=function(s){return n(this.vol,"readFile")(this.fd,s)},a.prototype.stat=function(s){return n(this.vol,"fstat")(this.fd,s)},a.prototype.sync=function(){return n(this.vol,"fsync")(this.fd)},a.prototype.truncate=function(s){return n(this.vol,"ftruncate")(this.fd,s)},a.prototype.utimes=function(s,u){return n(this.vol,"futimes")(this.fd,s,u)},a.prototype.write=function(s,u,_,d){return n(this.vol,"write",function(l){return{bytesWritten:l,buffer:s}})(this.fd,s,u,_,d)},a.prototype.writeFile=function(s,u){return n(this.vol,"writeFile")(this.fd,s,u)},a}();t.FileHandle=o,t.default=function(a){return typeof Promise=="undefined"?null:{FileHandle:o,access:function(s,u){return n(a,"access")(s,u)},appendFile:function(s,u,_){return n(a,"appendFile")(s instanceof o?s.fd:s,u,_)},chmod:function(s,u){return n(a,"chmod")(s,u)},chown:function(s,u,_){return n(a,"chown")(s,u,_)},copyFile:function(s,u,_){return n(a,"copyFile")(s,u,_)},lchmod:function(s,u){return n(a,"lchmod")(s,u)},lchown:function(s,u,_){return n(a,"lchown")(s,u,_)},link:function(s,u){return n(a,"link")(s,u)},lstat:function(s,u){return n(a,"lstat")(s,u)},mkdir:function(s,u){return n(a,"mkdir")(s,u)},mkdtemp:function(s,u){return n(a,"mkdtemp")(s,u)},open:function(s,u,_){return n(a,"open",function(d){return new o(a,d)})(s,u,_)},readdir:function(s,u){return n(a,"readdir")(s,u)},readFile:function(s,u){return n(a,"readFile")(s instanceof o?s.fd:s,u)},readlink:function(s,u){return n(a,"readlink")(s,u)},realpath:function(s,u){return n(a,"realpath")(s,u)},rename:function(s,u){return n(a,"rename")(s,u)},rmdir:function(s){return n(a,"rmdir")(s)},stat:function(s,u){return n(a,"stat")(s,u)},symlink:function(s,u,_){return n(a,"symlink")(s,u,_)},truncate:function(s,u){return n(a,"truncate")(s,u)},unlink:function(s){return n(a,"unlink")(s)},utimes:function(s,u,_){return n(a,"utimes")(s,u,_)},writeFile:function(s,u,_){return n(a,"writeFile")(s instanceof o?s.fd:s,u,_)}}}});Se(oc);var cd=/[^\x20-\x7E]/,ld=/[\x2E\u3002\uFF0E\uFF61]/g,rc={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},li=Math.floor,wr=String.fromCharCode;function ud(e,t){var n=e.split("@"),i="";1<n.length&&(i=n[0]+"@",e=n[1]),e=e.replace(ld,"."),e=e.split("."),n=e.length;for(var o=[];n--;)o[n]=t(e[n]);return t=o.join("."),i+t}function ac(e,t){return e+22+75*(26>e)-((t!=0)<<5)}function fd(e){return ud(e,function(t){if(cd.test(t)){var n,i=[],o=[],a=0;for(n=t.length;a<n;){var s=t.charCodeAt(a++);if(55296<=s&&56319>=s&&a<n){var u=t.charCodeAt(a++);(u&64512)==56320?o.push(((s&1023)<<10)+(u&1023)+65536):(o.push(s),a--)}else o.push(s)}t=o,u=t.length,o=128;var _=0,d=72;for(s=0;s<u;++s){var l=t[s];128>l&&i.push(wr(l))}for((a=n=i.length)&&i.push("-");a<u;){var m=2147483647;for(s=0;s<u;++s)l=t[s],l>=o&&l<m&&(m=l);var A=a+1;if(m-o>li((2147483647-_)/A))throw new RangeError(rc.overflow);for(_+=(m-o)*A,o=m,s=0;s<u;++s){if(l=t[s],l<o&&2147483647<++_)throw new RangeError(rc.overflow);if(l==o){var p=_;for(m=36;l=m<=d?1:m>=d+26?26:m-d,!(p<l);m+=36){var R=p-l;p=36-l,i.push(wr(ac(l+R%p,0))),p=li(R/p)}for(i.push(wr(ac(p,0))),d=A,m=0,_=a==n?li(_/700):_>>1,_+=li(_/d);455<_;m+=36)_=li(_/35);d=li(m+36*_/(_+38)),_=0,++a}}++_,++o}i="xn--"+i.join("")}else i=t;return i})}var sc=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function Pi(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function dd(e,t,n,i){return t=t||"&",n=n||"=",e===null&&(e=void 0),typeof e=="object"?cc(hd(e),function(o){var a=encodeURIComponent(Pi(o))+n;return sc(e[o])?cc(e[o],function(s){return a+encodeURIComponent(Pi(s))}).join(t):a+encodeURIComponent(Pi(e[o]))}).join(t):i?encodeURIComponent(Pi(i))+n+encodeURIComponent(Pi(e)):""}function cc(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var hd=Object.keys||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t};function lc(e,t,n,i){n=n||"=";var o={};if(typeof e!="string"||e.length===0)return o;var a=/\+/g;for(e=e.split(t||"&"),t=1e3,i&&typeof i.maxKeys=="number"&&(t=i.maxKeys),i=e.length,0<t&&i>t&&(i=t),t=0;t<i;++t){var s=e[t].replace(a,"%20"),u=s.indexOf(n);if(0<=u){var _=s.substr(0,u);s=s.substr(u+1)}else _=s,s="";_=decodeURIComponent(_),s=decodeURIComponent(s),Object.prototype.hasOwnProperty.call(o,_)?sc(o[_])?o[_].push(s):o[_]=[o[_],s]:o[_]=s}return o}var _d={parse:_o,resolve:wd,resolveObject:Sd,format:Ed,Url:on};function on(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}var pd=/^([a-z0-9.+-]+:)/i,gd=/:[0-9]*$/,md=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,yd="{}|\\^`".split("").concat('<>"` \r\n	'.split("")),Sr=["'"].concat(yd),uc=["%","/","?",";","#"].concat(Sr),fc=["/","?","#"],Ad=255,dc=/^[+a-z0-9A-Z_-]{0,63}$/,Id=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ld={javascript:!0,"javascript:":!0},vr={javascript:!0,"javascript:":!0},ui={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function _o(e,t,n){if(e&&Cn(e)&&e instanceof on)return e;var i=new on;return i.parse(e,t,n),i}on.prototype.parse=function(e,t,n){return hc(this,e,t,n)};function hc(e,t,n,i){if(!Wn(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?");if(o=o!==-1&&o<t.indexOf("#")?"?":"#",t=t.split(o),t[0]=t[0].replace(/\\/g,"/"),t=t.join(o),o=t.trim(),!i&&t.split("#").length===1&&(t=md.exec(o)))return e.path=o,e.href=o,e.pathname=t[1],t[2]?(e.search=t[2],e.query=n?lc(e.search.substr(1)):e.search.substr(1)):n&&(e.search="",e.query={}),e;if(t=pd.exec(o)){t=t[0];var a=t.toLowerCase();e.protocol=a,o=o.substr(t.length)}if(i||t||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var s=o.substr(0,2)==="//";!s||t&&vr[t]||(o=o.substr(2),e.slashes=!0)}if(!vr[t]&&(s||t&&!ui[t])){for(t=-1,i=0;i<fc.length;i++)s=o.indexOf(fc[i]),s!==-1&&(t===-1||s<t)&&(t=s);for(s=t===-1?o.lastIndexOf("@"):o.lastIndexOf("@",t),s!==-1&&(i=o.slice(0,s),o=o.slice(s+1),e.auth=decodeURIComponent(i)),t=-1,i=0;i<uc.length;i++)s=o.indexOf(uc[i]),s!==-1&&(t===-1||s<t)&&(t=s);if(t===-1&&(t=o.length),e.host=o.slice(0,t),o=o.slice(t),_c(e),e.hostname=e.hostname||"",s=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]",!s){var u=e.hostname.split(/\./);for(i=0,t=u.length;i<t;i++){var _=u[i];if(_&&!_.match(dc)){for(var d="",l=0,m=_.length;l<m;l++)d=127<_.charCodeAt(l)?d+"x":d+_[l];if(!d.match(dc)){t=u.slice(0,i),i=u.slice(i+1),(_=_.match(Id))&&(t.push(_[1]),i.unshift(_[2])),i.length&&(o="/"+i.join(".")+o),e.hostname=t.join(".");break}}}}e.hostname=e.hostname.length>Ad?"":e.hostname.toLowerCase(),s||(e.hostname=fd(e.hostname)),i=e.port?":"+e.port:"",e.host=(e.hostname||"")+i,e.href+=e.host,s&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!Ld[a])for(i=0,t=Sr.length;i<t;i++)s=Sr[i],o.indexOf(s)!==-1&&(_=encodeURIComponent(s),_===s&&(_=escape(s)),o=o.split(s).join(_));return i=o.indexOf("#"),i!==-1&&(e.hash=o.substr(i),o=o.slice(0,i)),i=o.indexOf("?"),i!==-1?(e.search=o.substr(i),e.query=o.substr(i+1),n&&(e.query=lc(e.query)),o=o.slice(0,i)):n&&(e.search="",e.query={}),o&&(e.pathname=o),ui[a]&&e.hostname&&!e.pathname&&(e.pathname="/"),(e.pathname||e.search)&&(i=e.pathname||"",e.path=i+(e.search||"")),e.href=Cr(e),e}function Ed(e){return Wn(e)&&(e=hc({},e)),Cr(e)}function Cr(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var n=e.protocol||"",i=e.pathname||"",o=e.hash||"",a=!1,s="";return e.host?a=t+e.host:e.hostname&&(a=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(a+=":"+e.port)),e.query&&Cn(e.query)&&Object.keys(e.query).length&&(s=dd(e.query)),t=e.search||s&&"?"+s||"",n&&n.substr(-1)!==":"&&(n+=":"),e.slashes||(!n||ui[n])&&a!==!1?(a="//"+(a||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):a||(a=""),o&&o.charAt(0)!=="#"&&(o="#"+o),t&&t.charAt(0)!=="?"&&(t="?"+t),i=i.replace(/[?#]/g,function(u){return encodeURIComponent(u)}),t=t.replace("#","%23"),n+a+i+t+o}on.prototype.format=function(){return Cr(this)};function wd(e,t){return _o(e,!1,!0).resolve(t)}on.prototype.resolve=function(e){return this.resolveObject(_o(e,!1,!0)).format()};function Sd(e,t){return e?_o(e,!1,!0).resolveObject(t):t}on.prototype.resolveObject=function(e){if(Wn(e)){var t=new on;t.parse(e,!1,!0),e=t}t=new on;for(var n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];t[o]=this[o]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(n=Object.keys(e),i=0;i<n.length;i++)o=n[i],o!=="protocol"&&(t[o]=e[o]);return ui[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}var a;if(e.protocol&&e.protocol!==t.protocol){if(!ui[e.protocol]){for(n=Object.keys(e),i=0;i<n.length;i++)o=n[i],t[o]=e[o];return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||vr[e.protocol])t.pathname=e.pathname;else{for(a=(e.pathname||"").split("/");a.length&&!(e.host=a.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),a[0]!==""&&a.unshift(""),2>a.length&&a.unshift(""),t.pathname=a.join("/")}return t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(t.path=(t.pathname||"")+(t.search||"")),t.slashes=t.slashes||e.slashes,t.href=t.format(),t}n=t.pathname&&t.pathname.charAt(0)==="/";var s=e.host||e.pathname&&e.pathname.charAt(0)==="/",u=n=s||n||t.host&&e.pathname;if(i=t.pathname&&t.pathname.split("/")||[],o=t.protocol&&!ui[t.protocol],a=e.pathname&&e.pathname.split("/")||[],o&&(t.hostname="",t.port=null,t.host&&(i[0]===""?i[0]=t.host:i.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(a[0]===""?a[0]=e.host:a.unshift(e.host)),e.host=null),n=n&&(a[0]===""||i[0]==="")),s)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,i=a;else if(a.length)i||(i=[]),i.pop(),i=i.concat(a),t.search=e.search,t.query=e.query;else if(e.search!=null)return o&&(t.hostname=t.host=i.shift(),o=t.host&&0<t.host.indexOf("@")?t.host.split("@"):!1)&&(t.auth=o.shift(),t.host=t.hostname=o.shift()),t.search=e.search,t.query=e.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!i.length)return t.pathname=null,t.path=t.search?"/"+t.search:null,t.href=t.format(),t;s=i.slice(-1)[0],a=(t.host||e.host||1<i.length)&&(s==="."||s==="..")||s==="";for(var _=0,d=i.length;0<=d;d--)s=i[d],s==="."?i.splice(d,1):s===".."?(i.splice(d,1),_++):_&&(i.splice(d,1),_--);if(!n&&!u)for(;_--;_)i.unshift("..");return!n||i[0]===""||i[0]&&i[0].charAt(0)==="/"||i.unshift(""),a&&i.join("/").substr(-1)!=="/"&&i.push(""),u=i[0]===""||i[0]&&i[0].charAt(0)==="/",o&&(t.hostname=t.host=u?"":i.length?i.shift():"",o=t.host&&0<t.host.indexOf("@")?t.host.split("@"):!1)&&(t.auth=o.shift(),t.host=t.hostname=o.shift()),(n=n||t.host&&i.length)&&!u&&i.unshift(""),i.length?t.pathname=i.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},on.prototype.parseHost=function(){return _c(this)};function _c(e){var t=e.host,n=gd.exec(t);n&&(n=n[0],n!==":"&&(e.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(e.hostname=t)}var pc=Ae(function(e,t){function n(a,s){return a=a[s],0<s&&(a==="/"||o&&a==="\\")}function i(a){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0;if(o){var u=a;if(typeof u!="string")throw new TypeError("expected a string");if(u=u.replace(/[\\\/]+/g,"/"),s!==!1)if(s=u,u=s.length-1,2>u)u=s;else{for(;n(s,u);)u--;u=s.substr(0,u+1)}return u.replace(/^([a-zA-Z]+:|\.\/)/,"")}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.unixify=i,t.correctPath=function(a){return i(a.replace(/^\\\\\?\\.:\\/,"\\"))};var o=oi.platform==="win32"});Se(pc);var Qn=Ae(function(e,t){function n(w,r){return r===void 0&&(r=ve.default.cwd()),J(r,w)}function i(w,r){return typeof w=="function"?[o(),w]:[o(w),m(r)]}function o(w){return w===void 0&&(w={}),W({},x,w)}function a(w){return typeof w=="number"?W({},Pt,{mode:w}):W({},Pt,w)}function s(w,r,c,y){r===void 0&&(r=""),c===void 0&&(c=""),y===void 0&&(y="");var v="";switch(c&&(v=" '"+c+"'"),y&&(v+=" -> '"+y+"'"),w){case"ENOENT":return"ENOENT: no such file or directory, "+r+v;case"EBADF":return"EBADF: bad file descriptor, "+r+v;case"EINVAL":return"EINVAL: invalid argument, "+r+v;case"EPERM":return"EPERM: operation not permitted, "+r+v;case"EPROTO":return"EPROTO: protocol error, "+r+v;case"EEXIST":return"EEXIST: file already exists, "+r+v;case"ENOTDIR":return"ENOTDIR: not a directory, "+r+v;case"EISDIR":return"EISDIR: illegal operation on a directory, "+r+v;case"EACCES":return"EACCES: permission denied, "+r+v;case"ENOTEMPTY":return"ENOTEMPTY: directory not empty, "+r+v;case"EMFILE":return"EMFILE: too many open files, "+r+v;case"ENOSYS":return"ENOSYS: function not implemented, "+r+v;default:return w+": error occurred, "+r+v}}function u(w,r,c,y,v){return r===void 0&&(r=""),c===void 0&&(c=""),y===void 0&&(y=""),v===void 0&&(v=Error),r=new v(s(w,r,c,y)),r.code=w,r}function _(w){if(typeof w=="number")return w;if(typeof w=="string"){var r=K[w];if(typeof r!="undefined")return r}throw new Fi.TypeError("ERR_INVALID_OPT_VALUE","flags",w)}function d(w,r){if(r){var c=typeof r;switch(c){case"string":w=W({},w,{encoding:r});break;case"object":w=W({},w,r);break;default:throw TypeError("Expected options to be either an object or a string, but got "+c+" instead")}}else return w;return w.encoding!=="buffer"&&$e.assertEncoding(w.encoding),w}function l(w){return function(r){return d(w,r)}}function m(w){if(typeof w!="function")throw TypeError(E.CB);return w}function A(w){return function(r,c){return typeof r=="function"?[w(),r]:[w(r),m(c)]}}function p(w){if(typeof w!="string"&&!ne.Buffer.isBuffer(w)){try{if(!(w instanceof _d.URL))throw new TypeError(E.PATH_STR)}catch{throw new TypeError(E.PATH_STR)}if(w.hostname!=="")throw new Fi.TypeError("ERR_INVALID_FILE_URL_HOST",ve.default.platform);w=w.pathname;for(var r=0;r<w.length;r++)if(w[r]==="%"){var c=w.codePointAt(r+2)|32;if(w[r+1]==="2"&&c===102)throw new Fi.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}w=decodeURIComponent(w)}return w=String(w),O(w),w}function R(w,r){return(w=n(w,r).substr(1))?w.split(h):[]}function P(w){return R(p(w))}function C(w,r){return r===void 0&&(r=$e.ENCODING_UTF8),ne.Buffer.isBuffer(w)?w:w instanceof Uint8Array?ne.bufferFrom(w):ne.bufferFrom(String(w),r)}function G(w,r){return r&&r!=="buffer"?w.toString(r):w}function O(w,r){if((""+w).indexOf("\0")!==-1){if(w=Error("Path must be a string without null bytes"),w.code="ENOENT",typeof r!="function")throw w;return ve.default.nextTick(r,w),!1}return!0}function Z(w,r){if(w=typeof w=="number"?w:typeof w=="string"?parseInt(w,8):r?Z(r):void 0,typeof w!="number"||isNaN(w))throw new TypeError(E.MODE_INT);return w}function $(w){if(w>>>0!==w)throw TypeError(E.FD)}function Y(w){if(typeof w=="string"&&+w==w)return+w;if(w instanceof Date)return w.getTime()/1e3;if(isFinite(w))return 0>w?Date.now()/1e3:w;throw Error("Cannot parse time: "+w)}function B(w){if(typeof w!="number")throw TypeError(E.UID)}function g(w){if(typeof w!="number")throw TypeError(E.GID)}function I(w){w.emit("stop")}function D(w,r,c){if(!(this instanceof D))return new D(w,r,c);if(this._vol=w,c=W({},d(c,{})),c.highWaterMark===void 0&&(c.highWaterMark=65536),De.Readable.call(this,c),this.path=p(r),this.fd=c.fd===void 0?null:c.fd,this.flags=c.flags===void 0?"r":c.flags,this.mode=c.mode===void 0?438:c.mode,this.start=c.start,this.end=c.end,this.autoClose=c.autoClose===void 0?!0:c.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}function z(){this.close()}function U(w,r,c){if(!(this instanceof U))return new U(w,r,c);if(this._vol=w,c=W({},d(c,{})),De.Writable.call(this,c),this.path=p(r),this.fd=c.fd===void 0?null:c.fd,this.flags=c.flags===void 0?"w":c.flags,this.mode=c.mode===void 0?438:c.mode,this.start=c.start,this.autoClose=c.autoClose===void 0?!0:!!c.autoClose,this.pos=void 0,this.bytesWritten=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(0>this.start)throw Error('"start" must be >= zero');this.pos=this.start}c.encoding&&this.setDefaultEncoding(c.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}var N=ae&&ae.__extends||function(){function w(r,c){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var T in v)v.hasOwnProperty(T)&&(y[T]=v[T])},w(r,c)}return function(r,c){function y(){this.constructor=r}w(r,c),r.prototype=c===null?Object.create(c):(y.prototype=c.prototype,new y)}}(),S=ae&&ae.__spreadArrays||function(){for(var w=0,r=0,c=arguments.length;r<c;r++)w+=arguments[r].length;w=Array(w);var y=0;for(r=0;r<c;r++)for(var v=arguments[r],T=0,k=v.length;T<k;T++,y++)w[y]=v[T];return w};Object.defineProperty(t,"__esModule",{value:!0});var W=sd.extend,J=pr.resolve,it=jt.constants.O_RDONLY,ot=jt.constants.O_WRONLY,et=jt.constants.O_RDWR,at=jt.constants.O_CREAT,rt=jt.constants.O_EXCL,gt=jt.constants.O_TRUNC,Rt=jt.constants.O_APPEND,yt=jt.constants.O_SYNC,wt=jt.constants.O_DIRECTORY,L=jt.constants.F_OK,f=jt.constants.COPYFILE_EXCL,F=jt.constants.COPYFILE_FICLONE_FORCE,h=pr.sep,H=pr.relative,M=ve.default.platform==="win32",E={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"},K;(function(w){w[w.r=it]="r",w[w["r+"]=et]="r+",w[w.rs=it|yt]="rs",w[w.sr=w.rs]="sr",w[w["rs+"]=et|yt]="rs+",w[w["sr+"]=w["rs+"]]="sr+",w[w.w=ot|at|gt]="w",w[w.wx=ot|at|gt|rt]="wx",w[w.xw=w.wx]="xw",w[w["w+"]=et|at|gt]="w+",w[w["wx+"]=et|at|gt|rt]="wx+",w[w["xw+"]=w["wx+"]]="xw+",w[w.a=ot|Rt|at]="a",w[w.ax=ot|Rt|at|rt]="ax",w[w.xa=w.ax]="xa",w[w["a+"]=et|Rt|at]="a+",w[w["ax+"]=et|Rt|at|rt]="ax+",w[w["xa+"]=w["ax+"]]="xa+"})(K=t.FLAGS||(t.FLAGS={})),t.flagsToNumber=_,e={encoding:"utf8"};var ft=l(e),ct=A(ft),Lt=l({flag:"r"}),Nt={encoding:"utf8",mode:438,flag:K[K.w]},Tt=l(Nt),bt={encoding:"utf8",mode:438,flag:K[K.a]},St=l(bt),mt=A(St),Et=l(e),Bt=A(Et),Pt={mode:511,recursive:!1},Ct={recursive:!1},Ht=l({encoding:"utf8",withFileTypes:!1}),b=A(Ht),x={bigint:!1};if(t.pathToFilename=p,M){var q=n,Q=pc.unixify;n=function(w,r){return Q(q(w,r))}}t.filenameToSteps=R,t.pathToSteps=P,t.dataToStr=function(w,r){return r===void 0&&(r=$e.ENCODING_UTF8),ne.Buffer.isBuffer(w)?w.toString(r):w instanceof Uint8Array?ne.bufferFrom(w).toString(r):String(w)},t.dataToBuffer=C,t.bufferToEncoding=G,t.toUnixTimestamp=Y,e=function(){function w(r){r===void 0&&(r={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=oc.default(this),this.statWatchers={},this.props=W({Node:Ti.Node,Link:Ti.Link,File:Ti.File},r),r=this.createLink(),r.setNode(this.createNode(!0));var c=this;this.StatWatcher=function(y){function v(){return y.call(this,c)||this}return N(v,y),v}(tt),this.ReadStream=function(y){function v(){for(var T=[],k=0;k<arguments.length;k++)T[k]=arguments[k];return y.apply(this,S([c],T))||this}return N(v,y),v}(D),this.WriteStream=function(y){function v(){for(var T=[],k=0;k<arguments.length;k++)T[k]=arguments[k];return y.apply(this,S([c],T))||this}return N(v,y),v}(U),this.FSWatcher=function(y){function v(){return y.call(this,c)||this}return N(v,y),v}(st),this.root=r}return w.fromJSON=function(r,c){var y=new w;return y.fromJSON(r,c),y},Object.defineProperty(w.prototype,"promises",{get:function(){if(this.promisesApi===null)throw Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!0,configurable:!0}),w.prototype.createLink=function(r,c,y,v){if(y===void 0&&(y=!1),!r)return new this.props.Link(this,null,"");if(!c)throw Error("createLink: name cannot be empty");return r.createChild(c,this.createNode(y,v))},w.prototype.deleteLink=function(r){var c=r.parent;return c?(c.deleteChild(r),!0):!1},w.prototype.newInoNumber=function(){var r=this.releasedInos.pop();return r||(this.ino=(this.ino+1)%4294967295)},w.prototype.newFdNumber=function(){var r=this.releasedFds.pop();return typeof r=="number"?r:w.fd--},w.prototype.createNode=function(r,c){return r===void 0&&(r=!1),c=new this.props.Node(this.newInoNumber(),c),r&&c.setIsDirectory(),this.inodes[c.ino]=c},w.prototype.getNode=function(r){return this.inodes[r]},w.prototype.deleteNode=function(r){r.del(),delete this.inodes[r.ino],this.releasedInos.push(r.ino)},w.prototype.genRndStr=function(){var r=(Math.random()+1).toString(36).substr(2,6);return r.length===6?r:this.genRndStr()},w.prototype.getLink=function(r){return this.root.walk(r)},w.prototype.getLinkOrThrow=function(r,c){var y=R(r);if(y=this.getLink(y),!y)throw u("ENOENT",c,r);return y},w.prototype.getResolvedLink=function(r){r=typeof r=="string"?R(r):r;for(var c=this.root,y=0;y<r.length;){if(c=c.getChild(r[y]),!c)return null;var v=c.getNode();v.isSymlink()?(r=v.symlink.concat(r.slice(y+1)),c=this.root,y=0):y++}return c},w.prototype.getResolvedLinkOrThrow=function(r,c){var y=this.getResolvedLink(r);if(!y)throw u("ENOENT",c,r);return y},w.prototype.resolveSymlinks=function(r){return this.getResolvedLink(r.steps.slice(1))},w.prototype.getLinkAsDirOrThrow=function(r,c){var y=this.getLinkOrThrow(r,c);if(!y.getNode().isDirectory())throw u("ENOTDIR",c,r);return y},w.prototype.getLinkParent=function(r){return this.root.walk(r,r.length-1)},w.prototype.getLinkParentAsDirOrThrow=function(r,c){r=r instanceof Array?r:R(r);var y=this.getLinkParent(r);if(!y)throw u("ENOENT",c,h+r.join(h));if(!y.getNode().isDirectory())throw u("ENOTDIR",c,h+r.join(h));return y},w.prototype.getFileByFd=function(r){return this.fds[String(r)]},w.prototype.getFileByFdOrThrow=function(r,c){if(r>>>0!==r)throw TypeError(E.FD);if(r=this.getFileByFd(r),!r)throw u("EBADF",c);return r},w.prototype.getNodeByIdOrCreate=function(r,c,y){if(typeof r=="number"){if(r=this.getFileByFd(r),!r)throw Error("File nto found");return r.node}var v=P(r),T=this.getLink(v);if(T)return T.getNode();if(c&at&&(c=this.getLinkParent(v)))return T=this.createLink(c,v[v.length-1],!1,y),T.getNode();throw u("ENOENT","getNodeByIdOrCreate",p(r))},w.prototype.wrapAsync=function(r,c,y){var v=this;m(y),ci.default(function(){try{y(null,r.apply(v,c))}catch(T){y(T)}})},w.prototype._toJSON=function(r,c,y){var v;r===void 0&&(r=this.root),c===void 0&&(c={});var T=!0,k=r.children;r.getNode().isFile()&&(k=(v={},v[r.getName()]=r.parent.getChild(r.getName()),v),r=r.parent);for(var V in k){if(T=!1,k=r.getChild(V),!k)throw Error("_toJSON: unexpected undefined");v=k.getNode(),v.isFile()?(k=k.getPath(),y&&(k=H(y,k)),c[k]=v.getString()):v.isDirectory()&&this._toJSON(k,c,y)}return r=r.getPath(),y&&(r=H(y,r)),r&&T&&(c[r]=null),c},w.prototype.toJSON=function(r,c,y){c===void 0&&(c={}),y===void 0&&(y=!1);var v=[];if(r){r instanceof Array||(r=[r]);for(var T=0;T<r.length;T++){var k=p(r[T]);(k=this.getResolvedLink(k))&&v.push(k)}}else v.push(this.root);if(!v.length)return c;for(T=0;T<v.length;T++)k=v[T],this._toJSON(k,c,y?k.getPath():"");return c},w.prototype.fromJSON=function(r,c){c===void 0&&(c=ve.default.cwd());for(var y in r){var v=r[y];if(typeof v=="string"){y=n(y,c);var T=R(y);1<T.length&&(T=h+T.slice(0,T.length-1).join(h),this.mkdirpBase(T,511)),this.writeFileSync(y,v)}else this.mkdirpBase(y,511)}},w.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},w.prototype.mountSync=function(r,c){this.fromJSON(c,r)},w.prototype.openLink=function(r,c,y){if(y===void 0&&(y=!0),this.openFiles>=this.maxFiles)throw u("EMFILE","open",r.getPath());var v=r;if(y&&(v=this.resolveSymlinks(r)),!v)throw u("ENOENT","open",r.getPath());if(y=v.getNode(),y.isDirectory()){if((c&(it|et|ot))!==it)throw u("EISDIR","open",r.getPath())}else if(c&wt)throw u("ENOTDIR","open",r.getPath());if(!(c&ot||y.canRead()))throw u("EACCES","open",r.getPath());return r=new this.props.File(r,y,c,this.newFdNumber()),this.fds[r.fd]=r,this.openFiles++,c&gt&&r.truncate(),r},w.prototype.openFile=function(r,c,y,v){v===void 0&&(v=!0);var T=R(r),k=v?this.getResolvedLink(T):this.getLink(T);if(!k&&c&at){var V=this.getResolvedLink(T.slice(0,T.length-1));if(!V)throw u("ENOENT","open",h+T.join(h));c&at&&typeof y=="number"&&(k=this.createLink(V,T[T.length-1],!1,y))}if(k)return this.openLink(k,c,v);throw u("ENOENT","open",r)},w.prototype.openBase=function(r,c,y,v){if(v===void 0&&(v=!0),c=this.openFile(r,c,y,v),!c)throw u("ENOENT","open",r);return c.fd},w.prototype.openSync=function(r,c,y){return y===void 0&&(y=438),y=Z(y),r=p(r),c=_(c),this.openBase(r,c,y)},w.prototype.open=function(r,c,y,v){var T=y;typeof y=="function"&&(T=438,v=y),y=Z(T||438),r=p(r),c=_(c),this.wrapAsync(this.openBase,[r,c,y],v)},w.prototype.closeFile=function(r){this.fds[r.fd]&&(this.openFiles--,delete this.fds[r.fd],this.releasedFds.push(r.fd))},w.prototype.closeSync=function(r){$(r),r=this.getFileByFdOrThrow(r,"close"),this.closeFile(r)},w.prototype.close=function(r,c){$(r),this.wrapAsync(this.closeSync,[r],c)},w.prototype.openFileOrGetById=function(r,c,y){if(typeof r=="number"){if(r=this.fds[r],!r)throw u("ENOENT");return r}return this.openFile(p(r),c,y)},w.prototype.readBase=function(r,c,y,v,T){return this.getFileByFdOrThrow(r).read(c,Number(y),Number(v),T)},w.prototype.readSync=function(r,c,y,v,T){return $(r),this.readBase(r,c,y,v,T)},w.prototype.read=function(r,c,y,v,T,k){var V=this;if(m(k),v===0)return ve.default.nextTick(function(){k&&k(null,0,c)});ci.default(function(){try{var nt=V.readBase(r,c,y,v,T);k(null,nt,c)}catch(dt){k(dt)}})},w.prototype.readFileBase=function(r,c,y){var v=typeof r=="number"&&r>>>0===r;if(!v){var T=p(r);if(T=R(T),(T=this.getResolvedLink(T))&&T.getNode().isDirectory())throw u("EISDIR","open",T.getPath());r=this.openSync(r,c)}try{var k=G(this.getFileByFdOrThrow(r).getBuffer(),y)}finally{v||this.closeSync(r)}return k},w.prototype.readFileSync=function(r,c){c=Lt(c);var y=_(c.flag);return this.readFileBase(r,y,c.encoding)},w.prototype.readFile=function(r,c,y){y=A(Lt)(c,y),c=y[0],y=y[1];var v=_(c.flag);this.wrapAsync(this.readFileBase,[r,v,c.encoding],y)},w.prototype.writeBase=function(r,c,y,v,T){return this.getFileByFdOrThrow(r,"write").write(c,y,v,T)},w.prototype.writeSync=function(r,c,y,v,T){$(r);var k=typeof c!="string";if(k){var V=(y||0)|0,nt=v;y=T}else var dt=v;return c=C(c,dt),k?typeof nt=="undefined"&&(nt=c.length):(V=0,nt=c.length),this.writeBase(r,c,V,nt,y)},w.prototype.write=function(r,c,y,v,T,k){var V=this;$(r);var nt=typeof c,dt=typeof y,_t=typeof v,ut=typeof T;if(nt!=="string")if(dt==="function")var It=y;else if(_t==="function"){var xt=y|0;It=v}else if(ut==="function"){xt=y|0;var Ot=v;It=T}else{xt=y|0,Ot=v;var Ft=T;It=k}else if(dt==="function")It=y;else if(_t==="function")Ft=y,It=v;else if(ut==="function"){Ft=y;var Ut=v;It=T}var Dt=C(c,Ut);nt!=="string"?typeof Ot=="undefined"&&(Ot=Dt.length):(xt=0,Ot=Dt.length);var $t=m(It);ci.default(function(){try{var Gt=V.writeBase(r,Dt,xt,Ot,Ft);nt!=="string"?$t(null,Gt,Dt):$t(null,Gt,c)}catch(kt){$t(kt)}})},w.prototype.writeFileBase=function(r,c,y,v){var T=typeof r=="number";r=T?r:this.openBase(p(r),y,v),v=0;var k=c.length;y=y&Rt?void 0:0;try{for(;0<k;){var V=this.writeSync(r,c,v,k,y);v+=V,k-=V,y!==void 0&&(y+=V)}}finally{T||this.closeSync(r)}},w.prototype.writeFileSync=function(r,c,y){var v=Tt(y);y=_(v.flag);var T=Z(v.mode);c=C(c,v.encoding),this.writeFileBase(r,c,y,T)},w.prototype.writeFile=function(r,c,y,v){var T=y;typeof y=="function"&&(T=Nt,v=y),y=m(v);var k=Tt(T);T=_(k.flag),v=Z(k.mode),c=C(c,k.encoding),this.wrapAsync(this.writeFileBase,[r,c,T,v],y)},w.prototype.linkBase=function(r,c){var y=R(r),v=this.getLink(y);if(!v)throw u("ENOENT","link",r,c);var T=R(c);if(y=this.getLinkParent(T),!y)throw u("ENOENT","link",r,c);if(T=T[T.length-1],y.getChild(T))throw u("EEXIST","link",r,c);r=v.getNode(),r.nlink++,y.createChild(T,r)},w.prototype.copyFileBase=function(r,c,y){var v=this.readFileSync(r);if(y&f&&this.existsSync(c))throw u("EEXIST","copyFile",r,c);if(y&F)throw u("ENOSYS","copyFile",r,c);this.writeFileBase(c,v,K.w,438)},w.prototype.copyFileSync=function(r,c,y){return r=p(r),c=p(c),this.copyFileBase(r,c,(y||0)|0)},w.prototype.copyFile=function(r,c,y,v){if(r=p(r),c=p(c),typeof y=="function")var T=0;else T=y,y=v;m(y),this.wrapAsync(this.copyFileBase,[r,c,T],y)},w.prototype.linkSync=function(r,c){r=p(r),c=p(c),this.linkBase(r,c)},w.prototype.link=function(r,c,y){r=p(r),c=p(c),this.wrapAsync(this.linkBase,[r,c],y)},w.prototype.unlinkBase=function(r){var c=R(r);if(c=this.getLink(c),!c)throw u("ENOENT","unlink",r);if(c.length)throw Error("Dir not empty...");this.deleteLink(c),r=c.getNode(),r.nlink--,0>=r.nlink&&this.deleteNode(r)},w.prototype.unlinkSync=function(r){r=p(r),this.unlinkBase(r)},w.prototype.unlink=function(r,c){r=p(r),this.wrapAsync(this.unlinkBase,[r],c)},w.prototype.symlinkBase=function(r,c){var y=R(c),v=this.getLinkParent(y);if(!v)throw u("ENOENT","symlink",r,c);if(y=y[y.length-1],v.getChild(y))throw u("EEXIST","symlink",r,c);return c=v.createChild(y),c.getNode().makeSymlink(R(r)),c},w.prototype.symlinkSync=function(r,c){r=p(r),c=p(c),this.symlinkBase(r,c)},w.prototype.symlink=function(r,c,y,v){y=m(typeof y=="function"?y:v),r=p(r),c=p(c),this.wrapAsync(this.symlinkBase,[r,c],y)},w.prototype.realpathBase=function(r,c){var y=R(r);if(y=this.getResolvedLink(y),!y)throw u("ENOENT","realpath",r);return $e.strToEncoding(y.getPath(),c)},w.prototype.realpathSync=function(r,c){return this.realpathBase(p(r),Et(c).encoding)},w.prototype.realpath=function(r,c,y){y=Bt(c,y),c=y[0],y=y[1],r=p(r),this.wrapAsync(this.realpathBase,[r,c.encoding],y)},w.prototype.lstatBase=function(r,c){c===void 0&&(c=!1);var y=this.getLink(R(r));if(!y)throw u("ENOENT","lstat",r);return ei.default.build(y.getNode(),c)},w.prototype.lstatSync=function(r,c){return this.lstatBase(p(r),o(c).bigint)},w.prototype.lstat=function(r,c,y){y=i(c,y),c=y[0],y=y[1],this.wrapAsync(this.lstatBase,[p(r),c.bigint],y)},w.prototype.statBase=function(r,c){c===void 0&&(c=!1);var y=this.getResolvedLink(R(r));if(!y)throw u("ENOENT","stat",r);return ei.default.build(y.getNode(),c)},w.prototype.statSync=function(r,c){return this.statBase(p(r),o(c).bigint)},w.prototype.stat=function(r,c,y){y=i(c,y),c=y[0],y=y[1],this.wrapAsync(this.statBase,[p(r),c.bigint],y)},w.prototype.fstatBase=function(r,c){if(c===void 0&&(c=!1),r=this.getFileByFd(r),!r)throw u("EBADF","fstat");return ei.default.build(r.node,c)},w.prototype.fstatSync=function(r,c){return this.fstatBase(r,o(c).bigint)},w.prototype.fstat=function(r,c,y){c=i(c,y),this.wrapAsync(this.fstatBase,[r,c[0].bigint],c[1])},w.prototype.renameBase=function(r,c){var y=this.getLink(R(r));if(!y)throw u("ENOENT","rename",r,c);var v=R(c),T=this.getLinkParent(v);if(!T)throw u("ENOENT","rename",r,c);(r=y.parent)&&r.deleteChild(y),y.steps=S(T.steps,[v[v.length-1]]),T.setChild(y.getName(),y)},w.prototype.renameSync=function(r,c){r=p(r),c=p(c),this.renameBase(r,c)},w.prototype.rename=function(r,c,y){r=p(r),c=p(c),this.wrapAsync(this.renameBase,[r,c],y)},w.prototype.existsBase=function(r){return!!this.statBase(r)},w.prototype.existsSync=function(r){try{return this.existsBase(p(r))}catch{return!1}},w.prototype.exists=function(r,c){var y=this,v=p(r);if(typeof c!="function")throw Error(E.CB);ci.default(function(){try{c(y.existsBase(v))}catch{c(!1)}})},w.prototype.accessBase=function(r){this.getLinkOrThrow(r,"access")},w.prototype.accessSync=function(r,c){c===void 0&&(c=L),r=p(r),this.accessBase(r,c|0)},w.prototype.access=function(r,c,y){var v=L;typeof c!="function"&&(v=c|0,c=m(y)),r=p(r),this.wrapAsync(this.accessBase,[r,v],c)},w.prototype.appendFileSync=function(r,c,y){y===void 0&&(y=bt),y=St(y),y.flag&&r>>>0!==r||(y.flag="a"),this.writeFileSync(r,c,y)},w.prototype.appendFile=function(r,c,y,v){v=mt(y,v),y=v[0],v=v[1],y.flag&&r>>>0!==r||(y.flag="a"),this.writeFile(r,c,y,v)},w.prototype.readdirBase=function(r,c){var y=R(r);if(y=this.getResolvedLink(y),!y)throw u("ENOENT","readdir",r);if(!y.getNode().isDirectory())throw u("ENOTDIR","scandir",r);if(c.withFileTypes){var v=[];for(T in y.children)(r=y.getChild(T))&&v.push(fr.default.build(r,c.encoding));return M||c.encoding==="buffer"||v.sort(function(k,V){return k.name<V.name?-1:k.name>V.name?1:0}),v}var T=[];for(v in y.children)T.push($e.strToEncoding(v,c.encoding));return M||c.encoding==="buffer"||T.sort(),T},w.prototype.readdirSync=function(r,c){return c=Ht(c),r=p(r),this.readdirBase(r,c)},w.prototype.readdir=function(r,c,y){y=b(c,y),c=y[0],y=y[1],r=p(r),this.wrapAsync(this.readdirBase,[r,c],y)},w.prototype.readlinkBase=function(r,c){var y=this.getLinkOrThrow(r,"readlink").getNode();if(!y.isSymlink())throw u("EINVAL","readlink",r);return r=h+y.symlink.join(h),$e.strToEncoding(r,c)},w.prototype.readlinkSync=function(r,c){return c=ft(c),r=p(r),this.readlinkBase(r,c.encoding)},w.prototype.readlink=function(r,c,y){y=ct(c,y),c=y[0],y=y[1],r=p(r),this.wrapAsync(this.readlinkBase,[r,c.encoding],y)},w.prototype.fsyncBase=function(r){this.getFileByFdOrThrow(r,"fsync")},w.prototype.fsyncSync=function(r){this.fsyncBase(r)},w.prototype.fsync=function(r,c){this.wrapAsync(this.fsyncBase,[r],c)},w.prototype.fdatasyncBase=function(r){this.getFileByFdOrThrow(r,"fdatasync")},w.prototype.fdatasyncSync=function(r){this.fdatasyncBase(r)},w.prototype.fdatasync=function(r,c){this.wrapAsync(this.fdatasyncBase,[r],c)},w.prototype.ftruncateBase=function(r,c){this.getFileByFdOrThrow(r,"ftruncate").truncate(c)},w.prototype.ftruncateSync=function(r,c){this.ftruncateBase(r,c)},w.prototype.ftruncate=function(r,c,y){var v=typeof c=="number"?c:0;c=m(typeof c=="number"?y:c),this.wrapAsync(this.ftruncateBase,[r,v],c)},w.prototype.truncateBase=function(r,c){r=this.openSync(r,"r+");try{this.ftruncateSync(r,c)}finally{this.closeSync(r)}},w.prototype.truncateSync=function(r,c){if(r>>>0===r)return this.ftruncateSync(r,c);this.truncateBase(r,c)},w.prototype.truncate=function(r,c,y){var v=typeof c=="number"?c:0;if(c=m(typeof c=="number"?y:c),r>>>0===r)return this.ftruncate(r,v,c);this.wrapAsync(this.truncateBase,[r,v],c)},w.prototype.futimesBase=function(r,c,y){r=this.getFileByFdOrThrow(r,"futimes").node,r.atime=new Date(1e3*c),r.mtime=new Date(1e3*y)},w.prototype.futimesSync=function(r,c,y){this.futimesBase(r,Y(c),Y(y))},w.prototype.futimes=function(r,c,y,v){this.wrapAsync(this.futimesBase,[r,Y(c),Y(y)],v)},w.prototype.utimesBase=function(r,c,y){r=this.openSync(r,"r+");try{this.futimesBase(r,c,y)}finally{this.closeSync(r)}},w.prototype.utimesSync=function(r,c,y){this.utimesBase(p(r),Y(c),Y(y))},w.prototype.utimes=function(r,c,y,v){this.wrapAsync(this.utimesBase,[p(r),Y(c),Y(y)],v)},w.prototype.mkdirBase=function(r,c){var y=R(r);if(!y.length)throw u("EISDIR","mkdir",r);var v=this.getLinkParentAsDirOrThrow(r,"mkdir");if(y=y[y.length-1],v.getChild(y))throw u("EEXIST","mkdir",r);v.createChild(y,this.createNode(!0,c))},w.prototype.mkdirpBase=function(r,c){r=R(r);for(var y=this.root,v=0;v<r.length;v++){var T=r[v];if(!y.getNode().isDirectory())throw u("ENOTDIR","mkdir",y.getPath());var k=y.getChild(T);if(k)if(k.getNode().isDirectory())y=k;else throw u("ENOTDIR","mkdir",k.getPath());else y=y.createChild(T,this.createNode(!0,c))}},w.prototype.mkdirSync=function(r,c){c=a(c);var y=Z(c.mode,511);r=p(r),c.recursive?this.mkdirpBase(r,y):this.mkdirBase(r,y)},w.prototype.mkdir=function(r,c,y){var v=a(c);c=m(typeof c=="function"?c:y),y=Z(v.mode,511),r=p(r),v.recursive?this.wrapAsync(this.mkdirpBase,[r,y],c):this.wrapAsync(this.mkdirBase,[r,y],c)},w.prototype.mkdirpSync=function(r,c){this.mkdirSync(r,{mode:c,recursive:!0})},w.prototype.mkdirp=function(r,c,y){var v=typeof c=="function"?void 0:c;c=m(typeof c=="function"?c:y),this.mkdir(r,{mode:v,recursive:!0},c)},w.prototype.mkdtempBase=function(r,c,y){y===void 0&&(y=5);var v=r+this.genRndStr();try{return this.mkdirBase(v,511),$e.strToEncoding(v,c)}catch(T){if(T.code==="EEXIST"){if(1<y)return this.mkdtempBase(r,c,y-1);throw Error("Could not create temp dir.")}throw T}},w.prototype.mkdtempSync=function(r,c){if(c=ft(c).encoding,!r||typeof r!="string")throw new TypeError("filename prefix is required");return O(r),this.mkdtempBase(r,c)},w.prototype.mkdtemp=function(r,c,y){if(y=ct(c,y),c=y[0].encoding,y=y[1],!r||typeof r!="string")throw new TypeError("filename prefix is required");O(r)&&this.wrapAsync(this.mkdtempBase,[r,c],y)},w.prototype.rmdirBase=function(r,c){c=W({},Ct,c);var y=this.getLinkAsDirOrThrow(r,"rmdir");if(y.length&&!c.recursive)throw u("ENOTEMPTY","rmdir",r);this.deleteLink(y)},w.prototype.rmdirSync=function(r,c){this.rmdirBase(p(r),c)},w.prototype.rmdir=function(r,c,y){var v=W({},Ct,c);c=m(typeof c=="function"?c:y),this.wrapAsync(this.rmdirBase,[p(r),v],c)},w.prototype.fchmodBase=function(r,c){this.getFileByFdOrThrow(r,"fchmod").chmod(c)},w.prototype.fchmodSync=function(r,c){this.fchmodBase(r,Z(c))},w.prototype.fchmod=function(r,c,y){this.wrapAsync(this.fchmodBase,[r,Z(c)],y)},w.prototype.chmodBase=function(r,c){r=this.openSync(r,"r+");try{this.fchmodBase(r,c)}finally{this.closeSync(r)}},w.prototype.chmodSync=function(r,c){c=Z(c),r=p(r),this.chmodBase(r,c)},w.prototype.chmod=function(r,c,y){c=Z(c),r=p(r),this.wrapAsync(this.chmodBase,[r,c],y)},w.prototype.lchmodBase=function(r,c){r=this.openBase(r,et,0,!1);try{this.fchmodBase(r,c)}finally{this.closeSync(r)}},w.prototype.lchmodSync=function(r,c){c=Z(c),r=p(r),this.lchmodBase(r,c)},w.prototype.lchmod=function(r,c,y){c=Z(c),r=p(r),this.wrapAsync(this.lchmodBase,[r,c],y)},w.prototype.fchownBase=function(r,c,y){this.getFileByFdOrThrow(r,"fchown").chown(c,y)},w.prototype.fchownSync=function(r,c,y){B(c),g(y),this.fchownBase(r,c,y)},w.prototype.fchown=function(r,c,y,v){B(c),g(y),this.wrapAsync(this.fchownBase,[r,c,y],v)},w.prototype.chownBase=function(r,c,y){this.getResolvedLinkOrThrow(r,"chown").getNode().chown(c,y)},w.prototype.chownSync=function(r,c,y){B(c),g(y),this.chownBase(p(r),c,y)},w.prototype.chown=function(r,c,y,v){B(c),g(y),this.wrapAsync(this.chownBase,[p(r),c,y],v)},w.prototype.lchownBase=function(r,c,y){this.getLinkOrThrow(r,"lchown").getNode().chown(c,y)},w.prototype.lchownSync=function(r,c,y){B(c),g(y),this.lchownBase(p(r),c,y)},w.prototype.lchown=function(r,c,y,v){B(c),g(y),this.wrapAsync(this.lchownBase,[p(r),c,y],v)},w.prototype.watchFile=function(r,c,y){r=p(r);var v=c;if(typeof v=="function"&&(y=c,v=null),typeof y!="function")throw Error('"watchFile()" requires a listener function');c=5007;var T=!0;return v&&typeof v=="object"&&(typeof v.interval=="number"&&(c=v.interval),typeof v.persistent=="boolean"&&(T=v.persistent)),v=this.statWatchers[r],v||(v=new this.StatWatcher,v.start(r,T,c),this.statWatchers[r]=v),v.addListener("change",y),v},w.prototype.unwatchFile=function(r,c){r=p(r);var y=this.statWatchers[r];y&&(typeof c=="function"?y.removeListener("change",c):y.removeAllListeners("change"),y.listenerCount("change")===0&&(y.stop(),delete this.statWatchers[r]))},w.prototype.createReadStream=function(r,c){return new this.ReadStream(r,c)},w.prototype.createWriteStream=function(r,c){return new this.WriteStream(r,c)},w.prototype.watch=function(r,c,y){r=p(r);var v=c;typeof c=="function"&&(y=c,v=null);var T=ft(v);c=T.persistent,v=T.recursive,T=T.encoding,c===void 0&&(c=!0),v===void 0&&(v=!1);var k=new this.FSWatcher;return k.start(r,c,v,T),y&&k.addListener("change",y),k},w.fd=2147483647,w}(),t.Volume=e;var tt=function(w){function r(c){var y=w.call(this)||this;return y.onInterval=function(){try{var v=y.vol.statSync(y.filename);y.hasChanged(v)&&(y.emit("change",v,y.prev),y.prev=v)}finally{y.loop()}},y.vol=c,y}return N(r,w),r.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},r.prototype.hasChanged=function(c){return c.mtimeMs>this.prev.mtimeMs||c.nlink!==this.prev.nlink},r.prototype.start=function(c,y,v){y===void 0&&(y=!0),v===void 0&&(v=5007),this.filename=p(c),this.setTimeout=y?setTimeout:Hs.default,this.interval=v,this.prev=this.vol.statSync(this.filename),this.loop()},r.prototype.stop=function(){clearTimeout(this.timeoutRef),ve.default.nextTick(I,this)},r}(Yt.EventEmitter);t.StatWatcher=tt;var X;bi.inherits(D,De.Readable),t.ReadStream=D,D.prototype.open=function(){var w=this;this._vol.open(this.path,this.flags,this.mode,function(r,c){r?(w.autoClose&&w.destroy&&w.destroy(),w.emit("error",r)):(w.fd=c,w.emit("open",c),w.read())})},D.prototype._read=function(w){if(typeof this.fd!="number")return this.once("open",function(){this._read(w)});if(!this.destroyed){(!X||128>X.length-X.used)&&(X=ne.bufferAllocUnsafe(this._readableState.highWaterMark),X.used=0);var r=X,c=Math.min(X.length-X.used,w),y=X.used;if(this.pos!==void 0&&(c=Math.min(this.end-this.pos+1,c)),0>=c)return this.push(null);var v=this;this._vol.read(this.fd,X,X.used,c,this.pos,function(T,k){T?(v.autoClose&&v.destroy&&v.destroy(),v.emit("error",T)):(T=null,0<k&&(v.bytesRead+=k,T=r.slice(y,y+k)),v.push(T))}),this.pos!==void 0&&(this.pos+=c),X.used+=c}},D.prototype._destroy=function(w,r){this.close(function(c){r(w||c)})},D.prototype.close=function(w){var r=this;if(w&&this.once("close",w),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",z);return}return ve.default.nextTick(function(){return r.emit("close")})}this.closed=!0,this._vol.close(this.fd,function(c){c?r.emit("error",c):r.emit("close")}),this.fd=null},bi.inherits(U,De.Writable),t.WriteStream=U,U.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(w,r){w?(this.autoClose&&this.destroy&&this.destroy(),this.emit("error",w)):(this.fd=r,this.emit("open",r))}.bind(this))},U.prototype._write=function(w,r,c){if(!(w instanceof ne.Buffer))return this.emit("error",Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(w,r,c)});var y=this;this._vol.write(this.fd,w,0,w.length,this.pos,function(v,T){if(v)return y.autoClose&&y.destroy&&y.destroy(),c(v);y.bytesWritten+=T,c()}),this.pos!==void 0&&(this.pos+=w.length)},U.prototype._writev=function(w,r){if(typeof this.fd!="number")return this.once("open",function(){this._writev(w,r)});for(var c=this,y=w.length,v=Array(y),T=0,k=0;k<y;k++){var V=w[k].chunk;v[k]=V,T+=V.length}y=ne.Buffer.concat(v),this._vol.write(this.fd,y,0,y.length,this.pos,function(nt,dt){if(nt)return c.destroy&&c.destroy(),r(nt);c.bytesWritten+=dt,r()}),this.pos!==void 0&&(this.pos+=T)},U.prototype._destroy=D.prototype._destroy,U.prototype.close=D.prototype.close,U.prototype.destroySoon=U.prototype.end;var st=function(w){function r(c){var y=w.call(this)||this;return y._filename="",y._filenameEncoded="",y._recursive=!1,y._encoding=$e.ENCODING_UTF8,y._onNodeChange=function(){y._emit("change")},y._onParentChild=function(v){v.getName()===y._getName()&&y._emit("rename")},y._emit=function(v){y.emit("change",v,y._filenameEncoded)},y._persist=function(){y._timer=setTimeout(y._persist,1e6)},y._vol=c,y}return N(r,w),r.prototype._getName=function(){return this._steps[this._steps.length-1]},r.prototype.start=function(c,y,v,T){y===void 0&&(y=!0),v===void 0&&(v=!1),T===void 0&&(T=$e.ENCODING_UTF8),this._filename=p(c),this._steps=R(this._filename),this._filenameEncoded=$e.strToEncoding(this._filename),this._recursive=v,this._encoding=T;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(k){throw y=Error("watch "+this._filename+" "+k.code),y.code=k.code,y.errno=k.code,y}this._link.getNode().on("change",this._onNodeChange),this._link.on("child:add",this._onNodeChange),this._link.on("child:delete",this._onNodeChange),(c=this._link.parent)&&(c.setMaxListeners(c.getMaxListeners()+1),c.on("child:delete",this._onParentChild)),y&&this._persist()},r.prototype.close=function(){clearTimeout(this._timer),this._link.getNode().removeListener("change",this._onNodeChange);var c=this._link.parent;c&&c.removeListener("child:delete",this._onParentChild)},r}(Yt.EventEmitter);t.FSWatcher=st});Se(Qn);var vd=Qn.pathToFilename,Cd=Qn.filenameToSteps,gc=Qn.Volume,br=Ae(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fsProps="constants F_OK R_OK W_OK X_OK Stats".split(" "),t.fsSyncMethods="renameSync ftruncateSync truncateSync chownSync fchownSync lchownSync chmodSync fchmodSync lchmodSync statSync lstatSync fstatSync linkSync symlinkSync readlinkSync realpathSync unlinkSync rmdirSync mkdirSync mkdirpSync readdirSync closeSync openSync utimesSync futimesSync fsyncSync writeSync readSync readFileSync writeFileSync appendFileSync existsSync accessSync fdatasyncSync mkdtempSync copyFileSync createReadStream createWriteStream".split(" "),t.fsAsyncMethods="rename ftruncate truncate chown fchown lchown chmod fchmod lchmod stat lstat fstat link symlink readlink realpath unlink rmdir mkdir mkdirp readdir close open utimes futimes fsync write read readFile writeFile appendFile exists access fdatasync mkdtemp copyFile watchFile unwatchFile watch".split(" ")});Se(br);var mc=Ae(function(e,t){function n(l){for(var m={F_OK:s,R_OK:u,W_OK:_,X_OK:d,constants:jt.constants,Stats:ei.default,Dirent:fr.default},A=0,p=o;A<p.length;A++){var R=p[A];typeof l[R]=="function"&&(m[R]=l[R].bind(l))}for(A=0,p=a;A<p.length;A++)R=p[A],typeof l[R]=="function"&&(m[R]=l[R].bind(l));return m.StatWatcher=l.StatWatcher,m.FSWatcher=l.FSWatcher,m.WriteStream=l.WriteStream,m.ReadStream=l.ReadStream,m.promises=l.promises,m._toUnixTimestamp=Qn.toUnixTimestamp,m}var i=ae&&ae.__assign||function(){return i=Object.assign||function(l){for(var m,A=1,p=arguments.length;A<p;A++){m=arguments[A];for(var R in m)Object.prototype.hasOwnProperty.call(m,R)&&(l[R]=m[R])}return l},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=br.fsSyncMethods,a=br.fsAsyncMethods,s=jt.constants.F_OK,u=jt.constants.R_OK,_=jt.constants.W_OK,d=jt.constants.X_OK;t.Volume=Qn.Volume,t.vol=new Qn.Volume,t.createFsFromVolume=n,t.fs=n(t.vol),e.exports=i(i({},e.exports),t.fs),e.exports.semantic=!0});Se(mc);var yc=mc.createFsFromVolume;Qf.prototype.emit=function(e){for(var t,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];o=this.listeners(e);try{for(var a=Vo(o),s=a.next();!s.done;s=a.next()){var u=s.value;try{u.apply(void 0,_f(i))}catch(_){console.error(_)}}}catch(_){t={error:_}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return 0<o.length};var bd=function(){function e(){this.volume=new gc,this.fs=yc(this.volume),this.fromJSON({"/dev/stdin":"","/dev/stdout":"","/dev/stderr":""})}return e.prototype._toJSON=function(t,n,i){n===void 0&&(n={});var o=!0,a;for(a in t.children){o=!1;var s=t.getChild(a);if(s){var u=s.getNode();u&&u.isFile()?(s=s.getPath(),i&&(s=_r(i,s)),n[s]=u.getBuffer()):u&&u.isDirectory()&&this._toJSON(s,n,i)}}return t=t.getPath(),i&&(t=_r(i,t)),t&&o&&(n[t]=null),n},e.prototype.toJSON=function(t,n,i){var o,a;n===void 0&&(n={}),i===void 0&&(i=!1);var s=[];if(t){t instanceof Array||(t=[t]);try{for(var u=Vo(t),_=u.next();!_.done;_=u.next()){var d=vd(_.value),l=this.volume.getResolvedLink(d);l&&s.push(l)}}catch(P){var m={error:P}}finally{try{_&&!_.done&&(o=u.return)&&o.call(u)}finally{if(m)throw m.error}}}else s.push(this.volume.root);if(!s.length)return n;try{for(var A=Vo(s),p=A.next();!p.done;p=A.next())l=p.value,this._toJSON(l,n,i?l.getPath():"")}catch(P){var R={error:P}}finally{try{p&&!p.done&&(a=A.return)&&a.call(A)}finally{if(R)throw R.error}}return n},e.prototype.fromJSONFixed=function(t,n){for(var i in n){var o=n[i];if(o?Object.getPrototypeOf(o)!==null:o!==null){var a=Cd(i);1<a.length&&(a="/"+a.slice(0,a.length-1).join("/"),t.mkdirpBase(a,511)),t.writeFileSync(i,o||"")}else t.mkdirpBase(i,511)}},e.prototype.fromJSON=function(t){this.volume=new gc,this.fromJSONFixed(this.volume,t),this.fs=yc(this.volume),this.volume.releasedFds=[0,1,2],t=this.volume.openSync("/dev/stderr","w");var n=this.volume.openSync("/dev/stdout","w"),i=this.volume.openSync("/dev/stdin","r");if(t!==2)throw Error("invalid handle for stderr: "+t);if(n!==1)throw Error("invalid handle for stdout: "+n);if(i!==0)throw Error("invalid handle for stdin: "+i)},e.prototype.getStdOut=function(){return ff(this,void 0,void 0,function(){var t,n=this;return df(this,function(){return t=new Promise(function(i){i(n.fs.readFileSync("/dev/stdout","utf8"))}),[2,t]})})},e}();function Ac(e){return e.arrayBuffer?e.arrayBuffer():new Promise((t,n)=>{const i=new FileReader;i.addEventListener("loadend",()=>{t(i.result)}),i.addEventListener("error",n),i.readAsArrayBuffer(e)})}async function Fd(e){const t=await Ac(e);return new Uint8Array(t)}function Ic(e){return typeof Blob!="undefined"&&e instanceof Blob}function xi(e){return typeof SharedArrayBuffer!="undefined"&&e instanceof SharedArrayBuffer}const Bd=typeof process!="undefined"&&process.versions&&typeof process.versions.node!="undefined"&&typeof process.versions.electron=="undefined";function Td(e){return e.byteOffset===0&&e.byteLength===e.buffer.byteLength}class Lc{constructor(t){this.typedArray=t instanceof ArrayBuffer||xi(t)?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}async getLength(){return this.typedArray.byteLength}async read(t,n){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+t,n)}}class Ec{constructor(t){this.blob=t}async getLength(){return this.blob.size}async read(t,n){const i=this.blob.slice(t,t+n),o=await Ac(i);return new Uint8Array(o)}async sliceAsBlob(t,n,i=""){return this.blob.slice(t,t+n,i)}}function Rd(e,t){var n=Uint8Array;if(e[0]==3&&e[1]==0)return t||new n(0);var i=Pd,o=vc,a=Od,s=Cc,u=t==null;u&&(t=new n(e.length>>>2<<3));for(var _=0,d=0,l=0,m=0,A=0,p=0,R=0,P=0,C=0,G,O;_==0;){if(_=i(e,C,1),d=i(e,C+1,2),C+=3,d==0){(C&7)!=0&&(C+=8-(C&7));var Z=(C>>>3)+4,$=e[Z-4]|e[Z-3]<<8;u&&(t=Fr(t,P+$)),t.set(new n(e.buffer,e.byteOffset+Z,$),P),C=Z+$<<3,P+=$;continue}if(u&&(t=Fr(t,P+(1<<17))),d==1&&(G=qt.flmap,O=qt.fdmap,p=(1<<9)-1,R=(1<<5)-1),d==2){l=o(e,C,5)+257,m=o(e,C+5,5)+1,A=o(e,C+10,4)+4,C+=14;for(var Y=0;Y<38;Y+=2)qt.itree[Y]=0,qt.itree[Y+1]=0;for(var B=1,Y=0;Y<A;Y++){var g=o(e,C+Y*3,3);qt.itree[(qt.ordr[Y]<<1)+1]=g,g>B&&(B=g)}C+=3*A,Ni(qt.itree,B),Mi(qt.itree,B,qt.imap),G=qt.lmap,O=qt.dmap,C=a(qt.imap,(1<<B)-1,l+m,e,C,qt.ttree);var I=wc(qt.ttree,0,l,qt.ltree);p=(1<<I)-1;var D=wc(qt.ttree,l,m,qt.dtree);R=(1<<D)-1,Ni(qt.ltree,I),Mi(qt.ltree,I,G),Ni(qt.dtree,D),Mi(qt.dtree,D,O)}for(;;){var z=G[s(e,C)&p];C+=z&15;var U=z>>>4;if(U>>>8==0)t[P++]=U;else{if(U==256)break;var N=P+U-254;if(U>264){var S=qt.ldef[U-257];N=P+(S>>>3)+o(e,C,S&7),C+=S&7}var W=O[s(e,C)&R];C+=W&15;var J=W>>>4,it=qt.ddef[J],ot=(it>>>4)+i(e,C,it&15);for(C+=it&15,u&&(t=Fr(t,P+(1<<17)));P<N;)t[P]=t[P++-ot],t[P]=t[P++-ot],t[P]=t[P++-ot],t[P]=t[P++-ot];P=N}}}return t.length==P?t:t.slice(0,P)}function Fr(e,t){var n=e.length;if(t<=n)return e;var i=new Uint8Array(Math.max(n<<1,t));return i.set(e,0),i}function Od(e,t,n,i,o,a){for(var s=vc,u=Cc,_=0;_<n;){var d=e[u(i,o)&t];o+=d&15;var l=d>>>4;if(l<=15)a[_]=l,_++;else{var m=0,A=0;l==16?(A=3+s(i,o,2),o+=2,m=a[_-1]):l==17?(A=3+s(i,o,3),o+=3):l==18&&(A=11+s(i,o,7),o+=7);for(var p=_+A;_<p;)a[_]=m,_++}}return o}function wc(e,t,n,i){for(var o=0,a=0,s=i.length>>>1;a<n;){var u=e[a+t];i[a<<1]=0,i[(a<<1)+1]=u,u>o&&(o=u),a++}for(;a<s;)i[a<<1]=0,i[(a<<1)+1]=0,a++;return o}function Ni(e,t){for(var n=e.length,i,o,a,s,u,_=qt.bl_count,s=0;s<=t;s++)_[s]=0;for(s=1;s<n;s+=2)_[e[s]]++;var d=qt.next_code;for(i=0,_[0]=0,o=1;o<=t;o++)i=i+_[o-1]<<1,d[o]=i;for(a=0;a<n;a+=2)u=e[a+1],u!=0&&(e[a]=d[u],d[u]++)}function Mi(e,t,n){for(var i=e.length,o=qt.rev15,a=0;a<i;a+=2)if(e[a+1]!=0)for(var s=a>>1,u=e[a+1],_=s<<4|u,d=t-u,l=e[a]<<d,m=l+(1<<d);l!=m;){var A=o[l]>>>15-t;n[A]=_,l++}}function Sc(e,t){for(var n=qt.rev15,i=15-t,o=0;o<e.length;o+=2){var a=e[o]<<t-e[o+1];e[o]=n[a]>>>i}}function vc(e,t,n){return(e[t>>>3]|e[(t>>>3)+1]<<8)>>>(t&7)&(1<<n)-1}function Pd(e,t,n){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(t&7)&(1<<n)-1}function Cc(e,t){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(t&7)}const qt=function(){var e=Uint16Array,t=Uint32Array;return{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(1<<15),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(1<<16),prev:new e(1<<15)}}();(function(){for(var e=1<<15,t=0;t<e;t++){var n=t;n=(n&2863311530)>>>1|(n&1431655765)<<1,n=(n&3435973836)>>>2|(n&858993459)<<2,n=(n&4042322160)>>>4|(n&252645135)<<4,n=(n&4278255360)>>>8|(n&16711935)<<8,qt.rev15[t]=(n>>>16|n<<16)>>>17}function i(o,a,s){for(;a--!=0;)o.push(0,s)}for(var t=0;t<32;t++)qt.ldef[t]=qt.of0[t]<<3|qt.exb[t],qt.ddef[t]=qt.df0[t]<<4|qt.dxb[t];i(qt.fltree,144,8),i(qt.fltree,255-143,9),i(qt.fltree,279-255,7),i(qt.fltree,287-279,8),Ni(qt.fltree,9),Mi(qt.fltree,9,qt.flmap),Sc(qt.fltree,9),i(qt.fdtree,32,5),Ni(qt.fdtree,5),Mi(qt.fdtree,5,qt.fdmap),Sc(qt.fdtree,5),i(qt.itree,19,0),i(qt.ltree,286,0),i(qt.dtree,30,0),i(qt.ttree,320,0)})();const bc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var n=t,i=0;i<8;i++)n&1?n=3988292384^n>>>1:n=n>>>1;e[t]=n}return e}(),update:function(e,t,n,i){for(var o=0;o<i;o++)e=bc.table[(e^t[n+o])&255]^e>>>8;return e},crc:function(e,t,n){return bc.update(4294967295,e,t,n)^4294967295}};function xd(e,t){return Rd(e,t)}const Fc={numWorkers:1,workerURL:"",useWorkers:!1};let Nd=0;const po=[];function Br(e){return new Promise((t,n)=>{const i=new Worker(e);i.onmessage=o=>{o.data==="start"?(i.onerror=void 0,i.onmessage=void 0,t(i)):n(new Error(`unexpected message: ${o.data}`))},i.onerror=n})}function Md(e,t){return e.require(t)}(function(){if(Bd){const{Worker:e}=Md(module,"worker_threads");return{async createWorker(t){return new e(t)},addEventListener(t,n){t.on("message",i=>{n({target:t,data:i})})},async terminate(t){await t.terminate()}}}else return{async createWorker(e){try{return await Br(e)}catch{console.warn("could not load worker:",e)}let t;try{const n=await fetch(e,{mode:"cors"});if(!n.ok)throw new Error(`could not load: ${e}`);t=await n.text(),e=URL.createObjectURL(new Blob([t],{type:"application/javascript"}));const i=await Br(e);return Fc.workerURL=e,i}catch{console.warn("could not load worker via fetch:",e)}if(t!==void 0)try{e=`data:application/javascript;base64,${btoa(t)}`;const n=await Br(e);return Fc.workerURL=e,n}catch{console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(e,t){e.addEventListener("message",t)},async terminate(e){e.terminate()}}})();function Ud(e,t,n,i){const o=new Uint8Array(t);xd(e,o),i(n?new Blob([o],{type:n}):o.buffer)}async function Dd(){if(po.length!==0)for(;po.length;){const{src:e,uncompressedSize:t,type:n,resolve:i}=po.shift();let o=e;Ic(e)&&(o=await Fd(e)),Ud(o,t,n,i)}}function Bc(e,t,n){return new Promise((i,o)=>{po.push({src:e,uncompressedSize:t,type:n,resolve:i,reject:o,id:Nd++}),Dd()})}function Gd(e,t){const n=e&31,i=(e>>5&15)-1,o=(e>>9&127)+1980,a=0,s=(t&31)*2,u=t>>5&63,_=t>>11&31;return new Date(o,i,n,_,u,s,a)}class kd{constructor(t,n){this._reader=t,this._rawEntry=n,this.name=n.name,this.nameBytes=n.nameBytes,this.size=n.uncompressedSize,this.compressedSize=n.compressedSize,this.comment=n.comment,this.commentBytes=n.commentBytes,this.compressionMethod=n.compressionMethod,this.lastModDate=Gd(n.lastModFileDate,n.lastModFileTime),this.isDirectory=n.uncompressedSize===0&&n.name.endsWith("/"),this.encrypted=!!(n.generalPurposeBitFlag&1),this.externalFileAttributes=n.externalFileAttributes,this.versionMadeBy=n.versionMadeBy}async blob(t="application/octet-stream"){return await Zd(this._reader,this._rawEntry,t)}async arrayBuffer(){return await Kd(this._reader,this._rawEntry)}async text(){const t=await this.arrayBuffer();return Ui(new Uint8Array(t))}async json(){const t=await this.text();return JSON.parse(t)}}const Tr=22,Wd=65535,qd=101010256,Qd=101075792;async function fi(e,t,n){return await e.read(t,n)}async function Rr(e,t,n,i){return e.sliceAsBlob?await e.sliceAsBlob(t,n,i):await e.read(t,n)}const Hd={unsigned(){return 0}};function ge(e,t){return e[t]+e[t+1]*256}function Ce(e,t){return e[t]+e[t+1]*256+e[t+2]*65536+e[t+3]*16777216}function Hn(e,t){return Ce(e,t)+Ce(e,t+4)*4294967296}const zd=new TextDecoder;function Ui(e,t){return xi(e.buffer)&&(e=new Uint8Array(e)),zd.decode(e)}async function $d(e,t){const n=Math.min(Tr+Wd,t),i=t-n,o=await fi(e,i,n);for(let a=n-Tr;a>=0;--a){if(Ce(o,a)!==qd)continue;const s=new Uint8Array(o.buffer,o.byteOffset+a,o.byteLength-a),u=ge(s,4);if(u!==0)throw new Error(`multi-volume zip files are not supported. This is volume: ${u}`);const _=ge(s,10),d=Ce(s,12),l=Ce(s,16),m=ge(s,20),A=s.length-Tr;if(m!==A)throw new Error(`invalid comment length. expected: ${A}, actual: ${m}`);const p=new Uint8Array(s.buffer,s.byteOffset+22,m),R=Ui(p);return _===65535||l===4294967295?await Yd(e,i+a,R,p):await Tc(e,l,d,_,R,p)}throw new Error("could not find end of central directory. maybe not zip file")}const jd=117853008;async function Yd(e,t,n,i){const o=t-20,a=await fi(e,o,20);if(Ce(a,0)!==jd)throw new Error("invalid zip64 end of central directory locator signature");const s=Hn(a,8),u=await fi(e,s,56);if(Ce(u,0)!==Qd)throw new Error("invalid zip64 end of central directory record signature");const _=Hn(u,32),d=Hn(u,40),l=Hn(u,48);return Tc(e,l,d,_,n,i)}const Vd=33639248;async function Tc(e,t,n,i,o,a){let s=0;const u=await fi(e,t,n),_=[];for(let l=0;l<i;++l){const m=u.subarray(s,s+46),A=Ce(m,0);if(A!==Vd)throw new Error(`invalid central directory file header signature: 0x${A.toString(16)}`);const p={versionMadeBy:ge(m,4),versionNeededToExtract:ge(m,6),generalPurposeBitFlag:ge(m,8),compressionMethod:ge(m,10),lastModFileTime:ge(m,12),lastModFileDate:ge(m,14),crc32:Ce(m,16),compressedSize:Ce(m,20),uncompressedSize:Ce(m,24),fileNameLength:ge(m,28),extraFieldLength:ge(m,30),fileCommentLength:ge(m,32),internalFileAttributes:ge(m,36),externalFileAttributes:Ce(m,38),relativeOffsetOfLocalHeader:Ce(m,42)};if(p.generalPurposeBitFlag&64)throw new Error("strong encryption is not supported");s+=46;const R=u.subarray(s,s+p.fileNameLength+p.extraFieldLength+p.fileCommentLength);p.nameBytes=R.slice(0,p.fileNameLength),p.name=Ui(p.nameBytes);const P=p.fileNameLength+p.extraFieldLength,C=R.slice(p.fileNameLength,P);p.extraFields=[];let G=0;for(;G<C.length-3;){const Z=ge(C,G+0),$=ge(C,G+2),Y=G+4,B=Y+$;if(B>C.length)throw new Error("extra field length exceeds extra field buffer size");p.extraFields.push({id:Z,data:C.slice(Y,B)}),G=B}if(p.commentBytes=R.slice(P,P+p.fileCommentLength),p.comment=Ui(p.commentBytes),s+=R.length,p.uncompressedSize===4294967295||p.compressedSize===4294967295||p.relativeOffsetOfLocalHeader===4294967295){const Z=p.extraFields.find(B=>B.id===1);if(!Z)throw new Error("expected zip64 extended information extra field");const $=Z.data;let Y=0;if(p.uncompressedSize===4294967295){if(Y+8>$.length)throw new Error("zip64 extended information extra field does not include uncompressed size");p.uncompressedSize=Hn($,Y),Y+=8}if(p.compressedSize===4294967295){if(Y+8>$.length)throw new Error("zip64 extended information extra field does not include compressed size");p.compressedSize=Hn($,Y),Y+=8}if(p.relativeOffsetOfLocalHeader===4294967295){if(Y+8>$.length)throw new Error("zip64 extended information extra field does not include relative header offset");p.relativeOffsetOfLocalHeader=Hn($,Y),Y+=8}}const O=p.extraFields.find(Z=>Z.id===28789&&Z.data.length>=6&&Z.data[0]===1&&Ce(Z.data,1),Hd.unsigned(p.nameBytes));if(O&&(p.fileName=Ui(O.data.slice(5))),p.compressionMethod===0){let Z=p.uncompressedSize;if((p.generalPurposeBitFlag&1)!=0&&(Z+=12),p.compressedSize!==Z)throw new Error(`compressed size mismatch for stored file: ${p.compressedSize} != ${Z}`)}_.push(p)}return{zip:{comment:o,commentBytes:a},entries:_.map(l=>new kd(e,l))}}async function Rc(e,t){if(t.generalPurposeBitFlag&1)throw new Error("encrypted entries not supported");const n=await fi(e,t.relativeOffsetOfLocalHeader,30),i=await e.getLength(),o=Ce(n,0);if(o!==67324752)throw new Error(`invalid local file header signature: 0x${o.toString(16)}`);const a=ge(n,26),s=ge(n,28),u=t.relativeOffsetOfLocalHeader+n.length+a+s;let _;if(t.compressionMethod===0)_=!1;else if(t.compressionMethod===8)_=!0;else throw new Error(`unsupported compression method: ${t.compressionMethod}`);const d=u,l=d+t.compressedSize;if(t.compressedSize!==0&&l>i)throw new Error(`file data overflows file bounds: ${d} +  ${t.compressedSize}  > ${i}`);return{decompress:_,fileDataStart:d}}async function Kd(e,t){const{decompress:n,fileDataStart:i}=await Rc(e,t);if(!n){const s=await fi(e,i,t.compressedSize);return Td(s)?s.buffer:s.slice().buffer}const o=await Rr(e,i,t.compressedSize);return await Bc(o,t.uncompressedSize)}async function Zd(e,t,n){const{decompress:i,fileDataStart:o}=await Rc(e,t);if(!i){const u=await Rr(e,o,t.compressedSize,n);return Ic(u)?u:new Blob([xi(u.buffer)?new Uint8Array(u):u],{type:n})}const a=await Rr(e,o,t.compressedSize);return await Bc(a,t.uncompressedSize,n)}async function Xd(e){let t;if(typeof Blob!="undefined"&&e instanceof Blob)t=new Ec(e);else if(e instanceof ArrayBuffer||e&&e.buffer&&e.buffer instanceof ArrayBuffer)t=new Lc(e);else if(xi(e)||xi(e.buffer))t=new Lc(e);else if(typeof e=="string"){const i=await fetch(e);if(!i.ok)throw new Error(`failed http request ${e}, status: ${i.status}: ${i.statusText}`);const o=await i.blob();t=new Ec(o)}else if(typeof e.getLength=="function"&&typeof e.read=="function")t=e;else throw new Error("unsupported source type");const n=await t.getLength();if(n>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${n}. Only file sizes up 4503599627370496 bytes are supported`);return await $d(t,n)}async function Jd(e){const{zip:t,entries:n}=await Xd(e);return{zip:t,entries:Object.fromEntries(n.map(i=>[i.name,i]))}}var th="circomlib.acbc52cb.zip",eh="circom.836a5901.wasm";globalThis.process={cwd(){return""}},globalThis.Buffer=vt;const nh=Math.floor((Date.now()-performance.now())*.001);function ih(){let e=performance.now()*.001,t=Math.floor(e)+nh,n=Math.floor(e%1*1e9);return t*1e9+n}function oh(e,t,n){if(e instanceof Uint8Array)for(let i=t;i<t+n;i++)e[i]=Math.floor(Math.random()*256);return e}const rh={hrtime:ih,exit:e=>{throw new af(e)},kill:e=>{throw new sf(e)},randomFillSync:oh,isTTY:()=>!0,path:uf,fs:null};async function ah(e){const t=await fetch(e),n=t.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&n.startsWith("application/wasm"))return await WebAssembly.compileStreaming(t);{const i=await t.arrayBuffer();return await WebAssembly.compile(i)}}async function sh(){const e=new bd,{entries:t}=await Jd(th);for(const[n,i]of Object.entries(t)){const o=await t[n].arrayBuffer();e.fs.writeFileSync(n.replace("circomlib-master/circuits/","circomlib/"),new Uint8Array(o)),e.fs.writeFileSync(n.replace("circomlib-master/circuits/","circomlib/circuits/"),new Uint8Array(o))}return e}const go=sh();function Oc(e){return e.replace(/(include\s+")([^"]+)"/g,(t,n,i)=>i.startsWith("gist:")?n+i.replace("gist:","external/https/gist.github.com/")+'"':t.replace(/(include\s+")(\w+):\/\//,"$1external/$2/"))}async function ch(e="main.circom",t={nosym:!1,nowasm:!1,nor1cs:!1}){const n=await go;let i=10*1024*1024,o=new Uint8Array(i),a=-1,s=0,u=0,_;const d=Ca(Mo({},n.fs),{realpathSync(m){const A=m.replace(/.*circomlib\//,"circomlib/");return m.includes("circomlib/")&&n.fs.existsSync(A)?A:(m.startsWith("external/")&&!n.fs.existsSync(m)&&(_=m),n.fs.realpathSync(m))},writeSync(m,A,p,R,P){return a===m&&s+R<i&&P===u+s?(o.set(A,s),s+=R,R):(a>=0&&n.fs.writeSync(a,o,0,s,u),a=m,s=0,o.set(A,s),s+=R,u=P,R)},closeSync(m){if(a>=0&&(n.fs.writeSync(a,o,0,s,u),a=-1,s=0,u=0),m>=0)return n.fs.closeSync(m)}}),l=await ah(eh);for(;;){let m=new cf({args:["circom2",e,!t.nor1cs&&"--r1cs",!t.nowasm&&"--wasm",!t.nosym&&"--sym"].filter(p=>p!==!1),env:{RUST_BACKTRACE:"1"},preopens:{".":"."},bindings:Ca(Mo({},rh),{fs:d})});_=void 0,m.bindings.fs.writeFileSync("/dev/stderr",""),m.bindings.fs.writeFileSync("/dev/stdout","");let A=await WebAssembly.instantiate(l,Mo({},m.getImports(l)));try{m.start(A)}catch(p){console.log(p)}if(m.bindings.fs.closeSync(-1),_){console.log("Fetching",_);const p=await uh(_),R=Oc(lh(p));m.bindings.fs.mkdirSync(Yo.dirname(_),{recursive:!0}),m.bindings.fs.writeFileSync(_,R);continue}break}}function lh(e){return e.replace(/(component\s+main[^;]+;)/,"/* $1 */")}async function Di(e){let t;try{t=await fetch(e)}catch{throw new Error(`Failed to fetch ${e}`)}if(t.status!==200)throw new Error(`Error ${t.status}: ${e}`);return await t.text()}async function Pc(e){const n=await(await fetch(`https://api.github.com/gists/${e}`)).json();if(n.files["main.circom"])return n.files["main.circom"].content;const i=Object.keys(n.files).find(o=>o.endsWith(".circom"));return i?n.files[i].content:Object.values(n.files)[0].content}async function uh(e){let t=[];const n=i=>t=i.exec(e);if(n(/^external\/https\/gist\.github\.com\/([^/]+)\/([\da-f]{32})/))return Pc(t[2]);if(n(/^external\/https\/gist\.github\.com\/([\da-f]{32})/))return Pc(t[1]);if(n(/^external\/https\/github\.com\/([^/]+)\/([^/]+)\/blob\/([^/]+)\/(.*)/))return Di(`https://raw.githubusercontent.com/${t[1]}/${t[2]}/${t[3]}/${t[4]}`);if(n(/^external\/ipfs\/(.*)$/))return Di(`https://cloudflare-ipfs.com/ipfs/${t[1]}`);if(n(/^external\/dweb\/ipfs\/(.*)$/))return Di(`https://cloudflare-ipfs.com/ipfs/${t[1]}`);if(n(/^external\/https\/(.*)$/))return Di(`https://${t[1]}`);if(n(/^external\/http\/(.*)$/))return Di(`http://${t[1]}`)}const fh=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function xc(e,t){if(!t||t==10)return BigInt(e);if(t==16)return e.slice(0,2)=="0x"?BigInt(e):BigInt("0x"+e)}const dh=xc;function hh(e,t){let n=BigInt(0);t=BigInt(t);for(let i=0;i<e.length;i++)n=n*t+BigInt(e[i]);return n}function _h(e){const t=e.toString(16);return(t.length-1)*4+fh[parseInt(t[0],16)]}function ph(e){return BigInt(e)<BigInt(0)}function gh(e){return!e}function Nc(e,t){return BigInt(e)<<BigInt(t)}function Mc(e,t){return BigInt(e)>>BigInt(t)}const mh=Nc,yh=Mc;function Ah(e){return(BigInt(e)&BigInt(1))==BigInt(1)}function Ih(e){let t=BigInt(e);const n=[];for(;t;){if(t&BigInt(1)){const i=2-Number(t%BigInt(4));n.push(i),t=t-BigInt(i)}else n.push(0);t=t>>BigInt(1)}return n}function Lh(e){let t=BigInt(e);const n=[];for(;t;)t&BigInt(1)?n.push(1):n.push(0),t=t>>BigInt(1);return n}function Eh(e){if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("Number too big");return Number(e)}function wh(e,t){const n=[];let i=BigInt(e);for(t=BigInt(t);i;)n.unshift(Number(i%t)),i=i/t;return n}function Sh(e,t){return BigInt(e)+BigInt(t)}function vh(e,t){return BigInt(e)-BigInt(t)}function Ch(e){return-BigInt(e)}function bh(e,t){return BigInt(e)*BigInt(t)}function Fh(e){return BigInt(e)*BigInt(e)}function Bh(e,t){return BigInt(e)**BigInt(t)}function Th(e,t){return BigInt(e)**BigInt(t)}function Rh(e){return BigInt(e)>=0?BigInt(e):-BigInt(e)}function Oh(e,t){return BigInt(e)/BigInt(t)}function Ph(e,t){return BigInt(e)%BigInt(t)}function xh(e,t){return BigInt(e)==BigInt(t)}function Nh(e,t){return BigInt(e)!=BigInt(t)}function Mh(e,t){return BigInt(e)<BigInt(t)}function Uh(e,t){return BigInt(e)>BigInt(t)}function Dh(e,t){return BigInt(e)<=BigInt(t)}function Gh(e,t){return BigInt(e)>=BigInt(t)}function kh(e,t){return BigInt(e)&BigInt(t)}function Wh(e,t){return BigInt(e)|BigInt(t)}function qh(e,t){return BigInt(e)^BigInt(t)}function Qh(e,t){return BigInt(e)&&BigInt(t)}function Hh(e,t){return BigInt(e)||BigInt(t)}function zh(e){return!BigInt(e)}var $h=Object.freeze({__proto__:null,fromString:xc,e:dh,fromArray:hh,bitLength:_h,isNegative:ph,isZero:gh,shiftLeft:Nc,shiftRight:Mc,shl:mh,shr:yh,isOdd:Ah,naf:Ih,bits:Lh,toNumber:Eh,toArray:wh,add:Sh,sub:vh,neg:Ch,mul:bh,square:Fh,pow:Bh,exp:Th,abs:Rh,div:Oh,mod:Ph,eq:xh,neq:Nh,lt:Mh,gt:Uh,leq:Dh,geq:Gh,band:kh,bor:Wh,bxor:qh,land:Qh,lor:Hh,lnot:zh}),rn={exports:{}};(function(e){var t=function(n){var i=1e7,o=7,a=9007199254740992,s=R(a),u="0123456789abcdefghijklmnopqrstuvwxyz",_=typeof BigInt=="function";function d(b,x,q,Q){return typeof b=="undefined"?d[0]:typeof x!="undefined"?+x==10&&!q?Ct(b):Tt(b,x,q,Q):Ct(b)}function l(b,x){this.value=b,this.sign=x,this.isSmall=!1}l.prototype=Object.create(d.prototype);function m(b){this.value=b,this.sign=b<0,this.isSmall=!0}m.prototype=Object.create(d.prototype);function A(b){this.value=b}A.prototype=Object.create(d.prototype);function p(b){return-a<b&&b<a}function R(b){return b<1e7?[b]:b<1e14?[b%1e7,Math.floor(b/1e7)]:[b%1e7,Math.floor(b/1e7)%1e7,Math.floor(b/1e14)]}function P(b){C(b);var x=b.length;if(x<4&&rt(b,s)<0)switch(x){case 0:return 0;case 1:return b[0];case 2:return b[0]+b[1]*i;default:return b[0]+(b[1]+b[2]*i)*i}return b}function C(b){for(var x=b.length;b[--x]===0;);b.length=x+1}function G(b){for(var x=new Array(b),q=-1;++q<b;)x[q]=0;return x}function O(b){return b>0?Math.floor(b):Math.ceil(b)}function Z(b,x){var q=b.length,Q=x.length,tt=new Array(q),X=0,st=i,w,r;for(r=0;r<Q;r++)w=b[r]+x[r]+X,X=w>=st?1:0,tt[r]=w-X*st;for(;r<q;)w=b[r]+X,X=w===st?1:0,tt[r++]=w-X*st;return X>0&&tt.push(X),tt}function $(b,x){return b.length>=x.length?Z(b,x):Z(x,b)}function Y(b,x){var q=b.length,Q=new Array(q),tt=i,X,st;for(st=0;st<q;st++)X=b[st]-tt+x,x=Math.floor(X/tt),Q[st]=X-x*tt,x+=1;for(;x>0;)Q[st++]=x%tt,x=Math.floor(x/tt);return Q}l.prototype.add=function(b){var x=Ct(b);if(this.sign!==x.sign)return this.subtract(x.negate());var q=this.value,Q=x.value;return x.isSmall?new l(Y(q,Math.abs(Q)),this.sign):new l($(q,Q),this.sign)},l.prototype.plus=l.prototype.add,m.prototype.add=function(b){var x=Ct(b),q=this.value;if(q<0!==x.sign)return this.subtract(x.negate());var Q=x.value;if(x.isSmall){if(p(q+Q))return new m(q+Q);Q=R(Math.abs(Q))}return new l(Y(Q,Math.abs(q)),q<0)},m.prototype.plus=m.prototype.add,A.prototype.add=function(b){return new A(this.value+Ct(b).value)},A.prototype.plus=A.prototype.add;function B(b,x){var q=b.length,Q=x.length,tt=new Array(q),X=0,st=i,w,r;for(w=0;w<Q;w++)r=b[w]-X-x[w],r<0?(r+=st,X=1):X=0,tt[w]=r;for(w=Q;w<q;w++){if(r=b[w]-X,r<0)r+=st;else{tt[w++]=r;break}tt[w]=r}for(;w<q;w++)tt[w]=b[w];return C(tt),tt}function g(b,x,q){var Q;return rt(b,x)>=0?Q=B(b,x):(Q=B(x,b),q=!q),Q=P(Q),typeof Q=="number"?(q&&(Q=-Q),new m(Q)):new l(Q,q)}function I(b,x,q){var Q=b.length,tt=new Array(Q),X=-x,st=i,w,r;for(w=0;w<Q;w++)r=b[w]+X,X=Math.floor(r/st),r%=st,tt[w]=r<0?r+st:r;return tt=P(tt),typeof tt=="number"?(q&&(tt=-tt),new m(tt)):new l(tt,q)}l.prototype.subtract=function(b){var x=Ct(b);if(this.sign!==x.sign)return this.add(x.negate());var q=this.value,Q=x.value;return x.isSmall?I(q,Math.abs(Q),this.sign):g(q,Q,this.sign)},l.prototype.minus=l.prototype.subtract,m.prototype.subtract=function(b){var x=Ct(b),q=this.value;if(q<0!==x.sign)return this.add(x.negate());var Q=x.value;return x.isSmall?new m(q-Q):I(Q,Math.abs(q),q>=0)},m.prototype.minus=m.prototype.subtract,A.prototype.subtract=function(b){return new A(this.value-Ct(b).value)},A.prototype.minus=A.prototype.subtract,l.prototype.negate=function(){return new l(this.value,!this.sign)},m.prototype.negate=function(){var b=this.sign,x=new m(-this.value);return x.sign=!b,x},A.prototype.negate=function(){return new A(-this.value)},l.prototype.abs=function(){return new l(this.value,!1)},m.prototype.abs=function(){return new m(Math.abs(this.value))},A.prototype.abs=function(){return new A(this.value>=0?this.value:-this.value)};function D(b,x){var q=b.length,Q=x.length,tt=q+Q,X=G(tt),st=i,w,r,c,y,v;for(c=0;c<q;++c){y=b[c];for(var T=0;T<Q;++T)v=x[T],w=y*v+X[c+T],r=Math.floor(w/st),X[c+T]=w-r*st,X[c+T+1]+=r}return C(X),X}function z(b,x){var q=b.length,Q=new Array(q),tt=i,X=0,st,w;for(w=0;w<q;w++)st=b[w]*x+X,X=Math.floor(st/tt),Q[w]=st-X*tt;for(;X>0;)Q[w++]=X%tt,X=Math.floor(X/tt);return Q}function U(b,x){for(var q=[];x-- >0;)q.push(0);return q.concat(b)}function N(b,x){var q=Math.max(b.length,x.length);if(q<=30)return D(b,x);q=Math.ceil(q/2);var Q=b.slice(q),tt=b.slice(0,q),X=x.slice(q),st=x.slice(0,q),w=N(tt,st),r=N(Q,X),c=N($(tt,Q),$(st,X)),y=$($(w,U(B(B(c,w),r),q)),U(r,2*q));return C(y),y}function S(b,x){return-.012*b-.012*x+15e-6*b*x>0}l.prototype.multiply=function(b){var x=Ct(b),q=this.value,Q=x.value,tt=this.sign!==x.sign,X;if(x.isSmall){if(Q===0)return d[0];if(Q===1)return this;if(Q===-1)return this.negate();if(X=Math.abs(Q),X<i)return new l(z(q,X),tt);Q=R(X)}return S(q.length,Q.length)?new l(N(q,Q),tt):new l(D(q,Q),tt)},l.prototype.times=l.prototype.multiply;function W(b,x,q){return b<i?new l(z(x,b),q):new l(D(x,R(b)),q)}m.prototype._multiplyBySmall=function(b){return p(b.value*this.value)?new m(b.value*this.value):W(Math.abs(b.value),R(Math.abs(this.value)),this.sign!==b.sign)},l.prototype._multiplyBySmall=function(b){return b.value===0?d[0]:b.value===1?this:b.value===-1?this.negate():W(Math.abs(b.value),this.value,this.sign!==b.sign)},m.prototype.multiply=function(b){return Ct(b)._multiplyBySmall(this)},m.prototype.times=m.prototype.multiply,A.prototype.multiply=function(b){return new A(this.value*Ct(b).value)},A.prototype.times=A.prototype.multiply;function J(b){var x=b.length,q=G(x+x),Q=i,tt,X,st,w,r;for(st=0;st<x;st++){w=b[st],X=0-w*w;for(var c=st;c<x;c++)r=b[c],tt=2*(w*r)+q[st+c]+X,X=Math.floor(tt/Q),q[st+c]=tt-X*Q;q[st+x]=X}return C(q),q}l.prototype.square=function(){return new l(J(this.value),!1)},m.prototype.square=function(){var b=this.value*this.value;return p(b)?new m(b):new l(J(R(Math.abs(this.value))),!1)},A.prototype.square=function(b){return new A(this.value*this.value)};function it(b,x){var q=b.length,Q=x.length,tt=i,X=G(x.length),st=x[Q-1],w=Math.ceil(tt/(2*st)),r=z(b,w),c=z(x,w),y,v,T,k,V,nt,dt;for(r.length<=q&&r.push(0),c.push(0),st=c[Q-1],v=q-Q;v>=0;v--){for(y=tt-1,r[v+Q]!==st&&(y=Math.floor((r[v+Q]*tt+r[v+Q-1])/st)),T=0,k=0,nt=c.length,V=0;V<nt;V++)T+=y*c[V],dt=Math.floor(T/tt),k+=r[v+V]-(T-dt*tt),T=dt,k<0?(r[v+V]=k+tt,k=-1):(r[v+V]=k,k=0);for(;k!==0;){for(y-=1,T=0,V=0;V<nt;V++)T+=r[v+V]-tt+c[V],T<0?(r[v+V]=T+tt,T=0):(r[v+V]=T,T=1);k+=T}X[v]=y}return r=et(r,w)[0],[P(X),P(r)]}function ot(b,x){for(var q=b.length,Q=x.length,tt=[],X=[],st=i,w,r,c,y,v;q;){if(X.unshift(b[--q]),C(X),rt(X,x)<0){tt.push(0);continue}r=X.length,c=X[r-1]*st+X[r-2],y=x[Q-1]*st+x[Q-2],r>Q&&(c=(c+1)*st),w=Math.ceil(c/y);do{if(v=z(x,w),rt(v,X)<=0)break;w--}while(w);tt.push(w),X=B(X,v)}return tt.reverse(),[P(tt),P(X)]}function et(b,x){var q=b.length,Q=G(q),tt=i,X,st,w,r;for(w=0,X=q-1;X>=0;--X)r=w*tt+b[X],st=O(r/x),w=r-st*x,Q[X]=st|0;return[Q,w|0]}function at(b,x){var q,Q=Ct(x);if(_)return[new A(b.value/Q.value),new A(b.value%Q.value)];var tt=b.value,X=Q.value,st;if(X===0)throw new Error("Cannot divide by zero");if(b.isSmall)return Q.isSmall?[new m(O(tt/X)),new m(tt%X)]:[d[0],b];if(Q.isSmall){if(X===1)return[b,d[0]];if(X==-1)return[b.negate(),d[0]];var w=Math.abs(X);if(w<i){q=et(tt,w),st=P(q[0]);var r=q[1];return b.sign&&(r=-r),typeof st=="number"?(b.sign!==Q.sign&&(st=-st),[new m(st),new m(r)]):[new l(st,b.sign!==Q.sign),new m(r)]}X=R(w)}var c=rt(tt,X);if(c===-1)return[d[0],b];if(c===0)return[d[b.sign===Q.sign?1:-1],d[0]];tt.length+X.length<=200?q=it(tt,X):q=ot(tt,X),st=q[0];var y=b.sign!==Q.sign,v=q[1],T=b.sign;return typeof st=="number"?(y&&(st=-st),st=new m(st)):st=new l(st,y),typeof v=="number"?(T&&(v=-v),v=new m(v)):v=new l(v,T),[st,v]}l.prototype.divmod=function(b){var x=at(this,b);return{quotient:x[0],remainder:x[1]}},A.prototype.divmod=m.prototype.divmod=l.prototype.divmod,l.prototype.divide=function(b){return at(this,b)[0]},A.prototype.over=A.prototype.divide=function(b){return new A(this.value/Ct(b).value)},m.prototype.over=m.prototype.divide=l.prototype.over=l.prototype.divide,l.prototype.mod=function(b){return at(this,b)[1]},A.prototype.mod=A.prototype.remainder=function(b){return new A(this.value%Ct(b).value)},m.prototype.remainder=m.prototype.mod=l.prototype.remainder=l.prototype.mod,l.prototype.pow=function(b){var x=Ct(b),q=this.value,Q=x.value,tt,X,st;if(Q===0)return d[1];if(q===0)return d[0];if(q===1)return d[1];if(q===-1)return x.isEven()?d[1]:d[-1];if(x.sign)return d[0];if(!x.isSmall)throw new Error("The exponent "+x.toString()+" is too large.");if(this.isSmall&&p(tt=Math.pow(q,Q)))return new m(O(tt));for(X=this,st=d[1];Q&!0&&(st=st.times(X),--Q),Q!==0;)Q/=2,X=X.square();return st},m.prototype.pow=l.prototype.pow,A.prototype.pow=function(b){var x=Ct(b),q=this.value,Q=x.value,tt=BigInt(0),X=BigInt(1),st=BigInt(2);if(Q===tt)return d[1];if(q===tt)return d[0];if(q===X)return d[1];if(q===BigInt(-1))return x.isEven()?d[1]:d[-1];if(x.isNegative())return new A(tt);for(var w=this,r=d[1];(Q&X)===X&&(r=r.times(w),--Q),Q!==tt;)Q/=st,w=w.square();return r},l.prototype.modPow=function(b,x){if(b=Ct(b),x=Ct(x),x.isZero())throw new Error("Cannot take modPow with modulus 0");var q=d[1],Q=this.mod(x);for(b.isNegative()&&(b=b.multiply(d[-1]),Q=Q.modInv(x));b.isPositive();){if(Q.isZero())return d[0];b.isOdd()&&(q=q.multiply(Q).mod(x)),b=b.divide(2),Q=Q.square().mod(x)}return q},A.prototype.modPow=m.prototype.modPow=l.prototype.modPow;function rt(b,x){if(b.length!==x.length)return b.length>x.length?1:-1;for(var q=b.length-1;q>=0;q--)if(b[q]!==x[q])return b[q]>x[q]?1:-1;return 0}l.prototype.compareAbs=function(b){var x=Ct(b),q=this.value,Q=x.value;return x.isSmall?1:rt(q,Q)},m.prototype.compareAbs=function(b){var x=Ct(b),q=Math.abs(this.value),Q=x.value;return x.isSmall?(Q=Math.abs(Q),q===Q?0:q>Q?1:-1):-1},A.prototype.compareAbs=function(b){var x=this.value,q=Ct(b).value;return x=x>=0?x:-x,q=q>=0?q:-q,x===q?0:x>q?1:-1},l.prototype.compare=function(b){if(b===1/0)return-1;if(b===-1/0)return 1;var x=Ct(b),q=this.value,Q=x.value;return this.sign!==x.sign?x.sign?1:-1:x.isSmall?this.sign?-1:1:rt(q,Q)*(this.sign?-1:1)},l.prototype.compareTo=l.prototype.compare,m.prototype.compare=function(b){if(b===1/0)return-1;if(b===-1/0)return 1;var x=Ct(b),q=this.value,Q=x.value;return x.isSmall?q==Q?0:q>Q?1:-1:q<0!==x.sign?q<0?-1:1:q<0?1:-1},m.prototype.compareTo=m.prototype.compare,A.prototype.compare=function(b){if(b===1/0)return-1;if(b===-1/0)return 1;var x=this.value,q=Ct(b).value;return x===q?0:x>q?1:-1},A.prototype.compareTo=A.prototype.compare,l.prototype.equals=function(b){return this.compare(b)===0},A.prototype.eq=A.prototype.equals=m.prototype.eq=m.prototype.equals=l.prototype.eq=l.prototype.equals,l.prototype.notEquals=function(b){return this.compare(b)!==0},A.prototype.neq=A.prototype.notEquals=m.prototype.neq=m.prototype.notEquals=l.prototype.neq=l.prototype.notEquals,l.prototype.greater=function(b){return this.compare(b)>0},A.prototype.gt=A.prototype.greater=m.prototype.gt=m.prototype.greater=l.prototype.gt=l.prototype.greater,l.prototype.lesser=function(b){return this.compare(b)<0},A.prototype.lt=A.prototype.lesser=m.prototype.lt=m.prototype.lesser=l.prototype.lt=l.prototype.lesser,l.prototype.greaterOrEquals=function(b){return this.compare(b)>=0},A.prototype.geq=A.prototype.greaterOrEquals=m.prototype.geq=m.prototype.greaterOrEquals=l.prototype.geq=l.prototype.greaterOrEquals,l.prototype.lesserOrEquals=function(b){return this.compare(b)<=0},A.prototype.leq=A.prototype.lesserOrEquals=m.prototype.leq=m.prototype.lesserOrEquals=l.prototype.leq=l.prototype.lesserOrEquals,l.prototype.isEven=function(){return(this.value[0]&1)==0},m.prototype.isEven=function(){return(this.value&1)==0},A.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},l.prototype.isOdd=function(){return(this.value[0]&1)==1},m.prototype.isOdd=function(){return(this.value&1)==1},A.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},l.prototype.isPositive=function(){return!this.sign},m.prototype.isPositive=function(){return this.value>0},A.prototype.isPositive=m.prototype.isPositive,l.prototype.isNegative=function(){return this.sign},m.prototype.isNegative=function(){return this.value<0},A.prototype.isNegative=m.prototype.isNegative,l.prototype.isUnit=function(){return!1},m.prototype.isUnit=function(){return Math.abs(this.value)===1},A.prototype.isUnit=function(){return this.abs().value===BigInt(1)},l.prototype.isZero=function(){return!1},m.prototype.isZero=function(){return this.value===0},A.prototype.isZero=function(){return this.value===BigInt(0)},l.prototype.isDivisibleBy=function(b){var x=Ct(b);return x.isZero()?!1:x.isUnit()?!0:x.compareAbs(2)===0?this.isEven():this.mod(x).isZero()},A.prototype.isDivisibleBy=m.prototype.isDivisibleBy=l.prototype.isDivisibleBy;function gt(b){var x=b.abs();if(x.isUnit())return!1;if(x.equals(2)||x.equals(3)||x.equals(5))return!0;if(x.isEven()||x.isDivisibleBy(3)||x.isDivisibleBy(5))return!1;if(x.lesser(49))return!0}function Rt(b,x){for(var q=b.prev(),Q=q,tt=0,X,st,w;Q.isEven();)Q=Q.divide(2),tt++;t:for(st=0;st<x.length;st++)if(!b.lesser(x[st])&&(w=t(x[st]).modPow(Q,b),!(w.isUnit()||w.equals(q)))){for(X=tt-1;X!=0;X--){if(w=w.square().mod(b),w.isUnit())return!1;if(w.equals(q))continue t}return!1}return!0}l.prototype.isPrime=function(b){var x=gt(this);if(x!==n)return x;var q=this.abs(),Q=q.bitLength();if(Q<=64)return Rt(q,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var tt=Math.log(2)*Q.toJSNumber(),X=Math.ceil(b===!0?2*Math.pow(tt,2):tt),st=[],w=0;w<X;w++)st.push(t(w+2));return Rt(q,st)},A.prototype.isPrime=m.prototype.isPrime=l.prototype.isPrime,l.prototype.isProbablePrime=function(b,x){var q=gt(this);if(q!==n)return q;for(var Q=this.abs(),tt=b===n?5:b,X=[],st=0;st<tt;st++)X.push(t.randBetween(2,Q.minus(2),x));return Rt(Q,X)},A.prototype.isProbablePrime=m.prototype.isProbablePrime=l.prototype.isProbablePrime,l.prototype.modInv=function(b){for(var x=t.zero,q=t.one,Q=Ct(b),tt=this.abs(),X,st,w;!tt.isZero();)X=Q.divide(tt),st=x,w=Q,x=q,Q=tt,q=st.subtract(X.multiply(q)),tt=w.subtract(X.multiply(tt));if(!Q.isUnit())throw new Error(this.toString()+" and "+b.toString()+" are not co-prime");return x.compare(0)===-1&&(x=x.add(b)),this.isNegative()?x.negate():x},A.prototype.modInv=m.prototype.modInv=l.prototype.modInv,l.prototype.next=function(){var b=this.value;return this.sign?I(b,1,this.sign):new l(Y(b,1),this.sign)},m.prototype.next=function(){var b=this.value;return b+1<a?new m(b+1):new l(s,!1)},A.prototype.next=function(){return new A(this.value+BigInt(1))},l.prototype.prev=function(){var b=this.value;return this.sign?new l(Y(b,1),!0):I(b,1,this.sign)},m.prototype.prev=function(){var b=this.value;return b-1>-a?new m(b-1):new l(s,!0)},A.prototype.prev=function(){return new A(this.value-BigInt(1))};for(var yt=[1];2*yt[yt.length-1]<=i;)yt.push(2*yt[yt.length-1]);var wt=yt.length,L=yt[wt-1];function f(b){return Math.abs(b)<=i}l.prototype.shiftLeft=function(b){var x=Ct(b).toJSNumber();if(!f(x))throw new Error(String(x)+" is too large for shifting.");if(x<0)return this.shiftRight(-x);var q=this;if(q.isZero())return q;for(;x>=wt;)q=q.multiply(L),x-=wt-1;return q.multiply(yt[x])},A.prototype.shiftLeft=m.prototype.shiftLeft=l.prototype.shiftLeft,l.prototype.shiftRight=function(b){var x,q=Ct(b).toJSNumber();if(!f(q))throw new Error(String(q)+" is too large for shifting.");if(q<0)return this.shiftLeft(-q);for(var Q=this;q>=wt;){if(Q.isZero()||Q.isNegative()&&Q.isUnit())return Q;x=at(Q,L),Q=x[1].isNegative()?x[0].prev():x[0],q-=wt-1}return x=at(Q,yt[q]),x[1].isNegative()?x[0].prev():x[0]},A.prototype.shiftRight=m.prototype.shiftRight=l.prototype.shiftRight;function F(b,x,q){x=Ct(x);for(var Q=b.isNegative(),tt=x.isNegative(),X=Q?b.not():b,st=tt?x.not():x,w=0,r=0,c=null,y=null,v=[];!X.isZero()||!st.isZero();)c=at(X,L),w=c[1].toJSNumber(),Q&&(w=L-1-w),y=at(st,L),r=y[1].toJSNumber(),tt&&(r=L-1-r),X=c[0],st=y[0],v.push(q(w,r));for(var T=q(Q?1:0,tt?1:0)!==0?t(-1):t(0),k=v.length-1;k>=0;k-=1)T=T.multiply(L).add(t(v[k]));return T}l.prototype.not=function(){return this.negate().prev()},A.prototype.not=m.prototype.not=l.prototype.not,l.prototype.and=function(b){return F(this,b,function(x,q){return x&q})},A.prototype.and=m.prototype.and=l.prototype.and,l.prototype.or=function(b){return F(this,b,function(x,q){return x|q})},A.prototype.or=m.prototype.or=l.prototype.or,l.prototype.xor=function(b){return F(this,b,function(x,q){return x^q})},A.prototype.xor=m.prototype.xor=l.prototype.xor;var h=1<<30,H=(i&-i)*(i&-i)|h;function M(b){var x=b.value,q=typeof x=="number"?x|h:typeof x=="bigint"?x|BigInt(h):x[0]+x[1]*i|H;return q&-q}function E(b,x){if(x.compareTo(b)<=0){var q=E(b,x.square(x)),Q=q.p,tt=q.e,X=Q.multiply(x);return X.compareTo(b)<=0?{p:X,e:tt*2+1}:{p:Q,e:tt*2}}return{p:t(1),e:0}}l.prototype.bitLength=function(){var b=this;return b.compareTo(t(0))<0&&(b=b.negate().subtract(t(1))),b.compareTo(t(0))===0?t(0):t(E(b,t(2)).e).add(t(1))},A.prototype.bitLength=m.prototype.bitLength=l.prototype.bitLength;function K(b,x){return b=Ct(b),x=Ct(x),b.greater(x)?b:x}function ft(b,x){return b=Ct(b),x=Ct(x),b.lesser(x)?b:x}function ct(b,x){if(b=Ct(b).abs(),x=Ct(x).abs(),b.equals(x))return b;if(b.isZero())return x;if(x.isZero())return b;for(var q=d[1],Q,tt;b.isEven()&&x.isEven();)Q=ft(M(b),M(x)),b=b.divide(Q),x=x.divide(Q),q=q.multiply(Q);for(;b.isEven();)b=b.divide(M(b));do{for(;x.isEven();)x=x.divide(M(x));b.greater(x)&&(tt=x,x=b,b=tt),x=x.subtract(b)}while(!x.isZero());return q.isUnit()?b:b.multiply(q)}function Lt(b,x){return b=Ct(b).abs(),x=Ct(x).abs(),b.divide(ct(b,x)).multiply(x)}function Nt(b,x,q){b=Ct(b),x=Ct(x);var Q=q||Math.random,tt=ft(b,x),X=K(b,x),st=X.subtract(tt).add(1);if(st.isSmall)return tt.add(Math.floor(Q()*st));for(var w=mt(st,i).value,r=[],c=!0,y=0;y<w.length;y++){var v=c?w[y]+(y+1<w.length?w[y+1]/i:0):i,T=O(Q()*v);r.push(T),T<w[y]&&(c=!1)}return tt.add(d.fromArray(r,i,!1))}var Tt=function(b,x,q,Q){q=q||u,b=String(b),Q||(b=b.toLowerCase(),q=q.toLowerCase());var tt=b.length,X,st=Math.abs(x),w={};for(X=0;X<q.length;X++)w[q[X]]=X;for(X=0;X<tt;X++){var r=b[X];if(r!=="-"&&r in w&&w[r]>=st){if(r==="1"&&st===1)continue;throw new Error(r+" is not a valid digit in base "+x+".")}}x=Ct(x);var c=[],y=b[0]==="-";for(X=y?1:0;X<b.length;X++){var r=b[X];if(r in w)c.push(Ct(w[r]));else if(r==="<"){var v=X;do X++;while(b[X]!==">"&&X<b.length);c.push(Ct(b.slice(v+1,X)))}else throw new Error(r+" is not a valid character")}return bt(c,x,y)};function bt(b,x,q){var Q=d[0],tt=d[1],X;for(X=b.length-1;X>=0;X--)Q=Q.add(b[X].times(tt)),tt=tt.times(x);return q?Q.negate():Q}function St(b,x){return x=x||u,b<x.length?x[b]:"<"+b+">"}function mt(b,x){if(x=t(x),x.isZero()){if(b.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(x.equals(-1)){if(b.isZero())return{value:[0],isNegative:!1};if(b.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-b.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var q=Array.apply(null,Array(b.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return q.unshift([1]),{value:[].concat.apply([],q),isNegative:!1}}var Q=!1;if(b.isNegative()&&x.isPositive()&&(Q=!0,b=b.abs()),x.isUnit())return b.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(b.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:Q};for(var tt=[],X=b,st;X.isNegative()||X.compareAbs(x)>=0;){st=X.divmod(x),X=st.quotient;var w=st.remainder;w.isNegative()&&(w=x.minus(w).abs(),X=X.next()),tt.push(w.toJSNumber())}return tt.push(X.toJSNumber()),{value:tt.reverse(),isNegative:Q}}function Et(b,x,q){var Q=mt(b,x);return(Q.isNegative?"-":"")+Q.value.map(function(tt){return St(tt,q)}).join("")}l.prototype.toArray=function(b){return mt(this,b)},m.prototype.toArray=function(b){return mt(this,b)},A.prototype.toArray=function(b){return mt(this,b)},l.prototype.toString=function(b,x){if(b===n&&(b=10),b!==10)return Et(this,b,x);for(var q=this.value,Q=q.length,tt=String(q[--Q]),X="0000000",st;--Q>=0;)st=String(q[Q]),tt+=X.slice(st.length)+st;var w=this.sign?"-":"";return w+tt},m.prototype.toString=function(b,x){return b===n&&(b=10),b!=10?Et(this,b,x):String(this.value)},A.prototype.toString=m.prototype.toString,A.prototype.toJSON=l.prototype.toJSON=m.prototype.toJSON=function(){return this.toString()},l.prototype.valueOf=function(){return parseInt(this.toString(),10)},l.prototype.toJSNumber=l.prototype.valueOf,m.prototype.valueOf=function(){return this.value},m.prototype.toJSNumber=m.prototype.valueOf,A.prototype.valueOf=A.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function Bt(b){if(p(+b)){var x=+b;if(x===O(x))return _?new A(BigInt(x)):new m(x);throw new Error("Invalid integer: "+b)}var q=b[0]==="-";q&&(b=b.slice(1));var Q=b.split(/e/i);if(Q.length>2)throw new Error("Invalid integer: "+Q.join("e"));if(Q.length===2){var tt=Q[1];if(tt[0]==="+"&&(tt=tt.slice(1)),tt=+tt,tt!==O(tt)||!p(tt))throw new Error("Invalid integer: "+tt+" is not a valid exponent.");var X=Q[0],st=X.indexOf(".");if(st>=0&&(tt-=X.length-st-1,X=X.slice(0,st)+X.slice(st+1)),tt<0)throw new Error("Cannot include negative exponent part for integers");X+=new Array(tt+1).join("0"),b=X}var w=/^([0-9][0-9]*)$/.test(b);if(!w)throw new Error("Invalid integer: "+b);if(_)return new A(BigInt(q?"-"+b:b));for(var r=[],c=b.length,y=o,v=c-y;c>0;)r.push(+b.slice(v,c)),v-=y,v<0&&(v=0),c-=y;return C(r),new l(r,q)}function Pt(b){if(_)return new A(BigInt(b));if(p(b)){if(b!==O(b))throw new Error(b+" is not an integer.");return new m(b)}return Bt(b.toString())}function Ct(b){return typeof b=="number"?Pt(b):typeof b=="string"?Bt(b):typeof b=="bigint"?new A(b):b}for(var Ht=0;Ht<1e3;Ht++)d[Ht]=Ct(Ht),Ht>0&&(d[-Ht]=Ct(-Ht));return d.one=d[1],d.zero=d[0],d.minusOne=d[-1],d.max=K,d.min=ft,d.gcd=ct,d.lcm=Lt,d.isInstance=function(b){return b instanceof l||b instanceof m||b instanceof A},d.randBetween=Nt,d.fromArray=function(b,x,q){return bt(b.map(Ct),Ct(x||10),q)},d}();e.hasOwnProperty("exports")&&(e.exports=t)})(rn);var lt=rn.exports;function Uc(e,t){return typeof e=="string"&&e.slice(0,2)=="0x"?lt(e.slice(2),16):lt(e,t)}const jh=Uc;function Yh(e,t){return lt.fromArray(e,t)}function Vh(e){return lt(e).bitLength()}function Kh(e){return lt(e).isNegative()}function Zh(e){return lt(e).isZero()}function Dc(e,t){return lt(e).shiftLeft(t)}function Gc(e,t){return lt(e).shiftRight(t)}const Xh=Dc,Jh=Gc;function t2(e){return lt(e).isOdd()}function e2(e){let t=lt(e);const n=[];for(;t.gt(lt.zero);){if(t.isOdd()){const i=2-t.mod(4).toJSNumber();n.push(i),t=t.minus(i)}else n.push(0);t=t.shiftRight(1)}return n}function n2(e){let t=lt(e);const n=[];for(;t.gt(lt.zero);)t.isOdd()?n.push(1):n.push(0),t=t.shiftRight(1);return n}function i2(e){if(!e.lt(lt("9007199254740992",10)))throw new Error("Number too big");return e.toJSNumber()}function o2(e,t){return lt(e).toArray(t)}function r2(e,t){return lt(e).add(lt(t))}function a2(e,t){return lt(e).minus(lt(t))}function s2(e){return lt.zero.minus(lt(e))}function c2(e,t){return lt(e).times(lt(t))}function l2(e){return lt(e).square()}function u2(e,t){return lt(e).pow(lt(t))}function f2(e,t){return lt(e).pow(lt(t))}function d2(e){return lt(e).abs()}function h2(e,t){return lt(e).divide(lt(t))}function _2(e,t){return lt(e).mod(lt(t))}function p2(e,t){return lt(e).eq(lt(t))}function g2(e,t){return lt(e).neq(lt(t))}function m2(e,t){return lt(e).lt(lt(t))}function y2(e,t){return lt(e).gt(lt(t))}function A2(e,t){return lt(e).leq(lt(t))}function I2(e,t){return lt(e).geq(lt(t))}function L2(e,t){return lt(e).and(lt(t))}function E2(e,t){return lt(e).or(lt(t))}function w2(e,t){return lt(e).xor(lt(t))}function S2(e,t){return!lt(e).isZero()&&!lt(t).isZero()}function v2(e,t){return!lt(e).isZero()||!lt(t).isZero()}function C2(e){return lt(e).isZero()}var b2=Object.freeze({__proto__:null,fromString:Uc,e:jh,fromArray:Yh,bitLength:Vh,isNegative:Kh,isZero:Zh,shiftLeft:Dc,shiftRight:Gc,shl:Xh,shr:Jh,isOdd:t2,naf:e2,bits:n2,toNumber:i2,toArray:o2,add:r2,sub:a2,neg:s2,mul:c2,square:l2,pow:u2,exp:f2,abs:d2,div:h2,mod:_2,eq:p2,neq:g2,lt:m2,gt:y2,leq:A2,geq:I2,band:L2,bor:E2,bxor:w2,land:S2,lor:v2,lnot:C2});const F2=typeof BigInt=="function";let se={};F2?Object.assign(se,$h):Object.assign(se,b2),se.toRprLE=function(t,n,i,o){const a="0000000"+i.toString(16),s=new Uint32Array(t.buffer,n,o/4),u=((a.length-7)*4-1>>5)+1;for(let _=0;_<u;_++)s[_]=parseInt(a.substring(a.length-8*_-8,a.length-8*_),16);for(let _=u;_<s.length;_++)s[_]=0;for(let _=s.length*4;_<o;_++)t[_]=se.toNumber(se.band(se.shiftRight(i,_*8),255))},se.toRprBE=function(t,n,i,o){const a="0000000"+i.toString(16),s=new DataView(t.buffer,t.byteOffset+n,o),u=((a.length-7)*4-1>>5)+1;for(let _=0;_<u;_++)s.setUint32(o-_*4-4,parseInt(a.substring(a.length-8*_-8,a.length-8*_),16),!1);for(let _=0;_<o/4-u;_++)s[_]=0},se.fromRprLE=function(t,n,i){i=i||t.byteLength,n=n||0;const o=new Uint32Array(t.buffer,n,i/4),a=new Array(i/4);return o.forEach((s,u)=>a[a.length-u-1]=s.toString(16).padStart(8,"0")),se.fromString(a.join(""),16)},se.fromRprBE=function(t,n,i){i=i||t.byteLength,n=n||0;const o=new DataView(t.buffer,t.byteOffset+n,i),a=new Array(i/4);for(let s=0;s<i/4;s++)a[s]=o.getUint32(s*4,!1).toString(16).padStart(8,"0");return se.fromString(a.join(""),16)},se.toString=function(t,n){return t.toString(n)},se.toLEBuff=function(t){const n=new Uint8Array(Math.floor((se.bitLength(t)-1)/8)+1);return se.toRprLE(n,0,t,n.byteLength),n},se.zero=se.e(0),se.one=se.e(1);let{toRprLE:B2,toRprBE:T2,fromRprLE:kc,fromRprBE:R2,toString:O2,toLEBuff:P2,zero:x2,one:N2,fromString:M2,e:Gi,fromArray:U2,bitLength:Wc,isNegative:D2,isZero:G2,shiftLeft:k2,shiftRight:W2,shl:q2,shr:Q2,isOdd:H2,naf:z2,bits:$2,toNumber:j2,toArray:Y2,add:V2,sub:K2,neg:Z2,mul:X2,square:J2,pow:t_,exp:e_,abs:n_,div:i_,mod:o_,eq:r_,neq:a_,lt:s_,gt:c_,leq:l_,geq:u_,band:f_,bor:d_,bxor:h_,land:__,lor:p_,lnot:g_}=se;var m_=Object.freeze({__proto__:null,toRprLE:B2,toRprBE:T2,fromRprLE:kc,fromRprBE:R2,toString:O2,toLEBuff:P2,zero:x2,one:N2,fromString:M2,e:Gi,fromArray:U2,bitLength:Wc,isNegative:D2,isZero:G2,shiftLeft:k2,shiftRight:W2,shl:q2,shr:Q2,isOdd:H2,naf:z2,bits:$2,toNumber:j2,toArray:Y2,add:V2,sub:K2,neg:Z2,mul:X2,square:J2,pow:t_,exp:e_,abs:n_,div:i_,mod:o_,eq:r_,neq:a_,lt:s_,gt:c_,leq:l_,geq:u_,band:f_,bor:d_,bxor:h_,land:__,lor:p_,lnot:g_});const y_=[];for(let e=0;e<256;e++)y_[e]=A_(e,8);function A_(e,t){let n=0,i=e;for(let o=0;o<t;o++)n<<=1,n=n|i&1,i>>=1;return n}function I_(e){return Buffer.from(crypto.getRandomValues(new Uint8Array(e)))}function L_(e){return crypto.getRandomValues(e)}var mo={randomBytes:I_,randomFillSync:L_},gn={};const qc=rn.exports;gn.bigInt2BytesLE=function(t,n){const i=Array(n);let o=qc(t);for(let a=0;a<n;a++)i[a]=o.and(255).toJSNumber(),o=o.shiftRight(8);return i},gn.bigInt2U32LE=function(t,n){const i=Array(n);let o=qc(t);for(let a=0;a<n;a++)i[a]=o.and(4294967295).toJSNumber(),o=o.shiftRight(32);return i},gn.isOcamNum=function(e){return!(!Array.isArray(e)||e.length!=3||typeof e[0]!="number"||typeof e[1]!="number"||!Array.isArray(e[2]))};const E_=gn;var w_=function(t,n,i){const o=i||"int";if(t.modules[o])return o;t.modules[o]={};const a=n*2,s=n*8;t.alloc(s,E_.bigInt2BytesLE(1,s));function u(){const B=t.addFunction(o+"_copy");B.addParam("px","i32"),B.addParam("pr","i32");const g=B.getCodeBuilder();for(let I=0;I<n;I++)B.addCode(g.i64_store(g.getLocal("pr"),I*8,g.i64_load(g.getLocal("px"),I*8)))}function _(){const B=t.addFunction(o+"_zero");B.addParam("pr","i32");const g=B.getCodeBuilder();for(let I=0;I<n;I++)B.addCode(g.i64_store(g.getLocal("pr"),I*8,g.i64_const(0)))}function d(){const B=t.addFunction(o+"_one");B.addParam("pr","i32");const g=B.getCodeBuilder();B.addCode(g.i64_store(g.getLocal("pr"),0,g.i64_const(1)));for(let I=1;I<n;I++)B.addCode(g.i64_store(g.getLocal("pr"),I*8,g.i64_const(0)))}function l(){const B=t.addFunction(o+"_isZero");B.addParam("px","i32"),B.setReturnType("i32");const g=B.getCodeBuilder();function I(D){return D==0?g.ret(g.i64_eqz(g.i64_load(g.getLocal("px")))):g.if(g.i64_eqz(g.i64_load(g.getLocal("px"),D*8)),I(D-1),g.ret(g.i32_const(0)))}B.addCode(I(n-1)),B.addCode(g.ret(g.i32_const(0)))}function m(){const B=t.addFunction(o+"_eq");B.addParam("px","i32"),B.addParam("py","i32"),B.setReturnType("i32");const g=B.getCodeBuilder();function I(D){return D==0?g.ret(g.i64_eq(g.i64_load(g.getLocal("px")),g.i64_load(g.getLocal("py")))):g.if(g.i64_eq(g.i64_load(g.getLocal("px"),D*8),g.i64_load(g.getLocal("py"),D*8)),I(D-1),g.ret(g.i32_const(0)))}B.addCode(I(n-1)),B.addCode(g.ret(g.i32_const(0)))}function A(){const B=t.addFunction(o+"_gte");B.addParam("px","i32"),B.addParam("py","i32"),B.setReturnType("i32");const g=B.getCodeBuilder();function I(D){return D==0?g.ret(g.i64_ge_u(g.i64_load(g.getLocal("px")),g.i64_load(g.getLocal("py")))):g.if(g.i64_lt_u(g.i64_load(g.getLocal("px"),D*8),g.i64_load(g.getLocal("py"),D*8)),g.ret(g.i32_const(0)),g.if(g.i64_gt_u(g.i64_load(g.getLocal("px"),D*8),g.i64_load(g.getLocal("py"),D*8)),g.ret(g.i32_const(1)),I(D-1)))}B.addCode(I(n-1)),B.addCode(g.ret(g.i32_const(0)))}function p(){const B=t.addFunction(o+"_add");B.addParam("x","i32"),B.addParam("y","i32"),B.addParam("r","i32"),B.setReturnType("i32"),B.addLocal("c","i64");const g=B.getCodeBuilder();B.addCode(g.setLocal("c",g.i64_add(g.i64_load32_u(g.getLocal("x")),g.i64_load32_u(g.getLocal("y"))))),B.addCode(g.i64_store32(g.getLocal("r"),g.getLocal("c")));for(let I=1;I<a;I++)B.addCode(g.setLocal("c",g.i64_add(g.i64_add(g.i64_load32_u(g.getLocal("x"),4*I),g.i64_load32_u(g.getLocal("y"),4*I)),g.i64_shr_u(g.getLocal("c"),g.i64_const(32))))),B.addCode(g.i64_store32(g.getLocal("r"),I*4,g.getLocal("c")));B.addCode(g.i32_wrap_i64(g.i64_shr_u(g.getLocal("c"),g.i64_const(32))))}function R(){const B=t.addFunction(o+"_sub");B.addParam("x","i32"),B.addParam("y","i32"),B.addParam("r","i32"),B.setReturnType("i32"),B.addLocal("c","i64");const g=B.getCodeBuilder();B.addCode(g.setLocal("c",g.i64_sub(g.i64_load32_u(g.getLocal("x")),g.i64_load32_u(g.getLocal("y"))))),B.addCode(g.i64_store32(g.getLocal("r"),g.i64_and(g.getLocal("c"),g.i64_const("0xFFFFFFFF"))));for(let I=1;I<a;I++)B.addCode(g.setLocal("c",g.i64_add(g.i64_sub(g.i64_load32_u(g.getLocal("x"),4*I),g.i64_load32_u(g.getLocal("y"),4*I)),g.i64_shr_s(g.getLocal("c"),g.i64_const(32))))),B.addCode(g.i64_store32(g.getLocal("r"),I*4,g.i64_and(g.getLocal("c"),g.i64_const("0xFFFFFFFF"))));B.addCode(g.i32_wrap_i64(g.i64_shr_s(g.getLocal("c"),g.i64_const(32))))}function P(){const B=t.addFunction(o+"_mul");B.addParam("x","i32"),B.addParam("y","i32"),B.addParam("r","i32"),B.addLocal("c0","i64"),B.addLocal("c1","i64");for(let S=0;S<a;S++)B.addLocal("x"+S,"i64"),B.addLocal("y"+S,"i64");const g=B.getCodeBuilder(),I=[],D=[];function z(S,W){let J,it;return I[S]?J=g.getLocal("x"+S):(J=g.teeLocal("x"+S,g.i64_load32_u(g.getLocal("x"),S*4)),I[S]=!0),D[W]?it=g.getLocal("y"+W):(it=g.teeLocal("y"+W,g.i64_load32_u(g.getLocal("y"),W*4)),D[W]=!0),g.i64_mul(J,it)}let U="c0",N="c1";for(let S=0;S<a*2-1;S++){for(let W=Math.max(0,S-a+1);W<=S&&W<a;W++){const J=S-W;B.addCode(g.setLocal(U,g.i64_add(g.i64_and(g.getLocal(U),g.i64_const(4294967295)),z(W,J)))),B.addCode(g.setLocal(N,g.i64_add(g.getLocal(N),g.i64_shr_u(g.getLocal(U),g.i64_const(32)))))}B.addCode(g.i64_store32(g.getLocal("r"),S*4,g.getLocal(U))),[U,N]=[N,U],B.addCode(g.setLocal(N,g.i64_shr_u(g.getLocal(U),g.i64_const(32))))}B.addCode(g.i64_store32(g.getLocal("r"),a*4*2-4,g.getLocal(U)))}function C(){const B=t.addFunction(o+"_square");B.addParam("x","i32"),B.addParam("r","i32"),B.addLocal("c0","i64"),B.addLocal("c1","i64"),B.addLocal("c0_old","i64"),B.addLocal("c1_old","i64");for(let W=0;W<a;W++)B.addLocal("x"+W,"i64");const g=B.getCodeBuilder(),I=[];function D(W,J){let it,ot;return I[W]?it=g.getLocal("x"+W):(it=g.teeLocal("x"+W,g.i64_load32_u(g.getLocal("x"),W*4)),I[W]=!0),I[J]?ot=g.getLocal("x"+J):(ot=g.teeLocal("x"+J,g.i64_load32_u(g.getLocal("x"),J*4)),I[J]=!0),g.i64_mul(it,ot)}let z="c0",U="c1",N="c0_old",S="c1_old";for(let W=0;W<a*2-1;W++){B.addCode(g.setLocal(z,g.i64_const(0)),g.setLocal(U,g.i64_const(0)));for(let J=Math.max(0,W-a+1);J<W+1>>1&&J<a;J++){const it=W-J;B.addCode(g.setLocal(z,g.i64_add(g.i64_and(g.getLocal(z),g.i64_const(4294967295)),D(J,it)))),B.addCode(g.setLocal(U,g.i64_add(g.getLocal(U),g.i64_shr_u(g.getLocal(z),g.i64_const(32)))))}B.addCode(g.setLocal(z,g.i64_shl(g.i64_and(g.getLocal(z),g.i64_const(4294967295)),g.i64_const(1)))),B.addCode(g.setLocal(U,g.i64_add(g.i64_shl(g.getLocal(U),g.i64_const(1)),g.i64_shr_u(g.getLocal(z),g.i64_const(32))))),W%2==0&&(B.addCode(g.setLocal(z,g.i64_add(g.i64_and(g.getLocal(z),g.i64_const(4294967295)),D(W>>1,W>>1)))),B.addCode(g.setLocal(U,g.i64_add(g.getLocal(U),g.i64_shr_u(g.getLocal(z),g.i64_const(32)))))),W>0&&(B.addCode(g.setLocal(z,g.i64_add(g.i64_and(g.getLocal(z),g.i64_const(4294967295)),g.i64_and(g.getLocal(N),g.i64_const(4294967295))))),B.addCode(g.setLocal(U,g.i64_add(g.i64_add(g.getLocal(U),g.i64_shr_u(g.getLocal(z),g.i64_const(32))),g.getLocal(S))))),B.addCode(g.i64_store32(g.getLocal("r"),W*4,g.getLocal(z))),B.addCode(g.setLocal(N,g.getLocal(U)),g.setLocal(S,g.i64_shr_u(g.getLocal(N),g.i64_const(32))))}B.addCode(g.i64_store32(g.getLocal("r"),a*4*2-4,g.getLocal(N)))}function G(){const B=t.addFunction(o+"_squareOld");B.addParam("x","i32"),B.addParam("r","i32");const g=B.getCodeBuilder();B.addCode(g.call(o+"_mul",g.getLocal("x"),g.getLocal("x"),g.getLocal("r")))}function O(){const B=t.addFunction(o+"__mul1");B.addParam("px","i32"),B.addParam("y","i64"),B.addParam("pr","i32"),B.addLocal("c","i64");const g=B.getCodeBuilder();B.addCode(g.setLocal("c",g.i64_mul(g.i64_load32_u(g.getLocal("px"),0,0),g.getLocal("y")))),B.addCode(g.i64_store32(g.getLocal("pr"),0,0,g.getLocal("c")));for(let I=1;I<a;I++)B.addCode(g.setLocal("c",g.i64_add(g.i64_mul(g.i64_load32_u(g.getLocal("px"),4*I,0),g.getLocal("y")),g.i64_shr_u(g.getLocal("c"),g.i64_const(32))))),B.addCode(g.i64_store32(g.getLocal("pr"),I*4,0,g.getLocal("c")))}function Z(){const B=t.addFunction(o+"__add1");B.addParam("x","i32"),B.addParam("y","i64"),B.addLocal("c","i64"),B.addLocal("px","i32");const g=B.getCodeBuilder();B.addCode(g.setLocal("px",g.getLocal("x"))),B.addCode(g.setLocal("c",g.i64_add(g.i64_load32_u(g.getLocal("px"),0,0),g.getLocal("y")))),B.addCode(g.i64_store32(g.getLocal("px"),0,0,g.getLocal("c"))),B.addCode(g.setLocal("c",g.i64_shr_u(g.getLocal("c"),g.i64_const(32)))),B.addCode(g.block(g.loop(g.br_if(1,g.i64_eqz(g.getLocal("c"))),g.setLocal("px",g.i32_add(g.getLocal("px"),g.i32_const(4))),g.setLocal("c",g.i64_add(g.i64_load32_u(g.getLocal("px"),0,0),g.getLocal("c"))),g.i64_store32(g.getLocal("px"),0,0,g.getLocal("c")),g.setLocal("c",g.i64_shr_u(g.getLocal("c"),g.i64_const(32))),g.br(0))))}function $(){O(),Z();const B=t.addFunction(o+"_div");B.addParam("x","i32"),B.addParam("y","i32"),B.addParam("c","i32"),B.addParam("r","i32"),B.addLocal("rr","i32"),B.addLocal("cc","i32"),B.addLocal("eX","i32"),B.addLocal("eY","i32"),B.addLocal("sy","i64"),B.addLocal("sx","i64"),B.addLocal("ec","i32");const g=B.getCodeBuilder(),I=g.i32_const(t.alloc(s)),D=g.i32_const(t.alloc(s)),z=g.i32_const(t.alloc(s)),U=g.getLocal("cc"),N=g.getLocal("rr"),S=t.alloc(s*2),W=g.i32_const(S),J=g.i32_const(S+s);B.addCode(g.if(g.getLocal("c"),g.setLocal("cc",g.getLocal("c")),g.setLocal("cc",D))),B.addCode(g.if(g.getLocal("r"),g.setLocal("rr",g.getLocal("r")),g.setLocal("rr",z))),B.addCode(g.call(o+"_copy",g.getLocal("x"),N)),B.addCode(g.call(o+"_copy",g.getLocal("y"),I)),B.addCode(g.call(o+"_zero",U)),B.addCode(g.call(o+"_zero",W)),B.addCode(g.setLocal("eX",g.i32_const(s-1))),B.addCode(g.setLocal("eY",g.i32_const(s-1))),B.addCode(g.block(g.loop(g.br_if(1,g.i32_or(g.i32_load8_u(g.i32_add(I,g.getLocal("eY")),0,0),g.i32_eq(g.getLocal("eY"),g.i32_const(3)))),g.setLocal("eY",g.i32_sub(g.getLocal("eY"),g.i32_const(1))),g.br(0)))),B.addCode(g.setLocal("sy",g.i64_add(g.i64_load32_u(g.i32_sub(g.i32_add(I,g.getLocal("eY")),g.i32_const(3)),0,0),g.i64_const(1)))),B.addCode(g.if(g.i64_eq(g.getLocal("sy"),g.i64_const(1)),g.drop(g.i64_div_u(g.i64_const(0),g.i64_const(0))))),B.addCode(g.block(g.loop(g.block(g.loop(g.br_if(1,g.i32_or(g.i32_load8_u(g.i32_add(N,g.getLocal("eX")),0,0),g.i32_eq(g.getLocal("eX"),g.i32_const(7)))),g.setLocal("eX",g.i32_sub(g.getLocal("eX"),g.i32_const(1))),g.br(0))),g.setLocal("sx",g.i64_load(g.i32_sub(g.i32_add(N,g.getLocal("eX")),g.i32_const(7)),0,0)),g.setLocal("sx",g.i64_div_u(g.getLocal("sx"),g.getLocal("sy"))),g.setLocal("ec",g.i32_sub(g.i32_sub(g.getLocal("eX"),g.getLocal("eY")),g.i32_const(4))),g.block(g.loop(g.br_if(1,g.i32_and(g.i64_eqz(g.i64_and(g.getLocal("sx"),g.i64_const("0xFFFFFFFF00000000"))),g.i32_ge_s(g.getLocal("ec"),g.i32_const(0)))),g.setLocal("sx",g.i64_shr_u(g.getLocal("sx"),g.i64_const(8))),g.setLocal("ec",g.i32_add(g.getLocal("ec"),g.i32_const(1))),g.br(0))),g.if(g.i64_eqz(g.getLocal("sx")),[...g.br_if(2,g.i32_eqz(g.call(o+"_gte",N,I))),...g.setLocal("sx",g.i64_const(1)),...g.setLocal("ec",g.i32_const(0))]),g.call(o+"__mul1",I,g.getLocal("sx"),J),g.drop(g.call(o+"_sub",N,g.i32_sub(J,g.getLocal("ec")),N)),g.call(o+"__add1",g.i32_add(U,g.getLocal("ec")),g.getLocal("sx")),g.br(0))))}function Y(){const B=t.addFunction(o+"_inverseMod");B.addParam("px","i32"),B.addParam("pm","i32"),B.addParam("pr","i32"),B.addLocal("t","i32"),B.addLocal("newt","i32"),B.addLocal("r","i32"),B.addLocal("qq","i32"),B.addLocal("qr","i32"),B.addLocal("newr","i32"),B.addLocal("swp","i32"),B.addLocal("x","i32"),B.addLocal("signt","i32"),B.addLocal("signnewt","i32"),B.addLocal("signx","i32");const g=B.getCodeBuilder(),I=g.i32_const(t.alloc(s)),D=g.i32_const(t.alloc(s)),z=g.i32_const(t.alloc(s)),U=g.i32_const(t.alloc(s)),N=g.i32_const(t.alloc(s)),S=g.i32_const(t.alloc(s)),W=g.i32_const(t.alloc(s*2)),J=g.i32_const(t.alloc(s));B.addCode(g.setLocal("t",I),g.call(o+"_zero",I),g.setLocal("signt",g.i32_const(0))),B.addCode(g.setLocal("r",D),g.call(o+"_copy",g.getLocal("pm"),D)),B.addCode(g.setLocal("newt",z),g.call(o+"_one",z),g.setLocal("signnewt",g.i32_const(0))),B.addCode(g.setLocal("newr",U),g.call(o+"_copy",g.getLocal("px"),U)),B.addCode(g.setLocal("qq",N)),B.addCode(g.setLocal("qr",S)),B.addCode(g.setLocal("x",J)),B.addCode(g.block(g.loop(g.br_if(1,g.call(o+"_isZero",g.getLocal("newr"))),g.call(o+"_div",g.getLocal("r"),g.getLocal("newr"),g.getLocal("qq"),g.getLocal("qr")),g.call(o+"_mul",g.getLocal("qq"),g.getLocal("newt"),W),g.if(g.getLocal("signt"),g.if(g.getLocal("signnewt"),g.if(g.call(o+"_gte",W,g.getLocal("t")),[...g.drop(g.call(o+"_sub",W,g.getLocal("t"),g.getLocal("x"))),...g.setLocal("signx",g.i32_const(0))],[...g.drop(g.call(o+"_sub",g.getLocal("t"),W,g.getLocal("x"))),...g.setLocal("signx",g.i32_const(1))]),[...g.drop(g.call(o+"_add",W,g.getLocal("t"),g.getLocal("x"))),...g.setLocal("signx",g.i32_const(1))]),g.if(g.getLocal("signnewt"),[...g.drop(g.call(o+"_add",W,g.getLocal("t"),g.getLocal("x"))),...g.setLocal("signx",g.i32_const(0))],g.if(g.call(o+"_gte",g.getLocal("t"),W),[...g.drop(g.call(o+"_sub",g.getLocal("t"),W,g.getLocal("x"))),...g.setLocal("signx",g.i32_const(0))],[...g.drop(g.call(o+"_sub",W,g.getLocal("t"),g.getLocal("x"))),...g.setLocal("signx",g.i32_const(1))]))),g.setLocal("swp",g.getLocal("t")),g.setLocal("t",g.getLocal("newt")),g.setLocal("newt",g.getLocal("x")),g.setLocal("x",g.getLocal("swp")),g.setLocal("signt",g.getLocal("signnewt")),g.setLocal("signnewt",g.getLocal("signx")),g.setLocal("swp",g.getLocal("r")),g.setLocal("r",g.getLocal("newr")),g.setLocal("newr",g.getLocal("qr")),g.setLocal("qr",g.getLocal("swp")),g.br(0)))),B.addCode(g.if(g.getLocal("signt"),g.drop(g.call(o+"_sub",g.getLocal("pm"),g.getLocal("t"),g.getLocal("pr"))),g.call(o+"_copy",g.getLocal("t"),g.getLocal("pr"))))}return u(),_(),l(),d(),m(),A(),p(),R(),P(),C(),G(),$(),Y(),t.exportFunction(o+"_copy"),t.exportFunction(o+"_zero"),t.exportFunction(o+"_one"),t.exportFunction(o+"_isZero"),t.exportFunction(o+"_eq"),t.exportFunction(o+"_gte"),t.exportFunction(o+"_add"),t.exportFunction(o+"_sub"),t.exportFunction(o+"_mul"),t.exportFunction(o+"_square"),t.exportFunction(o+"_squareOld"),t.exportFunction(o+"_div"),t.exportFunction(o+"_inverseMod"),o},Or=function(t,n,i,o,a,s,u){const _=t.addFunction(n);_.addParam("base","i32"),_.addParam("scalar","i32"),_.addParam("scalarLength","i32"),_.addParam("r","i32"),_.addLocal("i","i32"),_.addLocal("b","i32");const d=_.getCodeBuilder(),l=d.i32_const(t.alloc(i));_.addCode(d.if(d.i32_eqz(d.getLocal("scalarLength")),[...d.call(u,d.getLocal("r")),...d.ret([])])),_.addCode(d.call(s,d.getLocal("base"),l)),_.addCode(d.call(u,d.getLocal("r"))),_.addCode(d.setLocal("i",d.getLocal("scalarLength"))),_.addCode(d.block(d.loop(d.setLocal("i",d.i32_sub(d.getLocal("i"),d.i32_const(1))),d.setLocal("b",d.i32_load8_u(d.i32_add(d.getLocal("scalar"),d.getLocal("i")))),...m(),d.br_if(1,d.i32_eqz(d.getLocal("i"))),d.br(0))));function m(){const A=[];for(let p=0;p<8;p++)A.push(...d.call(a,d.getLocal("r"),d.getLocal("r")),...d.if(d.i32_ge_u(d.getLocal("b"),d.i32_const(128>>p)),[...d.setLocal("b",d.i32_sub(d.getLocal("b"),d.i32_const(128>>p))),...d.call(o,d.getLocal("r"),l,d.getLocal("r"))]));return A}},Pr=S_;function S_(e,t){const n=e.modules[t].n64*8,i=e.addFunction(t+"_batchInverse");i.addParam("pIn","i32"),i.addParam("inStep","i32"),i.addParam("n","i32"),i.addParam("pOut","i32"),i.addParam("outStep","i32"),i.addLocal("itAux","i32"),i.addLocal("itIn","i32"),i.addLocal("itOut","i32"),i.addLocal("i","i32");const o=i.getCodeBuilder(),a=o.i32_const(e.alloc(n));i.addCode(o.setLocal("itAux",o.i32_load(o.i32_const(0))),o.i32_store(o.i32_const(0),o.i32_add(o.getLocal("itAux"),o.i32_mul(o.i32_add(o.getLocal("n"),o.i32_const(1)),o.i32_const(n))))),i.addCode(o.call(t+"_one",o.getLocal("itAux")),o.setLocal("itIn",o.getLocal("pIn")),o.setLocal("itAux",o.i32_add(o.getLocal("itAux"),o.i32_const(n))),o.setLocal("i",o.i32_const(0)),o.block(o.loop(o.br_if(1,o.i32_eq(o.getLocal("i"),o.getLocal("n"))),o.if(o.call(t+"_isZero",o.getLocal("itIn")),o.call(t+"_copy",o.i32_sub(o.getLocal("itAux"),o.i32_const(n)),o.getLocal("itAux")),o.call(t+"_mul",o.getLocal("itIn"),o.i32_sub(o.getLocal("itAux"),o.i32_const(n)),o.getLocal("itAux"))),o.setLocal("itIn",o.i32_add(o.getLocal("itIn"),o.getLocal("inStep"))),o.setLocal("itAux",o.i32_add(o.getLocal("itAux"),o.i32_const(n))),o.setLocal("i",o.i32_add(o.getLocal("i"),o.i32_const(1))),o.br(0))),o.setLocal("itIn",o.i32_sub(o.getLocal("itIn"),o.getLocal("inStep"))),o.setLocal("itAux",o.i32_sub(o.getLocal("itAux"),o.i32_const(n))),o.setLocal("itOut",o.i32_add(o.getLocal("pOut"),o.i32_mul(o.i32_sub(o.getLocal("n"),o.i32_const(1)),o.getLocal("outStep")))),o.call(t+"_inverse",o.getLocal("itAux"),o.getLocal("itAux")),o.block(o.loop(o.br_if(1,o.i32_eqz(o.getLocal("i"))),o.if(o.call(t+"_isZero",o.getLocal("itIn")),[...o.call(t+"_copy",o.getLocal("itAux"),o.i32_sub(o.getLocal("itAux"),o.i32_const(n))),...o.call(t+"_zero",o.getLocal("itOut"))],[...o.call(t+"_copy",o.i32_sub(o.getLocal("itAux"),o.i32_const(n)),a),...o.call(t+"_mul",o.getLocal("itAux"),o.getLocal("itIn"),o.i32_sub(o.getLocal("itAux"),o.i32_const(n))),...o.call(t+"_mul",o.getLocal("itAux"),a,o.getLocal("itOut"))]),o.setLocal("itIn",o.i32_sub(o.getLocal("itIn"),o.getLocal("inStep"))),o.setLocal("itOut",o.i32_sub(o.getLocal("itOut"),o.getLocal("outStep"))),o.setLocal("itAux",o.i32_sub(o.getLocal("itAux"),o.i32_const(n))),o.setLocal("i",o.i32_sub(o.getLocal("i"),o.i32_const(1))),o.br(0)))),i.addCode(o.i32_store(o.i32_const(0),o.getLocal("itAux")))}var Qc=v_;function v_(e,t,n,i,o,a){typeof a=="undefined"&&(i<o?a=!0:a=!1);const s=e.addFunction(t);s.addParam("pIn","i32"),s.addParam("n","i32"),s.addParam("pOut","i32"),s.addLocal("i","i32"),s.addLocal("itIn","i32"),s.addLocal("itOut","i32");const u=s.getCodeBuilder();a?s.addCode(u.setLocal("itIn",u.i32_add(u.getLocal("pIn"),u.i32_mul(u.i32_sub(u.getLocal("n"),u.i32_const(1)),u.i32_const(i)))),u.setLocal("itOut",u.i32_add(u.getLocal("pOut"),u.i32_mul(u.i32_sub(u.getLocal("n"),u.i32_const(1)),u.i32_const(o)))),u.setLocal("i",u.i32_const(0)),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("i"),u.getLocal("n"))),u.call(n,u.getLocal("itIn"),u.getLocal("itOut")),u.setLocal("itIn",u.i32_sub(u.getLocal("itIn"),u.i32_const(i))),u.setLocal("itOut",u.i32_sub(u.getLocal("itOut"),u.i32_const(o))),u.setLocal("i",u.i32_add(u.getLocal("i"),u.i32_const(1))),u.br(0)))):s.addCode(u.setLocal("itIn",u.getLocal("pIn")),u.setLocal("itOut",u.getLocal("pOut")),u.setLocal("i",u.i32_const(0)),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("i"),u.getLocal("n"))),u.call(n,u.getLocal("itIn"),u.getLocal("itOut")),u.setLocal("itIn",u.i32_add(u.getLocal("itIn"),u.i32_const(i))),u.setLocal("itOut",u.i32_add(u.getLocal("itOut"),u.i32_const(o))),u.setLocal("i",u.i32_add(u.getLocal("i"),u.i32_const(1))),u.br(0))))}var C_=b_;function b_(e,t,n,i,o,a){typeof a=="undefined"&&(i<o?a=!0:a=!1);const s=e.addFunction(t);s.addParam("pIn1","i32"),s.addParam("pIn2","i32"),s.addParam("n","i32"),s.addParam("pOut","i32"),s.addLocal("i","i32"),s.addLocal("itIn1","i32"),s.addLocal("itIn2","i32"),s.addLocal("itOut","i32");const u=s.getCodeBuilder();a?s.addCode(u.setLocal("itIn1",u.i32_add(u.getLocal("pIn1"),u.i32_mul(u.i32_sub(u.getLocal("n"),u.i32_const(1)),u.i32_const(i)))),u.setLocal("itIn2",u.i32_add(u.getLocal("pIn2"),u.i32_mul(u.i32_sub(u.getLocal("n"),u.i32_const(1)),u.i32_const(i)))),u.setLocal("itOut",u.i32_add(u.getLocal("pOut"),u.i32_mul(u.i32_sub(u.getLocal("n"),u.i32_const(1)),u.i32_const(o)))),u.setLocal("i",u.i32_const(0)),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("i"),u.getLocal("n"))),u.call(n,u.getLocal("itIn1"),u.getLocal("itIn2"),u.getLocal("itOut")),u.setLocal("itIn1",u.i32_sub(u.getLocal("itIn1"),u.i32_const(i))),u.setLocal("itIn2",u.i32_sub(u.getLocal("itIn2"),u.i32_const(i))),u.setLocal("itOut",u.i32_sub(u.getLocal("itOut"),u.i32_const(o))),u.setLocal("i",u.i32_add(u.getLocal("i"),u.i32_const(1))),u.br(0)))):s.addCode(u.setLocal("itIn1",u.getLocal("pIn1")),u.setLocal("itIn2",u.getLocal("pIn2")),u.setLocal("itOut",u.getLocal("pOut")),u.setLocal("i",u.i32_const(0)),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("i"),u.getLocal("n"))),u.call(n,u.getLocal("itIn1"),u.getLocal("itIn2"),u.getLocal("itOut")),u.setLocal("itIn1",u.i32_add(u.getLocal("itIn1"),u.i32_const(i))),u.setLocal("itIn2",u.i32_add(u.getLocal("itIn2"),u.i32_const(i))),u.setLocal("itOut",u.i32_add(u.getLocal("itOut"),u.i32_const(o))),u.setLocal("i",u.i32_add(u.getLocal("i"),u.i32_const(1))),u.br(0))))}const be=rn.exports,F_=w_,Ye=gn,B_=Or,T_=Pr,xr=Qc,Nr=C_;var Mr=function(t,n,i,o){const a=be(n),s=Math.floor((a.minus(1).bitLength()-1)/64)+1,u=s*2,_=s*8,d=i||"f1m";if(t.modules[d])return d;const l=F_(t,s,o),m=t.alloc(_,Ye.bigInt2BytesLE(a,_));t.alloc(Ye.bigInt2BytesLE(be.one.shiftLeft(s*64).mod(a),_));const A=t.alloc(Ye.bigInt2BytesLE(be.one.shiftLeft(s*64).square().mod(a),_)),p=t.alloc(Ye.bigInt2BytesLE(be.one.shiftLeft(s*64).mod(a),_)),R=t.alloc(Ye.bigInt2BytesLE(be.zero,_)),P=a.minus(be.one),C=P.shiftRight(1),G=t.alloc(_,Ye.bigInt2BytesLE(C,_)),O=C.add(be.one),Z=t.alloc(_,Ye.bigInt2BytesLE(O,_));t.modules[d]={pq:m,pR2:A,n64:s,q:a,pOne:p,pZero:R,pePlusOne:Z};function $(){const M=t.addFunction(d+"_one");M.addParam("pr","i32");const E=M.getCodeBuilder();M.addCode(E.call(l+"_copy",E.i32_const(p),E.getLocal("pr")))}function Y(){const M=t.addFunction(d+"_add");M.addParam("x","i32"),M.addParam("y","i32"),M.addParam("r","i32");const E=M.getCodeBuilder();M.addCode(E.if(E.call(l+"_add",E.getLocal("x"),E.getLocal("y"),E.getLocal("r")),E.drop(E.call(l+"_sub",E.getLocal("r"),E.i32_const(m),E.getLocal("r"))),E.if(E.call(l+"_gte",E.getLocal("r"),E.i32_const(m)),E.drop(E.call(l+"_sub",E.getLocal("r"),E.i32_const(m),E.getLocal("r"))))))}function B(){const M=t.addFunction(d+"_sub");M.addParam("x","i32"),M.addParam("y","i32"),M.addParam("r","i32");const E=M.getCodeBuilder();M.addCode(E.if(E.call(l+"_sub",E.getLocal("x"),E.getLocal("y"),E.getLocal("r")),E.drop(E.call(l+"_add",E.getLocal("r"),E.i32_const(m),E.getLocal("r")))))}function g(){const M=t.addFunction(d+"_neg");M.addParam("x","i32"),M.addParam("r","i32");const E=M.getCodeBuilder();M.addCode(E.call(d+"_sub",E.i32_const(R),E.getLocal("x"),E.getLocal("r")))}function I(){const M=t.addFunction(d+"_isNegative");M.addParam("x","i32"),M.setReturnType("i32");const E=M.getCodeBuilder(),K=E.i32_const(t.alloc(_));M.addCode(E.call(d+"_fromMontgomery",E.getLocal("x"),K),E.call(l+"_gte",K,E.i32_const(Z)))}function D(){const M=t.addFunction(d+"_sign");M.addParam("x","i32"),M.setReturnType("i32");const E=M.getCodeBuilder(),K=E.i32_const(t.alloc(_));M.addCode(E.if(E.call(l+"_isZero",E.getLocal("x")),E.ret(E.i32_const(0))),E.call(d+"_fromMontgomery",E.getLocal("x"),K),E.if(E.call(l+"_gte",K,E.i32_const(Z)),E.ret(E.i32_const(-1))),E.ret(E.i32_const(1)))}function z(){const M=t.alloc(u*u*8),E=t.addFunction(d+"_mReduct");E.addParam("t","i32"),E.addParam("r","i32"),E.addLocal("np32","i64"),E.addLocal("c","i64"),E.addLocal("m","i64");const K=E.getCodeBuilder(),ft=be("100000000",16).minus(a.modInv(be("100000000",16))).toJSNumber();E.addCode(K.setLocal("np32",K.i64_const(ft)));for(let ct=0;ct<u;ct++){E.addCode(K.setLocal("c",K.i64_const(0))),E.addCode(K.setLocal("m",K.i64_and(K.i64_mul(K.i64_load32_u(K.getLocal("t"),ct*4),K.getLocal("np32")),K.i64_const("0xFFFFFFFF"))));for(let Lt=0;Lt<u;Lt++)E.addCode(K.setLocal("c",K.i64_add(K.i64_add(K.i64_load32_u(K.getLocal("t"),(ct+Lt)*4),K.i64_shr_u(K.getLocal("c"),K.i64_const(32))),K.i64_mul(K.i64_load32_u(K.i32_const(m),Lt*4),K.getLocal("m"))))),E.addCode(K.i64_store32(K.getLocal("t"),(ct+Lt)*4,K.getLocal("c")));E.addCode(K.i64_store32(K.i32_const(M),ct*4,K.i64_shr_u(K.getLocal("c"),K.i64_const(32))))}E.addCode(K.call(d+"_add",K.i32_const(M),K.i32_add(K.getLocal("t"),K.i32_const(u*4)),K.getLocal("r")))}function U(){const M=t.addFunction(d+"_mul");M.addParam("x","i32"),M.addParam("y","i32"),M.addParam("r","i32"),M.addLocal("c0","i64"),M.addLocal("c1","i64"),M.addLocal("np32","i64");for(let mt=0;mt<u;mt++)M.addLocal("x"+mt,"i64"),M.addLocal("y"+mt,"i64"),M.addLocal("m"+mt,"i64"),M.addLocal("q"+mt,"i64");const E=M.getCodeBuilder(),K=be("100000000",16).minus(a.modInv(be("100000000",16))).toJSNumber();M.addCode(E.setLocal("np32",E.i64_const(K)));const ft=[],ct=[],Lt=[];function Nt(mt,Et){let Bt,Pt;return ft[mt]?Bt=E.getLocal("x"+mt):(Bt=E.teeLocal("x"+mt,E.i64_load32_u(E.getLocal("x"),mt*4)),ft[mt]=!0),ct[Et]?Pt=E.getLocal("y"+Et):(Pt=E.teeLocal("y"+Et,E.i64_load32_u(E.getLocal("y"),Et*4)),ct[Et]=!0),E.i64_mul(Bt,Pt)}function Tt(mt,Et){let Bt,Pt;return Lt[mt]?Bt=E.getLocal("q"+mt):(Bt=E.teeLocal("q"+mt,E.i64_load32_u(E.i32_const(0),m+mt*4)),Lt[mt]=!0),Pt=E.getLocal("m"+Et),E.i64_mul(Bt,Pt)}let bt="c0",St="c1";for(let mt=0;mt<u*2-1;mt++){for(let Et=Math.max(0,mt-u+1);Et<=mt&&Et<u;Et++){const Bt=mt-Et;M.addCode(E.setLocal(bt,E.i64_add(E.i64_and(E.getLocal(bt),E.i64_const(4294967295)),Nt(Et,Bt)))),M.addCode(E.setLocal(St,E.i64_add(E.getLocal(St),E.i64_shr_u(E.getLocal(bt),E.i64_const(32)))))}for(let Et=Math.max(1,mt-u+1);Et<=mt&&Et<u;Et++){const Bt=mt-Et;M.addCode(E.setLocal(bt,E.i64_add(E.i64_and(E.getLocal(bt),E.i64_const(4294967295)),Tt(Et,Bt)))),M.addCode(E.setLocal(St,E.i64_add(E.getLocal(St),E.i64_shr_u(E.getLocal(bt),E.i64_const(32)))))}mt<u&&(M.addCode(E.setLocal("m"+mt,E.i64_and(E.i64_mul(E.i64_and(E.getLocal(bt),E.i64_const(4294967295)),E.getLocal("np32")),E.i64_const("0xFFFFFFFF")))),M.addCode(E.setLocal(bt,E.i64_add(E.i64_and(E.getLocal(bt),E.i64_const(4294967295)),Tt(0,mt)))),M.addCode(E.setLocal(St,E.i64_add(E.getLocal(St),E.i64_shr_u(E.getLocal(bt),E.i64_const(32)))))),mt>=u&&M.addCode(E.i64_store32(E.getLocal("r"),(mt-u)*4,E.getLocal(bt))),[bt,St]=[St,bt],M.addCode(E.setLocal(St,E.i64_shr_u(E.getLocal(bt),E.i64_const(32))))}M.addCode(E.i64_store32(E.getLocal("r"),u*4-4,E.getLocal(bt))),M.addCode(E.if(E.i32_wrap_i64(E.getLocal(St)),E.drop(E.call(l+"_sub",E.getLocal("r"),E.i32_const(m),E.getLocal("r"))),E.if(E.call(l+"_gte",E.getLocal("r"),E.i32_const(m)),E.drop(E.call(l+"_sub",E.getLocal("r"),E.i32_const(m),E.getLocal("r"))))))}function N(){const M=t.addFunction(d+"_square");M.addParam("x","i32"),M.addParam("r","i32"),M.addLocal("c0","i64"),M.addLocal("c1","i64"),M.addLocal("c0_old","i64"),M.addLocal("c1_old","i64"),M.addLocal("np32","i64");for(let Et=0;Et<u;Et++)M.addLocal("x"+Et,"i64"),M.addLocal("m"+Et,"i64"),M.addLocal("q"+Et,"i64");const E=M.getCodeBuilder(),K=be("100000000",16).minus(a.modInv(be("100000000",16))).toJSNumber();M.addCode(E.setLocal("np32",E.i64_const(K)));const ft=[],ct=[];function Lt(Et,Bt){let Pt,Ct;return ft[Et]?Pt=E.getLocal("x"+Et):(Pt=E.teeLocal("x"+Et,E.i64_load32_u(E.getLocal("x"),Et*4)),ft[Et]=!0),ft[Bt]?Ct=E.getLocal("x"+Bt):(Ct=E.teeLocal("x"+Bt,E.i64_load32_u(E.getLocal("x"),Bt*4)),ft[Bt]=!0),E.i64_mul(Pt,Ct)}function Nt(Et,Bt){let Pt,Ct;return ct[Et]?Pt=E.getLocal("q"+Et):(Pt=E.teeLocal("q"+Et,E.i64_load32_u(E.i32_const(0),m+Et*4)),ct[Et]=!0),Ct=E.getLocal("m"+Bt),E.i64_mul(Pt,Ct)}let Tt="c0",bt="c1",St="c0_old",mt="c1_old";for(let Et=0;Et<u*2-1;Et++){M.addCode(E.setLocal(Tt,E.i64_const(0)),E.setLocal(bt,E.i64_const(0)));for(let Bt=Math.max(0,Et-u+1);Bt<Et+1>>1&&Bt<u;Bt++){const Pt=Et-Bt;M.addCode(E.setLocal(Tt,E.i64_add(E.i64_and(E.getLocal(Tt),E.i64_const(4294967295)),Lt(Bt,Pt)))),M.addCode(E.setLocal(bt,E.i64_add(E.getLocal(bt),E.i64_shr_u(E.getLocal(Tt),E.i64_const(32)))))}M.addCode(E.setLocal(Tt,E.i64_shl(E.i64_and(E.getLocal(Tt),E.i64_const(4294967295)),E.i64_const(1)))),M.addCode(E.setLocal(bt,E.i64_add(E.i64_shl(E.getLocal(bt),E.i64_const(1)),E.i64_shr_u(E.getLocal(Tt),E.i64_const(32))))),Et%2==0&&(M.addCode(E.setLocal(Tt,E.i64_add(E.i64_and(E.getLocal(Tt),E.i64_const(4294967295)),Lt(Et>>1,Et>>1)))),M.addCode(E.setLocal(bt,E.i64_add(E.getLocal(bt),E.i64_shr_u(E.getLocal(Tt),E.i64_const(32)))))),Et>0&&(M.addCode(E.setLocal(Tt,E.i64_add(E.i64_and(E.getLocal(Tt),E.i64_const(4294967295)),E.i64_and(E.getLocal(St),E.i64_const(4294967295))))),M.addCode(E.setLocal(bt,E.i64_add(E.i64_add(E.getLocal(bt),E.i64_shr_u(E.getLocal(Tt),E.i64_const(32))),E.getLocal(mt)))));for(let Bt=Math.max(1,Et-u+1);Bt<=Et&&Bt<u;Bt++){const Pt=Et-Bt;M.addCode(E.setLocal(Tt,E.i64_add(E.i64_and(E.getLocal(Tt),E.i64_const(4294967295)),Nt(Bt,Pt)))),M.addCode(E.setLocal(bt,E.i64_add(E.getLocal(bt),E.i64_shr_u(E.getLocal(Tt),E.i64_const(32)))))}Et<u&&(M.addCode(E.setLocal("m"+Et,E.i64_and(E.i64_mul(E.i64_and(E.getLocal(Tt),E.i64_const(4294967295)),E.getLocal("np32")),E.i64_const("0xFFFFFFFF")))),M.addCode(E.setLocal(Tt,E.i64_add(E.i64_and(E.getLocal(Tt),E.i64_const(4294967295)),Nt(0,Et)))),M.addCode(E.setLocal(bt,E.i64_add(E.getLocal(bt),E.i64_shr_u(E.getLocal(Tt),E.i64_const(32)))))),Et>=u&&M.addCode(E.i64_store32(E.getLocal("r"),(Et-u)*4,E.getLocal(Tt))),M.addCode(E.setLocal(St,E.getLocal(bt)),E.setLocal(mt,E.i64_shr_u(E.getLocal(St),E.i64_const(32))))}M.addCode(E.i64_store32(E.getLocal("r"),u*4-4,E.getLocal(St))),M.addCode(E.if(E.i32_wrap_i64(E.getLocal(mt)),E.drop(E.call(l+"_sub",E.getLocal("r"),E.i32_const(m),E.getLocal("r"))),E.if(E.call(l+"_gte",E.getLocal("r"),E.i32_const(m)),E.drop(E.call(l+"_sub",E.getLocal("r"),E.i32_const(m),E.getLocal("r"))))))}function S(){const M=t.addFunction(d+"_squareOld");M.addParam("x","i32"),M.addParam("r","i32");const E=M.getCodeBuilder();M.addCode(E.call(d+"_mul",E.getLocal("x"),E.getLocal("x"),E.getLocal("r")))}function W(){const M=t.addFunction(d+"_toMontgomery");M.addParam("x","i32"),M.addParam("r","i32");const E=M.getCodeBuilder();M.addCode(E.call(d+"_mul",E.getLocal("x"),E.i32_const(A),E.getLocal("r")))}function J(){const M=t.alloc(_*2),E=t.addFunction(d+"_fromMontgomery");E.addParam("x","i32"),E.addParam("r","i32");const K=E.getCodeBuilder();E.addCode(K.call(l+"_copy",K.getLocal("x"),K.i32_const(M))),E.addCode(K.call(l+"_zero",K.i32_const(M+_))),E.addCode(K.call(d+"_mReduct",K.i32_const(M),K.getLocal("r")))}function it(){const M=t.addFunction(d+"_inverse");M.addParam("x","i32"),M.addParam("r","i32");const E=M.getCodeBuilder();M.addCode(E.call(d+"_fromMontgomery",E.getLocal("x"),E.getLocal("r"))),M.addCode(E.call(l+"_inverseMod",E.getLocal("r"),E.i32_const(m),E.getLocal("r"))),M.addCode(E.call(d+"_toMontgomery",E.getLocal("r"),E.getLocal("r")))}let ot=be(2);if(a.isPrime())for(;!ot.modPow(C,a).equals(P);)ot=ot.add(be.one);t.alloc(Ye.bigInt2BytesLE(ot.shiftLeft(s*64).mod(a),_));let et=0,at=P;for(;!at.isOdd()&&!at.isZero();)et++,at=at.shiftRight(1);const rt=t.alloc(_,Ye.bigInt2BytesLE(at,_)),gt=ot.modPow(at,a),Rt=t.alloc(Ye.bigInt2BytesLE(gt.shiftLeft(s*64).mod(a),_)),yt=at.add(1).shiftRight(1),wt=t.alloc(_,Ye.bigInt2BytesLE(yt,_));function L(){const M=t.addFunction(d+"_sqrt");M.addParam("n","i32"),M.addParam("r","i32"),M.addLocal("m","i32"),M.addLocal("i","i32"),M.addLocal("j","i32");const E=M.getCodeBuilder(),K=E.i32_const(p),ft=E.i32_const(t.alloc(_)),ct=E.i32_const(t.alloc(_)),Lt=E.i32_const(t.alloc(_)),Nt=E.i32_const(t.alloc(_)),Tt=E.i32_const(t.alloc(_));M.addCode(E.if(E.call(d+"_isZero",E.getLocal("n")),E.ret(E.call(d+"_zero",E.getLocal("r")))),E.setLocal("m",E.i32_const(et)),E.call(d+"_copy",E.i32_const(Rt),ft),E.call(d+"_exp",E.getLocal("n"),E.i32_const(rt),E.i32_const(_),ct),E.call(d+"_exp",E.getLocal("n"),E.i32_const(wt),E.i32_const(_),Lt),E.block(E.loop(E.br_if(1,E.call(d+"_eq",ct,K)),E.call(d+"_square",ct,Nt),E.setLocal("i",E.i32_const(1)),E.block(E.loop(E.br_if(1,E.call(d+"_eq",Nt,K)),E.call(d+"_square",Nt,Nt),E.setLocal("i",E.i32_add(E.getLocal("i"),E.i32_const(1))),E.br(0))),E.call(d+"_copy",ft,Tt),E.setLocal("j",E.i32_sub(E.i32_sub(E.getLocal("m"),E.getLocal("i")),E.i32_const(1))),E.block(E.loop(E.br_if(1,E.i32_eqz(E.getLocal("j"))),E.call(d+"_square",Tt,Tt),E.setLocal("j",E.i32_sub(E.getLocal("j"),E.i32_const(1))),E.br(0))),E.setLocal("m",E.getLocal("i")),E.call(d+"_square",Tt,ft),E.call(d+"_mul",ct,ft,ct),E.call(d+"_mul",Lt,Tt,Lt),E.br(0))),E.if(E.call(d+"_isNegative",Lt),E.call(d+"_neg",Lt,E.getLocal("r")),E.call(d+"_copy",Lt,E.getLocal("r"))))}function f(){const M=t.addFunction(d+"_isSquare");M.addParam("n","i32"),M.setReturnType("i32");const E=M.getCodeBuilder(),K=E.i32_const(p),ft=E.i32_const(t.alloc(_));M.addCode(E.if(E.call(d+"_isZero",E.getLocal("n")),E.ret(E.i32_const(1))),E.call(d+"_exp",E.getLocal("n"),E.i32_const(G),E.i32_const(_),ft),E.call(d+"_eq",ft,K))}function F(){const M=t.addFunction(d+"_load");M.addParam("scalar","i32"),M.addParam("scalarLen","i32"),M.addParam("r","i32"),M.addLocal("p","i32"),M.addLocal("l","i32"),M.addLocal("i","i32"),M.addLocal("j","i32");const E=M.getCodeBuilder(),K=E.i32_const(t.alloc(_)),ft=t.alloc(_),ct=E.i32_const(ft);M.addCode(E.call(l+"_zero",E.getLocal("r")),E.setLocal("i",E.i32_const(_)),E.setLocal("p",E.getLocal("scalar")),E.block(E.loop(E.br_if(1,E.i32_gt_u(E.getLocal("i"),E.getLocal("scalarLen"))),E.if(E.i32_eq(E.getLocal("i"),E.i32_const(_)),E.call(d+"_one",K),E.call(d+"_mul",K,E.i32_const(A),K)),E.call(d+"_mul",E.getLocal("p"),K,ct),E.call(d+"_add",E.getLocal("r"),ct,E.getLocal("r")),E.setLocal("p",E.i32_add(E.getLocal("p"),E.i32_const(_))),E.setLocal("i",E.i32_add(E.getLocal("i"),E.i32_const(_))),E.br(0))),E.setLocal("l",E.i32_rem_u(E.getLocal("scalarLen"),E.i32_const(_))),E.if(E.i32_eqz(E.getLocal("l")),E.ret([])),E.call(l+"_zero",ct),E.setLocal("j",E.i32_const(0)),E.block(E.loop(E.br_if(1,E.i32_eq(E.getLocal("j"),E.getLocal("l"))),E.i32_store8(E.getLocal("j"),ft,E.i32_load8_u(E.getLocal("p"))),E.setLocal("p",E.i32_add(E.getLocal("p"),E.i32_const(1))),E.setLocal("j",E.i32_add(E.getLocal("j"),E.i32_const(1))),E.br(0))),E.if(E.i32_eq(E.getLocal("i"),E.i32_const(_)),E.call(d+"_one",K),E.call(d+"_mul",K,E.i32_const(A),K)),E.call(d+"_mul",ct,K,ct),E.call(d+"_add",E.getLocal("r"),ct,E.getLocal("r")))}function h(){const M=t.addFunction(d+"_timesScalar");M.addParam("x","i32"),M.addParam("scalar","i32"),M.addParam("scalarLen","i32"),M.addParam("r","i32");const E=M.getCodeBuilder(),K=E.i32_const(t.alloc(_));M.addCode(E.call(d+"_load",E.getLocal("scalar"),E.getLocal("scalarLen"),K),E.call(d+"_toMontgomery",K,K),E.call(d+"_mul",E.getLocal("x"),K,E.getLocal("r")))}function H(){const M=t.addFunction(d+"_isOne");M.addParam("x","i32"),M.setReturnType("i32");const E=M.getCodeBuilder();M.addCode(E.ret(E.call(l+"_eq",E.getLocal("x"),E.i32_const(p))))}return t.exportFunction(l+"_copy",d+"_copy"),t.exportFunction(l+"_zero",d+"_zero"),t.exportFunction(l+"_isZero",d+"_isZero"),t.exportFunction(l+"_eq",d+"_eq"),H(),Y(),B(),g(),z(),U(),N(),S(),W(),J(),I(),D(),it(),$(),F(),h(),T_(t,d),xr(t,d+"_batchToMontgomery",d+"_toMontgomery",_,_),xr(t,d+"_batchFromMontgomery",d+"_fromMontgomery",_,_),xr(t,d+"_batchNeg",d+"_neg",_,_),Nr(t,d+"_batchAdd",d+"_add",_,_),Nr(t,d+"_batchSub",d+"_sub",_,_),Nr(t,d+"_batchMul",d+"_mul",_,_),t.exportFunction(d+"_add"),t.exportFunction(d+"_sub"),t.exportFunction(d+"_neg"),t.exportFunction(d+"_isNegative"),t.exportFunction(d+"_isOne"),t.exportFunction(d+"_sign"),t.exportFunction(d+"_mReduct"),t.exportFunction(d+"_mul"),t.exportFunction(d+"_square"),t.exportFunction(d+"_squareOld"),t.exportFunction(d+"_fromMontgomery"),t.exportFunction(d+"_toMontgomery"),t.exportFunction(d+"_inverse"),t.exportFunction(d+"_one"),t.exportFunction(d+"_load"),t.exportFunction(d+"_timesScalar"),B_(t,d+"_exp",_,d+"_mul",d+"_square",l+"_copy",d+"_one"),t.exportFunction(d+"_exp"),t.exportFunction(d+"_batchInverse"),a.isPrime()&&(L(),f(),t.exportFunction(d+"_sqrt"),t.exportFunction(d+"_isSquare")),t.exportFunction(d+"_batchToMontgomery"),t.exportFunction(d+"_batchFromMontgomery"),d};const R_=rn.exports,O_=Mr;var Hc=function(t,n,i,o,a){const s=R_(n),u=Math.floor((s.minus(1).bitLength()-1)/64)+1,_=u*8,d=i||"f1";if(t.modules[d])return d;t.modules[d]={n64:u};const l=a||"int",m=O_(t,s,o,l),A=t.modules[m].pR2,p=t.modules[m].pq,R=t.modules[m].pePlusOne;function P(){const Z=t.alloc(_),$=t.addFunction(d+"_mul");$.addParam("x","i32"),$.addParam("y","i32"),$.addParam("r","i32");const Y=$.getCodeBuilder();$.addCode(Y.call(m+"_mul",Y.getLocal("x"),Y.getLocal("y"),Y.i32_const(Z))),$.addCode(Y.call(m+"_mul",Y.i32_const(Z),Y.i32_const(A),Y.getLocal("r")))}function C(){const Z=t.addFunction(d+"_square");Z.addParam("x","i32"),Z.addParam("r","i32");const $=Z.getCodeBuilder();Z.addCode($.call(d+"_mul",$.getLocal("x"),$.getLocal("x"),$.getLocal("r")))}function G(){const Z=t.addFunction(d+"_inverse");Z.addParam("x","i32"),Z.addParam("r","i32");const $=Z.getCodeBuilder();Z.addCode($.call(l+"_inverseMod",$.getLocal("x"),$.i32_const(p),$.getLocal("r")))}function O(){const Z=t.addFunction(d+"_isNegative");Z.addParam("x","i32"),Z.setReturnType("i32");const $=Z.getCodeBuilder();Z.addCode($.call(l+"_gte",$.getLocal("x"),$.i32_const(R)))}return P(),C(),G(),O(),t.exportFunction(m+"_add",d+"_add"),t.exportFunction(m+"_sub",d+"_sub"),t.exportFunction(m+"_neg",d+"_neg"),t.exportFunction(d+"_mul"),t.exportFunction(d+"_square"),t.exportFunction(d+"_inverse"),t.exportFunction(d+"_isNegative"),t.exportFunction(m+"_copy",d+"_copy"),t.exportFunction(m+"_zero",d+"_zero"),t.exportFunction(m+"_one",d+"_one"),t.exportFunction(m+"_isZero",d+"_isZero"),t.exportFunction(m+"_eq",d+"_eq"),d};const P_=Or,x_=Pr,di=rn.exports,Ur=gn;var zc=function(t,n,i,o){if(t.modules[i])return i;const a=t.modules[o].n64*8,s=t.modules[o].q;t.modules[i]={n64:t.modules[o].n64*2};function u(){const N=t.addFunction(i+"_add");N.addParam("x","i32"),N.addParam("y","i32"),N.addParam("r","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a)),it=S.getLocal("y"),ot=S.i32_add(S.getLocal("y"),S.i32_const(a)),et=S.getLocal("r"),at=S.i32_add(S.getLocal("r"),S.i32_const(a));N.addCode(S.call(o+"_add",W,it,et),S.call(o+"_add",J,ot,at))}function _(){const N=t.addFunction(i+"_timesScalar");N.addParam("x","i32"),N.addParam("scalar","i32"),N.addParam("scalarLen","i32"),N.addParam("r","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a)),it=S.getLocal("r"),ot=S.i32_add(S.getLocal("r"),S.i32_const(a));N.addCode(S.call(o+"_timesScalar",W,S.getLocal("scalar"),S.getLocal("scalarLen"),it),S.call(o+"_timesScalar",J,S.getLocal("scalar"),S.getLocal("scalarLen"),ot))}function d(){const N=t.addFunction(i+"_sub");N.addParam("x","i32"),N.addParam("y","i32"),N.addParam("r","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a)),it=S.getLocal("y"),ot=S.i32_add(S.getLocal("y"),S.i32_const(a)),et=S.getLocal("r"),at=S.i32_add(S.getLocal("r"),S.i32_const(a));N.addCode(S.call(o+"_sub",W,it,et),S.call(o+"_sub",J,ot,at))}function l(){const N=t.addFunction(i+"_neg");N.addParam("x","i32"),N.addParam("r","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a)),it=S.getLocal("r"),ot=S.i32_add(S.getLocal("r"),S.i32_const(a));N.addCode(S.call(o+"_neg",W,it),S.call(o+"_neg",J,ot))}function m(){const N=t.addFunction(i+"_conjugate");N.addParam("x","i32"),N.addParam("r","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a)),it=S.getLocal("r"),ot=S.i32_add(S.getLocal("r"),S.i32_const(a));N.addCode(S.call(o+"_copy",W,it),S.call(o+"_neg",J,ot))}function A(){const N=t.addFunction(i+"_isNegative");N.addParam("x","i32"),N.setReturnType("i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a));N.addCode(S.if(S.call(o+"_isZero",J),S.ret(S.call(o+"_isNegative",W))),S.ret(S.call(o+"_isNegative",J)))}function p(){const N=t.addFunction(i+"_mul");N.addParam("x","i32"),N.addParam("y","i32"),N.addParam("r","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a)),it=S.getLocal("y"),ot=S.i32_add(S.getLocal("y"),S.i32_const(a)),et=S.getLocal("r"),at=S.i32_add(S.getLocal("r"),S.i32_const(a)),rt=S.i32_const(t.alloc(a)),gt=S.i32_const(t.alloc(a)),Rt=S.i32_const(t.alloc(a)),yt=S.i32_const(t.alloc(a));N.addCode(S.call(o+"_mul",W,it,rt),S.call(o+"_mul",J,ot,gt),S.call(o+"_add",W,J,Rt),S.call(o+"_add",it,ot,yt),S.call(o+"_mul",Rt,yt,Rt),S.call(n,gt,et),S.call(o+"_add",rt,et,et),S.call(o+"_add",rt,gt,at),S.call(o+"_sub",Rt,at,at))}function R(){const N=t.addFunction(i+"_mul1");N.addParam("x","i32"),N.addParam("y","i32"),N.addParam("r","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a)),it=S.getLocal("y"),ot=S.getLocal("r"),et=S.i32_add(S.getLocal("r"),S.i32_const(a));N.addCode(S.call(o+"_mul",W,it,ot),S.call(o+"_mul",J,it,et))}function P(){const N=t.addFunction(i+"_square");N.addParam("x","i32"),N.addParam("r","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a)),it=S.getLocal("r"),ot=S.i32_add(S.getLocal("r"),S.i32_const(a)),et=S.i32_const(t.alloc(a)),at=S.i32_const(t.alloc(a)),rt=S.i32_const(t.alloc(a)),gt=S.i32_const(t.alloc(a));N.addCode(S.call(o+"_mul",W,J,et),S.call(o+"_add",W,J,at),S.call(n,J,rt),S.call(o+"_add",W,rt,rt),S.call(n,et,gt),S.call(o+"_add",gt,et,gt),S.call(o+"_mul",at,rt,it),S.call(o+"_sub",it,gt,it),S.call(o+"_add",et,et,ot))}function C(){const N=t.addFunction(i+"_toMontgomery");N.addParam("x","i32"),N.addParam("r","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a)),it=S.getLocal("r"),ot=S.i32_add(S.getLocal("r"),S.i32_const(a));N.addCode(S.call(o+"_toMontgomery",W,it),S.call(o+"_toMontgomery",J,ot))}function G(){const N=t.addFunction(i+"_fromMontgomery");N.addParam("x","i32"),N.addParam("r","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a)),it=S.getLocal("r"),ot=S.i32_add(S.getLocal("r"),S.i32_const(a));N.addCode(S.call(o+"_fromMontgomery",W,it),S.call(o+"_fromMontgomery",J,ot))}function O(){const N=t.addFunction(i+"_copy");N.addParam("x","i32"),N.addParam("r","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a)),it=S.getLocal("r"),ot=S.i32_add(S.getLocal("r"),S.i32_const(a));N.addCode(S.call(o+"_copy",W,it),S.call(o+"_copy",J,ot))}function Z(){const N=t.addFunction(i+"_zero");N.addParam("x","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a));N.addCode(S.call(o+"_zero",W),S.call(o+"_zero",J))}function $(){const N=t.addFunction(i+"_one");N.addParam("x","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a));N.addCode(S.call(o+"_one",W),S.call(o+"_zero",J))}function Y(){const N=t.addFunction(i+"_eq");N.addParam("x","i32"),N.addParam("y","i32"),N.setReturnType("i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a)),it=S.getLocal("y"),ot=S.i32_add(S.getLocal("y"),S.i32_const(a));N.addCode(S.i32_and(S.call(o+"_eq",W,it),S.call(o+"_eq",J,ot)))}function B(){const N=t.addFunction(i+"_isZero");N.addParam("x","i32"),N.setReturnType("i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a));N.addCode(S.i32_and(S.call(o+"_isZero",W),S.call(o+"_isZero",J)))}function g(){const N=t.addFunction(i+"_inverse");N.addParam("x","i32"),N.addParam("r","i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a)),it=S.getLocal("r"),ot=S.i32_add(S.getLocal("r"),S.i32_const(a)),et=S.i32_const(t.alloc(a)),at=S.i32_const(t.alloc(a)),rt=S.i32_const(t.alloc(a)),gt=S.i32_const(t.alloc(a));N.addCode(S.call(o+"_square",W,et),S.call(o+"_square",J,at),S.call(n,at,rt),S.call(o+"_sub",et,rt,rt),S.call(o+"_inverse",rt,gt),S.call(o+"_mul",W,gt,it),S.call(o+"_mul",J,gt,ot),S.call(o+"_neg",ot,ot))}function I(){const N=t.addFunction(i+"_sign");N.addParam("x","i32"),N.addLocal("s","i32"),N.setReturnType("i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a));N.addCode(S.setLocal("s",S.call(o+"_sign",J)),S.if(S.getLocal("s"),S.ret(S.getLocal("s"))),S.ret(S.call(o+"_sign",W)))}function D(){const N=t.addFunction(i+"_isOne");N.addParam("x","i32"),N.setReturnType("i32");const S=N.getCodeBuilder(),W=S.getLocal("x"),J=S.i32_add(S.getLocal("x"),S.i32_const(a));N.addCode(S.ret(S.i32_and(S.call(o+"_isOne",W),S.call(o+"_isZero",J))))}function z(){const N=t.addFunction(i+"_sqrt");N.addParam("a","i32"),N.addParam("pr","i32");const S=N.getCodeBuilder(),W=S.i32_const(t.alloc(Ur.bigInt2BytesLE(di(s).minus(di(3)).divide(4),a))),J=S.i32_const(t.alloc(Ur.bigInt2BytesLE(di(s).minus(di(1)).divide(2),a))),it=S.getLocal("a"),ot=S.i32_const(t.alloc(a*2)),et=S.i32_const(t.alloc(a*2)),at=S.i32_const(t.alloc(a*2)),rt=t.alloc(a*2),gt=S.i32_const(rt),Rt=S.i32_const(rt),yt=S.i32_const(rt+a),wt=S.i32_const(t.alloc(a*2)),L=S.i32_const(t.alloc(a*2));N.addCode(S.call(i+"_one",gt),S.call(i+"_neg",gt,gt),S.call(i+"_exp",it,W,S.i32_const(a),ot),S.call(i+"_square",ot,et),S.call(i+"_mul",it,et,et),S.call(i+"_conjugate",et,at),S.call(i+"_mul",at,et,at),S.if(S.call(i+"_eq",at,gt),S.unreachable()),S.call(i+"_mul",ot,it,wt),S.if(S.call(i+"_eq",et,gt),[...S.call(o+"_zero",Rt),...S.call(o+"_one",yt),...S.call(i+"_mul",gt,wt,S.getLocal("pr"))],[...S.call(i+"_one",L),...S.call(i+"_add",L,et,L),...S.call(i+"_exp",L,J,S.i32_const(a),L),...S.call(i+"_mul",L,wt,S.getLocal("pr"))]))}function U(){const N=t.addFunction(i+"_isSquare");N.addParam("a","i32"),N.setReturnType("i32");const S=N.getCodeBuilder(),W=S.i32_const(t.alloc(Ur.bigInt2BytesLE(di(s).minus(di(3)).divide(4),a))),J=S.getLocal("a"),it=S.i32_const(t.alloc(a*2)),ot=S.i32_const(t.alloc(a*2)),et=S.i32_const(t.alloc(a*2)),at=t.alloc(a*2),rt=S.i32_const(at);N.addCode(S.call(i+"_one",rt),S.call(i+"_neg",rt,rt),S.call(i+"_exp",J,W,S.i32_const(a),it),S.call(i+"_square",it,ot),S.call(i+"_mul",J,ot,ot),S.call(i+"_conjugate",ot,et),S.call(i+"_mul",et,ot,et),S.if(S.call(i+"_eq",et,rt),S.ret(S.i32_const(0))),S.ret(S.i32_const(1)))}return B(),D(),Z(),$(),O(),p(),R(),P(),u(),d(),l(),m(),C(),G(),Y(),g(),_(),I(),A(),t.exportFunction(i+"_isZero"),t.exportFunction(i+"_isOne"),t.exportFunction(i+"_zero"),t.exportFunction(i+"_one"),t.exportFunction(i+"_copy"),t.exportFunction(i+"_mul"),t.exportFunction(i+"_mul1"),t.exportFunction(i+"_square"),t.exportFunction(i+"_add"),t.exportFunction(i+"_sub"),t.exportFunction(i+"_neg"),t.exportFunction(i+"_sign"),t.exportFunction(i+"_conjugate"),t.exportFunction(i+"_fromMontgomery"),t.exportFunction(i+"_toMontgomery"),t.exportFunction(i+"_eq"),t.exportFunction(i+"_inverse"),x_(t,i),P_(t,i+"_exp",a*2,i+"_mul",i+"_square",i+"_copy",i+"_one"),z(),U(),t.exportFunction(i+"_exp"),t.exportFunction(i+"_timesScalar"),t.exportFunction(i+"_batchInverse"),t.exportFunction(i+"_sqrt"),t.exportFunction(i+"_isSquare"),t.exportFunction(i+"_isNegative"),i};const N_=Or,M_=Pr;var $c=function(t,n,i,o){if(t.modules[i])return i;const a=t.modules[o].n64*8;t.modules[i]={n64:t.modules[o].n64*3};function s(){const g=t.addFunction(i+"_add");g.addParam("x","i32"),g.addParam("y","i32"),g.addParam("r","i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a)),N=I.getLocal("y"),S=I.i32_add(I.getLocal("y"),I.i32_const(a)),W=I.i32_add(I.getLocal("y"),I.i32_const(2*a)),J=I.getLocal("r"),it=I.i32_add(I.getLocal("r"),I.i32_const(a)),ot=I.i32_add(I.getLocal("r"),I.i32_const(2*a));g.addCode(I.call(o+"_add",D,N,J),I.call(o+"_add",z,S,it),I.call(o+"_add",U,W,ot))}function u(){const g=t.addFunction(i+"_timesScalar");g.addParam("x","i32"),g.addParam("scalar","i32"),g.addParam("scalarLen","i32"),g.addParam("r","i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a)),N=I.getLocal("r"),S=I.i32_add(I.getLocal("r"),I.i32_const(a)),W=I.i32_add(I.getLocal("r"),I.i32_const(2*a));g.addCode(I.call(o+"_timesScalar",D,I.getLocal("scalar"),I.getLocal("scalarLen"),N),I.call(o+"_timesScalar",z,I.getLocal("scalar"),I.getLocal("scalarLen"),S),I.call(o+"_timesScalar",U,I.getLocal("scalar"),I.getLocal("scalarLen"),W))}function _(){const g=t.addFunction(i+"_sub");g.addParam("x","i32"),g.addParam("y","i32"),g.addParam("r","i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a)),N=I.getLocal("y"),S=I.i32_add(I.getLocal("y"),I.i32_const(a)),W=I.i32_add(I.getLocal("y"),I.i32_const(2*a)),J=I.getLocal("r"),it=I.i32_add(I.getLocal("r"),I.i32_const(a)),ot=I.i32_add(I.getLocal("r"),I.i32_const(2*a));g.addCode(I.call(o+"_sub",D,N,J),I.call(o+"_sub",z,S,it),I.call(o+"_sub",U,W,ot))}function d(){const g=t.addFunction(i+"_neg");g.addParam("x","i32"),g.addParam("r","i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a)),N=I.getLocal("r"),S=I.i32_add(I.getLocal("r"),I.i32_const(a)),W=I.i32_add(I.getLocal("r"),I.i32_const(2*a));g.addCode(I.call(o+"_neg",D,N),I.call(o+"_neg",z,S),I.call(o+"_neg",U,W))}function l(){const g=t.addFunction(i+"_isNegative");g.addParam("x","i32"),g.setReturnType("i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a));g.addCode(I.if(I.call(o+"_isZero",U),I.if(I.call(o+"_isZero",z),I.ret(I.call(o+"_isNegative",D)),I.ret(I.call(o+"_isNegative",z)))),I.ret(I.call(o+"_isNegative",U)))}function m(){const g=t.addFunction(i+"_mul");g.addParam("x","i32"),g.addParam("y","i32"),g.addParam("r","i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a)),N=I.getLocal("y"),S=I.i32_add(I.getLocal("y"),I.i32_const(a)),W=I.i32_add(I.getLocal("y"),I.i32_const(2*a)),J=I.getLocal("r"),it=I.i32_add(I.getLocal("r"),I.i32_const(a)),ot=I.i32_add(I.getLocal("r"),I.i32_const(2*a)),et=I.i32_const(t.alloc(a)),at=I.i32_const(t.alloc(a)),rt=I.i32_const(t.alloc(a)),gt=I.i32_const(t.alloc(a)),Rt=I.i32_const(t.alloc(a)),yt=I.i32_const(t.alloc(a)),wt=I.i32_const(t.alloc(a)),L=I.i32_const(t.alloc(a)),f=I.i32_const(t.alloc(a)),F=I.i32_const(t.alloc(a)),h=I.i32_const(t.alloc(a)),H=I.i32_const(t.alloc(a)),M=I.i32_const(t.alloc(a));g.addCode(I.call(o+"_mul",D,N,et),I.call(o+"_mul",z,S,at),I.call(o+"_mul",U,W,rt),I.call(o+"_add",D,z,gt),I.call(o+"_add",N,S,Rt),I.call(o+"_add",D,U,yt),I.call(o+"_add",N,W,wt),I.call(o+"_add",z,U,L),I.call(o+"_add",S,W,f),I.call(o+"_add",et,at,F),I.call(o+"_add",et,rt,h),I.call(o+"_add",at,rt,H),I.call(o+"_mul",L,f,J),I.call(o+"_sub",J,H,J),I.call(n,J,J),I.call(o+"_add",et,J,J),I.call(o+"_mul",gt,Rt,it),I.call(o+"_sub",it,F,it),I.call(n,rt,M),I.call(o+"_add",it,M,it),I.call(o+"_mul",yt,wt,ot),I.call(o+"_sub",ot,h,ot),I.call(o+"_add",ot,at,ot))}function A(){const g=t.addFunction(i+"_square");g.addParam("x","i32"),g.addParam("r","i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a)),N=I.getLocal("r"),S=I.i32_add(I.getLocal("r"),I.i32_const(a)),W=I.i32_add(I.getLocal("r"),I.i32_const(2*a)),J=I.i32_const(t.alloc(a)),it=I.i32_const(t.alloc(a)),ot=I.i32_const(t.alloc(a)),et=I.i32_const(t.alloc(a)),at=I.i32_const(t.alloc(a)),rt=I.i32_const(t.alloc(a)),gt=I.i32_const(t.alloc(a));g.addCode(I.call(o+"_square",D,J),I.call(o+"_mul",D,z,it),I.call(o+"_add",it,it,ot),I.call(o+"_sub",D,z,et),I.call(o+"_add",et,U,et),I.call(o+"_square",et,et),I.call(o+"_mul",z,U,at),I.call(o+"_add",at,at,rt),I.call(o+"_square",U,gt),I.call(n,rt,N),I.call(o+"_add",J,N,N),I.call(n,gt,S),I.call(o+"_add",ot,S,S),I.call(o+"_add",J,gt,W),I.call(o+"_sub",rt,W,W),I.call(o+"_add",et,W,W),I.call(o+"_add",ot,W,W))}function p(){const g=t.addFunction(i+"_toMontgomery");g.addParam("x","i32"),g.addParam("r","i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a)),N=I.getLocal("r"),S=I.i32_add(I.getLocal("r"),I.i32_const(a)),W=I.i32_add(I.getLocal("r"),I.i32_const(2*a));g.addCode(I.call(o+"_toMontgomery",D,N),I.call(o+"_toMontgomery",z,S),I.call(o+"_toMontgomery",U,W))}function R(){const g=t.addFunction(i+"_fromMontgomery");g.addParam("x","i32"),g.addParam("r","i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a)),N=I.getLocal("r"),S=I.i32_add(I.getLocal("r"),I.i32_const(a)),W=I.i32_add(I.getLocal("r"),I.i32_const(2*a));g.addCode(I.call(o+"_fromMontgomery",D,N),I.call(o+"_fromMontgomery",z,S),I.call(o+"_fromMontgomery",U,W))}function P(){const g=t.addFunction(i+"_copy");g.addParam("x","i32"),g.addParam("r","i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a)),N=I.getLocal("r"),S=I.i32_add(I.getLocal("r"),I.i32_const(a)),W=I.i32_add(I.getLocal("r"),I.i32_const(2*a));g.addCode(I.call(o+"_copy",D,N),I.call(o+"_copy",z,S),I.call(o+"_copy",U,W))}function C(){const g=t.addFunction(i+"_zero");g.addParam("x","i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a));g.addCode(I.call(o+"_zero",D),I.call(o+"_zero",z),I.call(o+"_zero",U))}function G(){const g=t.addFunction(i+"_one");g.addParam("x","i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a));g.addCode(I.call(o+"_one",D),I.call(o+"_zero",z),I.call(o+"_zero",U))}function O(){const g=t.addFunction(i+"_eq");g.addParam("x","i32"),g.addParam("y","i32"),g.setReturnType("i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a)),N=I.getLocal("y"),S=I.i32_add(I.getLocal("y"),I.i32_const(a)),W=I.i32_add(I.getLocal("y"),I.i32_const(2*a));g.addCode(I.i32_and(I.i32_and(I.call(o+"_eq",D,N),I.call(o+"_eq",z,S)),I.call(o+"_eq",U,W)))}function Z(){const g=t.addFunction(i+"_isZero");g.addParam("x","i32"),g.setReturnType("i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a));g.addCode(I.i32_and(I.i32_and(I.call(o+"_isZero",D),I.call(o+"_isZero",z)),I.call(o+"_isZero",U)))}function $(){const g=t.addFunction(i+"_inverse");g.addParam("x","i32"),g.addParam("r","i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a)),N=I.getLocal("r"),S=I.i32_add(I.getLocal("r"),I.i32_const(a)),W=I.i32_add(I.getLocal("r"),I.i32_const(2*a)),J=I.i32_const(t.alloc(a)),it=I.i32_const(t.alloc(a)),ot=I.i32_const(t.alloc(a)),et=I.i32_const(t.alloc(a)),at=I.i32_const(t.alloc(a)),rt=I.i32_const(t.alloc(a)),gt=I.i32_const(t.alloc(a)),Rt=I.i32_const(t.alloc(a)),yt=I.i32_const(t.alloc(a)),wt=I.i32_const(t.alloc(a)),L=I.i32_const(t.alloc(a));g.addCode(I.call(o+"_square",D,J),I.call(o+"_square",z,it),I.call(o+"_square",U,ot),I.call(o+"_mul",D,z,et),I.call(o+"_mul",D,U,at),I.call(o+"_mul",z,U,rt),I.call(n,rt,gt),I.call(o+"_sub",J,gt,gt),I.call(n,ot,Rt),I.call(o+"_sub",Rt,et,Rt),I.call(o+"_sub",it,at,yt),I.call(o+"_mul",U,Rt,wt),I.call(o+"_mul",z,yt,L),I.call(o+"_add",wt,L,wt),I.call(n,wt,wt),I.call(o+"_mul",D,gt,L),I.call(o+"_add",L,wt,wt),I.call(o+"_inverse",wt,wt),I.call(o+"_mul",wt,gt,N),I.call(o+"_mul",wt,Rt,S),I.call(o+"_mul",wt,yt,W))}function Y(){const g=t.addFunction(i+"_sign");g.addParam("x","i32"),g.addLocal("s","i32"),g.setReturnType("i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(2*a));g.addCode(I.setLocal("s",I.call(o+"_sign",U)),I.if(I.getLocal("s"),I.ret(I.getLocal("s"))),I.setLocal("s",I.call(o+"_sign",z)),I.if(I.getLocal("s"),I.ret(I.getLocal("s"))),I.ret(I.call(o+"_sign",D)))}function B(){const g=t.addFunction(i+"_isOne");g.addParam("x","i32"),g.setReturnType("i32");const I=g.getCodeBuilder(),D=I.getLocal("x"),z=I.i32_add(I.getLocal("x"),I.i32_const(a)),U=I.i32_add(I.getLocal("x"),I.i32_const(a*2));g.addCode(I.ret(I.i32_and(I.i32_and(I.call(o+"_isOne",D),I.call(o+"_isZero",z)),I.call(o+"_isZero",U))))}return Z(),B(),C(),G(),P(),m(),A(),s(),_(),d(),Y(),p(),R(),O(),$(),u(),l(),t.exportFunction(i+"_isZero"),t.exportFunction(i+"_isOne"),t.exportFunction(i+"_zero"),t.exportFunction(i+"_one"),t.exportFunction(i+"_copy"),t.exportFunction(i+"_mul"),t.exportFunction(i+"_square"),t.exportFunction(i+"_add"),t.exportFunction(i+"_sub"),t.exportFunction(i+"_neg"),t.exportFunction(i+"_sign"),t.exportFunction(i+"_fromMontgomery"),t.exportFunction(i+"_toMontgomery"),t.exportFunction(i+"_eq"),t.exportFunction(i+"_inverse"),M_(t,i),N_(t,i+"_exp",a*3,i+"_mul",i+"_square",i+"_copy",i+"_one"),t.exportFunction(i+"_exp"),t.exportFunction(i+"_timesScalar"),t.exportFunction(i+"_batchInverse"),t.exportFunction(i+"_isNegative"),i},U_=function(t,n,i,o,a,s,u,_){const d=t.addFunction(n);d.addParam("base","i32"),d.addParam("scalar","i32"),d.addParam("scalarLength","i32"),d.addParam("r","i32"),d.addLocal("old0","i32"),d.addLocal("nbits","i32"),d.addLocal("i","i32"),d.addLocal("last","i32"),d.addLocal("cur","i32"),d.addLocal("carry","i32"),d.addLocal("p","i32");const l=d.getCodeBuilder(),m=l.i32_const(t.alloc(i));function A(R){return l.i32_and(l.i32_shr_u(l.i32_load(l.i32_add(l.getLocal("scalar"),l.i32_and(l.i32_shr_u(R,l.i32_const(3)),l.i32_const(4294967292)))),l.i32_and(R,l.i32_const(31))),l.i32_const(1))}function p(R){return[...l.i32_store8(l.getLocal("p"),l.i32_const(R)),...l.setLocal("p",l.i32_add(l.getLocal("p"),l.i32_const(1)))]}d.addCode(l.if(l.i32_eqz(l.getLocal("scalarLength")),[...l.call(_,l.getLocal("r")),...l.ret([])]),l.setLocal("nbits",l.i32_shl(l.getLocal("scalarLength"),l.i32_const(3))),l.setLocal("old0",l.i32_load(l.i32_const(0))),l.setLocal("p",l.getLocal("old0")),l.i32_store(l.i32_const(0),l.i32_and(l.i32_add(l.i32_add(l.getLocal("old0"),l.i32_const(32)),l.getLocal("nbits")),l.i32_const(4294967288))),l.setLocal("i",l.i32_const(1)),l.setLocal("last",A(l.i32_const(0))),l.setLocal("carry",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("nbits"))),l.setLocal("cur",A(l.getLocal("i"))),l.if(l.getLocal("last"),l.if(l.getLocal("cur"),l.if(l.getLocal("carry"),[...l.setLocal("last",l.i32_const(0)),...l.setLocal("carry",l.i32_const(1)),...p(1)],[...l.setLocal("last",l.i32_const(0)),...l.setLocal("carry",l.i32_const(1)),...p(255)]),l.if(l.getLocal("carry"),[...l.setLocal("last",l.i32_const(0)),...l.setLocal("carry",l.i32_const(1)),...p(255)],[...l.setLocal("last",l.i32_const(0)),...l.setLocal("carry",l.i32_const(0)),...p(1)])),l.if(l.getLocal("cur"),l.if(l.getLocal("carry"),[...l.setLocal("last",l.i32_const(0)),...l.setLocal("carry",l.i32_const(1)),...p(0)],[...l.setLocal("last",l.i32_const(1)),...l.setLocal("carry",l.i32_const(0)),...p(0)]),l.if(l.getLocal("carry"),[...l.setLocal("last",l.i32_const(1)),...l.setLocal("carry",l.i32_const(0)),...p(0)],[...l.setLocal("last",l.i32_const(0)),...l.setLocal("carry",l.i32_const(0)),...p(0)]))),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0))),l.if(l.getLocal("last"),l.if(l.getLocal("carry"),[...p(255),...p(0),...p(1)],[...p(1)]),l.if(l.getLocal("carry"),[...p(0),...p(1)])),l.setLocal("p",l.i32_sub(l.getLocal("p"),l.i32_const(1))),l.call(u,l.getLocal("base"),m),l.call(_,l.getLocal("r")),l.block(l.loop(l.call(a,l.getLocal("r"),l.getLocal("r")),l.setLocal("cur",l.i32_load8_u(l.getLocal("p"))),l.if(l.getLocal("cur"),l.if(l.i32_eq(l.getLocal("cur"),l.i32_const(1)),l.call(o,l.getLocal("r"),m,l.getLocal("r")),l.call(s,l.getLocal("r"),m,l.getLocal("r")))),l.br_if(1,l.i32_eq(l.getLocal("old0"),l.getLocal("p"))),l.setLocal("p",l.i32_sub(l.getLocal("p"),l.i32_const(1))),l.br(0))),l.i32_store(l.i32_const(0),l.getLocal("old0")))},D_=function(t,n,i,o,a){const u=t.modules[n].n64*8;function _(){const A=t.addFunction(i+"_getChunk");A.addParam("pScalar","i32"),A.addParam("scalarSize","i32"),A.addParam("startBit","i32"),A.addParam("chunkSize","i32"),A.addLocal("bitsToEnd","i32"),A.addLocal("mask","i32"),A.setReturnType("i32");const p=A.getCodeBuilder();A.addCode(p.setLocal("bitsToEnd",p.i32_sub(p.i32_mul(p.getLocal("scalarSize"),p.i32_const(8)),p.getLocal("startBit"))),p.if(p.i32_gt_s(p.getLocal("chunkSize"),p.getLocal("bitsToEnd")),p.setLocal("mask",p.i32_sub(p.i32_shl(p.i32_const(1),p.getLocal("bitsToEnd")),p.i32_const(1))),p.setLocal("mask",p.i32_sub(p.i32_shl(p.i32_const(1),p.getLocal("chunkSize")),p.i32_const(1)))),p.i32_and(p.i32_shr_u(p.i32_load(p.i32_add(p.getLocal("pScalar"),p.i32_shr_u(p.getLocal("startBit"),p.i32_const(3))),0,0),p.i32_and(p.getLocal("startBit"),p.i32_const(7))),p.getLocal("mask")))}function d(){const A=t.addFunction(i+"_chunk");A.addParam("pBases","i32"),A.addParam("pScalars","i32"),A.addParam("scalarSize","i32"),A.addParam("n","i32"),A.addParam("startBit","i32"),A.addParam("chunkSize","i32"),A.addParam("pr","i32"),A.addLocal("nChunks","i32"),A.addLocal("itScalar","i32"),A.addLocal("endScalar","i32"),A.addLocal("itBase","i32"),A.addLocal("i","i32"),A.addLocal("j","i32"),A.addLocal("nTable","i32"),A.addLocal("pTable","i32"),A.addLocal("idx","i32"),A.addLocal("pIdxTable","i32");const p=A.getCodeBuilder();A.addCode(p.if(p.i32_eqz(p.getLocal("n")),[...p.call(n+"_zero",p.getLocal("pr")),...p.ret([])]),p.setLocal("nTable",p.i32_shl(p.i32_const(1),p.getLocal("chunkSize"))),p.setLocal("pTable",p.i32_load(p.i32_const(0))),p.i32_store(p.i32_const(0),p.i32_add(p.getLocal("pTable"),p.i32_mul(p.getLocal("nTable"),p.i32_const(u)))),p.setLocal("j",p.i32_const(0)),p.block(p.loop(p.br_if(1,p.i32_eq(p.getLocal("j"),p.getLocal("nTable"))),p.call(n+"_zero",p.i32_add(p.getLocal("pTable"),p.i32_mul(p.getLocal("j"),p.i32_const(u)))),p.setLocal("j",p.i32_add(p.getLocal("j"),p.i32_const(1))),p.br(0))),p.setLocal("itBase",p.getLocal("pBases")),p.setLocal("itScalar",p.getLocal("pScalars")),p.setLocal("endScalar",p.i32_add(p.getLocal("pScalars"),p.i32_mul(p.getLocal("n"),p.getLocal("scalarSize")))),p.block(p.loop(p.br_if(1,p.i32_eq(p.getLocal("itScalar"),p.getLocal("endScalar"))),p.setLocal("idx",p.call(i+"_getChunk",p.getLocal("itScalar"),p.getLocal("scalarSize"),p.getLocal("startBit"),p.getLocal("chunkSize"))),p.if(p.getLocal("idx"),[...p.setLocal("pIdxTable",p.i32_add(p.getLocal("pTable"),p.i32_mul(p.i32_sub(p.getLocal("idx"),p.i32_const(1)),p.i32_const(u)))),...p.call(o,p.getLocal("pIdxTable"),p.getLocal("itBase"),p.getLocal("pIdxTable"))]),p.setLocal("itScalar",p.i32_add(p.getLocal("itScalar"),p.getLocal("scalarSize"))),p.setLocal("itBase",p.i32_add(p.getLocal("itBase"),p.i32_const(a))),p.br(0))),p.call(i+"_reduceTable",p.getLocal("pTable"),p.getLocal("chunkSize")),p.call(n+"_copy",p.getLocal("pTable"),p.getLocal("pr")),p.i32_store(p.i32_const(0),p.getLocal("pTable")))}function l(){const A=t.addFunction(i);A.addParam("pBases","i32"),A.addParam("pScalars","i32"),A.addParam("scalarSize","i32"),A.addParam("n","i32"),A.addParam("pr","i32"),A.addLocal("chunkSize","i32"),A.addLocal("nChunks","i32"),A.addLocal("itScalar","i32"),A.addLocal("endScalar","i32"),A.addLocal("itBase","i32"),A.addLocal("itBit","i32"),A.addLocal("i","i32"),A.addLocal("j","i32"),A.addLocal("nTable","i32"),A.addLocal("pTable","i32"),A.addLocal("idx","i32"),A.addLocal("pIdxTable","i32");const p=A.getCodeBuilder(),R=p.i32_const(t.alloc(u)),P=t.alloc([17,17,17,17,17,17,17,17,17,17,16,16,15,14,13,13,12,11,10,9,8,7,7,6,5,4,3,2,1,1,1,1]);A.addCode(p.call(n+"_zero",p.getLocal("pr")),p.if(p.i32_eqz(p.getLocal("n")),p.ret([])),p.setLocal("chunkSize",p.i32_load8_u(p.i32_clz(p.getLocal("n")),P)),p.setLocal("nChunks",p.i32_add(p.i32_div_u(p.i32_sub(p.i32_shl(p.getLocal("scalarSize"),p.i32_const(3)),p.i32_const(1)),p.getLocal("chunkSize")),p.i32_const(1))),p.setLocal("itBit",p.i32_mul(p.i32_sub(p.getLocal("nChunks"),p.i32_const(1)),p.getLocal("chunkSize"))),p.block(p.loop(p.br_if(1,p.i32_lt_s(p.getLocal("itBit"),p.i32_const(0))),p.if(p.i32_eqz(p.call(n+"_isZero",p.getLocal("pr"))),[...p.setLocal("j",p.i32_const(0)),...p.block(p.loop(p.br_if(1,p.i32_eq(p.getLocal("j"),p.getLocal("chunkSize"))),p.call(n+"_double",p.getLocal("pr"),p.getLocal("pr")),p.setLocal("j",p.i32_add(p.getLocal("j"),p.i32_const(1))),p.br(0)))]),p.call(i+"_chunk",p.getLocal("pBases"),p.getLocal("pScalars"),p.getLocal("scalarSize"),p.getLocal("n"),p.getLocal("itBit"),p.getLocal("chunkSize"),R),p.call(n+"_add",p.getLocal("pr"),R,p.getLocal("pr")),p.setLocal("itBit",p.i32_sub(p.getLocal("itBit"),p.getLocal("chunkSize"))),p.br(0))))}function m(){const A=t.addFunction(i+"_reduceTable");A.addParam("pTable","i32"),A.addParam("p","i32"),A.addLocal("half","i32"),A.addLocal("it1","i32"),A.addLocal("it2","i32"),A.addLocal("pAcc","i32");const p=A.getCodeBuilder();A.addCode(p.if(p.i32_eq(p.getLocal("p"),p.i32_const(1)),p.ret([])),p.setLocal("half",p.i32_shl(p.i32_const(1),p.i32_sub(p.getLocal("p"),p.i32_const(1)))),p.setLocal("it1",p.getLocal("pTable")),p.setLocal("it2",p.i32_add(p.getLocal("pTable"),p.i32_mul(p.getLocal("half"),p.i32_const(u)))),p.setLocal("pAcc",p.i32_sub(p.getLocal("it2"),p.i32_const(u))),p.block(p.loop(p.br_if(1,p.i32_eq(p.getLocal("it1"),p.getLocal("pAcc"))),p.call(n+"_add",p.getLocal("it1"),p.getLocal("it2"),p.getLocal("it1")),p.call(n+"_add",p.getLocal("pAcc"),p.getLocal("it2"),p.getLocal("pAcc")),p.setLocal("it1",p.i32_add(p.getLocal("it1"),p.i32_const(u))),p.setLocal("it2",p.i32_add(p.getLocal("it2"),p.i32_const(u))),p.br(0))),p.call(i+"_reduceTable",p.getLocal("pTable"),p.i32_sub(p.getLocal("p"),p.i32_const(1))),p.setLocal("p",p.i32_sub(p.getLocal("p"),p.i32_const(1))),p.block(p.loop(p.br_if(1,p.i32_eqz(p.getLocal("p"))),p.call(n+"_double",p.getLocal("pAcc"),p.getLocal("pAcc")),p.setLocal("p",p.i32_sub(p.getLocal("p"),p.i32_const(1))),p.br(0))),p.call(n+"_add",p.getLocal("pTable"),p.getLocal("pAcc"),p.getLocal("pTable")))}_(),m(),d(),l(),t.exportFunction(i),t.exportFunction(i+"_chunk")};const jc=U_,ki=Qc,Yc=D_;var Vc=function(t,n,i,o){const a=t.modules[i].n64,s=a*8;if(t.modules[n])return n;t.modules[n]={n64:a*3};function u(){const L=t.addFunction(n+"_isZero");L.addParam("p1","i32"),L.setReturnType("i32");const f=L.getCodeBuilder();L.addCode(f.call(i+"_isZero",f.i32_add(f.getLocal("p1"),f.i32_const(s*2))))}function _(){const L=t.addFunction(n+"_isZeroAffine");L.addParam("p1","i32"),L.setReturnType("i32");const f=L.getCodeBuilder();L.addCode(f.i32_and(f.call(i+"_isZero",f.getLocal("p1")),f.call(i+"_isZero",f.i32_add(f.getLocal("p1"),f.i32_const(s)))))}function d(){const L=t.addFunction(n+"_copy");L.addParam("ps","i32"),L.addParam("pd","i32");const f=L.getCodeBuilder();for(let F=0;F<a*3;F++)L.addCode(f.i64_store(f.getLocal("pd"),F*8,f.i64_load(f.getLocal("ps"),F*8)))}function l(){const L=t.addFunction(n+"_copyAffine");L.addParam("ps","i32"),L.addParam("pd","i32");const f=L.getCodeBuilder();for(let F=0;F<a*2;F++)L.addCode(f.i64_store(f.getLocal("pd"),F*8,f.i64_load(f.getLocal("ps"),F*8)))}function m(){const L=t.addFunction(n+"_zero");L.addParam("pr","i32");const f=L.getCodeBuilder();L.addCode(f.call(i+"_zero",f.getLocal("pr"))),L.addCode(f.call(i+"_one",f.i32_add(f.getLocal("pr"),f.i32_const(s)))),L.addCode(f.call(i+"_zero",f.i32_add(f.getLocal("pr"),f.i32_const(s*2))))}function A(){const L=t.addFunction(n+"_zeroAffine");L.addParam("pr","i32");const f=L.getCodeBuilder();L.addCode(f.call(i+"_zero",f.getLocal("pr"))),L.addCode(f.call(i+"_zero",f.i32_add(f.getLocal("pr"),f.i32_const(s))))}function p(){const L=t.addFunction(n+"_eq");L.addParam("p1","i32"),L.addParam("p2","i32"),L.setReturnType("i32"),L.addLocal("z1","i32"),L.addLocal("z2","i32");const f=L.getCodeBuilder(),F=f.getLocal("p1"),h=f.i32_add(f.getLocal("p1"),f.i32_const(s));L.addCode(f.setLocal("z1",f.i32_add(f.getLocal("p1"),f.i32_const(s*2))));const H=f.getLocal("z1"),M=f.getLocal("p2"),E=f.i32_add(f.getLocal("p2"),f.i32_const(s));L.addCode(f.setLocal("z2",f.i32_add(f.getLocal("p2"),f.i32_const(s*2))));const K=f.getLocal("z2"),ft=f.i32_const(t.alloc(s)),ct=f.i32_const(t.alloc(s)),Lt=f.i32_const(t.alloc(s)),Nt=f.i32_const(t.alloc(s)),Tt=f.i32_const(t.alloc(s)),bt=f.i32_const(t.alloc(s)),St=f.i32_const(t.alloc(s)),mt=f.i32_const(t.alloc(s));L.addCode(f.if(f.call(n+"_isZero",f.getLocal("p1")),f.ret(f.call(n+"_isZero",f.getLocal("p2")))),f.if(f.call(n+"_isZero",f.getLocal("p2")),f.ret(f.i32_const(0))),f.if(f.call(i+"_isOne",H),f.ret(f.call(n+"_eqMixed",f.getLocal("p2"),f.getLocal("p1")))),f.if(f.call(i+"_isOne",K),f.ret(f.call(n+"_eqMixed",f.getLocal("p1"),f.getLocal("p2")))),f.call(i+"_square",H,ft),f.call(i+"_square",K,ct),f.call(i+"_mul",F,ct,Lt),f.call(i+"_mul",M,ft,Nt),f.call(i+"_mul",H,ft,Tt),f.call(i+"_mul",K,ct,bt),f.call(i+"_mul",h,bt,St),f.call(i+"_mul",E,Tt,mt),f.if(f.call(i+"_eq",Lt,Nt),f.if(f.call(i+"_eq",St,mt),f.ret(f.i32_const(1)))),f.ret(f.i32_const(0)))}function R(){const L=t.addFunction(n+"_eqMixed");L.addParam("p1","i32"),L.addParam("p2","i32"),L.setReturnType("i32"),L.addLocal("z1","i32");const f=L.getCodeBuilder(),F=f.getLocal("p1"),h=f.i32_add(f.getLocal("p1"),f.i32_const(s));L.addCode(f.setLocal("z1",f.i32_add(f.getLocal("p1"),f.i32_const(s*2))));const H=f.getLocal("z1"),M=f.getLocal("p2"),E=f.i32_add(f.getLocal("p2"),f.i32_const(s)),K=f.i32_const(t.alloc(s)),ft=f.i32_const(t.alloc(s)),ct=f.i32_const(t.alloc(s)),Lt=f.i32_const(t.alloc(s));L.addCode(f.if(f.call(n+"_isZero",f.getLocal("p1")),f.ret(f.call(n+"_isZeroAffine",f.getLocal("p2")))),f.if(f.call(n+"_isZeroAffine",f.getLocal("p2")),f.ret(f.i32_const(0))),f.if(f.call(i+"_isOne",H),f.ret(f.call(n+"_eqAffine",f.getLocal("p1"),f.getLocal("p2")))),f.call(i+"_square",H,K),f.call(i+"_mul",M,K,ft),f.call(i+"_mul",H,K,ct),f.call(i+"_mul",E,ct,Lt),f.if(f.call(i+"_eq",F,ft),f.if(f.call(i+"_eq",h,Lt),f.ret(f.i32_const(1)))),f.ret(f.i32_const(0)))}function P(){const L=t.addFunction(n+"_double");L.addParam("p1","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder(),F=f.getLocal("p1"),h=f.i32_add(f.getLocal("p1"),f.i32_const(s)),H=f.i32_add(f.getLocal("p1"),f.i32_const(s*2)),M=f.getLocal("pr"),E=f.i32_add(f.getLocal("pr"),f.i32_const(s)),K=f.i32_add(f.getLocal("pr"),f.i32_const(s*2)),ft=f.i32_const(t.alloc(s)),ct=f.i32_const(t.alloc(s)),Lt=f.i32_const(t.alloc(s)),Nt=f.i32_const(t.alloc(s)),Tt=f.i32_const(t.alloc(s)),bt=f.i32_const(t.alloc(s)),St=f.i32_const(t.alloc(s)),mt=f.i32_const(t.alloc(s));L.addCode(f.if(f.call(n+"_isZero",f.getLocal("p1")),[...f.call(n+"_copy",f.getLocal("p1"),f.getLocal("pr")),...f.ret([])]),f.if(f.call(i+"_isOne",H),[...f.ret(f.call(n+"_doubleAffine",f.getLocal("p1"),f.getLocal("pr"))),...f.ret([])]),f.call(i+"_square",F,ft),f.call(i+"_square",h,ct),f.call(i+"_square",ct,Lt),f.call(i+"_add",F,ct,Nt),f.call(i+"_square",Nt,Nt),f.call(i+"_sub",Nt,ft,Nt),f.call(i+"_sub",Nt,Lt,Nt),f.call(i+"_add",Nt,Nt,Nt),f.call(i+"_add",ft,ft,Tt),f.call(i+"_add",Tt,ft,Tt),f.call(i+"_square",Tt,bt),f.call(i+"_mul",h,H,St),f.call(i+"_add",Nt,Nt,M),f.call(i+"_sub",bt,M,M),f.call(i+"_add",Lt,Lt,mt),f.call(i+"_add",mt,mt,mt),f.call(i+"_add",mt,mt,mt),f.call(i+"_sub",Nt,M,E),f.call(i+"_mul",E,Tt,E),f.call(i+"_sub",E,mt,E),f.call(i+"_add",St,St,K))}function C(){const L=t.addFunction(n+"_doubleAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder(),F=f.getLocal("p1"),h=f.i32_add(f.getLocal("p1"),f.i32_const(s)),H=f.getLocal("pr"),M=f.i32_add(f.getLocal("pr"),f.i32_const(s)),E=f.i32_add(f.getLocal("pr"),f.i32_const(s*2)),K=f.i32_const(t.alloc(s)),ft=f.i32_const(t.alloc(s)),ct=f.i32_const(t.alloc(s)),Lt=f.i32_const(t.alloc(s)),Nt=f.i32_const(t.alloc(s)),Tt=f.i32_const(t.alloc(s));L.addCode(f.if(f.call(n+"_isZeroAffine",f.getLocal("p1")),[...f.call(n+"_toJacobian",f.getLocal("p1"),f.getLocal("pr")),...f.ret([])]),f.call(i+"_square",F,K),f.call(i+"_square",h,ft),f.call(i+"_square",ft,ct),f.call(i+"_add",F,ft,Lt),f.call(i+"_square",Lt,Lt),f.call(i+"_sub",Lt,K,Lt),f.call(i+"_sub",Lt,ct,Lt),f.call(i+"_add",Lt,Lt,Lt),f.call(i+"_add",K,K,Nt),f.call(i+"_add",Nt,K,Nt),f.call(i+"_add",h,h,E),f.call(i+"_square",Nt,H),f.call(i+"_sub",H,Lt,H),f.call(i+"_sub",H,Lt,H),f.call(i+"_add",ct,ct,Tt),f.call(i+"_add",Tt,Tt,Tt),f.call(i+"_add",Tt,Tt,Tt),f.call(i+"_sub",Lt,H,M),f.call(i+"_mul",M,Nt,M),f.call(i+"_sub",M,Tt,M))}function G(){const L=t.addFunction(n+"_eqAffine");L.addParam("p1","i32"),L.addParam("p2","i32"),L.setReturnType("i32"),L.addLocal("z1","i32");const f=L.getCodeBuilder();L.addCode(f.ret(f.i32_and(f.call(i+"_eq",f.getLocal("p1"),f.getLocal("p2")),f.call(i+"_eq",f.i32_add(f.getLocal("p1"),f.i32_const(s)),f.i32_add(f.getLocal("p2"),f.i32_const(s))))))}function O(){const L=t.addFunction(n+"_toMontgomery");L.addParam("p1","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder();L.addCode(f.call(i+"_toMontgomery",f.getLocal("p1"),f.getLocal("pr")));for(let F=1;F<3;F++)L.addCode(f.call(i+"_toMontgomery",f.i32_add(f.getLocal("p1"),f.i32_const(F*s)),f.i32_add(f.getLocal("pr"),f.i32_const(F*s))))}function Z(){const L=t.addFunction(n+"_toMontgomeryAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder();L.addCode(f.call(i+"_toMontgomery",f.getLocal("p1"),f.getLocal("pr")));for(let F=1;F<2;F++)L.addCode(f.call(i+"_toMontgomery",f.i32_add(f.getLocal("p1"),f.i32_const(F*s)),f.i32_add(f.getLocal("pr"),f.i32_const(F*s))))}function $(){const L=t.addFunction(n+"_fromMontgomery");L.addParam("p1","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder();L.addCode(f.call(i+"_fromMontgomery",f.getLocal("p1"),f.getLocal("pr")));for(let F=1;F<3;F++)L.addCode(f.call(i+"_fromMontgomery",f.i32_add(f.getLocal("p1"),f.i32_const(F*s)),f.i32_add(f.getLocal("pr"),f.i32_const(F*s))))}function Y(){const L=t.addFunction(n+"_fromMontgomeryAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder();L.addCode(f.call(i+"_fromMontgomery",f.getLocal("p1"),f.getLocal("pr")));for(let F=1;F<2;F++)L.addCode(f.call(i+"_fromMontgomery",f.i32_add(f.getLocal("p1"),f.i32_const(F*s)),f.i32_add(f.getLocal("pr"),f.i32_const(F*s))))}function B(){const L=t.addFunction(n+"_add");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32"),L.addLocal("z1","i32"),L.addLocal("z2","i32");const f=L.getCodeBuilder(),F=f.getLocal("p1"),h=f.i32_add(f.getLocal("p1"),f.i32_const(s));L.addCode(f.setLocal("z1",f.i32_add(f.getLocal("p1"),f.i32_const(s*2))));const H=f.getLocal("z1"),M=f.getLocal("p2"),E=f.i32_add(f.getLocal("p2"),f.i32_const(s));L.addCode(f.setLocal("z2",f.i32_add(f.getLocal("p2"),f.i32_const(s*2))));const K=f.getLocal("z2"),ft=f.getLocal("pr"),ct=f.i32_add(f.getLocal("pr"),f.i32_const(s)),Lt=f.i32_add(f.getLocal("pr"),f.i32_const(s*2)),Nt=f.i32_const(t.alloc(s)),Tt=f.i32_const(t.alloc(s)),bt=f.i32_const(t.alloc(s)),St=f.i32_const(t.alloc(s)),mt=f.i32_const(t.alloc(s)),Et=f.i32_const(t.alloc(s)),Bt=f.i32_const(t.alloc(s)),Pt=f.i32_const(t.alloc(s)),Ct=f.i32_const(t.alloc(s)),Ht=f.i32_const(t.alloc(s)),b=f.i32_const(t.alloc(s)),x=f.i32_const(t.alloc(s)),q=f.i32_const(t.alloc(s)),Q=f.i32_const(t.alloc(s)),tt=f.i32_const(t.alloc(s)),X=f.i32_const(t.alloc(s)),st=f.i32_const(t.alloc(s));L.addCode(f.if(f.call(n+"_isZero",f.getLocal("p1")),[...f.call(n+"_copy",f.getLocal("p2"),f.getLocal("pr")),...f.ret([])]),f.if(f.call(n+"_isZero",f.getLocal("p2")),[...f.call(n+"_copy",f.getLocal("p1"),f.getLocal("pr")),...f.ret([])]),f.if(f.call(i+"_isOne",H),[...f.call(n+"_addMixed",M,F,ft),...f.ret([])]),f.if(f.call(i+"_isOne",K),[...f.call(n+"_addMixed",F,M,ft),...f.ret([])]),f.call(i+"_square",H,Nt),f.call(i+"_square",K,Tt),f.call(i+"_mul",F,Tt,bt),f.call(i+"_mul",M,Nt,St),f.call(i+"_mul",H,Nt,mt),f.call(i+"_mul",K,Tt,Et),f.call(i+"_mul",h,Et,Bt),f.call(i+"_mul",E,mt,Pt),f.if(f.call(i+"_eq",bt,St),f.if(f.call(i+"_eq",Bt,Pt),[...f.call(n+"_double",f.getLocal("p1"),f.getLocal("pr")),...f.ret([])])),f.call(i+"_sub",St,bt,Ct),f.call(i+"_sub",Pt,Bt,Ht),f.call(i+"_add",Ct,Ct,b),f.call(i+"_square",b,b),f.call(i+"_mul",Ct,b,x),f.call(i+"_add",Ht,Ht,q),f.call(i+"_mul",bt,b,tt),f.call(i+"_square",q,Q),f.call(i+"_add",tt,tt,X),f.call(i+"_sub",Q,x,ft),f.call(i+"_sub",ft,X,ft),f.call(i+"_mul",Bt,x,st),f.call(i+"_add",st,st,st),f.call(i+"_sub",tt,ft,ct),f.call(i+"_mul",ct,q,ct),f.call(i+"_sub",ct,st,ct),f.call(i+"_add",H,K,Lt),f.call(i+"_square",Lt,Lt),f.call(i+"_sub",Lt,Nt,Lt),f.call(i+"_sub",Lt,Tt,Lt),f.call(i+"_mul",Lt,Ct,Lt))}function g(){const L=t.addFunction(n+"_addMixed");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32"),L.addLocal("z1","i32");const f=L.getCodeBuilder(),F=f.getLocal("p1"),h=f.i32_add(f.getLocal("p1"),f.i32_const(s));L.addCode(f.setLocal("z1",f.i32_add(f.getLocal("p1"),f.i32_const(s*2))));const H=f.getLocal("z1"),M=f.getLocal("p2"),E=f.i32_add(f.getLocal("p2"),f.i32_const(s)),K=f.getLocal("pr"),ft=f.i32_add(f.getLocal("pr"),f.i32_const(s)),ct=f.i32_add(f.getLocal("pr"),f.i32_const(s*2)),Lt=f.i32_const(t.alloc(s)),Nt=f.i32_const(t.alloc(s)),Tt=f.i32_const(t.alloc(s)),bt=f.i32_const(t.alloc(s)),St=f.i32_const(t.alloc(s)),mt=f.i32_const(t.alloc(s)),Et=f.i32_const(t.alloc(s)),Bt=f.i32_const(t.alloc(s)),Pt=f.i32_const(t.alloc(s)),Ct=f.i32_const(t.alloc(s)),Ht=f.i32_const(t.alloc(s)),b=f.i32_const(t.alloc(s)),x=f.i32_const(t.alloc(s)),q=f.i32_const(t.alloc(s));L.addCode(f.if(f.call(n+"_isZero",f.getLocal("p1")),[...f.call(n+"_copyAffine",f.getLocal("p2"),f.getLocal("pr")),...f.call(i+"_one",f.i32_add(f.getLocal("pr"),f.i32_const(s*2))),...f.ret([])]),f.if(f.call(n+"_isZeroAffine",f.getLocal("p2")),[...f.call(n+"_copy",f.getLocal("p1"),f.getLocal("pr")),...f.ret([])]),f.if(f.call(i+"_isOne",H),[...f.call(n+"_addAffine",F,M,K),...f.ret([])]),f.call(i+"_square",H,Lt),f.call(i+"_mul",M,Lt,Nt),f.call(i+"_mul",H,Lt,Tt),f.call(i+"_mul",E,Tt,bt),f.if(f.call(i+"_eq",F,Nt),f.if(f.call(i+"_eq",h,bt),[...f.call(n+"_doubleAffine",f.getLocal("p2"),f.getLocal("pr")),...f.ret([])])),f.call(i+"_sub",Nt,F,St),f.call(i+"_sub",bt,h,Et),f.call(i+"_square",St,mt),f.call(i+"_add",mt,mt,Bt),f.call(i+"_add",Bt,Bt,Bt),f.call(i+"_mul",St,Bt,Pt),f.call(i+"_add",Et,Et,Ct),f.call(i+"_mul",F,Bt,b),f.call(i+"_square",Ct,Ht),f.call(i+"_add",b,b,x),f.call(i+"_sub",Ht,Pt,K),f.call(i+"_sub",K,x,K),f.call(i+"_mul",h,Pt,q),f.call(i+"_add",q,q,q),f.call(i+"_sub",b,K,ft),f.call(i+"_mul",ft,Ct,ft),f.call(i+"_sub",ft,q,ft),f.call(i+"_add",H,St,ct),f.call(i+"_square",ct,ct),f.call(i+"_sub",ct,Lt,ct),f.call(i+"_sub",ct,mt,ct))}function I(){const L=t.addFunction(n+"_addAffine");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32"),L.addLocal("z1","i32");const f=L.getCodeBuilder(),F=f.getLocal("p1"),h=f.i32_add(f.getLocal("p1"),f.i32_const(s));L.addCode(f.setLocal("z1",f.i32_add(f.getLocal("p1"),f.i32_const(s*2))));const H=f.getLocal("p2"),M=f.i32_add(f.getLocal("p2"),f.i32_const(s)),E=f.getLocal("pr"),K=f.i32_add(f.getLocal("pr"),f.i32_const(s)),ft=f.i32_add(f.getLocal("pr"),f.i32_const(s*2)),ct=f.i32_const(t.alloc(s)),Lt=f.i32_const(t.alloc(s)),Nt=f.i32_const(t.alloc(s)),Tt=f.i32_const(t.alloc(s)),bt=f.i32_const(t.alloc(s)),St=f.i32_const(t.alloc(s)),mt=f.i32_const(t.alloc(s)),Et=f.i32_const(t.alloc(s)),Bt=f.i32_const(t.alloc(s)),Pt=f.i32_const(t.alloc(s));L.addCode(f.if(f.call(n+"_isZeroAffine",f.getLocal("p1")),[...f.call(n+"_copyAffine",f.getLocal("p2"),f.getLocal("pr")),...f.call(i+"_one",f.i32_add(f.getLocal("pr"),f.i32_const(s*2))),...f.ret([])]),f.if(f.call(n+"_isZeroAffine",f.getLocal("p2")),[...f.call(n+"_copyAffine",f.getLocal("p1"),f.getLocal("pr")),...f.call(i+"_one",f.i32_add(f.getLocal("pr"),f.i32_const(s*2))),...f.ret([])]),f.if(f.call(i+"_eq",F,H),f.if(f.call(i+"_eq",h,M),[...f.call(n+"_doubleAffine",f.getLocal("p2"),f.getLocal("pr")),...f.ret([])])),f.call(i+"_sub",H,F,ct),f.call(i+"_sub",M,h,Nt),f.call(i+"_square",ct,Lt),f.call(i+"_add",Lt,Lt,Tt),f.call(i+"_add",Tt,Tt,Tt),f.call(i+"_mul",ct,Tt,bt),f.call(i+"_add",Nt,Nt,St),f.call(i+"_mul",F,Tt,Et),f.call(i+"_square",St,mt),f.call(i+"_add",Et,Et,Bt),f.call(i+"_sub",mt,bt,E),f.call(i+"_sub",E,Bt,E),f.call(i+"_mul",h,bt,Pt),f.call(i+"_add",Pt,Pt,Pt),f.call(i+"_sub",Et,E,K),f.call(i+"_mul",K,St,K),f.call(i+"_sub",K,Pt,K),f.call(i+"_add",ct,ct,ft))}function D(){const L=t.addFunction(n+"_neg");L.addParam("p1","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder(),F=f.getLocal("p1"),h=f.i32_add(f.getLocal("p1"),f.i32_const(s)),H=f.i32_add(f.getLocal("p1"),f.i32_const(s*2)),M=f.getLocal("pr"),E=f.i32_add(f.getLocal("pr"),f.i32_const(s)),K=f.i32_add(f.getLocal("pr"),f.i32_const(s*2));L.addCode(f.call(i+"_copy",F,M),f.call(i+"_neg",h,E),f.call(i+"_copy",H,K))}function z(){const L=t.addFunction(n+"_negAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder(),F=f.getLocal("p1"),h=f.i32_add(f.getLocal("p1"),f.i32_const(s)),H=f.getLocal("pr"),M=f.i32_add(f.getLocal("pr"),f.i32_const(s));L.addCode(f.call(i+"_copy",F,H),f.call(i+"_neg",h,M))}function U(){const L=t.addFunction(n+"_sub");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder(),F=f.i32_const(t.alloc(s*3));L.addCode(f.call(n+"_neg",f.getLocal("p2"),F),f.call(n+"_add",f.getLocal("p1"),F,f.getLocal("pr")))}function N(){const L=t.addFunction(n+"_subMixed");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder(),F=f.i32_const(t.alloc(s*3));L.addCode(f.call(n+"_negAffine",f.getLocal("p2"),F),f.call(n+"_addMixed",f.getLocal("p1"),F,f.getLocal("pr")))}function S(){const L=t.addFunction(n+"_subAffine");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder(),F=f.i32_const(t.alloc(s*3));L.addCode(f.call(n+"_negAffine",f.getLocal("p2"),F),f.call(n+"_addAffine",f.getLocal("p1"),F,f.getLocal("pr")))}function W(){const L=t.addFunction(n+"_normalize");L.addParam("p1","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder(),F=f.getLocal("p1"),h=f.i32_add(f.getLocal("p1"),f.i32_const(s)),H=f.i32_add(f.getLocal("p1"),f.i32_const(s*2)),M=f.getLocal("pr"),E=f.i32_add(f.getLocal("pr"),f.i32_const(s)),K=f.i32_add(f.getLocal("pr"),f.i32_const(s*2)),ft=f.i32_const(t.alloc(s)),ct=f.i32_const(t.alloc(s)),Lt=f.i32_const(t.alloc(s));L.addCode(f.if(f.call(n+"_isZero",f.getLocal("p1")),f.call(n+"_zero",f.getLocal("pr")),[...f.call(i+"_inverse",H,ft),...f.call(i+"_square",ft,ct),...f.call(i+"_mul",ft,ct,Lt),...f.call(i+"_mul",F,ct,M),...f.call(i+"_mul",h,Lt,E),...f.call(i+"_one",K)]))}function J(){const L=t.addFunction(n+"_toAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder(),F=f.getLocal("p1"),h=f.i32_add(f.getLocal("p1"),f.i32_const(s)),H=f.i32_add(f.getLocal("p1"),f.i32_const(s*2)),M=f.getLocal("pr"),E=f.i32_add(f.getLocal("pr"),f.i32_const(s)),K=f.i32_const(t.alloc(s)),ft=f.i32_const(t.alloc(s)),ct=f.i32_const(t.alloc(s));L.addCode(f.if(f.call(n+"_isZero",f.getLocal("p1")),[...f.call(i+"_zero",M),...f.call(i+"_zero",E)],[...f.call(i+"_inverse",H,K),...f.call(i+"_square",K,ft),...f.call(i+"_mul",K,ft,ct),...f.call(i+"_mul",F,ft,M),...f.call(i+"_mul",h,ct,E)]))}function it(){const L=t.addFunction(n+"_toJacobian");L.addParam("p1","i32"),L.addParam("pr","i32");const f=L.getCodeBuilder(),F=f.getLocal("p1"),h=f.i32_add(f.getLocal("p1"),f.i32_const(s)),H=f.getLocal("pr"),M=f.i32_add(f.getLocal("pr"),f.i32_const(s)),E=f.i32_add(f.getLocal("pr"),f.i32_const(s*2));L.addCode(f.if(f.call(n+"_isZeroAffine",f.getLocal("p1")),f.call(n+"_zero",f.getLocal("pr")),[...f.call(i+"_one",E),...f.call(i+"_copy",h,M),...f.call(i+"_copy",F,H)]))}function ot(){const L=t.addFunction(n+"_batchToAffine");L.addParam("pIn","i32"),L.addParam("n","i32"),L.addParam("pOut","i32"),L.addLocal("pAux","i32"),L.addLocal("itIn","i32"),L.addLocal("itAux","i32"),L.addLocal("itOut","i32"),L.addLocal("i","i32");const f=L.getCodeBuilder(),F=f.i32_const(t.alloc(s));L.addCode(f.setLocal("pAux",f.i32_load(f.i32_const(0))),f.i32_store(f.i32_const(0),f.i32_add(f.getLocal("pAux"),f.i32_mul(f.getLocal("n"),f.i32_const(s)))),f.call(i+"_batchInverse",f.i32_add(f.getLocal("pIn"),f.i32_const(s*2)),f.i32_const(s*3),f.getLocal("n"),f.getLocal("pAux"),f.i32_const(s)),f.setLocal("itIn",f.getLocal("pIn")),f.setLocal("itAux",f.getLocal("pAux")),f.setLocal("itOut",f.getLocal("pOut")),f.setLocal("i",f.i32_const(0)),f.block(f.loop(f.br_if(1,f.i32_eq(f.getLocal("i"),f.getLocal("n"))),f.if(f.call(i+"_isZero",f.getLocal("itAux")),[...f.call(i+"_zero",f.getLocal("itOut")),...f.call(i+"_zero",f.i32_add(f.getLocal("itOut"),f.i32_const(s)))],[...f.call(i+"_mul",f.getLocal("itAux"),f.i32_add(f.getLocal("itIn"),f.i32_const(s)),F),...f.call(i+"_square",f.getLocal("itAux"),f.getLocal("itAux")),...f.call(i+"_mul",f.getLocal("itAux"),f.getLocal("itIn"),f.getLocal("itOut")),...f.call(i+"_mul",f.getLocal("itAux"),F,f.i32_add(f.getLocal("itOut"),f.i32_const(s)))]),f.setLocal("itIn",f.i32_add(f.getLocal("itIn"),f.i32_const(s*3))),f.setLocal("itOut",f.i32_add(f.getLocal("itOut"),f.i32_const(s*2))),f.setLocal("itAux",f.i32_add(f.getLocal("itAux"),f.i32_const(s))),f.setLocal("i",f.i32_add(f.getLocal("i"),f.i32_const(1))),f.br(0))),f.i32_store(f.i32_const(0),f.getLocal("pAux")))}function et(){const L=t.addFunction(n+"__reverseBytes");L.addParam("pIn","i32"),L.addParam("n","i32"),L.addParam("pOut","i32"),L.addLocal("itOut","i32"),L.addLocal("itIn","i32");const f=L.getCodeBuilder();L.addCode(f.setLocal("itOut",f.i32_sub(f.i32_add(f.getLocal("pOut"),f.getLocal("n")),f.i32_const(1))),f.setLocal("itIn",f.getLocal("pIn")),f.block(f.loop(f.br_if(1,f.i32_lt_s(f.getLocal("itOut"),f.getLocal("pOut"))),f.i32_store8(f.getLocal("itOut"),f.i32_load8_u(f.getLocal("itIn"))),f.setLocal("itOut",f.i32_sub(f.getLocal("itOut"),f.i32_const(1))),f.setLocal("itIn",f.i32_add(f.getLocal("itIn"),f.i32_const(1))),f.br(0))))}function at(){const L=t.addFunction(n+"_LEMtoC");L.addParam("pIn","i32"),L.addParam("pOut","i32");const f=L.getCodeBuilder(),F=f.i32_const(t.alloc(s));L.addCode(f.if(f.call(n+"_isZero",f.getLocal("pIn")),[...f.call(i+"_zero",f.getLocal("pOut")),...f.i32_store8(f.getLocal("pOut"),f.i32_const(64)),...f.ret([])]),f.call(i+"_fromMontgomery",f.getLocal("pIn"),F),f.call(n+"__reverseBytes",F,f.i32_const(s),f.getLocal("pOut")),f.if(f.i32_eq(f.call(i+"_sign",f.i32_add(f.getLocal("pIn"),f.i32_const(s))),f.i32_const(-1)),f.i32_store8(f.getLocal("pOut"),f.i32_or(f.i32_load8_u(f.getLocal("pOut")),f.i32_const(128)))))}function rt(){const L=t.addFunction(n+"_LEMtoU");L.addParam("pIn","i32"),L.addParam("pOut","i32");const f=L.getCodeBuilder(),F=t.alloc(s*2),h=f.i32_const(F),H=f.i32_const(F),M=f.i32_const(F+s);L.addCode(f.if(f.call(n+"_isZeroAffine",f.getLocal("pIn")),[...f.call(n+"_zeroAffine",f.getLocal("pOut")),...f.i32_store8(f.getLocal("pOut"),f.i32_const(64)),...f.ret([])]),f.call(n+"_fromMontgomeryAffine",f.getLocal("pIn"),h),f.call(n+"__reverseBytes",H,f.i32_const(s),f.getLocal("pOut")),f.call(n+"__reverseBytes",M,f.i32_const(s),f.i32_add(f.getLocal("pOut"),f.i32_const(s))))}function gt(){const L=t.addFunction(n+"_UtoLEM");L.addParam("pIn","i32"),L.addParam("pOut","i32");const f=L.getCodeBuilder(),F=t.alloc(s*2),h=f.i32_const(F),H=f.i32_const(F),M=f.i32_const(F+s);L.addCode(f.if(f.i32_and(f.i32_load8_u(f.getLocal("pIn")),f.i32_const(64)),[...f.call(n+"_zeroAffine",f.getLocal("pOut")),...f.ret([])]),f.call(n+"__reverseBytes",f.getLocal("pIn"),f.i32_const(s),H),f.call(n+"__reverseBytes",f.i32_add(f.getLocal("pIn"),f.i32_const(s)),f.i32_const(s),M),f.call(n+"_toMontgomeryAffine",h,f.getLocal("pOut")))}function Rt(){const L=t.addFunction(n+"_CtoLEM");L.addParam("pIn","i32"),L.addParam("pOut","i32"),L.addLocal("firstByte","i32"),L.addLocal("greatest","i32");const f=L.getCodeBuilder(),F=t.alloc(s*2),h=f.i32_const(F),H=f.i32_const(F+s);L.addCode(f.setLocal("firstByte",f.i32_load8_u(f.getLocal("pIn"))),f.if(f.i32_and(f.getLocal("firstByte"),f.i32_const(64)),[...f.call(n+"_zeroAffine",f.getLocal("pOut")),...f.ret([])]),f.setLocal("greatest",f.i32_and(f.getLocal("firstByte"),f.i32_const(128))),f.call(i+"_copy",f.getLocal("pIn"),H),f.i32_store8(H,f.i32_and(f.getLocal("firstByte"),f.i32_const(63))),f.call(n+"__reverseBytes",H,f.i32_const(s),h),f.call(i+"_toMontgomery",h,f.getLocal("pOut")),f.call(i+"_square",f.getLocal("pOut"),H),f.call(i+"_mul",f.getLocal("pOut"),H,H),f.call(i+"_add",H,f.i32_const(o),H),f.call(i+"_sqrt",H,H),f.call(i+"_neg",H,h),f.if(f.i32_eq(f.call(i+"_sign",H),f.i32_const(-1)),f.if(f.getLocal("greatest"),f.call(i+"_copy",H,f.i32_add(f.getLocal("pOut"),f.i32_const(s))),f.call(i+"_neg",H,f.i32_add(f.getLocal("pOut"),f.i32_const(s)))),f.if(f.getLocal("greatest"),f.call(i+"_neg",H,f.i32_add(f.getLocal("pOut"),f.i32_const(s))),f.call(i+"_copy",H,f.i32_add(f.getLocal("pOut"),f.i32_const(s))))))}function yt(){const L=t.addFunction(n+"_inCurveAffine");L.addParam("pIn","i32"),L.setReturnType("i32");const f=L.getCodeBuilder(),F=f.getLocal("pIn"),h=f.i32_add(f.getLocal("pIn"),s),H=t.alloc(s*2),M=t.alloc(s*2);L.addCode(f.call(i+"_square",h,H),f.call(i+"_square",F,M),f.call(i+"_mul",F,M,M),f.call(i+"_add",M,f.i32_const(o),M),f.ret(f.call(i+"_eq",H,M)))}function yt(){const L=t.addFunction(n+"_inCurveAffine");L.addParam("pIn","i32"),L.setReturnType("i32");const f=L.getCodeBuilder(),F=f.getLocal("pIn"),h=f.i32_add(f.getLocal("pIn"),f.i32_const(s)),H=f.i32_const(t.alloc(s)),M=f.i32_const(t.alloc(s));L.addCode(f.call(i+"_square",h,H),f.call(i+"_square",F,M),f.call(i+"_mul",F,M,M),f.call(i+"_add",M,f.i32_const(o),M),f.ret(f.call(i+"_eq",H,M)))}function wt(){const L=t.addFunction(n+"_inCurve");L.addParam("pIn","i32"),L.setReturnType("i32");const f=L.getCodeBuilder(),F=f.i32_const(t.alloc(s*2));L.addCode(f.call(n+"_toAffine",f.getLocal("pIn"),F),f.ret(f.call(n+"_inCurveAffine",F)))}return _(),u(),A(),m(),l(),d(),it(),G(),R(),p(),C(),P(),I(),g(),B(),z(),D(),S(),N(),U(),Y(),$(),Z(),O(),J(),yt(),wt(),ot(),W(),et(),rt(),at(),gt(),Rt(),ki(t,n+"_batchLEMtoU",n+"_LEMtoU",s*2,s*2),ki(t,n+"_batchLEMtoC",n+"_LEMtoC",s*2,s),ki(t,n+"_batchUtoLEM",n+"_UtoLEM",s*2,s*2),ki(t,n+"_batchCtoLEM",n+"_CtoLEM",s,s*2,!0),ki(t,n+"_batchToJacobian",n+"_toJacobian",s*2,s*3,!0),Yc(t,n,n+"_multiexp",n+"_add",s*3),Yc(t,n,n+"_multiexpAffine",n+"_addMixed",s*2),jc(t,n+"_timesScalar",s*3,n+"_add",n+"_double",n+"_sub",n+"_copy",n+"_zero"),jc(t,n+"_timesScalarAffine",s*2,n+"_addMixed",n+"_double",n+"_subMixed",n+"_copyAffine",n+"_zero"),t.exportFunction(n+"_isZero"),t.exportFunction(n+"_isZeroAffine"),t.exportFunction(n+"_eq"),t.exportFunction(n+"_eqMixed"),t.exportFunction(n+"_eqAffine"),t.exportFunction(n+"_copy"),t.exportFunction(n+"_copyAffine"),t.exportFunction(n+"_zero"),t.exportFunction(n+"_zeroAffine"),t.exportFunction(n+"_double"),t.exportFunction(n+"_doubleAffine"),t.exportFunction(n+"_add"),t.exportFunction(n+"_addMixed"),t.exportFunction(n+"_addAffine"),t.exportFunction(n+"_neg"),t.exportFunction(n+"_negAffine"),t.exportFunction(n+"_sub"),t.exportFunction(n+"_subMixed"),t.exportFunction(n+"_subAffine"),t.exportFunction(n+"_fromMontgomery"),t.exportFunction(n+"_fromMontgomeryAffine"),t.exportFunction(n+"_toMontgomery"),t.exportFunction(n+"_toMontgomeryAffine"),t.exportFunction(n+"_timesScalar"),t.exportFunction(n+"_timesScalarAffine"),t.exportFunction(n+"_normalize"),t.exportFunction(n+"_LEMtoU"),t.exportFunction(n+"_LEMtoC"),t.exportFunction(n+"_UtoLEM"),t.exportFunction(n+"_CtoLEM"),t.exportFunction(n+"_batchLEMtoU"),t.exportFunction(n+"_batchLEMtoC"),t.exportFunction(n+"_batchUtoLEM"),t.exportFunction(n+"_batchCtoLEM"),t.exportFunction(n+"_toAffine"),t.exportFunction(n+"_toJacobian"),t.exportFunction(n+"_batchToAffine"),t.exportFunction(n+"_batchToJacobian"),t.exportFunction(n+"_inCurve"),t.exportFunction(n+"_inCurveAffine"),n};const hi=rn.exports,yo=gn;var Kc=function(t,n,i,o,a){const u=t.modules[o].n64*8,d=t.modules[i].n64*8,l=t.modules[o].q;let m=l.minus(hi(1)),A=0;for(;!m.isOdd();)A++,m=m.shiftRight(1);let p=hi(2);for(;p.modPow(l.shiftRight(1),l).equals(1);)p=p.add(1);const R=new Array(A+1);R[A]=p.modPow(m,l);let P=A-1;for(;P>=0;)R[P]=R[P+1].modPow(2,l),P--;const C=[],G=hi(1).shiftLeft(u*8).mod(l);for(let F=0;F<R.length;F++){const h=R[F].times(G).mod(l);C.push(...yo.bigInt2BytesLE(h,u))}const O=t.alloc(C),Z=new Array(A+1);Z[0]=hi(1);for(let F=1;F<=A;F++)Z[F]=Z[F-1].times(2);const $=[];for(let F=0;F<=A;F++){const h=Z[F].modInv(l).times(G).mod(l);$.push(...yo.bigInt2BytesLE(h,u))}const Y=t.alloc($),B=p.modPow(2,l),g=[],I=[];for(let F=0;F<=A;F++){const h=B.modPow(hi(2).pow(F),l),H=l.add(hi.one).minus(h).modInv(l);g.push(...yo.bigInt2BytesLE(h.times(G).mod(l),u)),I.push(...yo.bigInt2BytesLE(H.times(G).mod(l),u))}const D=t.alloc(g),z=t.alloc(I);function U(F){let h=0;for(let H=0;H<8;H++)F&1<<H&&(h=h|128>>H);return h}const N=Array(256);for(let F=0;F<256;F++)N[F]=U(F);const S=t.alloc(N);function W(){const F=t.addFunction(n+"__log2");F.addParam("n","i32"),F.setReturnType("i32"),F.addLocal("bits","i32"),F.addLocal("aux","i32");const h=F.getCodeBuilder();F.addCode(h.setLocal("aux",h.i32_shr_u(h.getLocal("n"),h.i32_const(1)))),F.addCode(h.setLocal("bits",h.i32_const(0))),F.addCode(h.block(h.loop(h.br_if(1,h.i32_eqz(h.getLocal("aux"))),h.setLocal("aux",h.i32_shr_u(h.getLocal("aux"),h.i32_const(1))),h.setLocal("bits",h.i32_add(h.getLocal("bits"),h.i32_const(1))),h.br(0)))),F.addCode(h.if(h.i32_ne(h.getLocal("n"),h.i32_shl(h.i32_const(1),h.getLocal("bits"))),h.unreachable())),F.addCode(h.if(h.i32_gt_u(h.getLocal("bits"),h.i32_const(A)),h.unreachable())),F.addCode(h.getLocal("bits"))}function J(){const F=t.addFunction(n+"_fft");F.addParam("px","i32"),F.addParam("n","i32"),F.addLocal("bits","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(u));F.addCode(h.setLocal("bits",h.call(n+"__log2",h.getLocal("n"))),h.call(o+"_one",H),h.call(n+"_rawfft",h.getLocal("px"),h.getLocal("bits"),h.i32_const(0),H))}function it(){const F=t.addFunction(n+"_ifft");F.addParam("px","i32"),F.addParam("n","i32"),F.addLocal("bits","i32"),F.addLocal("pInv2","i32");const h=F.getCodeBuilder();F.addCode(h.setLocal("bits",h.call(n+"__log2",h.getLocal("n"))),h.setLocal("pInv2",h.i32_add(h.i32_const(Y),h.i32_mul(h.getLocal("bits"),h.i32_const(u)))),h.call(n+"_rawfft",h.getLocal("px"),h.getLocal("bits"),h.i32_const(1),h.getLocal("pInv2")))}function ot(){const F=t.addFunction(n+"_rawfft");F.addParam("px","i32"),F.addParam("bits","i32"),F.addParam("reverse","i32"),F.addParam("mulFactor","i32"),F.addLocal("s","i32"),F.addLocal("k","i32"),F.addLocal("j","i32"),F.addLocal("m","i32"),F.addLocal("mdiv2","i32"),F.addLocal("n","i32"),F.addLocal("pwm","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(u)),M=h.i32_const(t.alloc(d)),E=h.i32_const(t.alloc(d));F.addCode(h.call(n+"__reversePermutation",h.getLocal("px"),h.getLocal("bits")),h.setLocal("n",h.i32_shl(h.i32_const(1),h.getLocal("bits"))),h.setLocal("s",h.i32_const(1)),h.block(h.loop(h.br_if(1,h.i32_gt_u(h.getLocal("s"),h.getLocal("bits"))),h.setLocal("m",h.i32_shl(h.i32_const(1),h.getLocal("s"))),h.setLocal("pwm",h.i32_add(h.i32_const(O),h.i32_mul(h.getLocal("s"),h.i32_const(u)))),h.setLocal("k",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_ge_u(h.getLocal("k"),h.getLocal("n"))),h.call(o+"_one",H),h.setLocal("mdiv2",h.i32_shr_u(h.getLocal("m"),h.i32_const(1))),h.setLocal("j",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_ge_u(h.getLocal("j"),h.getLocal("mdiv2"))),h.setLocal("idx1",h.i32_add(h.getLocal("px"),h.i32_mul(h.i32_add(h.getLocal("k"),h.getLocal("j")),h.i32_const(d)))),h.setLocal("idx2",h.i32_add(h.getLocal("idx1"),h.i32_mul(h.getLocal("mdiv2"),h.i32_const(d)))),h.call(a,h.getLocal("idx2"),H,M),h.call(i+"_copy",h.getLocal("idx1"),E),h.call(i+"_add",E,M,h.getLocal("idx1")),h.call(i+"_sub",E,M,h.getLocal("idx2")),h.call(o+"_mul",H,h.getLocal("pwm"),H),h.setLocal("j",h.i32_add(h.getLocal("j"),h.i32_const(1))),h.br(0))),h.setLocal("k",h.i32_add(h.getLocal("k"),h.getLocal("m"))),h.br(0))),h.setLocal("s",h.i32_add(h.getLocal("s"),h.i32_const(1))),h.br(0))),h.call(n+"__fftFinal",h.getLocal("px"),h.getLocal("bits"),h.getLocal("reverse"),h.getLocal("mulFactor")))}function et(){const F=t.addFunction(n+"__fftFinal");F.addParam("px","i32"),F.addParam("bits","i32"),F.addParam("reverse","i32"),F.addParam("mulFactor","i32"),F.addLocal("n","i32"),F.addLocal("ndiv2","i32"),F.addLocal("pInv2","i32"),F.addLocal("i","i32"),F.addLocal("mask","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(d));F.addCode(h.if(h.i32_and(h.i32_eqz(h.getLocal("reverse")),h.call(o+"_isOne",h.getLocal("mulFactor"))),h.ret([])),h.setLocal("n",h.i32_shl(h.i32_const(1),h.getLocal("bits"))),h.setLocal("mask",h.i32_sub(h.getLocal("n"),h.i32_const(1))),h.setLocal("i",h.i32_const(1)),h.setLocal("ndiv2",h.i32_shr_u(h.getLocal("n"),h.i32_const(1))),h.block(h.loop(h.br_if(1,h.i32_ge_u(h.getLocal("i"),h.getLocal("ndiv2"))),h.setLocal("idx1",h.i32_add(h.getLocal("px"),h.i32_mul(h.getLocal("i"),h.i32_const(d)))),h.setLocal("idx2",h.i32_add(h.getLocal("px"),h.i32_mul(h.i32_sub(h.getLocal("n"),h.getLocal("i")),h.i32_const(d)))),h.if(h.getLocal("reverse"),h.if(h.call(o+"_isOne",h.getLocal("mulFactor")),[...h.call(i+"_copy",h.getLocal("idx1"),H),...h.call(i+"_copy",h.getLocal("idx2"),h.getLocal("idx1")),...h.call(i+"_copy",H,h.getLocal("idx2"))],[...h.call(i+"_copy",h.getLocal("idx1"),H),...h.call(a,h.getLocal("idx2"),h.getLocal("mulFactor"),h.getLocal("idx1")),...h.call(a,H,h.getLocal("mulFactor"),h.getLocal("idx2"))]),h.if(h.call(o+"_isOne",h.getLocal("mulFactor")),[],[...h.call(a,h.getLocal("idx1"),h.getLocal("mulFactor"),h.getLocal("idx1")),...h.call(a,h.getLocal("idx2"),h.getLocal("mulFactor"),h.getLocal("idx2"))])),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))),h.if(h.call(o+"_isOne",h.getLocal("mulFactor")),[],[...h.call(a,h.getLocal("px"),h.getLocal("mulFactor"),h.getLocal("px")),...h.setLocal("idx2",h.i32_add(h.getLocal("px"),h.i32_mul(h.getLocal("ndiv2"),h.i32_const(d)))),...h.call(a,h.getLocal("idx2"),h.getLocal("mulFactor"),h.getLocal("idx2"))]))}function at(){const F=t.addFunction(n+"__reversePermutation");F.addParam("px","i32"),F.addParam("bits","i32"),F.addLocal("n","i32"),F.addLocal("i","i32"),F.addLocal("ri","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(d));F.addCode(h.setLocal("n",h.i32_shl(h.i32_const(1),h.getLocal("bits"))),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("px"),h.i32_mul(h.getLocal("i"),h.i32_const(d)))),h.setLocal("ri",h.call(n+"__rev",h.getLocal("i"),h.getLocal("bits"))),h.setLocal("idx2",h.i32_add(h.getLocal("px"),h.i32_mul(h.getLocal("ri"),h.i32_const(d)))),h.if(h.i32_lt_u(h.getLocal("i"),h.getLocal("ri")),[...h.call(i+"_copy",h.getLocal("idx1"),H),...h.call(i+"_copy",h.getLocal("idx2"),h.getLocal("idx1")),...h.call(i+"_copy",H,h.getLocal("idx2"))]),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function rt(){const F=t.addFunction(n+"__rev");F.addParam("x","i32"),F.addParam("bits","i32"),F.setReturnType("i32");const h=F.getCodeBuilder();F.addCode(h.i32_rotl(h.i32_add(h.i32_add(h.i32_shl(h.i32_load8_u(h.i32_and(h.getLocal("x"),h.i32_const(255)),S,0),h.i32_const(24)),h.i32_shl(h.i32_load8_u(h.i32_and(h.i32_shr_u(h.getLocal("x"),h.i32_const(8)),h.i32_const(255)),S,0),h.i32_const(16))),h.i32_add(h.i32_shl(h.i32_load8_u(h.i32_and(h.i32_shr_u(h.getLocal("x"),h.i32_const(16)),h.i32_const(255)),S,0),h.i32_const(8)),h.i32_load8_u(h.i32_and(h.i32_shr_u(h.getLocal("x"),h.i32_const(24)),h.i32_const(255)),S,0))),h.getLocal("bits")))}function gt(){const F=t.addFunction(n+"_fftJoin");F.addParam("pBuff1","i32"),F.addParam("pBuff2","i32"),F.addParam("n","i32"),F.addParam("first","i32"),F.addParam("inc","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32"),F.addLocal("i","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(u)),M=h.i32_const(t.alloc(d)),E=h.i32_const(t.alloc(d));F.addCode(h.call(o+"_copy",h.getLocal("first"),H),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff1"),h.i32_mul(h.getLocal("i"),h.i32_const(d)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff2"),h.i32_mul(h.getLocal("i"),h.i32_const(d)))),h.call(a,h.getLocal("idx2"),H,M),h.call(i+"_copy",h.getLocal("idx1"),E),h.call(i+"_add",E,M,h.getLocal("idx1")),h.call(i+"_sub",E,M,h.getLocal("idx2")),h.call(o+"_mul",H,h.getLocal("inc"),H),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function Rt(){const F=t.addFunction(n+"_fftJoinExt");F.addParam("pBuff1","i32"),F.addParam("pBuff2","i32"),F.addParam("n","i32"),F.addParam("first","i32"),F.addParam("inc","i32"),F.addParam("totalBits","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32"),F.addLocal("i","i32"),F.addLocal("pShiftToM","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(u)),M=h.i32_const(t.alloc(d));F.addCode(h.setLocal("pShiftToM",h.i32_add(h.i32_const(D),h.i32_mul(h.getLocal("totalBits"),h.i32_const(u)))),h.call(o+"_copy",h.getLocal("first"),H),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff1"),h.i32_mul(h.getLocal("i"),h.i32_const(d)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff2"),h.i32_mul(h.getLocal("i"),h.i32_const(d)))),h.call(i+"_add",h.getLocal("idx1"),h.getLocal("idx2"),M),h.call(a,h.getLocal("idx2"),h.getLocal("pShiftToM"),h.getLocal("idx2")),h.call(i+"_add",h.getLocal("idx1"),h.getLocal("idx2"),h.getLocal("idx2")),h.call(a,h.getLocal("idx2"),H,h.getLocal("idx2")),h.call(i+"_copy",M,h.getLocal("idx1")),h.call(o+"_mul",H,h.getLocal("inc"),H),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function yt(){const F=t.addFunction(n+"_fftJoinExtInv");F.addParam("pBuff1","i32"),F.addParam("pBuff2","i32"),F.addParam("n","i32"),F.addParam("first","i32"),F.addParam("inc","i32"),F.addParam("totalBits","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32"),F.addLocal("i","i32"),F.addLocal("pShiftToM","i32"),F.addLocal("pSConst","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(u)),M=h.i32_const(t.alloc(d));F.addCode(h.setLocal("pShiftToM",h.i32_add(h.i32_const(D),h.i32_mul(h.getLocal("totalBits"),h.i32_const(u)))),h.setLocal("pSConst",h.i32_add(h.i32_const(z),h.i32_mul(h.getLocal("totalBits"),h.i32_const(u)))),h.call(o+"_copy",h.getLocal("first"),H),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff1"),h.i32_mul(h.getLocal("i"),h.i32_const(d)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff2"),h.i32_mul(h.getLocal("i"),h.i32_const(d)))),h.call(a,h.getLocal("idx2"),H,M),h.call(i+"_sub",h.getLocal("idx1"),M,h.getLocal("idx2")),h.call(a,h.getLocal("idx2"),h.getLocal("pSConst"),h.getLocal("idx2")),h.call(a,h.getLocal("idx1"),h.getLocal("pShiftToM"),h.getLocal("idx1")),h.call(i+"_sub",M,h.getLocal("idx1"),h.getLocal("idx1")),h.call(a,h.getLocal("idx1"),h.getLocal("pSConst"),h.getLocal("idx1")),h.call(o+"_mul",H,h.getLocal("inc"),H),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function wt(){const F=t.addFunction(n+"_prepareLagrangeEvaluation");F.addParam("pBuff1","i32"),F.addParam("pBuff2","i32"),F.addParam("n","i32"),F.addParam("first","i32"),F.addParam("inc","i32"),F.addParam("totalBits","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32"),F.addLocal("i","i32"),F.addLocal("pShiftToM","i32"),F.addLocal("pSConst","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(u)),M=h.i32_const(t.alloc(d));F.addCode(h.setLocal("pShiftToM",h.i32_add(h.i32_const(D),h.i32_mul(h.getLocal("totalBits"),h.i32_const(u)))),h.setLocal("pSConst",h.i32_add(h.i32_const(z),h.i32_mul(h.getLocal("totalBits"),h.i32_const(u)))),h.call(o+"_copy",h.getLocal("first"),H),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff1"),h.i32_mul(h.getLocal("i"),h.i32_const(d)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff2"),h.i32_mul(h.getLocal("i"),h.i32_const(d)))),h.call(a,h.getLocal("idx1"),h.getLocal("pShiftToM"),M),h.call(i+"_sub",h.getLocal("idx2"),M,M),h.call(i+"_sub",h.getLocal("idx1"),h.getLocal("idx2"),h.getLocal("idx2")),h.call(a,M,h.getLocal("pSConst"),h.getLocal("idx1")),h.call(a,h.getLocal("idx2"),H,h.getLocal("idx2")),h.call(o+"_mul",H,h.getLocal("inc"),H),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function L(){const F=t.addFunction(n+"_fftMix");F.addParam("pBuff","i32"),F.addParam("n","i32"),F.addParam("exp","i32"),F.addLocal("nGroups","i32"),F.addLocal("nPerGroup","i32"),F.addLocal("nPerGroupDiv2","i32"),F.addLocal("pairOffset","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32"),F.addLocal("i","i32"),F.addLocal("j","i32"),F.addLocal("pwm","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(u)),M=h.i32_const(t.alloc(d)),E=h.i32_const(t.alloc(d));F.addCode(h.setLocal("nPerGroup",h.i32_shl(h.i32_const(1),h.getLocal("exp"))),h.setLocal("nPerGroupDiv2",h.i32_shr_u(h.getLocal("nPerGroup"),h.i32_const(1))),h.setLocal("nGroups",h.i32_shr_u(h.getLocal("n"),h.getLocal("exp"))),h.setLocal("pairOffset",h.i32_mul(h.getLocal("nPerGroupDiv2"),h.i32_const(d))),h.setLocal("pwm",h.i32_add(h.i32_const(O),h.i32_mul(h.getLocal("exp"),h.i32_const(u)))),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("nGroups"))),h.call(o+"_one",H),h.setLocal("j",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("j"),h.getLocal("nPerGroupDiv2"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.i32_add(h.i32_mul(h.getLocal("i"),h.getLocal("nPerGroup")),h.getLocal("j")),h.i32_const(d)))),h.setLocal("idx2",h.i32_add(h.getLocal("idx1"),h.getLocal("pairOffset"))),h.call(a,h.getLocal("idx2"),H,M),h.call(i+"_copy",h.getLocal("idx1"),E),h.call(i+"_add",E,M,h.getLocal("idx1")),h.call(i+"_sub",E,M,h.getLocal("idx2")),h.call(o+"_mul",H,h.getLocal("pwm"),H),h.setLocal("j",h.i32_add(h.getLocal("j"),h.i32_const(1))),h.br(0))),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function f(){const F=t.addFunction(n+"_fftFinal");F.addParam("pBuff","i32"),F.addParam("n","i32"),F.addParam("factor","i32"),F.addLocal("idx1","i32"),F.addLocal("idx2","i32"),F.addLocal("i","i32"),F.addLocal("ndiv2","i32");const h=F.getCodeBuilder(),H=h.i32_const(t.alloc(d));F.addCode(h.setLocal("ndiv2",h.i32_shr_u(h.getLocal("n"),h.i32_const(1))),h.if(h.i32_and(h.getLocal("n"),h.i32_const(1)),h.call(a,h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.getLocal("ndiv2"),h.i32_const(d))),h.getLocal("factor"),h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.getLocal("ndiv2"),h.i32_const(d))))),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_ge_u(h.getLocal("i"),h.getLocal("ndiv2"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.getLocal("i"),h.i32_const(d)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.i32_sub(h.i32_sub(h.getLocal("n"),h.i32_const(1)),h.getLocal("i")),h.i32_const(d)))),h.call(a,h.getLocal("idx2"),h.getLocal("factor"),H),h.call(a,h.getLocal("idx1"),h.getLocal("factor"),h.getLocal("idx2")),h.call(i+"_copy",H,h.getLocal("idx1")),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}rt(),at(),et(),ot(),W(),J(),it(),gt(),Rt(),yt(),L(),f(),wt(),t.exportFunction(n+"_fft"),t.exportFunction(n+"_ifft"),t.exportFunction(n+"_rawfft"),t.exportFunction(n+"_fftJoin"),t.exportFunction(n+"_fftJoinExt"),t.exportFunction(n+"_fftJoinExtInv"),t.exportFunction(n+"_fftMix"),t.exportFunction(n+"_fftFinal"),t.exportFunction(n+"_prepareLagrangeEvaluation")},Zc=function(t,n,i){const a=t.modules[i].n64*8;function s(){const _=t.addFunction(n+"_zero");_.addParam("px","i32"),_.addParam("n","i32"),_.addLocal("lastp","i32"),_.addLocal("p","i32");const d=_.getCodeBuilder();_.addCode(d.setLocal("p",d.getLocal("px")),d.setLocal("lastp",d.i32_add(d.getLocal("px"),d.i32_mul(d.getLocal("n"),d.i32_const(a)))),d.block(d.loop(d.br_if(1,d.i32_eq(d.getLocal("p"),d.getLocal("lastp"))),d.call(i+"_zero",d.getLocal("p")),d.setLocal("p",d.i32_add(d.getLocal("p"),d.i32_const(a))),d.br(0))))}function u(){const _=t.addFunction(n+"_constructLC");_.addParam("ppolynomials","i32"),_.addParam("psignals","i32"),_.addParam("nSignals","i32"),_.addParam("pres","i32"),_.addLocal("i","i32"),_.addLocal("j","i32"),_.addLocal("pp","i32"),_.addLocal("ps","i32"),_.addLocal("pd","i32"),_.addLocal("ncoefs","i32");const d=_.getCodeBuilder(),l=d.i32_const(t.alloc(a));_.addCode(d.setLocal("i",d.i32_const(0)),d.setLocal("pp",d.getLocal("ppolynomials")),d.setLocal("ps",d.getLocal("psignals")),d.block(d.loop(d.br_if(1,d.i32_eq(d.getLocal("i"),d.getLocal("nSignals"))),d.setLocal("ncoefs",d.i32_load(d.getLocal("pp"))),d.setLocal("pp",d.i32_add(d.getLocal("pp"),d.i32_const(4))),d.setLocal("j",d.i32_const(0)),d.block(d.loop(d.br_if(1,d.i32_eq(d.getLocal("j"),d.getLocal("ncoefs"))),d.setLocal("pd",d.i32_add(d.getLocal("pres"),d.i32_mul(d.i32_load(d.getLocal("pp")),d.i32_const(a)))),d.setLocal("pp",d.i32_add(d.getLocal("pp"),d.i32_const(4))),d.call(i+"_mul",d.getLocal("ps"),d.getLocal("pp"),l),d.call(i+"_add",l,d.getLocal("pd"),d.getLocal("pd")),d.setLocal("pp",d.i32_add(d.getLocal("pp"),d.i32_const(a))),d.setLocal("j",d.i32_add(d.getLocal("j"),d.i32_const(1))),d.br(0))),d.setLocal("ps",d.i32_add(d.getLocal("ps"),d.i32_const(a))),d.setLocal("i",d.i32_add(d.getLocal("i"),d.i32_const(1))),d.br(0))))}return s(),u(),t.exportFunction(n+"_zero"),t.exportFunction(n+"_constructLC"),n},Xc=function(t,n,i){const a=t.modules[i].n64*8;function s(){const d=t.addFunction(n+"_buildABC");d.addParam("pCoefs","i32"),d.addParam("nCoefs","i32"),d.addParam("pWitness","i32"),d.addParam("pA","i32"),d.addParam("pB","i32"),d.addParam("pC","i32"),d.addParam("offsetOut","i32"),d.addParam("nOut","i32"),d.addParam("offsetWitness","i32"),d.addParam("nWitness","i32"),d.addLocal("it","i32"),d.addLocal("ita","i32"),d.addLocal("itb","i32"),d.addLocal("last","i32"),d.addLocal("m","i32"),d.addLocal("c","i32"),d.addLocal("s","i32"),d.addLocal("pOut","i32");const l=d.getCodeBuilder(),m=l.i32_const(t.alloc(a));d.addCode(l.setLocal("ita",l.getLocal("pA")),l.setLocal("itb",l.getLocal("pB")),l.setLocal("last",l.i32_add(l.getLocal("pA"),l.i32_mul(l.getLocal("nOut"),l.i32_const(a)))),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("ita"),l.getLocal("last"))),l.call(i+"_zero",l.getLocal("ita")),l.call(i+"_zero",l.getLocal("itb")),l.setLocal("ita",l.i32_add(l.getLocal("ita"),l.i32_const(a))),l.setLocal("itb",l.i32_add(l.getLocal("itb"),l.i32_const(a))),l.br(0))),l.setLocal("it",l.getLocal("pCoefs")),l.setLocal("last",l.i32_add(l.getLocal("pCoefs"),l.i32_mul(l.getLocal("nCoefs"),l.i32_const(a+12)))),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("it"),l.getLocal("last"))),l.setLocal("s",l.i32_load(l.getLocal("it"),8)),l.if(l.i32_or(l.i32_lt_u(l.getLocal("s"),l.getLocal("offsetWitness")),l.i32_ge_u(l.getLocal("s"),l.i32_add(l.getLocal("offsetWitness"),l.getLocal("nWitness")))),[...l.setLocal("it",l.i32_add(l.getLocal("it"),l.i32_const(a+12))),...l.br(1)]),l.setLocal("m",l.i32_load(l.getLocal("it"))),l.if(l.i32_eq(l.getLocal("m"),l.i32_const(0)),l.setLocal("pOut",l.getLocal("pA")),l.if(l.i32_eq(l.getLocal("m"),l.i32_const(1)),l.setLocal("pOut",l.getLocal("pB")),[...l.setLocal("it",l.i32_add(l.getLocal("it"),l.i32_const(a+12))),...l.br(1)])),l.setLocal("c",l.i32_load(l.getLocal("it"),4)),l.if(l.i32_or(l.i32_lt_u(l.getLocal("c"),l.getLocal("offsetOut")),l.i32_ge_u(l.getLocal("c"),l.i32_add(l.getLocal("offsetOut"),l.getLocal("nOut")))),[...l.setLocal("it",l.i32_add(l.getLocal("it"),l.i32_const(a+12))),...l.br(1)]),l.setLocal("pOut",l.i32_add(l.getLocal("pOut"),l.i32_mul(l.i32_sub(l.getLocal("c"),l.getLocal("offsetOut")),l.i32_const(a)))),l.call(i+"_mul",l.i32_add(l.getLocal("pWitness"),l.i32_mul(l.i32_sub(l.getLocal("s"),l.getLocal("offsetWitness")),l.i32_const(a))),l.i32_add(l.getLocal("it"),l.i32_const(12)),m),l.call(i+"_add",l.getLocal("pOut"),m,l.getLocal("pOut")),l.setLocal("it",l.i32_add(l.getLocal("it"),l.i32_const(a+12))),l.br(0))),l.setLocal("ita",l.getLocal("pA")),l.setLocal("itb",l.getLocal("pB")),l.setLocal("it",l.getLocal("pC")),l.setLocal("last",l.i32_add(l.getLocal("pA"),l.i32_mul(l.getLocal("nOut"),l.i32_const(a)))),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("ita"),l.getLocal("last"))),l.call(i+"_mul",l.getLocal("ita"),l.getLocal("itb"),l.getLocal("it")),l.setLocal("ita",l.i32_add(l.getLocal("ita"),l.i32_const(a))),l.setLocal("itb",l.i32_add(l.getLocal("itb"),l.i32_const(a))),l.setLocal("it",l.i32_add(l.getLocal("it"),l.i32_const(a))),l.br(0))))}function u(){const d=t.addFunction(n+"_joinABC");d.addParam("pA","i32"),d.addParam("pB","i32"),d.addParam("pC","i32"),d.addParam("n","i32"),d.addParam("pP","i32"),d.addLocal("ita","i32"),d.addLocal("itb","i32"),d.addLocal("itc","i32"),d.addLocal("itp","i32"),d.addLocal("last","i32");const l=d.getCodeBuilder(),m=l.i32_const(t.alloc(a));d.addCode(l.setLocal("ita",l.getLocal("pA")),l.setLocal("itb",l.getLocal("pB")),l.setLocal("itc",l.getLocal("pC")),l.setLocal("itp",l.getLocal("pP")),l.setLocal("last",l.i32_add(l.getLocal("pA"),l.i32_mul(l.getLocal("n"),l.i32_const(a)))),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("ita"),l.getLocal("last"))),l.call(i+"_mul",l.getLocal("ita"),l.getLocal("itb"),m),l.call(i+"_sub",m,l.getLocal("itc"),l.getLocal("itp")),l.setLocal("ita",l.i32_add(l.getLocal("ita"),l.i32_const(a))),l.setLocal("itb",l.i32_add(l.getLocal("itb"),l.i32_const(a))),l.setLocal("itc",l.i32_add(l.getLocal("itc"),l.i32_const(a))),l.setLocal("itp",l.i32_add(l.getLocal("itp"),l.i32_const(a))),l.br(0))))}function _(){const d=t.addFunction(n+"_batchAdd");d.addParam("pa","i32"),d.addParam("pb","i32"),d.addParam("n","i32"),d.addParam("pr","i32"),d.addLocal("ita","i32"),d.addLocal("itb","i32"),d.addLocal("itr","i32"),d.addLocal("last","i32");const l=d.getCodeBuilder();d.addCode(l.setLocal("ita",l.getLocal("pa")),l.setLocal("itb",l.getLocal("pb")),l.setLocal("itr",l.getLocal("pr")),l.setLocal("last",l.i32_add(l.getLocal("pa"),l.i32_mul(l.getLocal("n"),l.i32_const(a)))),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("ita"),l.getLocal("last"))),l.call(i+"_add",l.getLocal("ita"),l.getLocal("itb"),l.getLocal("itr")),l.setLocal("ita",l.i32_add(l.getLocal("ita"),l.i32_const(a))),l.setLocal("itb",l.i32_add(l.getLocal("itb"),l.i32_const(a))),l.setLocal("itr",l.i32_add(l.getLocal("itr"),l.i32_const(a))),l.br(0))))}return s(),u(),_(),t.exportFunction(n+"_buildABC"),t.exportFunction(n+"_joinABC"),t.exportFunction(n+"_batchAdd"),n},Jc=function(t,n,i,o,a,s,u,_){const d=t.addFunction(n);d.addParam("pIn","i32"),d.addParam("n","i32"),d.addParam("pFirst","i32"),d.addParam("pInc","i32"),d.addParam("pOut","i32"),d.addLocal("pOldFree","i32"),d.addLocal("i","i32"),d.addLocal("pFrom","i32"),d.addLocal("pTo","i32");const l=d.getCodeBuilder(),m=l.i32_const(t.alloc(u));d.addCode(l.setLocal("pFrom",l.getLocal("pIn")),l.setLocal("pTo",l.getLocal("pOut"))),d.addCode(l.call(o+"_copy",l.getLocal("pFirst"),m)),d.addCode(l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.call(_,l.getLocal("pFrom"),m,l.getLocal("pTo")),l.setLocal("pFrom",l.i32_add(l.getLocal("pFrom"),l.i32_const(a))),l.setLocal("pTo",l.i32_add(l.getLocal("pTo"),l.i32_const(s))),l.call(o+"_mul",m,l.getLocal("pInc"),m),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0)))),t.exportFunction(n)};const pt=rn.exports,zt=gn,G_=Mr,k_=Hc,tl=zc,W_=$c,el=Vc,Dr=Kc,q_=Zc,Q_=Xc,Wi=Jc;var H_=function(t,n){const i=n||"bn128";if(t.modules[i])return i;const o=pt("21888242871839275222246405745257275088696311157297823662689037894645226208583"),a=pt("21888242871839275222246405745257275088548364400416034343698204186575808495617"),s=Math.floor((o.minus(1).bitLength()-1)/64)+1,u=s*8,_=u,d=u,l=d*2,m=d*12,A=t.alloc(zt.bigInt2BytesLE(a,_)),p=G_(t,o,"f1m");k_(t,a,"fr","frm");const R=t.alloc(zt.bigInt2BytesLE($(pt(3)),d)),P=el(t,"g1m","f1m",R);Dr(t,"frm","frm","frm","frm_mul"),q_(t,"pol","frm"),Q_(t,"qap","frm");const C=tl(t,"f1m_neg","f2m","f1m"),G=t.alloc([...zt.bigInt2BytesLE($(pt("19485874751759354771024239261021720505790618469301721065564631296452457478373")),d),...zt.bigInt2BytesLE($(pt("266929791119991161246907387137283842545076965332900288569378510910307636690")),d)]),O=el(t,"g2m","f2m",G);function Z(w,r){const c=t.addFunction(w);c.addParam("pG","i32"),c.addParam("pFr","i32"),c.addParam("pr","i32");const y=c.getCodeBuilder(),v=y.i32_const(t.alloc(u));c.addCode(y.call("frm_fromMontgomery",y.getLocal("pFr"),v),y.call(r,y.getLocal("pG"),v,y.i32_const(u),y.getLocal("pr"))),t.exportFunction(w)}Z("g1m_timesFr","g1m_timesScalar"),Dr(t,"g1m","g1m","frm","g1m_timesFr"),Z("g2m_timesFr","g2m_timesScalar"),Dr(t,"g2m","g2m","frm","g2m_timesFr"),Z("g1m_timesFrAffine","g1m_timesScalarAffine"),Z("g2m_timesFrAffine","g2m_timesScalarAffine"),Wi(t,"frm_batchApplyKey","fmr","frm",u,u,u,"frm_mul"),Wi(t,"g1m_batchApplyKey","g1m","frm",u*3,u*3,u,"g1m_timesFr"),Wi(t,"g1m_batchApplyKeyMixed","g1m","frm",u*2,u*3,u,"g1m_timesFrAffine"),Wi(t,"g2m_batchApplyKey","g2m","frm",u*2*3,u*3*2,u,"g2m_timesFr"),Wi(t,"g2m_batchApplyKeyMixed","g2m","frm",u*2*2,u*3*2,u,"g2m_timesFrAffine");function $(w){return pt(w).times(pt.one.shiftLeft(d*8)).mod(o)}const Y=[pt("1"),pt("2"),pt.one],B=t.alloc([...zt.bigInt2BytesLE($(Y[0]),d),...zt.bigInt2BytesLE($(Y[1]),d),...zt.bigInt2BytesLE($(Y[2]),d)]),g=[pt.zero,pt.one,pt.zero],I=t.alloc([...zt.bigInt2BytesLE($(g[0]),d),...zt.bigInt2BytesLE($(g[1]),d),...zt.bigInt2BytesLE($(g[2]),d)]),D=[[pt("10857046999023057135944570762232829481370756359578518086990519993285655852781"),pt("11559732032986387107991004021392285783925812861821192530917403151452391805634")],[pt("8495653923123431417604973247489272438418190587263600148770280649306958101930"),pt("4082367875863433681332203403145435568316851327593401208105741076214120093531")],[pt.one,pt.zero]],z=t.alloc([...zt.bigInt2BytesLE($(D[0][0]),d),...zt.bigInt2BytesLE($(D[0][1]),d),...zt.bigInt2BytesLE($(D[1][0]),d),...zt.bigInt2BytesLE($(D[1][1]),d),...zt.bigInt2BytesLE($(D[2][0]),d),...zt.bigInt2BytesLE($(D[2][1]),d)]),U=[[pt.zero,pt.zero],[pt.one,pt.zero],[pt.zero,pt.zero]],N=t.alloc([...zt.bigInt2BytesLE($(U[0][0]),d),...zt.bigInt2BytesLE($(U[0][1]),d),...zt.bigInt2BytesLE($(U[1][0]),d),...zt.bigInt2BytesLE($(U[1][1]),d),...zt.bigInt2BytesLE($(U[2][0]),d),...zt.bigInt2BytesLE($(U[2][1]),d)]),S=t.alloc([...zt.bigInt2BytesLE($(1),d),...zt.bigInt2BytesLE($(0),d),...zt.bigInt2BytesLE($(0),d),...zt.bigInt2BytesLE($(0),d),...zt.bigInt2BytesLE($(0),d),...zt.bigInt2BytesLE($(0),d),...zt.bigInt2BytesLE($(0),d),...zt.bigInt2BytesLE($(0),d),...zt.bigInt2BytesLE($(0),d),...zt.bigInt2BytesLE($(0),d),...zt.bigInt2BytesLE($(0),d),...zt.bigInt2BytesLE($(0),d)]),W=t.alloc([...zt.bigInt2BytesLE($(9),d),...zt.bigInt2BytesLE($(1),d)]),J=t.alloc([...zt.bigInt2BytesLE($(pt(2).modInv(o)),d),...zt.bigInt2BytesLE(pt(0),d)]),it=W,ot=t.alloc([...zt.bigInt2BytesLE($("19485874751759354771024239261021720505790618469301721065564631296452457478373"),d),...zt.bigInt2BytesLE($("266929791119991161246907387137283842545076965332900288569378510910307636690"),d)]);function et(){const w=t.addFunction(i+"_mulNR6");w.addParam("x","i32"),w.addParam("pr","i32");const r=w.getCodeBuilder();w.addCode(r.call(C+"_mul",r.i32_const(W),r.getLocal("x"),r.getLocal("pr")))}et();const at=W_(t,i+"_mulNR6","f6m","f2m");function rt(){const w=t.addFunction(i+"_mulNR12");w.addParam("x","i32"),w.addParam("pr","i32");const r=w.getCodeBuilder();w.addCode(r.call(C+"_mul",r.i32_const(W),r.i32_add(r.getLocal("x"),r.i32_const(u*4)),r.getLocal("pr")),r.call(C+"_copy",r.getLocal("x"),r.i32_add(r.getLocal("pr"),r.i32_const(u*2))),r.call(C+"_copy",r.i32_add(r.getLocal("x"),r.i32_const(u*2)),r.i32_add(r.getLocal("pr"),r.i32_const(u*4))))}rt();const gt=tl(t,i+"_mulNR12","ftm",at),Rt=pt("29793968203157093288"),yt=ft(Rt),wt=t.alloc(yt),L=3*l,f=yt.length-1,h=yt.reduce((w,r)=>w+(r!=0?1:0),0)+f+1,H=3*2*u,M=3*u*2+h*L;t.modules[i]={n64:s,pG1gen:B,pG1zero:I,pG1b:R,pG2gen:z,pG2zero:N,pG2b:G,pq:t.modules.f1m.pq,pr:A,pOneT:S,prePSize:H,preQSize:M,r:a.toString(),q:o.toString()};const E=pt("4965661367192848881");function K(w){let r=w;const c=[];for(;r.gt(pt.zero);){if(r.isOdd()){const y=2-r.mod(4).toJSNumber();c.push(y),r=r.minus(y)}else c.push(0);r=r.shiftRight(1)}return c}function ft(w){let r=w;const c=[];for(;r.gt(pt.zero);)r.isOdd()?c.push(1):c.push(0),r=r.shiftRight(1);return c}function ct(){const w=t.addFunction(i+"_prepareG1");w.addParam("pP","i32"),w.addParam("ppreP","i32");const r=w.getCodeBuilder();w.addCode(r.call(P+"_normalize",r.getLocal("pP"),r.getLocal("ppreP")))}function Lt(){const w=t.addFunction(i+"_prepAddStep");w.addParam("pQ","i32"),w.addParam("pR","i32"),w.addParam("pCoef","i32");const r=w.getCodeBuilder(),c=r.getLocal("pQ"),y=r.i32_add(r.getLocal("pQ"),r.i32_const(l)),v=r.getLocal("pR"),T=r.i32_add(r.getLocal("pR"),r.i32_const(l)),k=r.i32_add(r.getLocal("pR"),r.i32_const(2*l)),V=r.getLocal("pCoef"),nt=r.i32_add(r.getLocal("pCoef"),r.i32_const(l)),dt=r.i32_add(r.getLocal("pCoef"),r.i32_const(2*l)),_t=nt,ut=r.i32_const(t.alloc(l)),It=r.i32_const(t.alloc(l)),xt=r.i32_const(t.alloc(l)),Ot=r.i32_const(t.alloc(l)),Ft=r.i32_const(t.alloc(l)),Ut=r.i32_const(t.alloc(l)),Dt=r.i32_const(t.alloc(l));w.addCode(r.call(C+"_mul",c,k,_t),r.call(C+"_sub",v,_t,_t),r.call(C+"_mul",y,k,ut),r.call(C+"_sub",T,ut,ut),r.call(C+"_square",_t,It),r.call(C+"_square",ut,xt),r.call(C+"_mul",_t,It,Ot),r.call(C+"_mul",v,It,Ft),r.call(C+"_add",Ft,Ft,Dt),r.call(C+"_mul",k,xt,Ut),r.call(C+"_add",Ot,Ut,Ut),r.call(C+"_sub",Ut,Dt,Ut),r.call(C+"_mul",_t,Ut,v),r.call(C+"_mul",Ot,T,T),r.call(C+"_sub",Ft,Ut,Dt),r.call(C+"_mul",ut,Dt,Dt),r.call(C+"_sub",Dt,T,T),r.call(C+"_mul",k,Ot,k),r.call(C+"_mul",_t,y,Dt),r.call(C+"_mul",ut,c,V),r.call(C+"_sub",V,Dt,V),r.call(C+"_mul",V,r.i32_const(it),V),r.call(C+"_neg",ut,dt))}function Nt(){const w=t.addFunction(i+"_prepDblStep");w.addParam("pR","i32"),w.addParam("pCoef","i32");const r=w.getCodeBuilder(),c=r.getLocal("pR"),y=r.i32_add(r.getLocal("pR"),r.i32_const(l)),v=r.i32_add(r.getLocal("pR"),r.i32_const(2*l)),T=r.getLocal("pCoef"),k=r.i32_add(r.getLocal("pCoef"),r.i32_const(l)),V=r.i32_add(r.getLocal("pCoef"),r.i32_const(2*l)),nt=r.i32_const(t.alloc(l)),dt=r.i32_const(t.alloc(l)),_t=r.i32_const(t.alloc(l)),ut=r.i32_const(t.alloc(l)),It=r.i32_const(t.alloc(l)),xt=r.i32_const(t.alloc(l)),Ot=r.i32_const(t.alloc(l)),Ft=r.i32_const(t.alloc(l)),Ut=r.i32_const(t.alloc(l)),Dt=r.i32_const(t.alloc(l)),$t=r.i32_const(t.alloc(l)),Gt=r.i32_const(t.alloc(l));w.addCode(r.call(C+"_mul",y,r.i32_const(J),nt),r.call(C+"_mul",c,nt,nt),r.call(C+"_square",y,dt),r.call(C+"_square",v,_t),r.call(C+"_add",_t,_t,ut),r.call(C+"_add",ut,_t,ut),r.call(C+"_mul",r.i32_const(ot),ut,It),r.call(C+"_add",It,It,xt),r.call(C+"_add",It,xt,xt),r.call(C+"_add",dt,xt,Ot),r.call(C+"_mul",Ot,r.i32_const(J),Ot),r.call(C+"_add",dt,_t,Gt),r.call(C+"_add",y,v,Ft),r.call(C+"_square",Ft,Ft),r.call(C+"_sub",Ft,Gt,Ft),r.call(C+"_sub",It,dt,Ut),r.call(C+"_square",c,Dt),r.call(C+"_square",It,$t),r.call(C+"_sub",dt,xt,Gt),r.call(C+"_mul",nt,Gt,c),r.call(C+"_add",$t,$t,Gt),r.call(C+"_add",$t,Gt,Gt),r.call(C+"_square",Ot,y),r.call(C+"_sub",y,Gt,y),r.call(C+"_mul",dt,Ft,v),r.call(C+"_mul",r.i32_const(it),Ut,T),r.call(C+"_neg",Ft,k),r.call(C+"_add",Dt,Dt,V),r.call(C+"_add",Dt,V,V))}function Tt(){const w=t.addFunction(i+"_mulByQ");w.addParam("p1","i32"),w.addParam("pr","i32");const r=w.getCodeBuilder(),c=r.getLocal("p1"),y=r.i32_add(r.getLocal("p1"),r.i32_const(l)),v=r.i32_add(r.getLocal("p1"),r.i32_const(l*2)),T=r.getLocal("pr"),k=r.i32_add(r.getLocal("pr"),r.i32_const(l)),V=r.i32_add(r.getLocal("pr"),r.i32_const(l*2)),nt=r.i32_const(t.alloc([...zt.bigInt2BytesLE($("21575463638280843010398324269430826099269044274347216827212613867836435027261"),d),...zt.bigInt2BytesLE($("10307601595873709700152284273816112264069230130616436755625194854815875713954"),d)])),dt=r.i32_const(t.alloc([...zt.bigInt2BytesLE($("2821565182194536844548159561693502659359617185244120367078079554186484126554"),d),...zt.bigInt2BytesLE($("3505843767911556378687030309984248845540243509899259641013678093033130930403"),d)]));w.addCode(r.call(C+"_conjugate",c,T),r.call(C+"_mul",nt,T,T),r.call(C+"_conjugate",y,k),r.call(C+"_mul",dt,k,k),r.call(C+"_conjugate",v,V))}function bt(){Tt();const w=t.addFunction(i+"_prepareG2");w.addParam("pQ","i32"),w.addParam("ppreQ","i32"),w.addLocal("pCoef","i32"),w.addLocal("i","i32");const r=w.getCodeBuilder(),c=r.getLocal("pQ");r.i32_add(r.getLocal("pQ"),r.i32_const(l)),r.i32_add(r.getLocal("pQ"),r.i32_const(l*2));const y=t.alloc(l*3),v=r.i32_const(y),T=r.i32_const(y),k=r.i32_const(y+l),V=r.i32_const(y+2*l),nt=r.i32_add(r.getLocal("ppreQ"),r.i32_const(0)),dt=r.i32_add(r.getLocal("ppreQ"),r.i32_const(l));r.i32_add(r.getLocal("ppreQ"),r.i32_const(l*2));const _t=t.alloc(l*3),ut=r.i32_const(_t),It=t.alloc(l*3),xt=r.i32_const(It);r.i32_const(It);const Ot=r.i32_const(It+l);r.i32_const(It+l*2),w.addCode(r.call(O+"_normalize",c,nt),r.call(C+"_copy",nt,T),r.call(C+"_copy",dt,k),r.call(C+"_one",V)),w.addCode(r.setLocal("pCoef",r.i32_add(r.getLocal("ppreQ"),r.i32_const(l*3))),r.setLocal("i",r.i32_const(yt.length-2)),r.block(r.loop(r.call(i+"_prepDblStep",v,r.getLocal("pCoef")),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))),r.if(r.i32_load8_s(r.getLocal("i"),wt),[...r.call(i+"_prepAddStep",nt,v,r.getLocal("pCoef")),...r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L)))]),r.br_if(1,r.i32_eqz(r.getLocal("i"))),r.setLocal("i",r.i32_sub(r.getLocal("i"),r.i32_const(1))),r.br(0)))),w.addCode(r.call(i+"_mulByQ",nt,ut),r.call(i+"_mulByQ",ut,xt)),w.addCode(r.call(C+"_neg",Ot,Ot),r.call(i+"_prepAddStep",ut,v,r.getLocal("pCoef")),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))),r.call(i+"_prepAddStep",xt,v,r.getLocal("pCoef")),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))))}function St(){const w=t.addFunction(i+"__mulBy024Old");w.addParam("pEll0","i32"),w.addParam("pEllVW","i32"),w.addParam("pEllVV","i32"),w.addParam("pR","i32");const r=w.getCodeBuilder(),c=r.getLocal("pEll0"),y=r.getLocal("pEllVV"),v=r.getLocal("pEllVW"),T=r.getLocal("pR"),k=t.alloc(m),V=r.i32_const(k),nt=r.i32_const(k),dt=r.i32_const(k+l),_t=r.i32_const(k+l*2),ut=r.i32_const(k+l*3),It=r.i32_const(k+l*4),xt=r.i32_const(k+l*5);w.addCode(r.call(C+"_copy",c,nt),r.call(C+"_zero",dt),r.call(C+"_copy",y,_t),r.call(C+"_zero",ut),r.call(C+"_copy",v,It),r.call(C+"_zero",xt),r.call(gt+"_mul",V,T,T))}function mt(){const w=t.addFunction(i+"__mulBy024");w.addParam("pEll0","i32"),w.addParam("pEllVW","i32"),w.addParam("pEllVV","i32"),w.addParam("pR","i32");const r=w.getCodeBuilder(),c=r.getLocal("pEll0"),y=r.getLocal("pEllVV"),v=r.getLocal("pEllVW"),T=r.getLocal("pR"),k=r.i32_add(r.getLocal("pR"),r.i32_const(2*u)),V=r.i32_add(r.getLocal("pR"),r.i32_const(4*u)),nt=r.i32_add(r.getLocal("pR"),r.i32_const(6*u)),dt=r.i32_add(r.getLocal("pR"),r.i32_const(8*u)),_t=r.i32_add(r.getLocal("pR"),r.i32_const(10*u)),ut=r.i32_const(t.alloc(l)),It=r.i32_const(t.alloc(l)),xt=r.i32_const(t.alloc(l)),Ot=r.i32_const(t.alloc(l)),Ft=r.i32_const(t.alloc(l)),Ut=r.i32_const(t.alloc(l)),Dt=r.i32_const(t.alloc(l)),$t=r.i32_const(t.alloc(l)),Gt=r.i32_const(t.alloc(l)),kt=r.i32_const(t.alloc(l)),Mt=r.i32_const(t.alloc(l));w.addCode(r.call(C+"_mul",T,c,Dt),r.call(C+"_mul",V,y,$t),r.call(C+"_mul",dt,v,Gt),r.call(C+"_add",T,dt,xt),r.call(C+"_add",T,V,It),r.call(C+"_add",k,nt,Ot),r.call(C+"_add",Ot,_t,Ot),r.call(C+"_mul",k,y,kt),r.call(C+"_add",kt,Gt,Ft),r.call(C+"_mul",r.i32_const(W),Ft,Ut),r.call(C+"_add",Ut,Dt,T),r.call(C+"_mul",_t,v,Ft),r.call(C+"_add",kt,Ft,kt),r.call(C+"_add",Ft,$t,Ft),r.call(C+"_mul",r.i32_const(W),Ft,Ut),r.call(C+"_mul",k,c,Ft),r.call(C+"_add",kt,Ft,kt),r.call(C+"_add",Ut,Ft,k),r.call(C+"_add",c,y,ut),r.call(C+"_mul",It,ut,Ft),r.call(C+"_add",Dt,$t,Mt),r.call(C+"_sub",Ft,Mt,Ft),r.call(C+"_mul",nt,v,Ut),r.call(C+"_add",kt,Ut,kt),r.call(C+"_add",V,dt,ut),r.call(C+"_add",Ft,Ut,V),r.call(C+"_add",y,v,It),r.call(C+"_mul",It,ut,Ft),r.call(C+"_add",$t,Gt,Mt),r.call(C+"_sub",Ft,Mt,Ft),r.call(C+"_mul",r.i32_const(W),Ft,Ut),r.call(C+"_mul",nt,c,Ft),r.call(C+"_add",kt,Ft,kt),r.call(C+"_add",Ut,Ft,nt),r.call(C+"_mul",_t,y,Ft),r.call(C+"_add",kt,Ft,kt),r.call(C+"_mul",r.i32_const(W),Ft,Ut),r.call(C+"_add",c,v,ut),r.call(C+"_mul",xt,ut,Ft),r.call(C+"_add",Dt,Gt,Mt),r.call(C+"_sub",Ft,Mt,Ft),r.call(C+"_add",Ut,Ft,dt),r.call(C+"_add",c,y,ut),r.call(C+"_add",ut,v,ut),r.call(C+"_mul",Ot,ut,Ft),r.call(C+"_sub",Ft,kt,_t))}function Et(){const w=t.addFunction(i+"_millerLoop");w.addParam("ppreP","i32"),w.addParam("ppreQ","i32"),w.addParam("r","i32"),w.addLocal("pCoef","i32"),w.addLocal("i","i32");const r=w.getCodeBuilder(),c=r.getLocal("ppreP"),y=r.i32_add(r.getLocal("ppreP"),r.i32_const(d)),v=r.getLocal("pCoef"),T=r.i32_add(r.getLocal("pCoef"),r.i32_const(l)),k=r.i32_add(r.getLocal("pCoef"),r.i32_const(2*l)),V=t.alloc(l),nt=r.i32_const(V),dt=t.alloc(l),_t=r.i32_const(dt),ut=r.getLocal("r");w.addCode(r.call(gt+"_one",ut),r.setLocal("pCoef",r.i32_add(r.getLocal("ppreQ"),r.i32_const(l*3))),r.setLocal("i",r.i32_const(yt.length-2)),r.block(r.loop(r.call(gt+"_square",ut,ut),r.call(C+"_mul1",T,y,nt),r.call(C+"_mul1",k,c,_t),r.call(i+"__mulBy024",v,nt,_t,ut),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))),r.if(r.i32_load8_s(r.getLocal("i"),wt),[...r.call(C+"_mul1",T,y,nt),...r.call(C+"_mul1",k,c,_t),...r.call(i+"__mulBy024",v,nt,_t,ut),...r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L)))]),r.br_if(1,r.i32_eqz(r.getLocal("i"))),r.setLocal("i",r.i32_sub(r.getLocal("i"),r.i32_const(1))),r.br(0)))),w.addCode(r.call(C+"_mul1",T,y,nt),r.call(C+"_mul1",k,c,_t),r.call(i+"__mulBy024",v,nt,_t,ut),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))),r.call(C+"_mul1",T,y,nt),r.call(C+"_mul1",k,c,_t),r.call(i+"__mulBy024",v,nt,_t,ut),r.setLocal("pCoef",r.i32_add(r.getLocal("pCoef"),r.i32_const(L))))}function Bt(w){const r=[[[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")]],[[pt("1"),pt("0")],[pt("8376118865763821496583973867626364092589906065868298776909617916018768340080"),pt("16469823323077808223889137241176536799009286646108169935659301613961712198316")],[pt("21888242871839275220042445260109153167277707414472061641714758635765020556617"),pt("0")],[pt("11697423496358154304825782922584725312912383441159505038794027105778954184319"),pt("303847389135065887422783454877609941456349188919719272345083954437860409601")],[pt("21888242871839275220042445260109153167277707414472061641714758635765020556616"),pt("0")],[pt("3321304630594332808241809054958361220322477375291206261884409189760185844239"),pt("5722266937896532885780051958958348231143373700109372999374820235121374419868")],[pt("21888242871839275222246405745257275088696311157297823662689037894645226208582"),pt("0")],[pt("13512124006075453725662431877630910996106405091429524885779419978626457868503"),pt("5418419548761466998357268504080738289687024511189653727029736280683514010267")],[pt("2203960485148121921418603742825762020974279258880205651966"),pt("0")],[pt("10190819375481120917420622822672549775783927716138318623895010788866272024264"),pt("21584395482704209334823622290379665147239961968378104390343953940207365798982")],[pt("2203960485148121921418603742825762020974279258880205651967"),pt("0")],[pt("18566938241244942414004596690298913868373833782006617400804628704885040364344"),pt("16165975933942742336466353786298926857552937457188450663314217659523851788715")]]],c=[[[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")],[pt("1"),pt("0")]],[[pt("1"),pt("0")],[pt("21575463638280843010398324269430826099269044274347216827212613867836435027261"),pt("10307601595873709700152284273816112264069230130616436755625194854815875713954")],[pt("21888242871839275220042445260109153167277707414472061641714758635765020556616"),pt("0")],[pt("3772000881919853776433695186713858239009073593817195771773381919316419345261"),pt("2236595495967245188281701248203181795121068902605861227855261137820944008926")],[pt("2203960485148121921418603742825762020974279258880205651966"),pt("0")],[pt("18429021223477853657660792034369865839114504446431234726392080002137598044644"),pt("9344045779998320333812420223237981029506012124075525679208581902008406485703")]],[[pt("1"),pt("0")],[pt("2581911344467009335267311115468803099551665605076196740867805258568234346338"),pt("19937756971775647987995932169929341994314640652964949448313374472400716661030")],[pt("2203960485148121921418603742825762020974279258880205651966"),pt("0")],[pt("5324479202449903542726783395506214481928257762400643279780343368557297135718"),pt("16208900380737693084919495127334387981393726419856888799917914180988844123039")],[pt("21888242871839275220042445260109153167277707414472061641714758635765020556616"),pt("0")],[pt("13981852324922362344252311234282257507216387789820983642040889267519694726527"),pt("7629828391165209371577384193250820201684255241773809077146787135900891633097")]]],y=t.addFunction(i+"__frobeniusMap"+w);y.addParam("x","i32"),y.addParam("r","i32");const v=y.getCodeBuilder();for(let k=0;k<6;k++){const V=k==0?v.getLocal("x"):v.i32_add(v.getLocal("x"),v.i32_const(k*l)),nt=V,dt=v.i32_add(v.getLocal("x"),v.i32_const(k*l+d)),_t=k==0?v.getLocal("r"):v.i32_add(v.getLocal("r"),v.i32_const(k*l)),ut=_t,It=v.i32_add(v.getLocal("r"),v.i32_const(k*l+d)),xt=T(r[Math.floor(k/3)][w%12],c[k%3][w%6]),Ot=t.alloc([...zt.bigInt2BytesLE($(xt[0]),32),...zt.bigInt2BytesLE($(xt[1]),32)]);w%2==1?y.addCode(v.call(p+"_copy",nt,ut),v.call(p+"_neg",dt,It),v.call(C+"_mul",_t,v.i32_const(Ot),_t)):y.addCode(v.call(C+"_mul",V,v.i32_const(Ot),_t))}function T(k,V){const nt=pt(k[0]),dt=pt(k[1]),_t=pt(V[0]),ut=pt(V[1]),It=[nt.times(_t).minus(dt.times(ut)).mod(o),nt.times(ut).add(dt.times(_t)).mod(o)];return It[0].isNegative()&&(It[0]=It[0].add(o)),It}}function Pt(){const w=t.addFunction(i+"__finalExponentiationFirstChunk");w.addParam("x","i32"),w.addParam("r","i32");const r=w.getCodeBuilder(),c=r.getLocal("x"),y=c,v=r.i32_add(c,r.i32_const(u*6)),T=r.getLocal("r"),k=t.alloc(m),V=r.i32_const(k),nt=V,dt=r.i32_const(k+u*6),_t=r.i32_const(t.alloc(m)),ut=r.i32_const(t.alloc(m)),It=r.i32_const(t.alloc(m));w.addCode(r.call(at+"_copy",y,nt),r.call(at+"_neg",v,dt),r.call(gt+"_inverse",c,_t),r.call(gt+"_mul",V,_t,ut),r.call(i+"__frobeniusMap2",ut,It),r.call(gt+"_mul",ut,It,T))}function Ct(){const w=t.addFunction(i+"__cyclotomicSquare");w.addParam("x","i32"),w.addParam("r","i32");const r=w.getCodeBuilder(),c=r.getLocal("x"),y=r.i32_add(r.getLocal("x"),r.i32_const(l)),v=r.i32_add(r.getLocal("x"),r.i32_const(2*l)),T=r.i32_add(r.getLocal("x"),r.i32_const(3*l)),k=r.i32_add(r.getLocal("x"),r.i32_const(4*l)),V=r.i32_add(r.getLocal("x"),r.i32_const(5*l)),nt=r.getLocal("r"),dt=r.i32_add(r.getLocal("r"),r.i32_const(l)),_t=r.i32_add(r.getLocal("r"),r.i32_const(2*l)),ut=r.i32_add(r.getLocal("r"),r.i32_const(3*l)),It=r.i32_add(r.getLocal("r"),r.i32_const(4*l)),xt=r.i32_add(r.getLocal("r"),r.i32_const(5*l)),Ot=r.i32_const(t.alloc(l)),Ft=r.i32_const(t.alloc(l)),Ut=r.i32_const(t.alloc(l)),Dt=r.i32_const(t.alloc(l)),$t=r.i32_const(t.alloc(l)),Gt=r.i32_const(t.alloc(l)),kt=r.i32_const(t.alloc(l)),Mt=r.i32_const(t.alloc(l));w.addCode(r.call(C+"_mul",c,k,kt),r.call(C+"_mul",k,r.i32_const(W),Ot),r.call(C+"_add",c,Ot,Ot),r.call(C+"_add",c,k,Mt),r.call(C+"_mul",Mt,Ot,Ot),r.call(C+"_mul",r.i32_const(W),kt,Mt),r.call(C+"_add",kt,Mt,Mt),r.call(C+"_sub",Ot,Mt,Ot),r.call(C+"_add",kt,kt,Ft),r.call(C+"_mul",T,v,kt),r.call(C+"_mul",v,r.i32_const(W),Ut),r.call(C+"_add",T,Ut,Ut),r.call(C+"_add",T,v,Mt),r.call(C+"_mul",Mt,Ut,Ut),r.call(C+"_mul",r.i32_const(W),kt,Mt),r.call(C+"_add",kt,Mt,Mt),r.call(C+"_sub",Ut,Mt,Ut),r.call(C+"_add",kt,kt,Dt),r.call(C+"_mul",y,V,kt),r.call(C+"_mul",V,r.i32_const(W),$t),r.call(C+"_add",y,$t,$t),r.call(C+"_add",y,V,Mt),r.call(C+"_mul",Mt,$t,$t),r.call(C+"_mul",r.i32_const(W),kt,Mt),r.call(C+"_add",kt,Mt,Mt),r.call(C+"_sub",$t,Mt,$t),r.call(C+"_add",kt,kt,Gt),r.call(C+"_sub",Ot,c,nt),r.call(C+"_add",nt,nt,nt),r.call(C+"_add",Ot,nt,nt),r.call(C+"_add",Ft,k,It),r.call(C+"_add",It,It,It),r.call(C+"_add",Ft,It,It),r.call(C+"_mul",Gt,r.i32_const(it),Mt),r.call(C+"_add",Mt,T,ut),r.call(C+"_add",ut,ut,ut),r.call(C+"_add",Mt,ut,ut),r.call(C+"_sub",$t,v,_t),r.call(C+"_add",_t,_t,_t),r.call(C+"_add",$t,_t,_t),r.call(C+"_sub",Ut,y,dt),r.call(C+"_add",dt,dt,dt),r.call(C+"_add",Ut,dt,dt),r.call(C+"_add",Dt,V,xt),r.call(C+"_add",xt,xt,xt),r.call(C+"_add",Dt,xt,xt))}function Ht(w,r){const c=K(w).map(dt=>dt==-1?255:dt),y=t.alloc(c);t.alloc(zt.bigInt2BytesLE(w,32));const v=t.addFunction(i+"__cyclotomicExp_"+r);v.addParam("x","i32"),v.addParam("r","i32"),v.addLocal("bit","i32"),v.addLocal("i","i32");const T=v.getCodeBuilder(),k=T.getLocal("x"),V=T.getLocal("r"),nt=T.i32_const(t.alloc(m));v.addCode(T.call(gt+"_conjugate",k,nt),T.call(gt+"_one",V),T.if(T.teeLocal("bit",T.i32_load8_s(T.i32_const(c.length-1),y)),T.if(T.i32_eq(T.getLocal("bit"),T.i32_const(1)),T.call(gt+"_mul",V,k,V),T.call(gt+"_mul",V,nt,V))),T.setLocal("i",T.i32_const(c.length-2)),T.block(T.loop(T.call(i+"__cyclotomicSquare",V,V),T.if(T.teeLocal("bit",T.i32_load8_s(T.getLocal("i"),y)),T.if(T.i32_eq(T.getLocal("bit"),T.i32_const(1)),T.call(gt+"_mul",V,k,V),T.call(gt+"_mul",V,nt,V))),T.br_if(1,T.i32_eqz(T.getLocal("i"))),T.setLocal("i",T.i32_sub(T.getLocal("i"),T.i32_const(1))),T.br(0))))}function b(){Ct(),Ht(E,"w0");const w=t.addFunction(i+"__finalExponentiationLastChunk");w.addParam("x","i32"),w.addParam("r","i32");const r=w.getCodeBuilder(),c=r.getLocal("x"),y=r.getLocal("r"),v=r.i32_const(t.alloc(m)),T=r.i32_const(t.alloc(m)),k=r.i32_const(t.alloc(m)),V=r.i32_const(t.alloc(m)),nt=r.i32_const(t.alloc(m)),dt=r.i32_const(t.alloc(m)),_t=r.i32_const(t.alloc(m)),ut=r.i32_const(t.alloc(m)),It=r.i32_const(t.alloc(m)),xt=r.i32_const(t.alloc(m)),Ot=r.i32_const(t.alloc(m)),Ft=r.i32_const(t.alloc(m)),Ut=r.i32_const(t.alloc(m)),Dt=r.i32_const(t.alloc(m)),$t=r.i32_const(t.alloc(m)),Gt=r.i32_const(t.alloc(m)),kt=r.i32_const(t.alloc(m)),Mt=r.i32_const(t.alloc(m)),Kt=r.i32_const(t.alloc(m)),Le=r.i32_const(t.alloc(m)),Qe=r.i32_const(t.alloc(m));w.addCode(r.call(i+"__cyclotomicExp_w0",c,v),r.call(gt+"_conjugate",v,v),r.call(i+"__cyclotomicSquare",v,T),r.call(i+"__cyclotomicSquare",T,k),r.call(gt+"_mul",k,T,V),r.call(i+"__cyclotomicExp_w0",V,nt),r.call(gt+"_conjugate",nt,nt),r.call(i+"__cyclotomicSquare",nt,dt),r.call(i+"__cyclotomicExp_w0",dt,_t),r.call(gt+"_conjugate",_t,_t),r.call(gt+"_conjugate",V,ut),r.call(gt+"_conjugate",_t,It),r.call(gt+"_mul",It,nt,xt),r.call(gt+"_mul",xt,ut,Ot),r.call(gt+"_mul",Ot,T,Ft),r.call(gt+"_mul",Ot,nt,Ut),r.call(gt+"_mul",Ut,c,Dt),r.call(i+"__frobeniusMap1",Ft,$t),r.call(gt+"_mul",$t,Dt,Gt),r.call(i+"__frobeniusMap2",Ot,kt),r.call(gt+"_mul",kt,Gt,Mt),r.call(gt+"_conjugate",c,Kt),r.call(gt+"_mul",Kt,Ft,Le),r.call(i+"__frobeniusMap3",Le,Qe),r.call(gt+"_mul",Qe,Mt,y))}function x(){Pt(),b();const w=t.addFunction(i+"_finalExponentiation");w.addParam("x","i32"),w.addParam("r","i32");const r=w.getCodeBuilder(),c=r.getLocal("x"),y=r.getLocal("r"),v=r.i32_const(t.alloc(m));w.addCode(r.call(i+"__finalExponentiationFirstChunk",c,v),r.call(i+"__finalExponentiationLastChunk",v,y))}function q(){const w=t.addFunction(i+"_finalExponentiationOld");w.addParam("x","i32"),w.addParam("r","i32");const r=pt("552484233613224096312617126783173147097382103762957654188882734314196910839907541213974502761540629817009608548654680343627701153829446747810907373256841551006201639677726139946029199968412598804882391702273019083653272047566316584365559776493027495458238373902875937659943504873220554161550525926302303331747463515644711876653177129578303191095900909191624817826566688241804408081892785725967931714097716709526092261278071952560171111444072049229123565057483750161460024353346284167282452756217662335528813519139808291170539072125381230815729071544861602750936964829313608137325426383735122175229541155376346436093930287402089517426973178917569713384748081827255472576937471496195752727188261435633271238710131736096299798168852925540549342330775279877006784354801422249722573783561685179618816480037695005515426162362431072245638324744480"),c=t.alloc(zt.bigInt2BytesLE(r,352)),y=w.getCodeBuilder();w.addCode(y.call(gt+"_exp",y.getLocal("x"),y.i32_const(c),y.i32_const(352),y.getLocal("r")))}const Q=t.alloc(H),tt=t.alloc(M);function X(w){const r=t.addFunction(i+"_pairingEq"+w);for(let T=0;T<w;T++)r.addParam("p_"+T,"i32"),r.addParam("q_"+T,"i32");r.addParam("c","i32"),r.setReturnType("i32");const c=r.getCodeBuilder(),y=c.i32_const(t.alloc(m)),v=c.i32_const(t.alloc(m));r.addCode(c.call(gt+"_one",y));for(let T=0;T<w;T++)r.addCode(c.call(i+"_prepareG1",c.getLocal("p_"+T),c.i32_const(Q))),r.addCode(c.call(i+"_prepareG2",c.getLocal("q_"+T),c.i32_const(tt))),r.addCode(c.call(i+"_millerLoop",c.i32_const(Q),c.i32_const(tt),v)),r.addCode(c.call(gt+"_mul",y,v,y));r.addCode(c.call(i+"_finalExponentiation",y,y)),r.addCode(c.call(gt+"_eq",y,c.getLocal("c")))}function st(){const w=t.addFunction(i+"_pairing");w.addParam("p","i32"),w.addParam("q","i32"),w.addParam("r","i32");const r=w.getCodeBuilder(),c=r.i32_const(t.alloc(m));w.addCode(r.call(i+"_prepareG1",r.getLocal("p"),r.i32_const(Q))),w.addCode(r.call(i+"_prepareG2",r.getLocal("q"),r.i32_const(tt))),w.addCode(r.call(i+"_millerLoop",r.i32_const(Q),r.i32_const(tt),c)),w.addCode(r.call(i+"_finalExponentiation",c,r.getLocal("r")))}Lt(),Nt(),ct(),bt(),mt(),St(),Et();for(let w=0;w<10;w++)Bt(w),t.exportFunction(i+"__frobeniusMap"+w);q(),x();for(let w=1;w<=5;w++)X(w),t.exportFunction(i+"_pairingEq"+w);st(),t.exportFunction(i+"_pairing"),t.exportFunction(i+"_prepareG1"),t.exportFunction(i+"_prepareG2"),t.exportFunction(i+"_millerLoop"),t.exportFunction(i+"_finalExponentiation"),t.exportFunction(i+"_finalExponentiationOld"),t.exportFunction(i+"__mulBy024"),t.exportFunction(i+"__mulBy024Old"),t.exportFunction(i+"__cyclotomicSquare"),t.exportFunction(i+"__cyclotomicExp_w0")};const ht=rn.exports,Wt=gn,z_=Mr,$_=Hc,nl=zc,j_=$c,il=Vc,Gr=Kc,Y_=Zc,V_=Xc,qi=Jc;var K_=function(t,n){const i=n||"bls12381";if(t.modules[i])return i;const o=ht("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),a=ht("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),s=Math.floor((o.minus(1).bitLength()-1)/64)+1,u=s*8,_=u,d=_*2,l=_*12,m=Math.floor((a.minus(1).bitLength()-1)/64)+1,A=m*8,p=A,R=t.alloc(Wt.bigInt2BytesLE(a,p)),P=z_(t,o,"f1m","intq");$_(t,a,"fr","frm","intr");const C=t.alloc(Wt.bigInt2BytesLE(B(ht(4)),_)),G=il(t,"g1m","f1m",C);Gr(t,"frm","frm","frm","frm_mul"),Y_(t,"pol","frm"),V_(t,"qap","frm");const O=nl(t,"f1m_neg","f2m","f1m"),Z=t.alloc([...Wt.bigInt2BytesLE(B(ht("4")),_),...Wt.bigInt2BytesLE(B(ht("4")),_)]),$=il(t,"g2m","f2m",Z);function Y(r,c){const y=t.addFunction(r);y.addParam("pG","i32"),y.addParam("pFr","i32"),y.addParam("pr","i32");const v=y.getCodeBuilder(),T=v.i32_const(t.alloc(A));y.addCode(v.call("frm_fromMontgomery",v.getLocal("pFr"),T),v.call(c,v.getLocal("pG"),T,v.i32_const(A),v.getLocal("pr"))),t.exportFunction(r)}Y("g1m_timesFr","g1m_timesScalar"),Gr(t,"g1m","g1m","frm","g1m_timesFr"),Y("g2m_timesFr","g2m_timesScalar"),Gr(t,"g2m","g2m","frm","g2m_timesFr"),Y("g1m_timesFrAffine","g1m_timesScalarAffine"),Y("g2m_timesFrAffine","g2m_timesScalarAffine"),qi(t,"frm_batchApplyKey","fmr","frm",A,A,A,"frm_mul"),qi(t,"g1m_batchApplyKey","g1m","frm",u*3,u*3,A,"g1m_timesFr"),qi(t,"g1m_batchApplyKeyMixed","g1m","frm",u*2,u*3,A,"g1m_timesFrAffine"),qi(t,"g2m_batchApplyKey","g2m","frm",u*2*3,u*3*2,A,"g2m_timesFr"),qi(t,"g2m_batchApplyKeyMixed","g2m","frm",u*2*2,u*3*2,A,"g2m_timesFrAffine");function B(r){return ht(r).times(ht.one.shiftLeft(_*8)).mod(o)}const g=[ht("3685416753713387016781088315183077757961620795782546409894578378688607592378376318836054947676345821548104185464507"),ht("1339506544944476473020471379941921221584933875938349620426543736416511423956333506472724655353366534992391756441569"),ht.one],I=t.alloc([...Wt.bigInt2BytesLE(B(g[0]),_),...Wt.bigInt2BytesLE(B(g[1]),_),...Wt.bigInt2BytesLE(B(g[2]),_)]),D=[ht.zero,ht.one,ht.zero],z=t.alloc([...Wt.bigInt2BytesLE(B(D[0]),_),...Wt.bigInt2BytesLE(B(D[1]),_),...Wt.bigInt2BytesLE(B(D[2]),_)]),U=[[ht("352701069587466618187139116011060144890029952792775240219908644239793785735715026873347600343865175952761926303160"),ht("3059144344244213709971259814753781636986470325476647558659373206291635324768958432433509563104347017837885763365758")],[ht("1985150602287291935568054521177171638300868978215655730859378665066344726373823718423869104263333984641494340347905"),ht("927553665492332455747201965776037880757740193453592970025027978793976877002675564980949289727957565575433344219582")],[ht.one,ht.zero]],N=t.alloc([...Wt.bigInt2BytesLE(B(U[0][0]),_),...Wt.bigInt2BytesLE(B(U[0][1]),_),...Wt.bigInt2BytesLE(B(U[1][0]),_),...Wt.bigInt2BytesLE(B(U[1][1]),_),...Wt.bigInt2BytesLE(B(U[2][0]),_),...Wt.bigInt2BytesLE(B(U[2][1]),_)]),S=[[ht.zero,ht.zero],[ht.one,ht.zero],[ht.zero,ht.zero]],W=t.alloc([...Wt.bigInt2BytesLE(B(S[0][0]),_),...Wt.bigInt2BytesLE(B(S[0][1]),_),...Wt.bigInt2BytesLE(B(S[1][0]),_),...Wt.bigInt2BytesLE(B(S[1][1]),_),...Wt.bigInt2BytesLE(B(S[2][0]),_),...Wt.bigInt2BytesLE(B(S[2][1]),_)]),J=t.alloc([...Wt.bigInt2BytesLE(B(1),_),...Wt.bigInt2BytesLE(B(0),_),...Wt.bigInt2BytesLE(B(0),_),...Wt.bigInt2BytesLE(B(0),_),...Wt.bigInt2BytesLE(B(0),_),...Wt.bigInt2BytesLE(B(0),_),...Wt.bigInt2BytesLE(B(0),_),...Wt.bigInt2BytesLE(B(0),_),...Wt.bigInt2BytesLE(B(0),_),...Wt.bigInt2BytesLE(B(0),_),...Wt.bigInt2BytesLE(B(0),_),...Wt.bigInt2BytesLE(B(0),_)]);t.alloc([...Wt.bigInt2BytesLE(B(ht(2).modInv(o)),_),...Wt.bigInt2BytesLE(ht(0),_)]);const it=t.alloc([...Wt.bigInt2BytesLE(B(1),_),...Wt.bigInt2BytesLE(B(1),_)]);t.alloc([...Wt.bigInt2BytesLE(B("4"),_),...Wt.bigInt2BytesLE(B("4"),_)]);function ot(){const r=t.addFunction(O+"_mulNR");r.addParam("x","i32"),r.addParam("pr","i32");const c=r.getCodeBuilder(),y=c.i32_const(t.alloc(_)),v=c.getLocal("x"),T=c.i32_add(c.getLocal("x"),c.i32_const(_)),k=c.getLocal("pr"),V=c.i32_add(c.getLocal("pr"),c.i32_const(_));r.addCode(c.call(P+"_copy",v,y),c.call(P+"_sub",v,T,k),c.call(P+"_add",y,T,V))}ot();const et=j_(t,O+"_mulNR","f6m","f2m");function at(){const r=t.addFunction(et+"_mulNR");r.addParam("x","i32"),r.addParam("pr","i32");const c=r.getCodeBuilder(),y=c.i32_const(t.alloc(_*2));r.addCode(c.call(O+"_copy",c.getLocal("x"),y),c.call(O+"_mulNR",c.i32_add(c.getLocal("x"),c.i32_const(u*4)),c.getLocal("pr")),c.call(O+"_copy",c.i32_add(c.getLocal("x"),c.i32_const(u*2)),c.i32_add(c.getLocal("pr"),c.i32_const(u*4))),c.call(O+"_copy",y,c.i32_add(c.getLocal("pr"),c.i32_const(u*2))))}at();const rt=nl(t,et+"_mulNR","ftm",et),gt=ht("d201000000010000",16),Rt=ft(gt),yt=t.alloc(Rt),wt=3*d,L=Rt.length-1,F=Rt.reduce((r,c)=>r+(c!=0?1:0),0)+L+1,h=3*2*u,H=3*u*2+F*wt,M=!0,E=ht("15132376222941642752");t.modules[i]={n64q:s,n64r:m,n8q:u,n8r:A,pG1gen:I,pG1zero:z,pG1b:C,pG2gen:N,pG2zero:W,pG2b:Z,pq:t.modules.f1m.pq,pr:R,pOneT:J,r:a,q:o,prePSize:h,preQSize:H};function K(r){let c=r;const y=[];for(;c.gt(ht.zero);){if(c.isOdd()){const v=2-c.mod(4).toJSNumber();y.push(v),c=c.minus(v)}else y.push(0);c=c.shiftRight(1)}return y}function ft(r){let c=r;const y=[];for(;c.gt(ht.zero);)c.isOdd()?y.push(1):y.push(0),c=c.shiftRight(1);return y}function ct(){const r=t.addFunction(i+"_prepareG1");r.addParam("pP","i32"),r.addParam("ppreP","i32");const c=r.getCodeBuilder();r.addCode(c.call(G+"_normalize",c.getLocal("pP"),c.getLocal("ppreP")))}function Lt(){const r=t.addFunction(i+"_prepDblStep");r.addParam("R","i32"),r.addParam("r","i32");const c=r.getCodeBuilder(),y=c.getLocal("R"),v=c.i32_add(c.getLocal("R"),c.i32_const(2*u)),T=c.i32_add(c.getLocal("R"),c.i32_const(4*u)),k=c.getLocal("r"),V=c.i32_add(c.getLocal("r"),c.i32_const(2*u)),nt=c.i32_add(c.getLocal("r"),c.i32_const(4*u)),dt=c.i32_const(t.alloc(d)),_t=c.i32_const(t.alloc(d)),ut=c.i32_const(t.alloc(d)),It=c.i32_const(t.alloc(d)),xt=c.i32_const(t.alloc(d));r.addCode(c.call(O+"_square",y,k),c.call(O+"_square",v,_t),c.call(O+"_square",_t,ut),c.call(O+"_add",_t,y,V),c.call(O+"_square",V,V),c.call(O+"_sub",V,k,V),c.call(O+"_sub",V,ut,V),c.call(O+"_add",V,V,V),c.call(O+"_add",k,k,It),c.call(O+"_add",It,k,It),c.call(O+"_add",y,It,nt),c.call(O+"_square",It,xt),c.call(O+"_square",T,dt),c.call(O+"_sub",xt,V,y),c.call(O+"_sub",y,V,y),c.call(O+"_add",T,v,T),c.call(O+"_square",T,T),c.call(O+"_sub",T,_t,T),c.call(O+"_sub",T,dt,T),c.call(O+"_sub",V,y,v),c.call(O+"_mul",v,It,v),c.call(O+"_add",ut,ut,ut),c.call(O+"_add",ut,ut,ut),c.call(O+"_add",ut,ut,ut),c.call(O+"_sub",v,ut,v),c.call(O+"_mul",It,dt,V),c.call(O+"_add",V,V,V),c.call(O+"_neg",V,V),c.call(O+"_square",nt,nt),c.call(O+"_sub",nt,k,nt),c.call(O+"_sub",nt,xt,nt),c.call(O+"_add",_t,_t,_t),c.call(O+"_add",_t,_t,_t),c.call(O+"_sub",nt,_t,nt),c.call(O+"_mul",T,dt,k),c.call(O+"_add",k,k,k))}function Nt(){const r=t.addFunction(i+"_prepAddStep");r.addParam("R","i32"),r.addParam("Q","i32"),r.addParam("r","i32");const c=r.getCodeBuilder(),y=c.getLocal("R"),v=c.i32_add(c.getLocal("R"),c.i32_const(2*u)),T=c.i32_add(c.getLocal("R"),c.i32_const(4*u)),k=c.getLocal("Q"),V=c.i32_add(c.getLocal("Q"),c.i32_const(2*u)),nt=c.getLocal("r"),dt=c.i32_add(c.getLocal("r"),c.i32_const(2*u)),_t=c.i32_add(c.getLocal("r"),c.i32_const(4*u)),ut=c.i32_const(t.alloc(d)),It=c.i32_const(t.alloc(d)),xt=c.i32_const(t.alloc(d)),Ot=c.i32_const(t.alloc(d)),Ft=c.i32_const(t.alloc(d)),Ut=c.i32_const(t.alloc(d)),Dt=c.i32_const(t.alloc(d)),$t=c.i32_const(t.alloc(d)),Gt=c.i32_const(t.alloc(d)),kt=c.i32_const(t.alloc(d)),Mt=c.i32_const(t.alloc(d));r.addCode(c.call(O+"_square",T,ut),c.call(O+"_square",V,It),c.call(O+"_mul",ut,k,Ot),c.call(O+"_add",V,T,dt),c.call(O+"_square",dt,dt),c.call(O+"_sub",dt,It,dt),c.call(O+"_sub",dt,ut,dt),c.call(O+"_mul",dt,ut,dt),c.call(O+"_sub",Ot,y,Ft),c.call(O+"_square",Ft,Ut),c.call(O+"_add",Ut,Ut,Dt),c.call(O+"_add",Dt,Dt,Dt),c.call(O+"_mul",Dt,Ft,$t),c.call(O+"_sub",dt,v,Gt),c.call(O+"_sub",Gt,v,Gt),c.call(O+"_mul",Gt,k,_t),c.call(O+"_mul",Dt,y,kt),c.call(O+"_square",Gt,y),c.call(O+"_sub",y,$t,y),c.call(O+"_sub",y,kt,y),c.call(O+"_sub",y,kt,y),c.call(O+"_add",T,Ft,T),c.call(O+"_square",T,T),c.call(O+"_sub",T,ut,T),c.call(O+"_sub",T,Ut,T),c.call(O+"_add",V,T,nt),c.call(O+"_sub",kt,y,Mt),c.call(O+"_mul",Mt,Gt,Mt),c.call(O+"_mul",v,$t,Ot),c.call(O+"_add",Ot,Ot,Ot),c.call(O+"_sub",Mt,Ot,v),c.call(O+"_square",nt,nt),c.call(O+"_sub",nt,It,nt),c.call(O+"_square",T,xt),c.call(O+"_sub",nt,xt,nt),c.call(O+"_add",_t,_t,_t),c.call(O+"_sub",_t,nt,_t),c.call(O+"_add",T,T,nt),c.call(O+"_neg",Gt,Gt),c.call(O+"_add",Gt,Gt,dt))}function Tt(){const r=t.addFunction(i+"_prepareG2");r.addParam("pQ","i32"),r.addParam("ppreQ","i32"),r.addLocal("pCoef","i32"),r.addLocal("i","i32");const c=r.getCodeBuilder(),y=c.getLocal("pQ"),v=t.alloc(d*3),T=c.i32_const(v),k=c.getLocal("ppreQ");r.addCode(c.call($+"_normalize",y,k),c.if(c.call($+"_isZero",k),c.ret([])),c.call($+"_copy",k,T),c.setLocal("pCoef",c.i32_add(c.getLocal("ppreQ"),c.i32_const(d*3)))),r.addCode(c.setLocal("i",c.i32_const(Rt.length-2)),c.block(c.loop(c.call(i+"_prepDblStep",T,c.getLocal("pCoef")),c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(wt))),c.if(c.i32_load8_s(c.getLocal("i"),yt),[...c.call(i+"_prepAddStep",T,k,c.getLocal("pCoef")),...c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(wt)))]),c.br_if(1,c.i32_eqz(c.getLocal("i"))),c.setLocal("i",c.i32_sub(c.getLocal("i"),c.i32_const(1))),c.br(0))))}function bt(){const r=t.addFunction(et+"_mul1");r.addParam("pA","i32"),r.addParam("pC1","i32"),r.addParam("pR","i32");const c=r.getCodeBuilder(),y=c.getLocal("pA"),v=c.i32_add(c.getLocal("pA"),c.i32_const(_*2)),T=c.i32_add(c.getLocal("pA"),c.i32_const(_*4)),k=c.getLocal("pC1"),V=c.getLocal("pR"),nt=c.i32_add(c.getLocal("pR"),c.i32_const(_*2)),dt=c.i32_add(c.getLocal("pR"),c.i32_const(_*4)),_t=c.i32_const(t.alloc(_*2)),ut=c.i32_const(t.alloc(_*2));r.addCode(c.call(O+"_add",y,v,_t),c.call(O+"_add",v,T,ut),c.call(O+"_mul",v,k,dt),c.call(O+"_mul",ut,k,V),c.call(O+"_sub",V,dt,V),c.call(O+"_mulNR",V,V),c.call(O+"_mul",_t,k,nt),c.call(O+"_sub",nt,dt,nt))}bt();function St(){const r=t.addFunction(et+"_mul01");r.addParam("pA","i32"),r.addParam("pC0","i32"),r.addParam("pC1","i32"),r.addParam("pR","i32");const c=r.getCodeBuilder(),y=c.getLocal("pA"),v=c.i32_add(c.getLocal("pA"),c.i32_const(_*2)),T=c.i32_add(c.getLocal("pA"),c.i32_const(_*4)),k=c.getLocal("pC0"),V=c.getLocal("pC1"),nt=c.getLocal("pR"),dt=c.i32_add(c.getLocal("pR"),c.i32_const(_*2)),_t=c.i32_add(c.getLocal("pR"),c.i32_const(_*4)),ut=c.i32_const(t.alloc(_*2)),It=c.i32_const(t.alloc(_*2)),xt=c.i32_const(t.alloc(_*2)),Ot=c.i32_const(t.alloc(_*2));r.addCode(c.call(O+"_mul",y,k,ut),c.call(O+"_mul",v,V,It),c.call(O+"_add",y,v,xt),c.call(O+"_add",y,T,Ot),c.call(O+"_add",v,T,nt),c.call(O+"_mul",nt,V,nt),c.call(O+"_sub",nt,It,nt),c.call(O+"_mulNR",nt,nt),c.call(O+"_add",nt,ut,nt),c.call(O+"_add",k,V,dt),c.call(O+"_mul",dt,xt,dt),c.call(O+"_sub",dt,ut,dt),c.call(O+"_sub",dt,It,dt),c.call(O+"_mul",Ot,k,_t),c.call(O+"_sub",_t,ut,_t),c.call(O+"_add",_t,It,_t))}St();function mt(){const r=t.addFunction(rt+"_mul014");r.addParam("pA","i32"),r.addParam("pC0","i32"),r.addParam("pC1","i32"),r.addParam("pC4","i32"),r.addParam("pR","i32");const c=r.getCodeBuilder(),y=c.getLocal("pA"),v=c.i32_add(c.getLocal("pA"),c.i32_const(_*6)),T=c.getLocal("pC0"),k=c.getLocal("pC1"),V=c.getLocal("pC4"),nt=c.i32_const(t.alloc(_*6)),dt=c.i32_const(t.alloc(_*6)),_t=c.i32_const(t.alloc(_*2)),ut=c.getLocal("pR"),It=c.i32_add(c.getLocal("pR"),c.i32_const(_*6));r.addCode(c.call(et+"_mul01",y,T,k,nt),c.call(et+"_mul1",v,V,dt),c.call(O+"_add",k,V,_t),c.call(et+"_add",v,y,It),c.call(et+"_mul01",It,T,_t,It),c.call(et+"_sub",It,nt,It),c.call(et+"_sub",It,dt,It),c.call(et+"_copy",dt,ut),c.call(et+"_mulNR",ut,ut),c.call(et+"_add",ut,nt,ut))}mt();function Et(){const r=t.addFunction(i+"_ell");r.addParam("pP","i32"),r.addParam("pCoefs","i32"),r.addParam("pF","i32");const c=r.getCodeBuilder(),y=c.getLocal("pP"),v=c.i32_add(c.getLocal("pP"),c.i32_const(u)),T=c.getLocal("pF"),k=c.getLocal("pCoefs"),V=c.i32_add(c.getLocal("pCoefs"),c.i32_const(_)),nt=c.i32_add(c.getLocal("pCoefs"),c.i32_const(_*2)),dt=c.i32_add(c.getLocal("pCoefs"),c.i32_const(_*3)),_t=c.i32_add(c.getLocal("pCoefs"),c.i32_const(_*4)),ut=t.alloc(_*2),It=c.i32_const(ut),xt=c.i32_const(ut),Ot=c.i32_const(ut+_),Ft=t.alloc(_*2),Ut=c.i32_const(Ft),Dt=c.i32_const(Ft),$t=c.i32_const(Ft+_);r.addCode(c.call(P+"_mul",k,v,xt),c.call(P+"_mul",V,v,Ot),c.call(P+"_mul",nt,y,Dt),c.call(P+"_mul",dt,y,$t),c.call(rt+"_mul014",T,_t,Ut,It,T))}Et();function Bt(){const r=t.addFunction(i+"_millerLoop");r.addParam("ppreP","i32"),r.addParam("ppreQ","i32"),r.addParam("r","i32"),r.addLocal("pCoef","i32"),r.addLocal("i","i32");const c=r.getCodeBuilder(),y=c.getLocal("ppreP");c.getLocal("ppreQ");const v=c.getLocal("pCoef"),T=c.getLocal("r");r.addCode(c.call(rt+"_one",T),c.if(c.call(G+"_isZero",y),c.ret([])),c.if(c.call(G+"_isZero",c.getLocal("ppreQ")),c.ret([])),c.setLocal("pCoef",c.i32_add(c.getLocal("ppreQ"),c.i32_const(d*3))),c.setLocal("i",c.i32_const(Rt.length-2)),c.block(c.loop(c.call(i+"_ell",y,v,T),c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(wt))),c.if(c.i32_load8_s(c.getLocal("i"),yt),[...c.call(i+"_ell",y,v,T),...c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(wt)))]),c.call(rt+"_square",T,T),c.br_if(1,c.i32_eq(c.getLocal("i"),c.i32_const(1))),c.setLocal("i",c.i32_sub(c.getLocal("i"),c.i32_const(1))),c.br(0))),c.call(i+"_ell",y,v,T)),r.addCode(c.call(rt+"_conjugate",T,T))}function Pt(r){const c=[[[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")]],[[ht("1"),ht("0")],[ht("3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760"),ht("151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027")],[ht("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351"),ht("0")],[ht("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530"),ht("1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257")],[ht("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),ht("0")],[ht("3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557"),ht("877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230")],[ht("4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786"),ht("0")],[ht("151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027"),ht("3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760")],[ht("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),ht("0")],[ht("1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257"),ht("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530")],[ht("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437"),ht("0")],[ht("877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230"),ht("3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557")]]],y=[[[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")],[ht("1"),ht("0")]],[[ht("1"),ht("0")],[ht("0"),ht("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436")],[ht("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),ht("0")],[ht("0"),ht("1")],[ht("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),ht("0")],[ht("0"),ht("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350")]],[[ht("1"),ht("0")],[ht("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437"),ht("0")],[ht("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),ht("0")],[ht("4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786"),ht("0")],[ht("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),ht("0")],[ht("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351"),ht("0")]]],v=t.addFunction(rt+"_frobeniusMap"+r);v.addParam("x","i32"),v.addParam("r","i32");const T=v.getCodeBuilder();for(let V=0;V<6;V++){const nt=V==0?T.getLocal("x"):T.i32_add(T.getLocal("x"),T.i32_const(V*d)),dt=nt,_t=T.i32_add(T.getLocal("x"),T.i32_const(V*d+_)),ut=V==0?T.getLocal("r"):T.i32_add(T.getLocal("r"),T.i32_const(V*d)),It=ut,xt=T.i32_add(T.getLocal("r"),T.i32_const(V*d+_)),Ot=k(c[Math.floor(V/3)][r%12],y[V%3][r%6]),Ft=t.alloc([...Wt.bigInt2BytesLE(B(Ot[0]),u),...Wt.bigInt2BytesLE(B(Ot[1]),u)]);r%2==1?v.addCode(T.call(P+"_copy",dt,It),T.call(P+"_neg",_t,xt),T.call(O+"_mul",ut,T.i32_const(Ft),ut)):v.addCode(T.call(O+"_mul",nt,T.i32_const(Ft),ut))}function k(V,nt){const dt=ht(V[0]),_t=ht(V[1]),ut=ht(nt[0]),It=ht(nt[1]),xt=[dt.times(ut).minus(_t.times(It)).mod(o),dt.times(It).add(_t.times(ut)).mod(o)];return xt[0].isNegative()&&(xt[0]=xt[0].add(o)),xt}}function Ct(){const r=t.addFunction(i+"__cyclotomicSquare");r.addParam("x","i32"),r.addParam("r","i32");const c=r.getCodeBuilder(),y=c.getLocal("x"),v=c.i32_add(c.getLocal("x"),c.i32_const(d)),T=c.i32_add(c.getLocal("x"),c.i32_const(2*d)),k=c.i32_add(c.getLocal("x"),c.i32_const(3*d)),V=c.i32_add(c.getLocal("x"),c.i32_const(4*d)),nt=c.i32_add(c.getLocal("x"),c.i32_const(5*d)),dt=c.getLocal("r"),_t=c.i32_add(c.getLocal("r"),c.i32_const(d)),ut=c.i32_add(c.getLocal("r"),c.i32_const(2*d)),It=c.i32_add(c.getLocal("r"),c.i32_const(3*d)),xt=c.i32_add(c.getLocal("r"),c.i32_const(4*d)),Ot=c.i32_add(c.getLocal("r"),c.i32_const(5*d)),Ft=c.i32_const(t.alloc(d)),Ut=c.i32_const(t.alloc(d)),Dt=c.i32_const(t.alloc(d)),$t=c.i32_const(t.alloc(d)),Gt=c.i32_const(t.alloc(d)),kt=c.i32_const(t.alloc(d)),Mt=c.i32_const(t.alloc(d)),Kt=c.i32_const(t.alloc(d));r.addCode(c.call(O+"_mul",y,V,Mt),c.call(O+"_mulNR",V,Ft),c.call(O+"_add",y,Ft,Ft),c.call(O+"_add",y,V,Kt),c.call(O+"_mul",Kt,Ft,Ft),c.call(O+"_mulNR",Mt,Kt),c.call(O+"_add",Mt,Kt,Kt),c.call(O+"_sub",Ft,Kt,Ft),c.call(O+"_add",Mt,Mt,Ut),c.call(O+"_mul",k,T,Mt),c.call(O+"_mulNR",T,Dt),c.call(O+"_add",k,Dt,Dt),c.call(O+"_add",k,T,Kt),c.call(O+"_mul",Kt,Dt,Dt),c.call(O+"_mulNR",Mt,Kt),c.call(O+"_add",Mt,Kt,Kt),c.call(O+"_sub",Dt,Kt,Dt),c.call(O+"_add",Mt,Mt,$t),c.call(O+"_mul",v,nt,Mt),c.call(O+"_mulNR",nt,Gt),c.call(O+"_add",v,Gt,Gt),c.call(O+"_add",v,nt,Kt),c.call(O+"_mul",Kt,Gt,Gt),c.call(O+"_mulNR",Mt,Kt),c.call(O+"_add",Mt,Kt,Kt),c.call(O+"_sub",Gt,Kt,Gt),c.call(O+"_add",Mt,Mt,kt),c.call(O+"_sub",Ft,y,dt),c.call(O+"_add",dt,dt,dt),c.call(O+"_add",Ft,dt,dt),c.call(O+"_add",Ut,V,xt),c.call(O+"_add",xt,xt,xt),c.call(O+"_add",Ut,xt,xt),c.call(O+"_mul",kt,c.i32_const(it),Kt),c.call(O+"_add",Kt,k,It),c.call(O+"_add",It,It,It),c.call(O+"_add",Kt,It,It),c.call(O+"_sub",Gt,T,ut),c.call(O+"_add",ut,ut,ut),c.call(O+"_add",Gt,ut,ut),c.call(O+"_sub",Dt,v,_t),c.call(O+"_add",_t,_t,_t),c.call(O+"_add",Dt,_t,_t),c.call(O+"_add",$t,nt,Ot),c.call(O+"_add",Ot,Ot,Ot),c.call(O+"_add",$t,Ot,Ot))}function Ht(r,c,y){const v=K(r).map(ut=>ut==-1?255:ut),T=t.alloc(v),k=t.addFunction(i+"__cyclotomicExp_"+y);k.addParam("x","i32"),k.addParam("r","i32"),k.addLocal("bit","i32"),k.addLocal("i","i32");const V=k.getCodeBuilder(),nt=V.getLocal("x"),dt=V.getLocal("r"),_t=V.i32_const(t.alloc(l));k.addCode(V.call(rt+"_conjugate",nt,_t),V.call(rt+"_one",dt),V.if(V.teeLocal("bit",V.i32_load8_s(V.i32_const(v.length-1),T)),V.if(V.i32_eq(V.getLocal("bit"),V.i32_const(1)),V.call(rt+"_mul",dt,nt,dt),V.call(rt+"_mul",dt,_t,dt))),V.setLocal("i",V.i32_const(v.length-2)),V.block(V.loop(V.call(i+"__cyclotomicSquare",dt,dt),V.if(V.teeLocal("bit",V.i32_load8_s(V.getLocal("i"),T)),V.if(V.i32_eq(V.getLocal("bit"),V.i32_const(1)),V.call(rt+"_mul",dt,nt,dt),V.call(rt+"_mul",dt,_t,dt))),V.br_if(1,V.i32_eqz(V.getLocal("i"))),V.setLocal("i",V.i32_sub(V.getLocal("i"),V.i32_const(1))),V.br(0)))),c&&k.addCode(V.call(rt+"_conjugate",dt,dt))}function b(){Ct(),Ht(E,M,"w0");const r=t.addFunction(i+"_finalExponentiation");r.addParam("x","i32"),r.addParam("r","i32");const c=r.getCodeBuilder(),y=c.getLocal("x"),v=c.getLocal("r"),T=c.i32_const(t.alloc(l)),k=c.i32_const(t.alloc(l)),V=c.i32_const(t.alloc(l)),nt=c.i32_const(t.alloc(l)),dt=c.i32_const(t.alloc(l)),_t=c.i32_const(t.alloc(l)),ut=c.i32_const(t.alloc(l));r.addCode(c.call(rt+"_frobeniusMap6",y,T),c.call(rt+"_inverse",y,k),c.call(rt+"_mul",T,k,V),c.call(rt+"_copy",V,k),c.call(rt+"_frobeniusMap2",V,V),c.call(rt+"_mul",V,k,V),c.call(i+"__cyclotomicSquare",V,k),c.call(rt+"_conjugate",k,k),c.call(i+"__cyclotomicExp_w0",V,nt),c.call(i+"__cyclotomicSquare",nt,dt),c.call(rt+"_mul",k,nt,_t),c.call(i+"__cyclotomicExp_w0",_t,k),c.call(i+"__cyclotomicExp_w0",k,T),c.call(i+"__cyclotomicExp_w0",T,ut),c.call(rt+"_mul",ut,dt,ut),c.call(i+"__cyclotomicExp_w0",ut,dt),c.call(rt+"_conjugate",_t,_t),c.call(rt+"_mul",dt,_t,dt),c.call(rt+"_mul",dt,V,dt),c.call(rt+"_conjugate",V,_t),c.call(rt+"_mul",k,V,k),c.call(rt+"_frobeniusMap3",k,k),c.call(rt+"_mul",ut,_t,ut),c.call(rt+"_frobeniusMap1",ut,ut),c.call(rt+"_mul",nt,T,nt),c.call(rt+"_frobeniusMap2",nt,nt),c.call(rt+"_mul",nt,k,nt),c.call(rt+"_mul",nt,ut,nt),c.call(rt+"_mul",nt,dt,v))}function x(){const r=t.addFunction(i+"_finalExponentiationOld");r.addParam("x","i32"),r.addParam("r","i32");const c=ht("322277361516934140462891564586510139908379969514828494218366688025288661041104682794998680497580008899973249814104447692778988208376779573819485263026159588510513834876303014016798809919343532899164848730280942609956670917565618115867287399623286813270357901731510188149934363360381614501334086825442271920079363289954510565375378443704372994881406797882676971082200626541916413184642520269678897559532260949334760604962086348898118982248842634379637598665468817769075878555493752214492790122785850202957575200176084204422751485957336465472324810982833638490904279282696134323072515220044451592646885410572234451732790590013479358343841220074174848221722017083597872017638514103174122784843925578370430843522959600095676285723737049438346544753168912974976791528535276317256904336520179281145394686565050419250614107803233314658825463117900250701199181529205942363159325765991819433914303908860460720581408201373164047773794825411011922305820065611121544561808414055302212057471395719432072209245600258134364584636810093520285711072578721435517884103526483832733289802426157301542744476740008494780363354305116978805620671467071400711358839553375340724899735460480144599782014906586543813292157922220645089192130209334926661588737007768565838519456601560804957985667880395221049249803753582637708560"),y=t.alloc(Wt.bigInt2BytesLE(c,544)),v=r.getCodeBuilder();r.addCode(v.call(rt+"_exp",v.getLocal("x"),v.i32_const(y),v.i32_const(544),v.getLocal("r")))}const q=t.alloc(h),Q=t.alloc(H);function tt(r){const c=t.addFunction(i+"_pairingEq"+r);for(let k=0;k<r;k++)c.addParam("p_"+k,"i32"),c.addParam("q_"+k,"i32");c.addParam("c","i32"),c.setReturnType("i32");const y=c.getCodeBuilder(),v=y.i32_const(t.alloc(l)),T=y.i32_const(t.alloc(l));c.addCode(y.call(rt+"_one",v));for(let k=0;k<r;k++)c.addCode(y.call(i+"_prepareG1",y.getLocal("p_"+k),y.i32_const(q))),c.addCode(y.call(i+"_prepareG2",y.getLocal("q_"+k),y.i32_const(Q))),c.addCode(y.if(y.i32_eqz(y.call(G+"_inGroupAffine",y.i32_const(q))),y.ret(y.i32_const(0))),y.if(y.i32_eqz(y.call($+"_inGroupAffine",y.i32_const(Q))),y.ret(y.i32_const(0)))),c.addCode(y.call(i+"_millerLoop",y.i32_const(q),y.i32_const(Q),T)),c.addCode(y.call(rt+"_mul",v,T,v));c.addCode(y.call(i+"_finalExponentiation",v,v)),c.addCode(y.call(rt+"_eq",v,y.getLocal("c")))}function X(){const r=t.addFunction(i+"_pairing");r.addParam("p","i32"),r.addParam("q","i32"),r.addParam("r","i32");const c=r.getCodeBuilder(),y=c.i32_const(t.alloc(l));r.addCode(c.call(i+"_prepareG1",c.getLocal("p"),c.i32_const(q))),r.addCode(c.call(i+"_prepareG2",c.getLocal("q"),c.i32_const(Q))),r.addCode(c.call(i+"_millerLoop",c.i32_const(q),c.i32_const(Q),y)),r.addCode(c.call(i+"_finalExponentiation",y,c.getLocal("r")))}function st(){const r=t.addFunction($+"_inGroupAffine");r.addParam("p","i32"),r.setReturnType("i32");const c=r.getCodeBuilder(),y=[ht("2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279894"),ht("2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279893")],v=ht("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),T=[ht("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530"),ht("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530")],k=c.i32_const(t.alloc([...Wt.bigInt2BytesLE(B(y[0]),u),...Wt.bigInt2BytesLE(B(y[1]),u)])),V=c.i32_const(t.alloc(Wt.bigInt2BytesLE(B(v),u))),nt=c.i32_const(t.alloc([...Wt.bigInt2BytesLE(B(T[0]),u),...Wt.bigInt2BytesLE(B(T[1]),u)])),dt=c.i32_const(t.alloc(Wt.bigInt2BytesLE(E,8))),_t=c.getLocal("p"),ut=c.i32_add(c.getLocal("p"),c.i32_const(d)),It=c.i32_const(t.alloc(_)),xt=c.i32_const(t.alloc(d)),Ot=c.i32_const(t.alloc(d)),Ft=t.alloc(d*2),Ut=c.i32_const(Ft),Dt=c.i32_const(Ft),$t=c.i32_const(Ft),Gt=c.i32_const(Ft+_),kt=c.i32_const(Ft+d),Mt=c.i32_const(Ft+d),Kt=c.i32_const(Ft+d+_),Le=t.alloc(d*3),Qe=c.i32_const(Le),Ai=c.i32_const(Le),Rn=c.i32_const(Le),On=c.i32_const(Le+_),Ii=c.i32_const(Le+d),Pn=c.i32_const(Le+d),xn=c.i32_const(Le+d+_),Li=c.i32_const(Le+d*2);r.addCode(c.if(c.call($+"_isZeroAffine",c.getLocal("p")),c.ret(c.i32_const(1))),c.if(c.i32_eqz(c.call($+"_inCurveAffine",c.getLocal("p"))),c.ret(c.i32_const(0))),c.call(O+"_mul",_t,k,xt),c.call(O+"_mul",ut,k,Ot),c.call(O+"_mul1",xt,V,Dt),c.call(O+"_neg",Ot,kt),c.call(O+"_neg",xt,Ai),c.call(O+"_mul",Ot,nt,Ii),c.call(P+"_sub",$t,Gt,It),c.call(P+"_add",$t,Gt,Gt),c.call(P+"_copy",It,$t),c.call(P+"_sub",Mt,Kt,It),c.call(P+"_add",Mt,Kt,Kt),c.call(P+"_copy",It,Mt),c.call(P+"_add",Rn,On,It),c.call(P+"_sub",Rn,On,On),c.call(P+"_copy",It,Rn),c.call(P+"_sub",xn,Pn,It),c.call(P+"_add",Pn,xn,xn),c.call(P+"_copy",It,Pn),c.call(O+"_one",Li),c.call($+"_timesScalar",Qe,dt,c.i32_const(8),Qe),c.call($+"_addMixed",Qe,Ut,Qe),c.ret(c.call($+"_eqMixed",Qe,c.getLocal("p"))));const En=t.addFunction($+"_inGroup");En.addParam("pIn","i32"),En.setReturnType("i32");const un=En.getCodeBuilder(),Vn=un.i32_const(t.alloc(d*2));En.addCode(un.call($+"_toAffine",un.getLocal("pIn"),Vn),un.ret(un.call($+"_inGroupAffine",Vn)))}function w(){const r=t.addFunction(G+"_inGroupAffine");r.addParam("p","i32"),r.setReturnType("i32");const c=r.getCodeBuilder(),y=ht("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),v=ht("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),T=E.times(E).minus(ht.one).divide(ht(3)),k=c.i32_const(t.alloc(Wt.bigInt2BytesLE(B(y),u))),V=c.i32_const(t.alloc(Wt.bigInt2BytesLE(B(v),u))),nt=c.i32_const(t.alloc(Wt.bigInt2BytesLE(T,16))),dt=c.getLocal("p"),_t=c.i32_add(c.getLocal("p"),c.i32_const(_)),ut=t.alloc(_*3),It=c.i32_const(ut),xt=c.i32_const(ut),Ot=c.i32_const(ut+_);c.i32_const(ut+2*_);const Ft=t.alloc(_*2),Ut=c.i32_const(Ft),Dt=c.i32_const(Ft),$t=c.i32_const(Ft+_);r.addCode(c.if(c.call(G+"_isZeroAffine",c.getLocal("p")),c.ret(c.i32_const(1))),c.if(c.i32_eqz(c.call(G+"_inCurveAffine",c.getLocal("p"))),c.ret(c.i32_const(0))),c.call(P+"_mul",dt,k,xt),c.call(P+"_copy",_t,Ot),c.call(P+"_mul",dt,V,Dt),c.call(P+"_copy",_t,$t),c.call(G+"_doubleAffine",It,It),c.call(G+"_subMixed",It,c.getLocal("p"),It),c.call(G+"_subMixed",It,Ut,It),c.call(G+"_timesScalar",It,nt,c.i32_const(16),It),c.ret(c.call(G+"_eqMixed",It,Ut)));const Gt=t.addFunction(G+"_inGroup");Gt.addParam("pIn","i32"),Gt.setReturnType("i32");const kt=Gt.getCodeBuilder(),Mt=kt.i32_const(t.alloc(_*2));Gt.addCode(kt.call(G+"_toAffine",kt.getLocal("pIn"),Mt),kt.ret(kt.call(G+"_inGroupAffine",Mt)))}for(let r=0;r<10;r++)Pt(r),t.exportFunction(rt+"_frobeniusMap"+r);w(),st(),Nt(),Lt(),ct(),Tt(),Bt(),x(),b();for(let r=1;r<=5;r++)tt(r),t.exportFunction(i+"_pairingEq"+r);X(),t.exportFunction(i+"_pairing"),t.exportFunction(i+"_prepareG1"),t.exportFunction(i+"_prepareG2"),t.exportFunction(i+"_millerLoop"),t.exportFunction(i+"_finalExponentiation"),t.exportFunction(i+"_finalExponentiationOld"),t.exportFunction(i+"__cyclotomicSquare"),t.exportFunction(i+"__cyclotomicExp_w0"),t.exportFunction(et+"_mul1"),t.exportFunction(et+"_mul01"),t.exportFunction(rt+"_mul014"),t.exportFunction(G+"_inGroupAffine"),t.exportFunction(G+"_inGroup"),t.exportFunction($+"_inGroupAffine"),t.exportFunction($+"_inGroup")},Z_=H_,X_=K_;function kr(e){if(typeof e=="bigint"||e.eq!==void 0)return e.toString(10);if(e instanceof Uint8Array)return kc(e,0);if(Array.isArray(e))return e.map(kr);if(typeof e=="object"){const t={};return Object.keys(e).forEach(i=>{t[i]=kr(e[i])}),t}else return e}function Wr(e){if(typeof e=="string"&&/^[0-9]+$/.test(e))return BigInt(e);if(typeof e=="string"&&/^0x[0-9a-fA-F]+$/.test(e))return BigInt(e);if(Array.isArray(e))return e.map(Wr);if(typeof e=="object"){if(e===null)return null;const t={};return Object.keys(e).forEach(i=>{t[i]=Wr(e[i])}),t}else return e}function J_(e){let t=BigInt(0),n=e.length,i=0;const o=new DataView(e.buffer,e.byteOffset,e.byteLength);for(;n>0;)n>=4?(n-=4,t+=BigInt(o.getUint32(n))<<BigInt(i*8),i+=4):n>=2?(n-=2,t+=BigInt(o.getUint16(n))<<BigInt(i*8),i+=2):(n-=1,t+=BigInt(o.getUint8(n))<<BigInt(i*8),i+=1);return t}function tp(e,t){let n=e;const i=new Uint8Array(t),o=new DataView(i.buffer);let a=t;for(;a>0;)a-4>=0?(a-=4,o.setUint32(a,Number(n&BigInt(4294967295))),n=n>>BigInt(32)):a-2>=0?(a-=2,o.setUint16(a,Number(n&BigInt(65535))),n=n>>BigInt(16)):(a-=1,o.setUint8(a,Number(n&BigInt(255))),n=n>>BigInt(8));if(n)throw new Error("Number does not fit in this length");return i}function ep(e){let t=BigInt(0),n=0;const i=new DataView(e.buffer,e.byteOffset,e.byteLength);for(;n<e.length;)n+4<=e.length?(t+=BigInt(i.getUint32(n,!0))<<BigInt(n*8),n+=4):n+4<=e.length?(t+=BigInt(i.getUint16(n,!0))<<BigInt(n*8),n+=2):(t+=BigInt(i.getUint8(n,!0))<<BigInt(n*8),n+=1);return t}function np(e,t){let n=e;typeof t=="undefined"&&(t=Math.floor((Wc(e)-1)/8)+1,t==0&&(t=1));const i=new Uint8Array(t),o=new DataView(i.buffer);let a=0;for(;a<t;)a+4<=t?(o.setUint32(a,Number(n&BigInt(4294967295)),!0),a+=4,n=n>>BigInt(32)):a+2<=t?(o.setUint16(Number(a,n&BigInt(65535)),!0),a+=2,n=n>>BigInt(16)):(o.setUint8(Number(a,n&BigInt(255)),!0),a+=1,n=n>>BigInt(8));if(n)throw new Error("Number does not fit in this length");return i}function qr(e,t){if(typeof t=="bigint"||t.eq!==void 0)return t.toString(10);if(t instanceof Uint8Array)return e.toString(e.e(t));if(Array.isArray(t))return t.map(qr.bind(this,e));if(typeof t=="object"){const n={};return Object.keys(t).forEach(o=>{n[o]=qr(e,t[o])}),n}else return t}function Qr(e,t){if(typeof t=="string"&&/^[0-9]+$/.test(t))return e.e(t);if(typeof t=="string"&&/^0x[0-9a-fA-F]+$/.test(t))return e.e(t);if(Array.isArray(t))return t.map(Qr.bind(this,e));if(typeof t=="object"){if(t===null)return null;const n={};return Object.keys(t).forEach(o=>{n[o]=Qr(e,t[o])}),n}else return t}var ip=Object.freeze({__proto__:null,stringifyBigInts:kr,unstringifyBigInts:Wr,beBuff2int:J_,beInt2Buff:tp,leBuff2int:ep,leInt2Buff:np,stringifyFElements:qr,unstringifyFElements:Qr});function Hr(e){if(typeof e=="bigint"||e.eq!==void 0)return e.toString(10);if(Array.isArray(e))return e.map(Hr);if(typeof e=="object"){const t={};return Object.keys(e).forEach(i=>{t[i]=Hr(e[i])}),t}else return e}function zr(e){if(typeof e=="string"&&/^[0-9]+$/.test(e))return lt(e);if(typeof e=="string"&&/^0x[0-9a-fA-F]+$/.test(e))return lt(e);if(Array.isArray(e))return e.map(zr);if(typeof e=="object"){const t={};return Object.keys(e).forEach(i=>{t[i]=zr(e[i])}),t}else return e}function op(e){let t=lt.zero;for(let n=0;n<e.length;n++){const i=lt(e[e.length-n-1]);t=t.add(i.shiftLeft(n*8))}return t}function rp(e,t){let n=e,i=t-1;const o=new Uint8Array(t);for(;n.gt(lt.zero)&&i>=0;){let a=Number(n.and(lt("255")));o[i]=a,i--,n=n.shiftRight(8)}if(!n.eq(lt.zero))throw new Error("Number does not fit in this length");return o}function ap(e){let t=lt.zero;for(let n=0;n<e.length;n++){const i=lt(e[n]);t=t.add(i.shiftLeft(n*8))}return t}function sp(e,t){let n=e,i=0;const o=new Uint8Array(t);for(;n.gt(lt.zero)&&i<o.length;){let a=Number(n.and(lt(255)));o[i]=a,i++,n=n.shiftRight(8)}if(!n.eq(lt.zero))throw new Error("Number does not fit in this length");return o}var cp=Object.freeze({__proto__:null,stringifyBigInts:Hr,unstringifyBigInts:zr,beBuff2int:op,beInt2Buff:rp,leBuff2int:ap,leInt2Buff:sp});let mn={};typeof BigInt=="function"?Object.assign(mn,ip):Object.assign(mn,cp);const Qi=[];for(let e=0;e<256;e++)Qi[e]=lp(e,8);function lp(e,t){let n=0,i=e;for(let o=0;o<t;o++)n<<=1,n=n|i&1,i>>=1;return n}mn.bitReverse=function(t,n){return(Qi[t>>>24]|Qi[t>>>16&255]<<8|Qi[t>>>8&255]<<16|Qi[t&255]<<24)>>>32-n},mn.log2=function(t){return((t&4294901760)!=0?(t&=4294901760,16):0)|((t&4278255360)!=0?(t&=4278255360,8):0)|((t&4042322160)!=0?(t&=4042322160,4):0)|((t&3435973836)!=0?(t&=3435973836,2):0)|(t&2863311530)!=0},mn.buffReverseBits=function(t,n){const i=t.byteLength/n,o=mn.log2(i);if(i!=1<<o)throw new Error("Invalid number of pointers");for(let a=0;a<i;a++){const s=mn.bitReverse(a,o);if(a>s){const u=t.slice(a*n,(a+1)*n);t.set(t.slice(s*n,(s+1)*n),a*n),t.set(u,s*n)}}},mn.array2buffer=function(e,t){const n=new Uint8Array(t*e.length);for(let i=0;i<e.length;i++)n.set(e[i],i*t);return n},mn.buffer2array=function(e,t){const n=e.byteLength/t,i=new Array(n);for(let o=0;o<n;o++)i[o]=e.slice(o*t,o*t+t);return i};const me=1<<30;class Ao{constructor(t){this.buffers=[],this.byteLength=t;for(let n=0;n<t;n+=me){const i=Math.min(t-n,me);this.buffers.push(new Uint8Array(i))}}slice(t,n){n===void 0&&(n=this.byteLength),t===void 0&&(t=0);const i=n-t,o=Math.floor(t/me),a=Math.floor((t+i-1)/me);if(o==a||i==0)return this.buffers[o].slice(t%me,t%me+i);let s,u=o,_=t%me,d=i;for(;d>0;){const l=_+d>me?me-_:d,m=new Uint8Array(this.buffers[u].buffer,this.buffers[u].byteOffset+_,l);if(l==i)return m.slice();s||(i<=me?s=new Uint8Array(i):s=new Ao(i)),s.set(m,i-d),d=d-l,u++,_=0}return s}set(t,n){n===void 0&&(n=0);const i=t.byteLength;if(i==0)return;const o=Math.floor(n/me),a=Math.floor((n+i-1)/me);if(o==a)return t instanceof Ao&&t.buffers.length==1?this.buffers[o].set(t.buffers[0],n%me):this.buffers[o].set(t,n%me);let s=o,u=n%me,_=i;for(;_>0;){const d=u+_>me?me-u:_,l=t.slice(i-_,i-_+d);new Uint8Array(this.buffers[s].buffer,this.buffers[s].byteOffset+u,d).set(l),_=_-d,s++,u=0}}}function up(e){const t=32767;let n,i;e&&(e.onmessage=function(l){let m;if(l.data?m=l.data:m=l,m[0].cmd=="INIT")o(m[0]).then(function(){e.postMessage(m.result)});else if(m[0].cmd=="TERMINATE")e.close();else{const A=d(m);e.postMessage(A)}});async function o(l){const m=new Uint8Array(l.code),A=await WebAssembly.compile(m);i=new WebAssembly.Memory({initial:l.init,maximum:t}),n=await WebAssembly.instantiate(A,{env:{memory:i}})}function a(l){const m=new Uint32Array(i.buffer,0,1);for(;m[0]&3;)m[0]++;const A=m[0];if(m[0]+=l,m[0]+l>i.buffer.byteLength){const p=i.buffer.byteLength/65536;let R=Math.floor((m[0]+l)/65536)+1;R>t&&(R=t),i.grow(R-p)}return A}function s(l){const m=a(l.byteLength);return _(m,l),m}function u(l,m){const A=new Uint8Array(i.buffer);return new Uint8Array(A.buffer,A.byteOffset+l,m)}function _(l,m){new Uint8Array(i.buffer).set(new Uint8Array(m),l)}function d(l){if(l[0].cmd=="INIT")return o(l[0]);const m={vars:[],out:[]},p=new Uint32Array(i.buffer,0,1)[0];for(let P=0;P<l.length;P++)switch(l[P].cmd){case"ALLOCSET":m.vars[l[P].var]=s(l[P].buff);break;case"ALLOC":m.vars[l[P].var]=a(l[P].len);break;case"SET":_(m.vars[l[P].var],l[P].buff);break;case"CALL":{const C=[];for(let G=0;G<l[P].params.length;G++){const O=l[P].params[G];typeof O.var!="undefined"?C.push(m.vars[O.var]+(O.offset||0)):typeof O.val!="undefined"&&C.push(O.val)}n.exports[l[P].fnName](...C);break}case"GET":m.out[l[P].out]=u(m.vars[l[P].var],l[P].len).slice();break;default:throw new Error("Invalid cmd")}const R=new Uint32Array(i.buffer,0,1);return R[0]=p,m.out}return d}var Io={},fp=Object.freeze({__proto__:null,default:Io});function dp(e){return globalThis.btoa(e)}dp("("+up.toString()+")(self)");var Ge={};const Fe=rn.exports;function yn(e){let t;return typeof e=="string"&&e.slice(0,2).toLowerCase()=="0x"?t=Fe(e.slice(2),16):t=Fe(e),t}function hp(e){const t=[],n=yn(e);return t.push(n.and(255).toJSNumber()),t.push(n.shiftRight(8).and(255).toJSNumber()),t.push(n.shiftRight(16).and(255).toJSNumber()),t.push(n.shiftRight(24).and(255).toJSNumber()),t}function _p(e){const t=[],n=yn(e);return t.push(n.and(255).toJSNumber()),t.push(n.shiftRight(8).and(255).toJSNumber()),t.push(n.shiftRight(16).and(255).toJSNumber()),t.push(n.shiftRight(24).and(255).toJSNumber()),t.push(n.shiftRight(32).and(255).toJSNumber()),t.push(n.shiftRight(40).and(255).toJSNumber()),t.push(n.shiftRight(48).and(255).toJSNumber()),t.push(n.shiftRight(56).and(255).toJSNumber()),t}function pp(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t.push(i):i<2048?t.push(192|i>>6,128|i&63):i<55296||i>=57344?t.push(224|i>>12,128|i>>6&63,128|i&63):(n++,i=65536+((i&1023)<<10|e.charCodeAt(n)&1023),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return t}function gp(e){const t=pp(e);return[...rl(t.length),...t]}function $r(e){const t=[];let n=yn(e);if(n.isNegative())throw new Error("Number cannot be negative");for(;!n.isZero();)t.push(n.and(127).toJSNumber()),n=n.shiftRight(7);t.length==0&&t.push(0);for(let i=0;i<t.length-1;i++)t[i]=t[i]|128;return t}function ol(e){let t,n;const i=e.bitLength().toJSNumber();e<0?(n=!0,t=Fe.one.shiftLeft(i).add(e)):(n=!1,t=yn(e));const o=7-i%7,a=Fe.one.shiftLeft(o).minus(1).shiftLeft(i),s=(1<<7-o)-1|128,u=$r(t.add(a));return n||(u[u.length-1]=u[u.length-1]&s),u}function mp(e){let t=yn(e);if(t.greater(Fe("FFFFFFFF",16)))throw new Error("Number too big");if(t.greater(Fe("7FFFFFFF",16))&&(t=t.minus(Fe("100000000",16))),t.lesser(Fe("-80000000",16)))throw new Error("Number too small");return ol(t)}function yp(e){let t=yn(e);if(t.greater(Fe("FFFFFFFFFFFFFFFF",16)))throw new Error("Number too big");if(t.greater(Fe("7FFFFFFFFFFFFFFF",16))&&(t=t.minus(Fe("10000000000000000",16))),t.lesser(Fe("-8000000000000000",16)))throw new Error("Number too small");return ol(t)}function rl(e){let t=yn(e);if(t.greater(Fe("FFFFFFFF",16)))throw new Error("Number too big");return $r(t)}function Ap(e){let t=yn(e);if(t.greater(Fe("FFFFFFFFFFFFFFFF",16)))throw new Error("Number too big");return $r(t)}function Ip(e){return Array.from(e,function(t){return("0"+(t&255).toString(16)).slice(-2)}).join("")}function al(e){if(typeof e=="string"){let t=e.split(`
`);for(let n=0;n<t.length;n++)t[n]&&(t[n]="    "+t[n]);return t.join(`
`)}else if(Array.isArray(e)){for(let t=0;t<e.length;t++)e[t]=al(e[t]);return e}}Ge.toNumber=yn,Ge.u32=hp,Ge.u64=_p,Ge.varuint32=rl,Ge.varuint64=Ap,Ge.varint32=mp,Ge.varint64=yp,Ge.string=gp,Ge.toHexString=Ip,Ge.ident=al;const te=Ge;class Lp{constructor(t){this.func=t,this.functionName=t.functionName,this.module=t.module}setLocal(t,n){const i=this.func.localIdxByName[t];if(i===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...n,33,...te.varuint32(i)]}teeLocal(t,n){const i=this.func.localIdxByName[t];if(i===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...n,34,...te.varuint32(i)]}getLocal(t){const n=this.func.localIdxByName[t];if(n===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[32,...te.varuint32(n)]}i64_load8_s(t,n,i){const o=n||0,a=i===void 0?0:i;return[...t,48,a,...te.varuint32(o)]}i64_load8_u(t,n,i){const o=n||0,a=i===void 0?0:i;return[...t,49,a,...te.varuint32(o)]}i64_load16_s(t,n,i){const o=n||0,a=i===void 0?1:i;return[...t,50,a,...te.varuint32(o)]}i64_load16_u(t,n,i){const o=n||0,a=i===void 0?1:i;return[...t,51,a,...te.varuint32(o)]}i64_load32_s(t,n,i){const o=n||0,a=i===void 0?2:i;return[...t,52,a,...te.varuint32(o)]}i64_load32_u(t,n,i){const o=n||0,a=i===void 0?2:i;return[...t,53,a,...te.varuint32(o)]}i64_load(t,n,i){const o=n||0,a=i===void 0?3:i;return[...t,41,a,...te.varuint32(o)]}i64_store(t,n,i,o){let a,s,u;return Array.isArray(n)?(a=0,s=3,u=n):Array.isArray(i)?(a=n,s=3,u=i):Array.isArray(o)&&(a=n,s=i,u=o),[...t,...u,55,s,...te.varuint32(a)]}i64_store32(t,n,i,o){let a,s,u;return Array.isArray(n)?(a=0,s=2,u=n):Array.isArray(i)?(a=n,s=2,u=i):Array.isArray(o)&&(a=n,s=i,u=o),[...t,...u,62,s,...te.varuint32(a)]}i64_store16(t,n,i,o){let a,s,u;return Array.isArray(n)?(a=0,s=1,u=n):Array.isArray(i)?(a=n,s=1,u=i):Array.isArray(o)&&(a=n,s=i,u=o),[...t,...u,61,s,...te.varuint32(a)]}i64_store8(t,n,i,o){let a,s,u;return Array.isArray(n)?(a=0,s=0,u=n):Array.isArray(i)?(a=n,s=0,u=i):Array.isArray(o)&&(a=n,s=i,u=o),[...t,...u,60,s,...te.varuint32(a)]}i32_load8_s(t,n,i){const o=n||0,a=i===void 0?0:i;return[...t,44,a,...te.varuint32(o)]}i32_load8_u(t,n,i){const o=n||0,a=i===void 0?0:i;return[...t,45,a,...te.varuint32(o)]}i32_load16_s(t,n,i){const o=n||0,a=i===void 0?1:i;return[...t,46,a,...te.varuint32(o)]}i32_load16_u(t,n,i){const o=n||0,a=i===void 0?1:i;return[...t,47,a,...te.varuint32(o)]}i32_load(t,n,i){const o=n||0,a=i===void 0?2:i;return[...t,40,a,...te.varuint32(o)]}i32_store(t,n,i,o){let a,s,u;return Array.isArray(n)?(a=0,s=2,u=n):Array.isArray(i)?(a=n,s=2,u=i):Array.isArray(o)&&(a=n,s=i,u=o),[...t,...u,54,s,...te.varuint32(a)]}i32_store16(t,n,i,o){let a,s,u;return Array.isArray(n)?(a=0,s=1,u=n):Array.isArray(i)?(a=n,s=1,u=i):Array.isArray(o)&&(a=n,s=i,u=o),[...t,...u,59,s,...te.varuint32(a)]}i32_store8(t,n,i,o){let a,s,u;return Array.isArray(n)?(a=0,s=0,u=n):Array.isArray(i)?(a=n,s=0,u=i):Array.isArray(o)&&(a=n,s=i,u=o),[...t,...u,58,s,...te.varuint32(a)]}call(t,...n){const i=this.module.functionIdxByName[t];if(i===void 0)throw new Error(`Function not defined: Function: ${t}`);return[...[].concat(...n),16,...te.varuint32(i)]}call_indirect(t,...n){return[...[].concat(...n),...t,17,0,0]}if(t,n,i){return i?[...t,4,64,...n,5,...i,11]:[...t,4,64,...n,11]}block(t){return[2,64,...t,11]}loop(...t){return[3,64,...[].concat(...t),11]}br_if(t,n){return[...n,13,...te.varuint32(t)]}br(t){return[12,...te.varuint32(t)]}ret(t){return[...t,15]}drop(t){return[...t,26]}i64_const(t){return[66,...te.varint64(t)]}i32_const(t){return[65,...te.varint32(t)]}i64_eqz(t){return[...t,80]}i64_eq(t,n){return[...t,...n,81]}i64_ne(t,n){return[...t,...n,82]}i64_lt_s(t,n){return[...t,...n,83]}i64_lt_u(t,n){return[...t,...n,84]}i64_gt_s(t,n){return[...t,...n,85]}i64_gt_u(t,n){return[...t,...n,86]}i64_le_s(t,n){return[...t,...n,87]}i64_le_u(t,n){return[...t,...n,88]}i64_ge_s(t,n){return[...t,...n,89]}i64_ge_u(t,n){return[...t,...n,90]}i64_add(t,n){return[...t,...n,124]}i64_sub(t,n){return[...t,...n,125]}i64_mul(t,n){return[...t,...n,126]}i64_div_s(t,n){return[...t,...n,127]}i64_div_u(t,n){return[...t,...n,128]}i64_rem_s(t,n){return[...t,...n,129]}i64_rem_u(t,n){return[...t,...n,130]}i64_and(t,n){return[...t,...n,131]}i64_or(t,n){return[...t,...n,132]}i64_xor(t,n){return[...t,...n,133]}i64_shl(t,n){return[...t,...n,134]}i64_shr_s(t,n){return[...t,...n,135]}i64_shr_u(t,n){return[...t,...n,136]}i64_extend_i32_s(t){return[...t,172]}i64_extend_i32_u(t){return[...t,173]}i64_clz(t){return[...t,121]}i64_ctz(t){return[...t,122]}i32_eqz(t){return[...t,69]}i32_eq(t,n){return[...t,...n,70]}i32_ne(t,n){return[...t,...n,71]}i32_lt_s(t,n){return[...t,...n,72]}i32_lt_u(t,n){return[...t,...n,73]}i32_gt_s(t,n){return[...t,...n,74]}i32_gt_u(t,n){return[...t,...n,75]}i32_le_s(t,n){return[...t,...n,76]}i32_le_u(t,n){return[...t,...n,77]}i32_ge_s(t,n){return[...t,...n,78]}i32_ge_u(t,n){return[...t,...n,79]}i32_add(t,n){return[...t,...n,106]}i32_sub(t,n){return[...t,...n,107]}i32_mul(t,n){return[...t,...n,108]}i32_div_s(t,n){return[...t,...n,109]}i32_div_u(t,n){return[...t,...n,110]}i32_rem_s(t,n){return[...t,...n,111]}i32_rem_u(t,n){return[...t,...n,112]}i32_and(t,n){return[...t,...n,113]}i32_or(t,n){return[...t,...n,114]}i32_xor(t,n){return[...t,...n,115]}i32_shl(t,n){return[...t,...n,116]}i32_shr_s(t,n){return[...t,...n,117]}i32_shr_u(t,n){return[...t,...n,118]}i32_rotl(t,n){return[...t,...n,119]}i32_rotr(t,n){return[...t,...n,120]}i32_wrap_i64(t){return[...t,167]}i32_clz(t){return[...t,103]}i32_ctz(t){return[...t,104]}unreachable(){return[0]}current_memory(){return[63,0]}comment(){return[]}}var Ep=Lp;const wp=Ep,Lo=Ge,jr={i32:127,i64:126,f32:125,f64:124,anyfunc:112,func:96,emptyblock:64};class Sp{constructor(t,n,i,o,a){if(i=="import")this.fnType="import",this.moduleName=o,this.fieldName=a;else if(i=="internal")this.fnType="internal";else throw new Error("Invalid function fnType: "+i);this.module=t,this.fnName=n,this.params=[],this.locals=[],this.localIdxByName={},this.code=[],this.returnType=null,this.nextLocal=0}addParam(t,n){if(this.localIdxByName[t])throw new Error(`param already exists. Function: ${this.fnName}, Param: ${t} `);const i=this.nextLocal++;this.localIdxByName[t]=i,this.params.push({type:n})}addLocal(t,n,i){const o=i||1;if(this.localIdxByName[t])throw new Error(`local already exists. Function: ${this.fnName}, Param: ${t} `);const a=this.nextLocal++;this.localIdxByName[t]=a,this.locals.push({type:n,length:o})}setReturnType(t){if(this.returnType)throw new Error(`returnType already defined. Function: ${this.fnName}`);this.returnType=t}getSignature(){const t=[...Lo.varuint32(this.params.length),...this.params.map(i=>jr[i.type])],n=this.returnType?[1,jr[this.returnType]]:[0];return[96,...t,...n]}getBody(){const t=this.locals.map(i=>[...Lo.varuint32(i.length),jr[i.type]]),n=[...Lo.varuint32(this.locals.length),...[].concat(...t),...this.code,11];return[...Lo.varuint32(n.length),...n]}addCode(...t){this.code.push(...[].concat(...t))}getCodeBuilder(){return new wp(this)}}var vp=Sp;const sl=vp,Xt=Ge;class Cp{constructor(){this.functions=[],this.functionIdxByName={},this.nImportFunctions=0,this.nInternalFunctions=0,this.memory={pagesSize:1,moduleName:"env",fieldName:"memory"},this.free=8,this.datas=[],this.modules={},this.exports=[],this.functionsTable=[]}build(){return this._setSignatures(),new Uint8Array([...Xt.u32(1836278016),...Xt.u32(1),...this._buildType(),...this._buildImport(),...this._buildFunctionDeclarations(),...this._buildFunctionsTable(),...this._buildExports(),...this._buildElements(),...this._buildCode(),...this._buildData()])}addFunction(t){if(typeof this.functionIdxByName[t]!="undefined")throw new Error(`Function already defined: ${t}`);const n=this.functions.length;return this.functionIdxByName[t]=n,this.functions.push(new sl(this,t,"internal")),this.nInternalFunctions++,this.functions[n]}addIimportFunction(t,n,i){if(typeof this.functionIdxByName[t]!="undefined")throw new Error(`Function already defined: ${t}`);if(this.functions.length>0&&this.functions[this.functions.length-1].type=="internal")throw new Error(`Import functions must be declared before internal: ${t}`);let o=i||t;const a=this.functions.length;return this.functionIdxByName[t]=a,this.functions.push(new sl(this,t,"import",n,o)),this.nImportFunctions++,this.functions[a]}setMemory(t,n,i){this.memory={pagesSize:t,moduleName:n||"env",fieldName:i||"memory"}}exportFunction(t,n){const i=n||t;if(typeof this.functionIdxByName[t]=="undefined")throw new Error(`Function not defined: ${t}`);const o=this.functionIdxByName[t];i!=t&&(this.functionIdxByName[i]=o),this.exports.push({exportName:i,idx:o})}addFunctionToTable(t){const n=this.functionIdxByName[t];this.functionsTable.push(n)}addData(t,n){this.datas.push({offset:t,bytes:n})}alloc(t,n){let i,o;(Array.isArray(t)||ArrayBuffer.isView(t))&&typeof n=="undefined"?(i=t.length,o=t):(i=t,o=n),i=(i-1>>3)+1<<3;const a=this.free;return this.free+=i,o&&this.addData(a,o),a}allocString(t){const i=new globalThis.TextEncoder().encode(t);return this.alloc([...i,0])}_setSignatures(){this.signatures=[];const t={};if(this.functionsTable.length>0){const n=this.functions[this.functionsTable[0]].getSignature(),i="s_"+Xt.toHexString(n);t[i]=0,this.signatures.push(n)}for(let n=0;n<this.functions.length;n++){const i=this.functions[n].getSignature(),o="s_"+Xt.toHexString(i);typeof t[o]=="undefined"&&(t[o]=this.signatures.length,this.signatures.push(i)),this.functions[n].signatureIdx=t[o]}}_buildSection(t,n){return[t,...Xt.varuint32(n.length),...n]}_buildType(){return this._buildSection(1,[...Xt.varuint32(this.signatures.length),...[].concat(...this.signatures)])}_buildImport(){const t=[];t.push([...Xt.string(this.memory.moduleName),...Xt.string(this.memory.fieldName),2,0,...Xt.varuint32(this.memory.pagesSize)]);for(let n=0;n<this.nImportFunctions;n++)t.push([...Xt.string(this.functions[n].moduleName),...Xt.string(this.functions[n].fieldName),0,...Xt.varuint32(this.functions[n].signatureIdx)]);return this._buildSection(2,Xt.varuint32(t.length).concat(...t))}_buildFunctionDeclarations(){const t=[];for(let n=this.nImportFunctions;n<this.nImportFunctions+this.nInternalFunctions;n++)t.push(...Xt.varuint32(this.functions[n].signatureIdx));return this._buildSection(3,[...Xt.varuint32(t.length),...t])}_buildFunctionsTable(){return this.functionsTable.length==0?[]:this._buildSection(4,[...Xt.varuint32(1),112,0,...Xt.varuint32(this.functionsTable.length)])}_buildElements(){if(this.functionsTable.length==0)return[];const t=[];for(let n=0;n<this.functionsTable.length;n++)t.push(...Xt.varuint32(this.functionsTable[n]));return this._buildSection(9,[...Xt.varuint32(1),...Xt.varuint32(0),65,...Xt.varint32(0),11,...Xt.varuint32(this.functionsTable.length),...t])}_buildExports(){const t=[];for(let n=0;n<this.exports.length;n++)t.push([...Xt.string(this.exports[n].exportName),0,...Xt.varuint32(this.exports[n].idx)]);return this._buildSection(7,Xt.varuint32(t.length).concat(...t))}_buildCode(){const t=[];for(let n=this.nImportFunctions;n<this.nImportFunctions+this.nInternalFunctions;n++)t.push(this.functions[n].getBody());return this._buildSection(10,Xt.varuint32(t.length).concat(...t))}_buildData(){const t=[];t.push([0,65,0,11,4,...Xt.u32(this.free)]);for(let n=0;n<this.datas.length;n++)t.push([0,65,...Xt.varint32(this.datas[n].offset),11,...Xt.varuint32(this.datas[n].bytes.length),...this.datas[n].bytes]);return this._buildSection(11,Xt.varuint32(t.length).concat(...t))}}var bp=Cp,cl=bp;globalThis.curve_bn128=null,globalThis.curve_bls12381=null,Gi("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),Gi("21888242871839275222246405745257275088548364400416034343698204186575808495617"),Gi("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),Gi("21888242871839275222246405745257275088696311157297823662689037894645226208583");const ll=m_;async function ul(e,t,n,i){if(n=n||4096*64,["w+","wx+","r","ax+","a+"].indexOf(t)<0)throw new Error("Invalid open option");const o=await Io.promises.open(e,t),a=await o.stat();return new Fp(o,a,n,i,e)}class Fp{constructor(t,n,i,o,a){for(this.fileName=a,this.fd=t,this.pos=0,this.pageSize=o||1<<8;this.pageSize<n.blksize;)this.pageSize*=2;this.totalSize=n.size,this.totalPages=Math.floor((n.size-1)/this.pageSize)+1,this.maxPagesLoaded=Math.floor(i/this.pageSize)+1,this.pages={},this.pendingLoads=[],this.writing=!1,this.reading=!1,this.avBuffs=[],this.history={}}_loadPage(t){const n=this,i=new Promise((o,a)=>{n.pendingLoads.push({page:t,resolve:o,reject:a})});return n.__statusPage("After Load request: ",t),i}__statusPage(t,n){const i=[],o=this;if(!o.logHistory)return;i.push("=="+t+" "+n);let a="";for(let s=0;s<o.pendingLoads.length;s++)o.pendingLoads[s].page==n&&(a=a+" "+s);if(a&&i.push("Pending loads:"+a),typeof o.pages[n]!="undefined"){const s=o.pages[n];i.push("Loaded"),i.push("pendingOps: "+s.pendingOps),s.loading&&i.push("loading: "+s.loading),s.writing&&i.push("writing"),s.dirty&&i.push("dirty")}i.push("=="),o.history[n]||(o.history[n]=[]),o.history[n].push(i)}__printHistory(t){const n=this;n.history[t]||console.log("Empty History ",t),console.log("History "+t);for(let i=0;i<n.history[t].length;i++)for(let o=0;o<n.history[t][i].length;o++)console.log("-> "+n.history[t][i][o])}_triggerLoad(){const t=this;if(t.reading||t.pendingLoads.length==0)return;const n=Object.keys(t.pages),i=[];for(let u=0;u<n.length;u++){const _=t.pages[parseInt(n[u])];_.dirty==!1&&_.pendingOps==0&&!_.writing&&!_.loading&&i.push(parseInt(n[u]))}let o=t.maxPagesLoaded-n.length;const a=[];for(;t.pendingLoads.length>0&&(typeof t.pages[t.pendingLoads[0].page]!="undefined"||o>0||i.length>0);){const u=t.pendingLoads.shift();if(typeof t.pages[u.page]!="undefined"){t.pages[u.page].pendingOps++;const _=i.indexOf(u.page);_>=0&&i.splice(_,1),t.pages[u.page].loading?t.pages[u.page].loading.push(u):u.resolve(),t.__statusPage("After Load (cached): ",u.page)}else{if(o)o--;else{const _=i.shift();t.__statusPage("Before Unload: ",_),t.avBuffs.unshift(t.pages[_]),delete t.pages[_],t.__statusPage("After Unload: ",_)}u.page>=t.totalPages?(t.pages[u.page]=s(),u.resolve(),t.__statusPage("After Load (new): ",u.page)):(t.reading=!0,t.pages[u.page]=s(),t.pages[u.page].loading=[u],a.push(t.fd.read(t.pages[u.page].buff,0,t.pageSize,u.page*t.pageSize).then(_=>{t.pages[u.page].size=_.bytesRead;const d=t.pages[u.page].loading;delete t.pages[u.page].loading;for(let l=0;l<d.length;l++)d[l].resolve();return t.__statusPage("After Load (loaded): ",u.page),_},_=>{u.reject(_)})),t.__statusPage("After Load (loading): ",u.page))}}Promise.all(a).then(()=>{t.reading=!1,t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t)),t._tryClose()});function s(){if(t.avBuffs.length>0){const u=t.avBuffs.shift();return u.dirty=!1,u.pendingOps=1,u.size=0,u}else return{dirty:!1,buff:new Uint8Array(t.pageSize),pendingOps:1,size:0}}}_triggerWrite(){const t=this;if(t.writing)return;const n=Object.keys(t.pages),i=[];for(let o=0;o<n.length;o++){const a=t.pages[parseInt(n[o])];a.dirty&&(a.dirty=!1,a.writing=!0,t.writing=!0,i.push(t.fd.write(a.buff,0,a.size,parseInt(n[o])*t.pageSize).then(()=>{a.writing=!1},s=>{console.log("ERROR Writing: "+s),t.error=s,t._tryClose()})))}t.writing&&Promise.all(i).then(()=>{t.writing=!1,setImmediate(t._triggerWrite.bind(t)),t._tryClose(),t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t))})}_getDirtyPage(){for(let t in this.pages)if(this.pages[t].dirty)return t;return-1}async write(t,n){if(t.byteLength==0)return;const i=this;if(typeof n=="undefined"&&(n=i.pos),i.pos=n+t.byteLength,i.totalSize<n+t.byteLength&&(i.totalSize=n+t.byteLength),i.pendingClose)throw new Error("Writing a closing file");const o=Math.floor(n/i.pageSize),a=Math.floor((n+t.byteLength-1)/i.pageSize),s=[];for(let l=o;l<=a;l++)s.push(i._loadPage(l));i._triggerLoad();let u=o,_=n%i.pageSize,d=t.byteLength;for(;d>0;){await s[u-o];const l=_+d>i.pageSize?i.pageSize-_:d,m=t.slice(t.byteLength-d,t.byteLength-d+l);new Uint8Array(i.pages[u].buff.buffer,_,l).set(m),i.pages[u].dirty=!0,i.pages[u].pendingOps--,i.pages[u].size=Math.max(_+l,i.pages[u].size),u>=i.totalPages&&(i.totalPages=u+1),d=d-l,u++,_=0,i.writing||setImmediate(i._triggerWrite.bind(i))}}async read(t,n){const i=this;let o=new Uint8Array(t);return await i.readToBuffer(o,0,t,n),o}async readToBuffer(t,n,i,o){if(i==0)return;const a=this;if(i>a.pageSize*a.maxPagesLoaded*.8){const A=Math.floor(i*1.1);this.maxPagesLoaded=Math.floor(A/a.pageSize)+1}if(typeof o=="undefined"&&(o=a.pos),a.pos=o+i,a.pendingClose)throw new Error("Reading a closing file");const s=Math.floor(o/a.pageSize),u=Math.floor((o+i-1)/a.pageSize),_=[];for(let A=s;A<=u;A++)_.push(a._loadPage(A));a._triggerLoad();let d=s,l=o%a.pageSize,m=o+i>a.totalSize?i-(o+i-a.totalSize):i;for(;m>0;){await _[d-s],a.__statusPage("After Await (read): ",d);const A=l+m>a.pageSize?a.pageSize-l:m,p=new Uint8Array(a.pages[d].buff.buffer,a.pages[d].buff.byteOffset+l,A);t.set(p,n+i-m),a.pages[d].pendingOps--,a.__statusPage("After Op done: ",d),m=m-A,d++,l=0,a.pendingLoads.length>0&&setImmediate(a._triggerLoad.bind(a))}this.pos=o+i}_tryClose(){const t=this;!t.pendingClose||(t.error&&t.pendingCloseReject(t.error),t._getDirtyPage()>=0||t.writing||t.reading||t.pendingLoads.length>0)||t.pendingClose()}close(){const t=this;if(t.pendingClose)throw new Error("Closing the file twice");return new Promise((n,i)=>{t.pendingClose=n,t.pendingCloseReject=i,t._tryClose()}).then(()=>{t.fd.close()},n=>{throw t.fd.close(),n})}async discard(){await this.close(),await Io.promises.unlink(this.fileName)}async writeULE32(t,n){const i=this,o=new Uint8Array(4);new DataView(o.buffer).setUint32(0,t,!0),await i.write(o,n)}async writeUBE32(t,n){const i=this,o=new Uint8Array(4);new DataView(o.buffer).setUint32(0,t,!1),await i.write(o,n)}async writeULE64(t,n){const i=this,o=new Uint8Array(8),a=new DataView(o.buffer);a.setUint32(0,t&4294967295,!0),a.setUint32(4,Math.floor(t/4294967296),!0),await i.write(o,n)}async readULE32(t){const i=await this.read(4,t);return new Uint32Array(i.buffer)[0]}async readUBE32(t){const i=await this.read(4,t);return new DataView(i.buffer).getUint32(0,!1)}async readULE64(t){const i=await this.read(8,t),o=new Uint32Array(i.buffer);return o[1]*4294967296+o[0]}}function Bp(e){const t=e.initialSize||1<<20,n=new _l;return n.o=e,n.o.data=new Uint8Array(t),n.allocSize=t,n.totalSize=0,n.readOnly=!1,n.pos=0,n}function Tp(e){const t=new _l;return t.o=e,t.allocSize=e.data.byteLength,t.totalSize=e.data.byteLength,t.readOnly=!0,t.pos=0,t}const Yr=new Uint8Array(4),fl=new DataView(Yr.buffer),dl=new Uint8Array(8),hl=new DataView(dl.buffer);class _l{constructor(){this.pageSize=1<<14}_resizeIfNeeded(t){if(t>this.allocSize){const n=Math.max(this.allocSize+(1<<20),Math.floor(this.allocSize*1.1),t),i=new Uint8Array(n);i.set(this.o.data),this.o.data=i,this.allocSize=n}}async write(t,n){if(typeof n=="undefined"&&(n=this.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(n+t.byteLength),this.o.data.set(t.slice(),n),n+t.byteLength>this.totalSize&&(this.totalSize=n+t.byteLength),this.pos=n+t.byteLength}async readToBuffer(t,n,i,o){if(typeof o=="undefined"&&(o=this.pos),this.readOnly&&o+i>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(o+i);const s=new Uint8Array(this.o.data.buffer,this.o.data.byteOffset+o,i);t.set(s,n),this.pos=o+i}async read(t,n){const i=this,o=new Uint8Array(t);return await i.readToBuffer(o,0,t,n),o}close(){this.o.data.byteLength!=this.totalSize&&(this.o.data=this.o.data.slice(0,this.totalSize))}async discard(){}async writeULE32(t,n){const i=this;fl.setUint32(0,t,!0),await i.write(Yr,n)}async writeUBE32(t,n){const i=this;fl.setUint32(0,t,!1),await i.write(Yr,n)}async writeULE64(t,n){const i=this;hl.setUint32(0,t&4294967295,!0),hl.setUint32(4,Math.floor(t/4294967296),!0),await i.write(dl,n)}async readULE32(t){const i=await this.read(4,t);return new Uint32Array(i.buffer)[0]}async readUBE32(t){const i=await this.read(4,t);return new DataView(i.buffer).getUint32(0,!1)}async readULE64(t){const i=await this.read(8,t),o=new Uint32Array(i.buffer);return o[1]*4294967296+o[0]}}const Be=1<<22;function Rp(e){const t=e.initialSize||0,n=new yl;n.o=e;const i=t?Math.floor((t-1)/Be)+1:0;n.o.data=[];for(let o=0;o<i-1;o++)n.o.data.push(new Uint8Array(Be));return i&&n.o.data.push(new Uint8Array(t-Be*(i-1))),n.totalSize=0,n.readOnly=!1,n.pos=0,n}function Op(e){const t=new yl;return t.o=e,t.totalSize=(e.data.length-1)*Be+e.data[e.data.length-1].byteLength,t.readOnly=!0,t.pos=0,t}const Vr=new Uint8Array(4),pl=new DataView(Vr.buffer),gl=new Uint8Array(8),ml=new DataView(gl.buffer);class yl{constructor(){this.pageSize=1<<14}_resizeIfNeeded(t){if(t<=this.totalSize)return;if(this.readOnly)throw new Error("Reading out of file bounds");const n=Math.floor((t-1)/Be)+1;for(let i=Math.max(this.o.data.length-1,0);i<n;i++){const o=i<n-1?Be:t-(n-1)*Be,a=new Uint8Array(o);i==this.o.data.length-1&&a.set(this.o.data[i]),this.o.data[i]=a}this.totalSize=t}async write(t,n){const i=this;if(typeof n=="undefined"&&(n=i.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(n+t.byteLength);let a=Math.floor(n/Be),s=n%Be,u=t.byteLength;for(;u>0;){const _=s+u>Be?Be-s:u,d=t.slice(t.byteLength-u,t.byteLength-u+_);new Uint8Array(i.o.data[a].buffer,s,_).set(d),u=u-_,a++,s=0}this.pos=n+t.byteLength}async readToBuffer(t,n,i,o){const a=this;if(typeof o=="undefined"&&(o=a.pos),this.readOnly&&o+i>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(o+i);let u=Math.floor(o/Be),_=o%Be,d=i;for(;d>0;){const l=_+d>Be?Be-_:d,m=new Uint8Array(a.o.data[u].buffer,_,l);t.set(m,n+i-d),d=d-l,u++,_=0}this.pos=o+i}async read(t,n){const i=this,o=new Uint8Array(t);return await i.readToBuffer(o,0,t,n),o}close(){}async discard(){}async writeULE32(t,n){const i=this;pl.setUint32(0,t,!0),await i.write(Vr,n)}async writeUBE32(t,n){const i=this;pl.setUint32(0,t,!1),await i.write(Vr,n)}async writeULE64(t,n){const i=this;ml.setUint32(0,t&4294967295,!0),ml.setUint32(4,Math.floor(t/4294967296),!0),await i.write(gl,n)}async readULE32(t){const i=await this.read(4,t);return new Uint32Array(i.buffer)[0]}async readUBE32(t){const i=await this.read(4,t);return new DataView(i.buffer).getUint32(0,!1)}async readULE64(t){const i=await this.read(8,t),o=new Uint32Array(i.buffer);return o[1]*4294967296+o[0]}}const Pp=1<<16,xp=1<<13;async function Np(e,t,n){if(typeof e=="string"&&(e={type:"file",fileName:e,cacheSize:t||Pp,pageSize:n||xp}),e.type=="file")return await ul(e.fileName,"w+",e.cacheSize,e.pageSize);if(e.type=="mem")return Bp(e);if(e.type=="bigMem")return Rp(e);throw new Error("Invalid FastFile type: "+e.type)}async function Mp(e,t,n){if(e instanceof Uint8Array&&(e={type:"mem",data:e}),typeof e=="string"){const i=await fetch(e).then(function(o){return o.arrayBuffer()}).then(function(o){return new Uint8Array(o)});e={type:"mem",data:i}}if(e.type=="file")return await ul(e.fileName,"r",e.cacheSize,e.pageSize);if(e.type=="mem")return await Tp(e);if(e.type=="bigMem")return await Op(e);throw new Error("Invalid FastFile type: "+e.type)}async function ke(e,t,n,i,o){const a=await Mp(e),s=await a.read(4);let u="";for(let m=0;m<4;m++)u+=String.fromCharCode(s[m]);if(u!=t)throw new Error(e+": Invalid File format");if(await a.readULE32()>n)throw new Error("Version not supported");const d=await a.readULE32();let l=[];for(let m=0;m<d;m++){let A=await a.readULE32(),p=await a.readULE64();typeof l[A]=="undefined"&&(l[A]=[]),l[A].push({p:a.pos,size:p}),a.pos+=p}return{fd:a,sections:l}}async function Kr(e,t,n,i,o,a){const s=await Np(e,o,a),u=new Uint8Array(4);for(let _=0;_<4;_++)u[_]=t.charCodeAt(_);return await s.write(u,0),await s.writeULE32(n),await s.writeULE32(i),s}async function ue(e,t){if(typeof e.writingSection!="undefined")throw new Error("Already writing a section");await e.writeULE32(t),e.writingSection={pSectionSize:e.pos},await e.writeULE64(0)}async function fe(e){if(typeof e.writingSection=="undefined")throw new Error("Not writing a section");const t=e.pos-e.writingSection.pSectionSize-8,n=e.pos;e.pos=e.writingSection.pSectionSize,await e.writeULE64(t),e.pos=n,delete e.writingSection}async function xe(e,t,n){if(typeof e.readingSection!="undefined")throw new Error("Already reading a section");if(!t[n])throw new Error(e.fileName+": Missing section "+n);if(t[n].length>1)throw new Error(e.fileName+": Section Duplicated "+n);e.pos=t[n][0].p,e.readingSection=t[n][0]}async function Ne(e,t){if(typeof e.readingSection=="undefined")throw new Error("Not reading a section");if(!t&&e.pos-e.readingSection.p!=e.readingSection.size)throw new Error("Invalid section size reading");delete e.readingSection}async function _i(e,t,n,i){const o=new Uint8Array(n);ll.toRprLE(o,0,t,n),await e.write(o,i)}async function pi(e,t,n){const i=await e.read(t,n);return ll.fromRprLE(i,0,t)}async function Hi(e,t,n,i,o){typeof o=="undefined"&&(o=t[i][0].size);const a=e.pageSize;await xe(e,t,i),await ue(n,i);for(let s=0;s<o;s+=a){const u=Math.min(o-s,a),_=await e.read(u);await n.write(_)}await fe(n),await Ne(e,o!=t[i][0].size)}async function An(e,t,n,i,o){if(i=typeof i=="undefined"?0:i,o=typeof o=="undefined"?t[n][0].size-i:o,i+o>t[n][0].size)throw new Error("Reading out of the range of the section");let a;return o<1<<30?a=new Uint8Array(o):a=new Ao(o),await e.readToBuffer(a,0,o,t[n][0].p+i),a}async function zi(e,t,n,i,o){const a=e.pageSize*16;if(await xe(e,t,o),await xe(n,i,o),t[o][0].size!=i[o][0].size)return!1;const s=t[o][0].size;for(let u=0;u<s;u+=a){const _=Math.min(s-u,a),d=await e.read(_),l=await n.read(_);for(let m=0;m<_;m++)if(d[m]!=l[m])return!1}return await Ne(e),await Ne(n),!0}const Up=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function Al(e,t){if(!t||t==10)return BigInt(e);if(t==16)return e.slice(0,2)=="0x"?BigInt(e):BigInt("0x"+e)}const Dp=Al;function Gp(e,t){let n=BigInt(0);t=BigInt(t);for(let i=0;i<e.length;i++)n=n*t+BigInt(e[i]);return n}function kp(e){const t=e.toString(16);return(t.length-1)*4+Up[parseInt(t[0],16)]}function Wp(e){return BigInt(e)<BigInt(0)}function qp(e){return!e}function Il(e,t){return BigInt(e)<<BigInt(t)}function Ll(e,t){return BigInt(e)>>BigInt(t)}const Qp=Il,Hp=Ll;function zp(e){return(BigInt(e)&BigInt(1))==BigInt(1)}function $p(e){let t=BigInt(e);const n=[];for(;t;){if(t&BigInt(1)){const i=2-Number(t%BigInt(4));n.push(i),t=t-BigInt(i)}else n.push(0);t=t>>BigInt(1)}return n}function jp(e){let t=BigInt(e);const n=[];for(;t;)t&BigInt(1)?n.push(1):n.push(0),t=t>>BigInt(1);return n}function Yp(e){if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("Number too big");return Number(e)}function Vp(e,t){const n=[];let i=BigInt(e);for(t=BigInt(t);i;)n.unshift(Number(i%t)),i=i/t;return n}function Kp(e,t){return BigInt(e)+BigInt(t)}function Zp(e,t){return BigInt(e)-BigInt(t)}function Xp(e){return-BigInt(e)}function Jp(e,t){return BigInt(e)*BigInt(t)}function tg(e){return BigInt(e)*BigInt(e)}function eg(e,t){return BigInt(e)**BigInt(t)}function ng(e,t){return BigInt(e)**BigInt(t)}function ig(e){return BigInt(e)>=0?BigInt(e):-BigInt(e)}function og(e,t){return BigInt(e)/BigInt(t)}function rg(e,t){return BigInt(e)%BigInt(t)}function ag(e,t){return BigInt(e)==BigInt(t)}function sg(e,t){return BigInt(e)!=BigInt(t)}function cg(e,t){return BigInt(e)<BigInt(t)}function lg(e,t){return BigInt(e)>BigInt(t)}function ug(e,t){return BigInt(e)<=BigInt(t)}function fg(e,t){return BigInt(e)>=BigInt(t)}function dg(e,t){return BigInt(e)&BigInt(t)}function hg(e,t){return BigInt(e)|BigInt(t)}function _g(e,t){return BigInt(e)^BigInt(t)}function pg(e,t){return BigInt(e)&&BigInt(t)}function gg(e,t){return BigInt(e)||BigInt(t)}function mg(e){return!BigInt(e)}var yg=Object.freeze({__proto__:null,fromString:Al,e:Dp,fromArray:Gp,bitLength:kp,isNegative:Wp,isZero:qp,shiftLeft:Il,shiftRight:Ll,shl:Qp,shr:Hp,isOdd:zp,naf:$p,bits:jp,toNumber:Yp,toArray:Vp,add:Kp,sub:Zp,neg:Xp,mul:Jp,square:tg,pow:eg,exp:ng,abs:ig,div:og,mod:rg,eq:ag,neq:sg,lt:cg,gt:lg,leq:ug,geq:fg,band:dg,bor:hg,bxor:_g,land:pg,lor:gg,lnot:mg});function El(e,t){return typeof e=="string"&&e.slice(0,2)=="0x"?lt(e.slice(2),16):lt(e,t)}const Ag=El;function Ig(e,t){return lt.fromArray(e,t)}function Lg(e){return lt(e).bitLength()}function Eg(e){return lt(e).isNegative()}function wg(e){return lt(e).isZero()}function wl(e,t){return lt(e).shiftLeft(t)}function Sl(e,t){return lt(e).shiftRight(t)}const Sg=wl,vg=Sl;function Cg(e){return lt(e).isOdd()}function bg(e){let t=lt(e);const n=[];for(;t.gt(lt.zero);){if(t.isOdd()){const i=2-t.mod(4).toJSNumber();n.push(i),t=t.minus(i)}else n.push(0);t=t.shiftRight(1)}return n}function Fg(e){let t=lt(e);const n=[];for(;t.gt(lt.zero);)t.isOdd()?n.push(1):n.push(0),t=t.shiftRight(1);return n}function Bg(e){if(!e.lt(lt("9007199254740992",10)))throw new Error("Number too big");return e.toJSNumber()}function Tg(e,t){return lt(e).toArray(t)}function Rg(e,t){return lt(e).add(lt(t))}function Og(e,t){return lt(e).minus(lt(t))}function Pg(e){return lt.zero.minus(lt(e))}function xg(e,t){return lt(e).times(lt(t))}function Ng(e){return lt(e).square()}function Mg(e,t){return lt(e).pow(lt(t))}function Ug(e,t){return lt(e).pow(lt(t))}function Dg(e){return lt(e).abs()}function Gg(e,t){return lt(e).divide(lt(t))}function kg(e,t){return lt(e).mod(lt(t))}function Wg(e,t){return lt(e).eq(lt(t))}function qg(e,t){return lt(e).neq(lt(t))}function Qg(e,t){return lt(e).lt(lt(t))}function Hg(e,t){return lt(e).gt(lt(t))}function zg(e,t){return lt(e).leq(lt(t))}function $g(e,t){return lt(e).geq(lt(t))}function jg(e,t){return lt(e).and(lt(t))}function Yg(e,t){return lt(e).or(lt(t))}function Vg(e,t){return lt(e).xor(lt(t))}function Kg(e,t){return!lt(e).isZero()&&!lt(t).isZero()}function Zg(e,t){return!lt(e).isZero()||!lt(t).isZero()}function Xg(e){return lt(e).isZero()}var Jg=Object.freeze({__proto__:null,fromString:El,e:Ag,fromArray:Ig,bitLength:Lg,isNegative:Eg,isZero:wg,shiftLeft:wl,shiftRight:Sl,shl:Sg,shr:vg,isOdd:Cg,naf:bg,bits:Fg,toNumber:Bg,toArray:Tg,add:Rg,sub:Og,neg:Pg,mul:xg,square:Ng,pow:Mg,exp:Ug,abs:Dg,div:Gg,mod:kg,eq:Wg,neq:qg,lt:Qg,gt:Hg,leq:zg,geq:$g,band:jg,bor:Yg,bxor:Vg,land:Kg,lor:Zg,lnot:Xg});const t0=typeof BigInt=="function";let ce={};t0?Object.assign(ce,yg):Object.assign(ce,Jg),ce.toRprLE=function(t,n,i,o){const a="0000000"+i.toString(16),s=new Uint32Array(t.buffer,n,o/4),u=((a.length-7)*4-1>>5)+1;for(let _=0;_<u;_++)s[_]=parseInt(a.substring(a.length-8*_-8,a.length-8*_),16);for(let _=u;_<s.length;_++)s[_]=0;for(let _=s.length*4;_<o;_++)t[_]=ce.toNumber(ce.band(ce.shiftRight(i,_*8),255))},ce.toRprBE=function(t,n,i,o){const a="0000000"+i.toString(16),s=new DataView(t.buffer,t.byteOffset+n,o),u=((a.length-7)*4-1>>5)+1;for(let _=0;_<u;_++)s.setUint32(o-_*4-4,parseInt(a.substring(a.length-8*_-8,a.length-8*_),16),!1);for(let _=0;_<o/4-u;_++)s[_]=0},ce.fromRprLE=function(t,n,i){i=i||t.byteLength,n=n||0;const o=new Uint32Array(t.buffer,n,i/4),a=new Array(i/4);return o.forEach((s,u)=>a[a.length-u-1]=s.toString(16).padStart(8,"0")),ce.fromString(a.join(""),16)},ce.fromRprBE=function(t,n,i){i=i||t.byteLength,n=n||0;const o=new DataView(t.buffer,t.byteOffset+n,i),a=new Array(i/4);for(let s=0;s<i/4;s++)a[s]=o.getUint32(s*4,!1).toString(16).padStart(8,"0");return ce.fromString(a.join(""),16)},ce.toString=function(t,n){return t.toString(n)},ce.toLEBuff=function(t){const n=new Uint8Array(Math.floor((ce.bitLength(t)-1)/8)+1);return ce.toRprLE(n,0,t,n.byteLength),n},ce.zero=ce.e(0),ce.one=ce.e(1);let{toRprLE:Zr,toRprBE:e0,fromRprLE:Eo,fromRprBE:n0,toString:Xr,toLEBuff:gi,zero:vl,one:zn,fromString:i0,e:de,fromArray:o0,bitLength:Jr,isNegative:Cl,isZero:r0,shiftLeft:ta,shiftRight:wo,shl:a0,shr:s0,isOdd:bl,naf:c0,bits:l0,toNumber:u0,toArray:f0,add:ea,sub:So,neg:Fl,mul:Bl,square:d0,pow:h0,exp:_0,abs:p0,div:g0,mod:na,eq:ia,neq:m0,lt:y0,gt:oa,leq:A0,geq:Tl,band:Rl,bor:I0,bxor:L0,land:E0,lor:w0,lnot:S0}=ce;var v0=Object.freeze({__proto__:null,toRprLE:Zr,toRprBE:e0,fromRprLE:Eo,fromRprBE:n0,toString:Xr,toLEBuff:gi,zero:vl,one:zn,fromString:i0,e:de,fromArray:o0,bitLength:Jr,isNegative:Cl,isZero:r0,shiftLeft:ta,shiftRight:wo,shl:a0,shr:s0,isOdd:bl,naf:c0,bits:l0,toNumber:u0,toArray:f0,add:ea,sub:So,neg:Fl,mul:Bl,square:d0,pow:h0,exp:_0,abs:p0,div:g0,mod:na,eq:ia,neq:m0,lt:y0,gt:oa,leq:A0,geq:Tl,band:Rl,bor:I0,bxor:L0,land:E0,lor:w0,lnot:S0});const C0=[];for(let e=0;e<256;e++)C0[e]=b0(e,8);function b0(e,t){let n=0,i=e;for(let o=0;o<t;o++)n<<=1,n=n|i&1,i>>=1;return n}function Fn(e,t,n,i,o){e[t]=e[t]+e[n]>>>0,e[o]=(e[o]^e[t])>>>0,e[o]=(e[o]<<16|e[o]>>>16&65535)>>>0,e[i]=e[i]+e[o]>>>0,e[n]=(e[n]^e[i])>>>0,e[n]=(e[n]<<12|e[n]>>>20&4095)>>>0,e[t]=e[t]+e[n]>>>0,e[o]=(e[o]^e[t])>>>0,e[o]=(e[o]<<8|e[o]>>>24&255)>>>0,e[i]=e[i]+e[o]>>>0,e[n]=(e[n]^e[i])>>>0,e[n]=(e[n]<<7|e[n]>>>25&127)>>>0}function F0(e){Fn(e,0,4,8,12),Fn(e,1,5,9,13),Fn(e,2,6,10,14),Fn(e,3,7,11,15),Fn(e,0,5,10,15),Fn(e,1,6,11,12),Fn(e,2,7,8,13),Fn(e,3,4,9,14)}class $i{constructor(t){t=t||[0,0,0,0,0,0,0,0],this.state=[1634760805,857760878,2036477234,1797285236,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],0,0,0,0],this.idx=16,this.buff=new Array(16)}nextU32(){return this.idx==16&&this.update(),this.buff[this.idx++]}nextU64(){return ea(Bl(this.nextU32(),4294967296),this.nextU32())}nextBool(){return(this.nextU32()&1)==1}update(){for(let t=0;t<16;t++)this.buff[t]=this.state[t];for(let t=0;t<10;t++)F0(this.buff);for(let t=0;t<16;t++)this.buff[t]=this.buff[t]+this.state[t]>>>0;this.idx=0,this.state[12]=this.state[12]+1>>>0,this.state[12]==0&&(this.state[13]=this.state[13]+1>>>0,this.state[13]==0&&(this.state[14]=this.state[14]+1>>>0,this.state[14]==0&&(this.state[15]=this.state[15]+1>>>0)))}}function B0(e){let t=new Uint8Array(e);if(typeof globalThis.crypto!="undefined")globalThis.crypto.getRandomValues(t);else for(let n=0;n<e;n++)t[n]=Math.random()*4294967296>>>0;return t}function T0(){const e=B0(32),t=new Uint32Array(e.buffer),n=[];for(let i=0;i<8;i++)n.push(t[i]);return n}let vo=null;function ra(){return vo||(vo=new $i(T0()),vo)}function aa(e){if(typeof e=="bigint"||e.eq!==void 0)return e.toString(10);if(e instanceof Uint8Array)return Eo(e,0);if(Array.isArray(e))return e.map(aa);if(typeof e=="object"){const t={};return Object.keys(e).forEach(i=>{t[i]=aa(e[i])}),t}else return e}function sa(e){if(typeof e=="string"&&/^[0-9]+$/.test(e))return BigInt(e);if(typeof e=="string"&&/^0x[0-9a-fA-F]+$/.test(e))return BigInt(e);if(Array.isArray(e))return e.map(sa);if(typeof e=="object"){if(e===null)return null;const t={};return Object.keys(e).forEach(i=>{t[i]=sa(e[i])}),t}else return e}function R0(e){let t=BigInt(0),n=e.length,i=0;const o=new DataView(e.buffer,e.byteOffset,e.byteLength);for(;n>0;)n>=4?(n-=4,t+=BigInt(o.getUint32(n))<<BigInt(i*8),i+=4):n>=2?(n-=2,t+=BigInt(o.getUint16(n))<<BigInt(i*8),i+=2):(n-=1,t+=BigInt(o.getUint8(n))<<BigInt(i*8),i+=1);return t}function O0(e,t){let n=e;const i=new Uint8Array(t),o=new DataView(i.buffer);let a=t;for(;a>0;)a-4>=0?(a-=4,o.setUint32(a,Number(n&BigInt(4294967295))),n=n>>BigInt(32)):a-2>=0?(a-=2,o.setUint16(a,Number(n&BigInt(65535))),n=n>>BigInt(16)):(a-=1,o.setUint8(a,Number(n&BigInt(255))),n=n>>BigInt(8));if(n)throw new Error("Number does not fit in this length");return i}function P0(e){let t=BigInt(0),n=0;const i=new DataView(e.buffer,e.byteOffset,e.byteLength);for(;n<e.length;)n+4<=e.length?(t+=BigInt(i.getUint32(n,!0))<<BigInt(n*8),n+=4):n+4<=e.length?(t+=BigInt(i.getUint16(n,!0))<<BigInt(n*8),n+=2):(t+=BigInt(i.getUint8(n,!0))<<BigInt(n*8),n+=1);return t}function x0(e,t){let n=e;typeof t=="undefined"&&(t=Math.floor((Jr(e)-1)/8)+1,t==0&&(t=1));const i=new Uint8Array(t),o=new DataView(i.buffer);let a=0;for(;a<t;)a+4<=t?(o.setUint32(a,Number(n&BigInt(4294967295)),!0),a+=4,n=n>>BigInt(32)):a+2<=t?(o.setUint16(Number(a,n&BigInt(65535)),!0),a+=2,n=n>>BigInt(16)):(o.setUint8(Number(a,n&BigInt(255)),!0),a+=1,n=n>>BigInt(8));if(n)throw new Error("Number does not fit in this length");return i}function ca(e,t){if(typeof t=="bigint"||t.eq!==void 0)return t.toString(10);if(t instanceof Uint8Array)return e.toString(e.e(t));if(Array.isArray(t))return t.map(ca.bind(this,e));if(typeof t=="object"){const n={};return Object.keys(t).forEach(o=>{n[o]=ca(e,t[o])}),n}else return t}function la(e,t){if(typeof t=="string"&&/^[0-9]+$/.test(t))return e.e(t);if(typeof t=="string"&&/^0x[0-9a-fA-F]+$/.test(t))return e.e(t);if(Array.isArray(t))return t.map(la.bind(this,e));if(typeof t=="object"){if(t===null)return null;const n={};return Object.keys(t).forEach(o=>{n[o]=la(e,t[o])}),n}else return t}var N0=Object.freeze({__proto__:null,stringifyBigInts:aa,unstringifyBigInts:sa,beBuff2int:R0,beInt2Buff:O0,leBuff2int:P0,leInt2Buff:x0,stringifyFElements:ca,unstringifyFElements:la});function ua(e){if(typeof e=="bigint"||e.eq!==void 0)return e.toString(10);if(Array.isArray(e))return e.map(ua);if(typeof e=="object"){const t={};return Object.keys(e).forEach(i=>{t[i]=ua(e[i])}),t}else return e}function fa(e){if(typeof e=="string"&&/^[0-9]+$/.test(e))return lt(e);if(typeof e=="string"&&/^0x[0-9a-fA-F]+$/.test(e))return lt(e);if(Array.isArray(e))return e.map(fa);if(typeof e=="object"){const t={};return Object.keys(e).forEach(i=>{t[i]=fa(e[i])}),t}else return e}function M0(e){let t=lt.zero;for(let n=0;n<e.length;n++){const i=lt(e[e.length-n-1]);t=t.add(i.shiftLeft(n*8))}return t}function U0(e,t){let n=e,i=t-1;const o=new Uint8Array(t);for(;n.gt(lt.zero)&&i>=0;){let a=Number(n.and(lt("255")));o[i]=a,i--,n=n.shiftRight(8)}if(!n.eq(lt.zero))throw new Error("Number does not fit in this length");return o}function D0(e){let t=lt.zero;for(let n=0;n<e.length;n++){const i=lt(e[n]);t=t.add(i.shiftLeft(n*8))}return t}function G0(e,t){let n=e,i=0;const o=new Uint8Array(t);for(;n.gt(lt.zero)&&i<o.length;){let a=Number(n.and(lt(255)));o[i]=a,i++,n=n.shiftRight(8)}if(!n.eq(lt.zero))throw new Error("Number does not fit in this length");return o}var k0=Object.freeze({__proto__:null,stringifyBigInts:ua,unstringifyBigInts:fa,beBuff2int:M0,beInt2Buff:U0,leBuff2int:D0,leInt2Buff:G0});let an={};typeof BigInt=="function"?Object.assign(an,N0):Object.assign(an,k0);const ji=[];for(let e=0;e<256;e++)ji[e]=W0(e,8);function W0(e,t){let n=0,i=e;for(let o=0;o<t;o++)n<<=1,n=n|i&1,i>>=1;return n}an.bitReverse=function(t,n){return(ji[t>>>24]|ji[t>>>16&255]<<8|ji[t>>>8&255]<<16|ji[t&255]<<24)>>>32-n},an.log2=function(t){return((t&4294901760)!=0?(t&=4294901760,16):0)|((t&4278255360)!=0?(t&=4278255360,8):0)|((t&4042322160)!=0?(t&=4042322160,4):0)|((t&3435973836)!=0?(t&=3435973836,2):0)|(t&2863311530)!=0},an.buffReverseBits=function(t,n){const i=t.byteLength/n,o=an.log2(i);if(i!=1<<o)throw new Error("Invalid number of pointers");for(let a=0;a<i;a++){const s=an.bitReverse(a,o);if(a>s){const u=t.slice(a*n,(a+1)*n);t.set(t.slice(s*n,(s+1)*n),a*n),t.set(u,s*n)}}},an.array2buffer=function(e,t){const n=new Uint8Array(t*e.length);for(let i=0;i<e.length;i++)n.set(e[i],i*t);return n},an.buffer2array=function(e,t){const n=e.byteLength/t,i=new Array(n);for(let o=0;o<n;o++)i[o]=e.slice(o*t,o*t+t);return i};let{bitReverse:q0,log2:We,buffReverseBits:Ol,stringifyBigInts:Q0,unstringifyBigInts:H0,beBuff2int:z0,beInt2Buff:$0,leBuff2int:j0,leInt2Buff:Pl,array2buffer:da,buffer2array:Co,stringifyFElements:Y0,unstringifyFElements:V0}=an;var K0=Object.freeze({__proto__:null,bitReverse:q0,log2:We,buffReverseBits:Ol,stringifyBigInts:Q0,unstringifyBigInts:H0,beBuff2int:z0,beInt2Buff:$0,leBuff2int:j0,leInt2Buff:Pl,array2buffer:da,buffer2array:Co,stringifyFElements:Y0,unstringifyFElements:V0});const ye=1<<30;class Vt{constructor(t){this.buffers=[],this.byteLength=t;for(let n=0;n<t;n+=ye){const i=Math.min(t-n,ye);this.buffers.push(new Uint8Array(i))}}slice(t,n){n===void 0&&(n=this.byteLength),t===void 0&&(t=0);const i=n-t,o=Math.floor(t/ye),a=Math.floor((t+i-1)/ye);if(o==a||i==0)return this.buffers[o].slice(t%ye,t%ye+i);let s,u=o,_=t%ye,d=i;for(;d>0;){const l=_+d>ye?ye-_:d,m=new Uint8Array(this.buffers[u].buffer,this.buffers[u].byteOffset+_,l);if(l==i)return m.slice();s||(i<=ye?s=new Uint8Array(i):s=new Vt(i)),s.set(m,i-d),d=d-l,u++,_=0}return s}set(t,n){n===void 0&&(n=0);const i=t.byteLength;if(i==0)return;const o=Math.floor(n/ye),a=Math.floor((n+i-1)/ye);if(o==a)return t instanceof Vt&&t.buffers.length==1?this.buffers[o].set(t.buffers[0],n%ye):this.buffers[o].set(t,n%ye);let s=o,u=n%ye,_=i;for(;_>0;){const d=u+_>ye?ye-u:_,l=t.slice(i-_,i-_+d);new Uint8Array(this.buffers[s].buffer,this.buffers[s].byteOffset+u,d).set(l),_=_-d,s++,u=0}}}function Bn(e,t,n,i){return async function(a){const s=Math.floor(a.byteLength/n);if(s*n!==a.byteLength)throw new Error("Invalid buffer size");const u=Math.floor(s/e.concurrency),_=[];for(let A=0;A<e.concurrency;A++){let p;if(A<e.concurrency-1?p=u:p=s-A*u,p==0)continue;const R=a.slice(A*u*n,A*u*n+p*n),P=[{cmd:"ALLOCSET",var:0,buff:R},{cmd:"ALLOC",var:1,len:i*p},{cmd:"CALL",fnName:t,params:[{var:0},{val:p},{var:1}]},{cmd:"GET",out:0,var:1,len:i*p}];_.push(e.queueAction(P))}const d=await Promise.all(_);let l;a instanceof Vt?l=new Vt(s*i):l=new Uint8Array(s*i);let m=0;for(let A=0;A<d.length;A++)l.set(d[A][0],m),m+=d[A][0].byteLength;return l}}class xl{constructor(t,n,i,o){if(this.tm=t,this.prefix=n,this.p=o,this.n8=i,this.type="F1",this.m=1,this.half=wo(o,zn),this.bitLength=Jr(o),this.mask=So(ta(zn,this.bitLength),zn),this.pOp1=t.alloc(i),this.pOp2=t.alloc(i),this.pOp3=t.alloc(i),this.tm.instance.exports[n+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,this.n8),this.tm.instance.exports[n+"_one"](this.pOp1),this.one=this.tm.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.n64=Math.floor(i/8),this.n32=Math.floor(i/4),this.n64*8!=this.n8)throw new Error("n8 must be a multiple of 8");this.half=wo(this.p,zn),this.nqr=this.two;let a=this.exp(this.nqr,this.half);for(;!this.eq(a,this.negone);)this.nqr=this.add(this.nqr,this.one),a=this.exp(this.nqr,this.half);this.shift=this.mul(this.nqr,this.nqr),this.shiftInv=this.inv(this.shift),this.s=0;let s=So(this.p,zn);for(;!bl(s);)this.s=this.s+1,s=wo(s,zn);this.w=[],this.w[this.s]=this.exp(this.nqr,s);for(let u=this.s-1;u>=0;u--)this.w[u]=this.square(this.w[u+1]);if(!this.eq(this.w[0],this.one))throw new Error("Error calculating roots of unity");this.batchToMontgomery=Bn(t,n+"_batchToMontgomery",this.n8,this.n8),this.batchFromMontgomery=Bn(t,n+"_batchFromMontgomery",this.n8,this.n8)}op2(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,n){return this.tm.setBuff(this.pOp1,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,n){return this.op2("_add",t,n)}eq(t,n){return this.op2Bool("_eq",t,n)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,n){return this.op2("_sub",t,n)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,n){return this.op2("_mul",t,n)}div(t,n){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,n){return n instanceof Uint8Array||(n=gi(de(n))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,n.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}isNegative(t){return this.op1Bool("_isNegative",t)}e(t,n){if(t instanceof Uint8Array)return t;let i=de(t,n);Cl(i)?(i=Fl(i),oa(i,this.p)&&(i=na(i,this.p)),i=So(this.p,i)):oa(i,this.p)&&(i=na(i,this.p));const o=Pl(i,this.n8);return this.toMontgomery(o)}toString(t,n){const i=this.fromMontgomery(t),o=Eo(i,0);return Xr(o,n)}fromRng(t){let n;const i=new Uint8Array(this.n8);do{n=vl;for(let o=0;o<this.n64;o++)n=ea(n,ta(t.nextU64(),64*o));n=Rl(n,this.mask)}while(Tl(n,this.p));return Zr(i,0,n,this.n8),i}random(){return this.fromRng(ra())}toObject(t){const n=this.fromMontgomery(t);return Eo(n,0)}fromObject(t){const n=new Uint8Array(this.n8);return Zr(n,0,t,this.n8),this.toMontgomery(n)}toRprLE(t,n,i){t.set(this.fromMontgomery(i),n)}toRprBE(t,n,i){const o=this.fromMontgomery(i);for(let a=0;a<this.n8/2;a++){const s=o[a];o[a]=o[this.n8-1-a],o[this.n8-1-a]=s}t.set(o,n)}fromRprLE(t,n){n=n||0;const i=t.slice(n,n+this.n8);return this.toMontgomery(i)}async batchInverse(t){let n=!1;const i=this.n8,o=this.n8;Array.isArray(t)?(t=da(t,i),n=!0):t=t.slice(0,t.byteLength);const a=Math.floor(t.byteLength/i);if(a*i!==t.byteLength)throw new Error("Invalid buffer size");const s=Math.floor(a/this.tm.concurrency),u=[];for(let m=0;m<this.tm.concurrency;m++){let A;if(m<this.tm.concurrency-1?A=s:A=a-m*s,A==0)continue;const p=t.slice(m*s*i,m*s*i+A*i),R=[{cmd:"ALLOCSET",var:0,buff:p},{cmd:"ALLOC",var:1,len:o*A},{cmd:"CALL",fnName:this.prefix+"_batchInverse",params:[{var:0},{val:i},{val:A},{var:1},{val:o}]},{cmd:"GET",out:0,var:1,len:o*A}];u.push(this.tm.queueAction(R))}const _=await Promise.all(u);let d;t instanceof Vt?d=new Vt(a*o):d=new Uint8Array(a*o);let l=0;for(let m=0;m<_.length;m++)d.set(_[m][0],l),l+=_[m][0].byteLength;return n?Co(d,o):d}}class Nl{constructor(t,n,i){this.tm=t,this.prefix=n,this.F=i,this.type="F2",this.m=i.m*2,this.n8=this.F.n8*2,this.n32=this.F.n32*2,this.n64=this.F.n64*2,this.pOp1=t.alloc(i.n8*2),this.pOp2=t.alloc(i.n8*2),this.pOp3=t.alloc(i.n8*2),this.tm.instance.exports[n+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[n+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,n){return this.tm.setBuff(this.pOp1,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,n){return this.op2("_add",t,n)}eq(t,n){return this.op2Bool("_eq",t,n)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,n){return this.op2("_sub",t,n)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,n){return this.op2("_mul",t,n)}mul1(t,n){return this.op2("_mul1",t,n)}div(t,n){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,n){return n instanceof Uint8Array||(n=gi(de(n))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,n.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}e(t,n){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&t.length==2){const i=this.F.e(t[0],n),o=this.F.e(t[1],n),a=new Uint8Array(this.F.n8*2);return a.set(i),a.set(o,this.F.n8*2),a}else throw new Error("invalid F2")}toString(t,n){const i=this.F.toString(t.slice(0,this.F.n8),n),o=this.F.toString(t.slice(this.F.n8),n);return`[${i}, ${o}]`}fromRng(t){const n=this.F.fromRng(t),i=this.F.fromRng(t),o=new Uint8Array(this.F.n8*2);return o.set(n),o.set(i,this.F.n8),o}random(){return this.fromRng(ra())}toObject(t){const n=this.F.toObject(t.slice(0,this.F.n8)),i=this.F.toObject(t.slice(this.F.n8,this.F.n8*2));return[n,i]}fromObject(t){const n=new Uint8Array(this.F.n8*2),i=this.F.fromObject(t[0]),o=this.F.fromObject(t[1]);return n.set(i),n.set(o,this.F.n8),n}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8)}}class Z0{constructor(t,n,i){this.tm=t,this.prefix=n,this.F=i,this.type="F3",this.m=i.m*3,this.n8=this.F.n8*3,this.n32=this.F.n32*3,this.n64=this.F.n64*3,this.pOp1=t.alloc(i.n8*3),this.pOp2=t.alloc(i.n8*3),this.pOp3=t.alloc(i.n8*3),this.tm.instance.exports[n+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[n+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,n){return this.tm.setBuff(this.pOp1,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}eq(t,n){return this.op2Bool("_eq",t,n)}isZero(t){return this.op1Bool("_isZero",t)}add(t,n){return this.op2("_add",t,n)}sub(t,n){return this.op2("_sub",t,n)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,n){return this.op2("_mul",t,n)}div(t,n){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,n){return n instanceof Uint8Array||(n=gi(de(n))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,n.byteLength,this.pOp3),this.getBuff(this.pOp3,this.n8)}e(t,n){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&t.length==3){const i=this.F.e(t[0],n),o=this.F.e(t[1],n),a=this.F.e(t[2],n),s=new Uint8Array(this.F.n8*3);return s.set(i),s.set(o,this.F.n8),s.set(a,this.F.n8*2),s}else throw new Error("invalid F3")}toString(t,n){const i=this.F.toString(t.slice(0,this.F.n8),n),o=this.F.toString(t.slice(this.F.n8,this.F.n8*2),n),a=this.F.toString(t.slice(this.F.n8*2),n);return`[${i}, ${o}, ${a}]`}fromRng(t){const n=this.F.fromRng(t),i=this.F.fromRng(t),o=this.F.fromRng(t),a=new Uint8Array(this.F.n8*3);return a.set(n),a.set(i,this.F.n8),a.set(o,this.F.n8*2),a}random(){return this.fromRng(ra())}toObject(t){const n=this.F.toObject(t.slice(0,this.F.n8)),i=this.F.toObject(t.slice(this.F.n8,this.F.n8*2)),o=this.F.toObject(t.slice(this.F.n8*2,this.F.n8*3));return[n,i,o]}fromObject(t){const n=new Uint8Array(this.F.n8*3),i=this.F.fromObject(t[0]),o=this.F.fromObject(t[1]),a=this.F.fromObject(t[2]);return n.set(i),n.set(o,this.F.n8),n.set(a,this.F.n8*2),n}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8,this.F.n8*2)}c3(t){return t.slice(this.F.n8*2)}}class Ml{constructor(t,n,i,o,a,s){this.tm=t,this.prefix=n,this.F=i,this.pOp1=t.alloc(i.n8*3),this.pOp2=t.alloc(i.n8*3),this.pOp3=t.alloc(i.n8*3),this.tm.instance.exports[n+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,i.n8*3),this.tm.instance.exports[n+"_zeroAffine"](this.pOp1),this.zeroAffine=this.tm.getBuff(this.pOp1,i.n8*2),this.one=this.tm.getBuff(o,i.n8*3),this.g=this.one,this.oneAffine=this.tm.getBuff(o,i.n8*2),this.gAffine=this.oneAffine,this.b=this.tm.getBuff(a,i.n8),s&&(this.cofactor=gi(s)),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.batchLEMtoC=Bn(t,n+"_batchLEMtoC",i.n8*2,i.n8),this.batchLEMtoU=Bn(t,n+"_batchLEMtoU",i.n8*2,i.n8*2),this.batchCtoLEM=Bn(t,n+"_batchCtoLEM",i.n8,i.n8*2),this.batchUtoLEM=Bn(t,n+"_batchUtoLEM",i.n8*2,i.n8*2),this.batchToJacobian=Bn(t,n+"_batchToJacobian",i.n8*2,i.n8*3),this.batchToAffine=Bn(t,n+"_batchToAffine",i.n8*3,i.n8*2)}op2(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}op2bool(t,n,i){return this.tm.setBuff(this.pOp1,n),this.tm.setBuff(this.pOp2,i),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3)}op1(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}op1Affine(t,n){return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*2)}op1Bool(t,n){return this.tm.setBuff(this.pOp1,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,n){if(t.byteLength==this.F.n8*3){if(n.byteLength==this.F.n8*3)return this.op2("_add",t,n);if(n.byteLength==this.F.n8*2)return this.op2("_addMixed",t,n);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(n.byteLength==this.F.n8*3)return this.op2("_addMixed",n,t);if(n.byteLength==this.F.n8*2)return this.op2("_addAffine",t,n);throw new Error("invalid point size")}else throw new Error("invalid point size")}sub(t,n){if(t.byteLength==this.F.n8*3){if(n.byteLength==this.F.n8*3)return this.op2("_sub",t,n);if(n.byteLength==this.F.n8*2)return this.op2("_subMixed",t,n);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(n.byteLength==this.F.n8*3)return this.op2("_subMixed",n,t);if(n.byteLength==this.F.n8*2)return this.op2("_subAffine",t,n);throw new Error("invalid point size")}else throw new Error("invalid point size")}neg(t){if(t.byteLength==this.F.n8*3)return this.op1("_neg",t);if(t.byteLength==this.F.n8*2)return this.op1Affine("_negAffine",t);throw new Error("invalid point size")}double(t){if(t.byteLength==this.F.n8*3)return this.op1("_double",t);if(t.byteLength==this.F.n8*2)return this.op1("_doubleAffine",t);throw new Error("invalid point size")}isZero(t){if(t.byteLength==this.F.n8*3)return this.op1Bool("_isZero",t);if(t.byteLength==this.F.n8*2)return this.op1Bool("_isZeroAffine",t);throw new Error("invalid point size")}timesScalar(t,n){n instanceof Uint8Array||(n=gi(de(n)));let i;if(t.byteLength==this.F.n8*3)i=this.prefix+"_timesScalar";else if(t.byteLength==this.F.n8*2)i=this.prefix+"_timesScalarAffine";else throw new Error("invalid point size");return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[i](this.pOp1,this.pOp2,n.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}timesFr(t,n){let i;if(t.byteLength==this.F.n8*3)i=this.prefix+"_timesFr";else if(t.byteLength==this.F.n8*2)i=this.prefix+"_timesFrAffine";else throw new Error("invalid point size");return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[i](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}eq(t,n){if(t.byteLength==this.F.n8*3){if(n.byteLength==this.F.n8*3)return this.op2bool("_eq",t,n);if(n.byteLength==this.F.n8*2)return this.op2bool("_eqMixed",t,n);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(n.byteLength==this.F.n8*3)return this.op2bool("_eqMixed",n,t);if(n.byteLength==this.F.n8*2)return this.op2bool("_eqAffine",t,n);throw new Error("invalid point size")}else throw new Error("invalid point size")}toAffine(t){if(t.byteLength==this.F.n8*3)return this.op1Affine("_toAffine",t);if(t.byteLength==this.F.n8*2)return t;throw new Error("invalid point size")}toJacobian(t){if(t.byteLength==this.F.n8*3)return t;if(t.byteLength==this.F.n8*2)return this.op1("_toJacobian",t);throw new Error("invalid point size")}toRprUncompressed(t,n,i){if(this.tm.setBuff(this.pOp1,i),i.byteLength==this.F.n8*3)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(i.byteLength!=this.F.n8*2)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoU"](this.pOp1,this.pOp1);const o=this.tm.getBuff(this.pOp1,this.F.n8*2);t.set(o,n)}fromRprUncompressed(t,n){const i=t.slice(n,n+this.F.n8*2);return this.tm.setBuff(this.pOp1,i),this.tm.instance.exports[this.prefix+"_UtoLEM"](this.pOp1,this.pOp1),this.tm.getBuff(this.pOp1,this.F.n8*2)}toRprCompressed(t,n,i){if(this.tm.setBuff(this.pOp1,i),i.byteLength==this.F.n8*3)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(i.byteLength!=this.F.n8*2)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoC"](this.pOp1,this.pOp1);const o=this.tm.getBuff(this.pOp1,this.F.n8);t.set(o,n)}fromRprCompressed(t,n){const i=t.slice(n,n+this.F.n8);return this.tm.setBuff(this.pOp1,i),this.tm.instance.exports[this.prefix+"_CtoLEM"](this.pOp1,this.pOp2),this.tm.getBuff(this.pOp2,this.F.n8*2)}toUncompressed(t){const n=new Uint8Array(this.F.n8*2);return this.toRprUncompressed(n,0,t),n}toRprLEM(t,n,i){if(i.byteLength==this.F.n8*2){t.set(i,n);return}else if(i.byteLength==this.F.n8*3){this.tm.setBuff(this.pOp1,i),this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);const o=this.tm.getBuff(this.pOp1,this.F.n8*2);t.set(o,n)}else throw new Error("invalid point size")}fromRprLEM(t,n){return n=n||0,t.slice(n,n+this.F.n8*2)}toString(t,n){if(t.byteLength==this.F.n8*3){const i=this.F.toString(t.slice(0,this.F.n8),n),o=this.F.toString(t.slice(this.F.n8,this.F.n8*2),n),a=this.F.toString(t.slice(this.F.n8*2),n);return`[ ${i}, ${o}, ${a} ]`}else if(t.byteLength==this.F.n8*2){const i=this.F.toString(t.slice(0,this.F.n8),n),o=this.F.toString(t.slice(this.F.n8),n);return`[ ${i}, ${o} ]`}else throw new Error("invalid point size")}isValid(t){if(this.isZero(t))return!0;const n=this.F,i=this.toAffine(t),o=i.slice(0,this.F.n8),a=i.slice(this.F.n8,this.F.n8*2),s=n.add(n.mul(n.square(o),o),this.b),u=n.square(a);return n.eq(s,u)}fromRng(t){const n=this.F;let i=[],o,a;do i[0]=n.fromRng(t),o=t.nextBool(),a=n.add(n.mul(n.square(i[0]),i[0]),this.b);while(!n.isSquare(a));i[1]=n.sqrt(a);const s=n.isNegative(i[1]);o^s&&(i[1]=n.neg(i[1]));let u=new Uint8Array(this.F.n8*2);return u.set(i[0]),u.set(i[1],this.F.n8),this.cofactor&&(u=this.timesScalar(u,this.cofactor)),u}toObject(t){if(this.isZero(t))return[this.F.toObject(this.F.zero),this.F.toObject(this.F.one),this.F.toObject(this.F.zero)];const n=this.F.toObject(t.slice(0,this.F.n8)),i=this.F.toObject(t.slice(this.F.n8,this.F.n8*2));let o;return t.byteLength==this.F.n8*3?o=this.F.toObject(t.slice(this.F.n8*2,this.F.n8*3)):o=this.F.toObject(this.F.one),[n,i,o]}fromObject(t){const n=this.F.fromObject(t[0]),i=this.F.fromObject(t[1]);let o;if(t.length==3?o=this.F.fromObject(t[2]):o=this.F.one,this.F.isZero(o,this.F.one))return this.zeroAffine;if(this.F.eq(o,this.F.one)){const a=new Uint8Array(this.F.n8*2);return a.set(n),a.set(i,this.F.n8),a}else{const a=new Uint8Array(this.F.n8*3);return a.set(n),a.set(i,this.F.n8),a.set(o,this.F.n8*2),a}}e(t){return t instanceof Uint8Array?t:this.fromObject(t)}x(t){return this.toAffine(t).slice(0,this.F.n8)}y(t){return this.toAffine(t).slice(this.F.n8)}}function Ul(e){const t=32767;let n,i;e&&(e.onmessage=function(l){let m;if(l.data?m=l.data:m=l,m[0].cmd=="INIT")o(m[0]).then(function(){e.postMessage(m.result)});else if(m[0].cmd=="TERMINATE")e.close();else{const A=d(m);e.postMessage(A)}});async function o(l){const m=new Uint8Array(l.code),A=await WebAssembly.compile(m);i=new WebAssembly.Memory({initial:l.init,maximum:t}),n=await WebAssembly.instantiate(A,{env:{memory:i}})}function a(l){const m=new Uint32Array(i.buffer,0,1);for(;m[0]&3;)m[0]++;const A=m[0];if(m[0]+=l,m[0]+l>i.buffer.byteLength){const p=i.buffer.byteLength/65536;let R=Math.floor((m[0]+l)/65536)+1;R>t&&(R=t),i.grow(R-p)}return A}function s(l){const m=a(l.byteLength);return _(m,l),m}function u(l,m){const A=new Uint8Array(i.buffer);return new Uint8Array(A.buffer,A.byteOffset+l,m)}function _(l,m){new Uint8Array(i.buffer).set(new Uint8Array(m),l)}function d(l){if(l[0].cmd=="INIT")return o(l[0]);const m={vars:[],out:[]},p=new Uint32Array(i.buffer,0,1)[0];for(let P=0;P<l.length;P++)switch(l[P].cmd){case"ALLOCSET":m.vars[l[P].var]=s(l[P].buff);break;case"ALLOC":m.vars[l[P].var]=a(l[P].len);break;case"SET":_(m.vars[l[P].var],l[P].buff);break;case"CALL":{const C=[];for(let G=0;G<l[P].params.length;G++){const O=l[P].params[G];typeof O.var!="undefined"?C.push(m.vars[O.var]+(O.offset||0)):typeof O.val!="undefined"&&C.push(O.val)}n.exports[l[P].fnName](...C);break}case"GET":m.out[l[P].out]=u(m.vars[l[P].var],l[P].len).slice();break;default:throw new Error("Invalid cmd")}const R=new Uint32Array(i.buffer,0,1);return R[0]=p,m.out}return d}const ha=25;class Dl{constructor(){this.promise=new Promise((t,n)=>{this.reject=n,this.resolve=t})}}function X0(e){return new Promise(t=>setTimeout(t,e))}function J0(e){return globalThis.btoa(e)}const t1=J0("("+Ul.toString()+")(self)"),e1="data:application/javascript;base64,"+t1;async function n1(e,t){t=!0;const n=new i1;n.memory=new WebAssembly.Memory({initial:ha}),n.u8=new Uint8Array(n.memory.buffer),n.u32=new Uint32Array(n.memory.buffer);const i=await WebAssembly.compile(e.code);if(n.instance=await WebAssembly.instantiate(i,{env:{memory:n.memory}}),n.singleThread=t,n.initalPFree=n.u32[0],n.pq=e.pq,n.pr=e.pr,n.pG1gen=e.pG1gen,n.pG1zero=e.pG1zero,n.pG2gen=e.pG2gen,n.pG2zero=e.pG2zero,n.pOneT=e.pOneT,t)n.code=e.code,n.taskManager=Ul(),await n.taskManager([{cmd:"INIT",init:ha,code:n.code.slice()}]),n.concurrency=1;else{n.workers=[],n.pendingDeferreds=[],n.working=[];let a;typeof navigator=="object"&&navigator.hardwareConcurrency?a=navigator.hardwareConcurrency:a=Io.cpus().length,a==0&&(a=2),a>64&&(a=64),n.concurrency=a;for(let u=0;u<a;u++)n.workers[u]=new vt(e1),n.workers[u].addEventListener("message",o(u)),n.working[u]=!1;const s=[];for(let u=0;u<n.workers.length;u++){const _=e.code.slice();s.push(n.postAction(u,[{cmd:"INIT",init:ha,code:_}],[_.buffer]))}await Promise.all(s)}return n;function o(a){return function(s){let u;s&&s.data?u=s.data:u=s,n.working[a]=!1,n.pendingDeferreds[a].resolve(u),n.processWorks()}}}class i1{constructor(){this.actionQueue=[],this.oldPFree=0}startSyncOp(){if(this.oldPFree!=0)throw new Error("Sync operation in progress");this.oldPFree=this.u32[0]}endSyncOp(){if(this.oldPFree==0)throw new Error("No sync operation in progress");this.u32[0]=this.oldPFree,this.oldPFree=0}postAction(t,n,i,o){if(this.working[t])throw new Error("Posting a job t a working worker");return this.working[t]=!0,this.pendingDeferreds[t]=o||new Dl,this.workers[t].postMessage(n,i),this.pendingDeferreds[t].promise}processWorks(){for(let t=0;t<this.workers.length&&this.actionQueue.length>0;t++)if(this.working[t]==!1){const n=this.actionQueue.shift();this.postAction(t,n.data,n.transfers,n.deferred)}}queueAction(t,n){const i=new Dl;if(this.singleThread){const o=this.taskManager(t);i.resolve(o)}else this.actionQueue.push({data:t,transfers:n,deferred:i}),this.processWorks();return i.promise}resetMemory(){this.u32[0]=this.initalPFree}allocBuff(t){const n=this.alloc(t.byteLength);return this.setBuff(n,t),n}getBuff(t,n){return this.u8.slice(t,t+n)}setBuff(t,n){this.u8.set(new Uint8Array(n),t)}alloc(t){for(;this.u32[0]&3;)this.u32[0]++;const n=this.u32[0];return this.u32[0]+=t,n}async terminate(){for(let t=0;t<this.workers.length;t++)this.workers[t].postMessage([{cmd:"TERMINATE"}]);await X0(200)}}function _a(e,t){const n=e[t],i=e.Fr,o=e.tm;e[t].batchApplyKey=async function(a,s,u,_,d){_=_||"affine",d=d||"affine";let l,m,A,p,R;if(t=="G1")_=="jacobian"?(A=n.F.n8*3,l="g1m_batchApplyKey"):(A=n.F.n8*2,l="g1m_batchApplyKeyMixed"),p=n.F.n8*3,d=="jacobian"?R=n.F.n8*3:(m="g1m_batchToAffine",R=n.F.n8*2);else if(t=="G2")_=="jacobian"?(A=n.F.n8*3,l="g2m_batchApplyKey"):(A=n.F.n8*2,l="g2m_batchApplyKeyMixed"),p=n.F.n8*3,d=="jacobian"?R=n.F.n8*3:(m="g2m_batchToAffine",R=n.F.n8*2);else if(t=="Fr")l="frm_batchApplyKey",A=n.n8,p=n.n8,R=n.n8;else throw new Error("Invalid group: "+t);const P=Math.floor(a.byteLength/A),C=Math.floor(P/o.concurrency),G=[];u=i.e(u);let O=i.e(s);for(let B=0;B<o.concurrency;B++){let g;if(B<o.concurrency-1?g=C:g=P-B*C,g==0)continue;const I=[];I.push({cmd:"ALLOCSET",var:0,buff:a.slice(B*C*A,B*C*A+g*A)}),I.push({cmd:"ALLOCSET",var:1,buff:O}),I.push({cmd:"ALLOCSET",var:2,buff:u}),I.push({cmd:"ALLOC",var:3,len:g*Math.max(p,R)}),I.push({cmd:"CALL",fnName:l,params:[{var:0},{val:g},{var:1},{var:2},{var:3}]}),m&&I.push({cmd:"CALL",fnName:m,params:[{var:3},{val:g},{var:3}]}),I.push({cmd:"GET",out:0,var:3,len:g*R}),G.push(o.queueAction(I)),O=i.mul(O,i.exp(u,g))}const Z=await Promise.all(G);let $;a instanceof Vt?$=new Vt(P*R):$=new Uint8Array(P*R);let Y=0;for(let B=0;B<Z.length;B++)$.set(Z[B][0],Y),Y+=Z[B][0].byteLength;return $}}function o1(e){const t=e.tm;e.pairing=function(i,o){t.startSyncOp();const a=t.allocBuff(e.G1.toJacobian(i)),s=t.allocBuff(e.G2.toJacobian(o)),u=t.alloc(e.Gt.n8);t.instance.exports[e.name+"_pairing"](a,s,u);const _=t.getBuff(u,e.Gt.n8);return t.endSyncOp(),_},e.pairingEq=async function(){let i,o;arguments.length%2==1?(i=arguments[arguments.length-1],o=(arguments.length-1)/2):(i=e.Gt.one,o=arguments.length/2);const a=[];for(let l=0;l<o;l++){const m=[],A=e.G1.toJacobian(arguments[l*2]);m.push({cmd:"ALLOCSET",var:0,buff:A}),m.push({cmd:"ALLOC",var:1,len:e.prePSize});const p=e.G2.toJacobian(arguments[l*2+1]);m.push({cmd:"ALLOCSET",var:2,buff:p}),m.push({cmd:"ALLOC",var:3,len:e.preQSize}),m.push({cmd:"ALLOC",var:4,len:e.Gt.n8}),m.push({cmd:"CALL",fnName:e.name+"_prepareG1",params:[{var:0},{var:1}]}),m.push({cmd:"CALL",fnName:e.name+"_prepareG2",params:[{var:2},{var:3}]}),m.push({cmd:"CALL",fnName:e.name+"_millerLoop",params:[{var:1},{var:3},{var:4}]}),m.push({cmd:"GET",out:0,var:4,len:e.Gt.n8}),a.push(t.queueAction(m))}const s=await Promise.all(a);t.startSyncOp();const u=t.alloc(e.Gt.n8);t.instance.exports.ftm_one(u);for(let l=0;l<s.length;l++){const m=t.allocBuff(s[l][0]);t.instance.exports.ftm_mul(u,m,u)}t.instance.exports[e.name+"_finalExponentiation"](u,u);const _=t.allocBuff(i),d=!!t.instance.exports.ftm_eq(u,_);return t.endSyncOp(),d},e.prepareG1=function(n){this.tm.startSyncOp();const i=this.tm.allocBuff(n),o=this.tm.alloc(this.prePSize);this.tm.instance.exports[this.name+"_prepareG1"](i,o);const a=this.tm.getBuff(o,this.prePSize);return this.tm.endSyncOp(),a},e.prepareG2=function(n){this.tm.startSyncOp();const i=this.tm.allocBuff(n),o=this.tm.alloc(this.preQSize);this.tm.instance.exports[this.name+"_prepareG2"](i,o);const a=this.tm.getBuff(o,this.preQSize);return this.tm.endSyncOp(),a},e.millerLoop=function(n,i){this.tm.startSyncOp();const o=this.tm.allocBuff(n),a=this.tm.allocBuff(i),s=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_millerLoop"](o,a,s);const u=this.tm.getBuff(s,this.Gt.n8);return this.tm.endSyncOp(),u},e.finalExponentiation=function(n){this.tm.startSyncOp();const i=this.tm.allocBuff(n),o=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_finalExponentiation"](i,o);const a=this.tm.getBuff(o,this.Gt.n8);return this.tm.endSyncOp(),a}}const Gl=[1,1,1,1,2,3,4,5,6,7,7,8,9,10,11,12,13,13,14,15,16,16,17,17,17,17,17,17,17,17,17,17];function kl(e,t){const n=e[t],i=n.tm;async function o(s,u,_,d,l){if(!(s instanceof Uint8Array))throw d&&d.error(`${l} _multiExpChunk buffBases is not Uint8Array`),new Error(`${l} _multiExpChunk buffBases is not Uint8Array`);if(!(u instanceof Uint8Array))throw d&&d.error(`${l} _multiExpChunk buffScalars is not Uint8Array`),new Error(`${l} _multiExpChunk buffScalars is not Uint8Array`);_=_||"affine";let m,A;if(t=="G1")_=="affine"?(A="g1m_multiexpAffine_chunk",m=n.F.n8*2):(A="g1m_multiexp_chunk",m=n.F.n8*3);else if(t=="G2")_=="affine"?(A="g2m_multiexpAffine_chunk",m=n.F.n8*2):(A="g2m_multiexp_chunk",m=n.F.n8*3);else throw new Error("Invalid group");const p=Math.floor(s.byteLength/m);if(p==0)return n.zero;const R=Math.floor(u.byteLength/p);if(R*p!=u.byteLength)throw new Error("Scalar size does not match");const P=Gl[We(p)],C=Math.floor((R*8-1)/P)+1,G=[];for(let $=0;$<C;$++){const Y=[{cmd:"ALLOCSET",var:0,buff:s},{cmd:"ALLOCSET",var:1,buff:u},{cmd:"ALLOC",var:2,len:n.F.n8*3},{cmd:"CALL",fnName:A,params:[{var:0},{var:1},{val:R},{val:p},{val:$*P},{val:Math.min(R*8-$*P,P)},{var:2}]},{cmd:"GET",out:0,var:2,len:n.F.n8*3}];G.push(n.tm.queueAction(Y))}const O=await Promise.all(G);let Z=n.zero;for(let $=O.length-1;$>=0;$--){if(!n.isZero(Z))for(let Y=0;Y<P;Y++)Z=n.double(Z);Z=n.add(Z,O[$][0])}return Z}async function a(s,u,_,d,l){const m=1<<22,A=1<<10;let p;if(t=="G1")_=="affine"?p=n.F.n8*2:p=n.F.n8*3;else if(t=="G2")_=="affine"?p=n.F.n8*2:p=n.F.n8*3;else throw new Error("Invalid group");const R=Math.floor(s.byteLength/p),P=Math.floor(u.byteLength/R);if(P*R!=u.byteLength)throw new Error("Scalar size does not match");const C=Gl[We(R)],G=Math.floor((P*8-1)/C)+1;let O;O=Math.floor(R/(i.concurrency/G)),O>m&&(O=m),O<A&&(O=A);const Z=[];for(let B=0;B<R;B+=O){d&&d.debug(`Multiexp start: ${l}: ${B}/${R}`);const g=Math.min(R-B,O),I=s.slice(B*p,(B+g)*p),D=u.slice(B*P,(B+g)*P);Z.push(o(I,D,_,d,l).then(z=>(d&&d.debug(`Multiexp end: ${l}: ${B}/${R}`),z)))}const $=await Promise.all(Z);let Y=n.zero;for(let B=$.length-1;B>=0;B--)Y=n.add(Y,$[B]);return Y}n.multiExp=async function(u,_,d,l){return await a(u,_,"jacobian",d,l)},n.multiExpAffine=async function(u,_,d,l){return await a(u,_,"affine",d,l)}}function pa(e,t){const n=e[t],i=e.Fr,o=n.tm;async function a(d,l,m,A,p,R){m=m||"affine",A=A||"affine";const P=14;let C,G,O,Z,$,Y,B,g;t=="G1"?(m=="affine"?(C=n.F.n8*2,Z="g1m_batchToJacobian"):C=n.F.n8*3,G=n.F.n8*3,l&&(g="g1m_fftFinal"),B="g1m_fftJoin",Y="g1m_fftMix",A=="affine"?(O=n.F.n8*2,$="g1m_batchToAffine"):O=n.F.n8*3):t=="G2"?(m=="affine"?(C=n.F.n8*2,Z="g2m_batchToJacobian"):C=n.F.n8*3,G=n.F.n8*3,l&&(g="g2m_fftFinal"),B="g2m_fftJoin",Y="g2m_fftMix",A=="affine"?(O=n.F.n8*2,$="g2m_batchToAffine"):O=n.F.n8*3):t=="Fr"&&(C=n.n8,G=n.n8,O=n.n8,l&&(g="frm_fftFinal"),Y="frm_fftMix",B="frm_fftJoin");let I=!1;Array.isArray(d)?(d=da(d,C),I=!0):d=d.slice(0,d.byteLength);const D=d.byteLength/C,z=We(D);if(1<<z!=D)throw new Error("fft must be multiple of 2");if(z==i.s+1){let et;return l?et=await u(d,m,A,p,R):et=await s(d,m,A,p,R),I?Co(et,O):et}let U;l&&(U=i.inv(i.e(D)));let N;Ol(d,C);let S,W=Math.min(1<<P,D),J=D/W;for(;J<o.concurrency&&W>=16;)J*=2,W/=2;const it=We(W),ot=[];for(let et=0;et<J;et++){p&&p.debug(`${R}: fft ${z} mix start: ${et}/${J}`);const at=[];at.push({cmd:"ALLOC",var:0,len:G*W});const rt=d.slice(W*et*C,W*(et+1)*C);at.push({cmd:"SET",var:0,buff:rt}),Z&&at.push({cmd:"CALL",fnName:Z,params:[{var:0},{val:W},{var:0}]});for(let gt=1;gt<=it;gt++)at.push({cmd:"CALL",fnName:Y,params:[{var:0},{val:W},{val:gt}]});it==z?(g&&(at.push({cmd:"ALLOCSET",var:1,buff:U}),at.push({cmd:"CALL",fnName:g,params:[{var:0},{val:W},{var:1}]})),$&&at.push({cmd:"CALL",fnName:$,params:[{var:0},{val:W},{var:0}]}),at.push({cmd:"GET",out:0,var:0,len:W*O})):at.push({cmd:"GET",out:0,var:0,len:G*W}),ot.push(o.queueAction(at).then(gt=>(p&&p.debug(`${R}: fft ${z} mix end: ${et}/${J}`),gt)))}S=await Promise.all(ot);for(let et=0;et<J;et++)S[et]=S[et][0];for(let et=it+1;et<=z;et++){p&&p.debug(`${R}: fft  ${z}  join: ${et}/${z}`);const at=1<<z-et,rt=J/at,gt=[];for(let yt=0;yt<at;yt++)for(let wt=0;wt<rt/2;wt++){const L=i.exp(i.w[et],wt*W),f=i.w[et],F=yt*rt+wt,h=yt*rt+wt+rt/2,H=[];H.push({cmd:"ALLOCSET",var:0,buff:S[F]}),H.push({cmd:"ALLOCSET",var:1,buff:S[h]}),H.push({cmd:"ALLOCSET",var:2,buff:L}),H.push({cmd:"ALLOCSET",var:3,buff:f}),H.push({cmd:"CALL",fnName:B,params:[{var:0},{var:1},{val:W},{var:2},{var:3}]}),et==z?(g&&(H.push({cmd:"ALLOCSET",var:4,buff:U}),H.push({cmd:"CALL",fnName:g,params:[{var:0},{val:W},{var:4}]}),H.push({cmd:"CALL",fnName:g,params:[{var:1},{val:W},{var:4}]})),$&&(H.push({cmd:"CALL",fnName:$,params:[{var:0},{val:W},{var:0}]}),H.push({cmd:"CALL",fnName:$,params:[{var:1},{val:W},{var:1}]})),H.push({cmd:"GET",out:0,var:0,len:W*O}),H.push({cmd:"GET",out:1,var:1,len:W*O})):(H.push({cmd:"GET",out:0,var:0,len:W*G}),H.push({cmd:"GET",out:1,var:1,len:W*G})),gt.push(o.queueAction(H).then(M=>(p&&p.debug(`${R}: fft ${z} join  ${et}/${z}  ${yt+1}/${at} ${wt}/${rt/2}`),M)))}const Rt=await Promise.all(gt);for(let yt=0;yt<at;yt++)for(let wt=0;wt<rt/2;wt++){const L=yt*rt+wt,f=yt*rt+wt+rt/2,F=Rt.shift();S[L]=F[0],S[f]=F[1]}}if(d instanceof Vt?N=new Vt(D*O):N=new Uint8Array(D*O),l){N.set(S[0].slice((W-1)*O));let et=O;for(let at=J-1;at>0;at--)N.set(S[at],et),et+=W*O,delete S[at];N.set(S[0].slice(0,(W-1)*O),et),delete S[0]}else for(let et=0;et<J;et++)N.set(S[et],W*O*et),delete S[et];return I?Co(N,O):N}async function s(d,l,m,A,p){let R,P;R=d.slice(0,d.byteLength/2),P=d.slice(d.byteLength/2,d.byteLength);const C=[];[R,P]=await _(R,P,"fftJoinExt",i.one,i.shift,l,"jacobian",A,p),C.push(a(R,!1,"jacobian",m,A,p)),C.push(a(P,!1,"jacobian",m,A,p));const G=await Promise.all(C);let O;return G[0].byteLength>1<<28?O=new Vt(G[0].byteLength*2):O=new Uint8Array(G[0].byteLength*2),O.set(G[0]),O.set(G[1],G[0].byteLength),O}async function u(d,l,m,A,p){let R,P;R=d.slice(0,d.byteLength/2),P=d.slice(d.byteLength/2,d.byteLength);const C=[];C.push(a(R,!0,l,"jacobian",A,p)),C.push(a(P,!0,l,"jacobian",A,p)),[R,P]=await Promise.all(C);const G=await _(R,P,"fftJoinExtInv",i.one,i.shiftInv,"jacobian",m,A,p);let O;return G[0].byteLength>1<<28?O=new Vt(G[0].byteLength*2):O=new Uint8Array(G[0].byteLength*2),O.set(G[0]),O.set(G[1],G[0].byteLength),O}async function _(d,l,m,A,p,R,P,C,G){const O=1<<16,Z=1<<4;let $,Y,B,g,I,D;if(t=="G1")R=="affine"?(I=n.F.n8*2,Y="g1m_batchToJacobian"):I=n.F.n8*3,D=n.F.n8*3,$="g1m_"+m,P=="affine"?(B="g1m_batchToAffine",g=n.F.n8*2):g=n.F.n8*3;else if(t=="G2")R=="affine"?(I=n.F.n8*2,Y="g2m_batchToJacobian"):I=n.F.n8*3,$="g2m_"+m,D=n.F.n8*3,P=="affine"?(B="g2m_batchToAffine",g=n.F.n8*2):g=n.F.n8*3;else if(t=="Fr")I=i.n8,g=i.n8,D=i.n8,$="frm_"+m;else throw new Error("Invalid group");if(d.byteLength!=l.byteLength)throw new Error("Invalid buffer size");const z=Math.floor(d.byteLength/I);if(z!=1<<We(z))throw new Error("Invalid number of points");let U=Math.floor(z/o.concurrency);U<Z&&(U=Z),U>O&&(U=O);const N=[];for(let ot=0;ot<z;ot+=U){C&&C.debug(`${G}: fftJoinExt Start: ${ot}/${z}`);const et=Math.min(z-ot,U),at=i.mul(A,i.exp(p,ot)),rt=[],gt=d.slice(ot*I,(ot+et)*I),Rt=l.slice(ot*I,(ot+et)*I);rt.push({cmd:"ALLOC",var:0,len:D*et}),rt.push({cmd:"SET",var:0,buff:gt}),rt.push({cmd:"ALLOC",var:1,len:D*et}),rt.push({cmd:"SET",var:1,buff:Rt}),rt.push({cmd:"ALLOCSET",var:2,buff:at}),rt.push({cmd:"ALLOCSET",var:3,buff:p}),Y&&(rt.push({cmd:"CALL",fnName:Y,params:[{var:0},{val:et},{var:0}]}),rt.push({cmd:"CALL",fnName:Y,params:[{var:1},{val:et},{var:1}]})),rt.push({cmd:"CALL",fnName:$,params:[{var:0},{var:1},{val:et},{var:2},{var:3},{val:i.s}]}),B&&(rt.push({cmd:"CALL",fnName:B,params:[{var:0},{val:et},{var:0}]}),rt.push({cmd:"CALL",fnName:B,params:[{var:1},{val:et},{var:1}]})),rt.push({cmd:"GET",out:0,var:0,len:et*g}),rt.push({cmd:"GET",out:1,var:1,len:et*g}),N.push(o.queueAction(rt).then(yt=>(C&&C.debug(`${G}: fftJoinExt End: ${ot}/${z}`),yt)))}const S=await Promise.all(N);let W,J;z*g>1<<28?(W=new Vt(z*g),J=new Vt(z*g)):(W=new Uint8Array(z*g),J=new Uint8Array(z*g));let it=0;for(let ot=0;ot<S.length;ot++)W.set(S[ot][0],it),J.set(S[ot][1],it),it+=S[ot][0].byteLength;return[W,J]}n.fft=async function(d,l,m,A,p){return await a(d,!1,l,m,A,p)},n.ifft=async function(d,l,m,A,p){return await a(d,!0,l,m,A,p)},n.lagrangeEvaluations=async function(d,l,m,A,p){l=l||"affine",m=m||"affine";let R;if(t=="G1")l=="affine"?R=n.F.n8*2:R=n.F.n8*3;else if(t=="G2")l=="affine"?R=n.F.n8*2:R=n.F.n8*3;else if(t=="Fr")R=i.n8;else throw new Error("Invalid group");const P=d.byteLength/R,C=We(P);if(2**C*R!=d.byteLength)throw A&&A.error("lagrangeEvaluations iinvalid input size"),new Error("lagrangeEvaluations invalid Input size");if(C<=i.s)return await n.ifft(d,l,m,A,p);if(C>i.s+1)throw A&&A.error("lagrangeEvaluations input too big"),new Error("lagrangeEvaluations input too big");let G=d.slice(0,d.byteLength/2),O=d.slice(d.byteLength/2,d.byteLength);const Z=i.exp(i.shift,P/2),$=i.inv(i.sub(i.one,Z));[G,O]=await _(G,O,"prepareLagrangeEvaluation",$,i.shiftInv,l,"jacobian",A,p+" prep");const Y=[];Y.push(a(G,!0,"jacobian",m,A,p+" t0")),Y.push(a(O,!0,"jacobian",m,A,p+" t1")),[G,O]=await Promise.all(Y);let B;return G.byteLength>1<<28?B=new Vt(G.byteLength*2):B=new Uint8Array(G.byteLength*2),B.set(G),B.set(O,G.byteLength),B},n.fftMix=async function(l){const m=n.F.n8*3;let A,p;if(t=="G1")A="g1m_fftMix",p="g1m_fftJoin";else if(t=="G2")A="g2m_fftMix",p="g2m_fftJoin";else if(t=="Fr")A="frm_fftMix",p="frm_fftJoin";else throw new Error("Invalid group");const R=Math.floor(l.byteLength/m),P=We(R);let C=1<<We(o.concurrency);R<=C*2&&(C=1);const G=R/C,O=We(G),Z=[];for(let I=0;I<C;I++){const D=[],z=l.slice(I*G*m,(I+1)*G*m);D.push({cmd:"ALLOCSET",var:0,buff:z});for(let U=1;U<=O;U++)D.push({cmd:"CALL",fnName:A,params:[{var:0},{val:G},{val:U}]});D.push({cmd:"GET",out:0,var:0,len:G*m}),Z.push(o.queueAction(D))}const $=await Promise.all(Z),Y=[];for(let I=0;I<$.length;I++)Y[I]=$[I][0];for(let I=O+1;I<=P;I++){const D=1<<P-I,z=C/D,U=[];for(let S=0;S<D;S++)for(let W=0;W<z/2;W++){const J=i.exp(i.w[I],W*G),it=i.w[I],ot=S*z+W,et=S*z+W+z/2,at=[];at.push({cmd:"ALLOCSET",var:0,buff:Y[ot]}),at.push({cmd:"ALLOCSET",var:1,buff:Y[et]}),at.push({cmd:"ALLOCSET",var:2,buff:J}),at.push({cmd:"ALLOCSET",var:3,buff:it}),at.push({cmd:"CALL",fnName:p,params:[{var:0},{var:1},{val:G},{var:2},{var:3}]}),at.push({cmd:"GET",out:0,var:0,len:G*m}),at.push({cmd:"GET",out:1,var:1,len:G*m}),U.push(o.queueAction(at))}const N=await Promise.all(U);for(let S=0;S<D;S++)for(let W=0;W<z/2;W++){const J=S*z+W,it=S*z+W+z/2,ot=N.shift();Y[J]=ot[0],Y[it]=ot[1]}}let B;l instanceof Vt?B=new Vt(R*m):B=new Uint8Array(R*m);let g=0;for(let I=0;I<C;I++)B.set(Y[I],g),g+=Y[I].byteLength;return B},n.fftJoin=async function(l,m,A,p){const R=n.F.n8*3;let P;if(t=="G1")P="g1m_fftJoin";else if(t=="G2")P="g2m_fftJoin";else if(t=="Fr")P="frm_fftJoin";else throw new Error("Invalid group");if(l.byteLength!=m.byteLength)throw new Error("Invalid buffer size");const C=Math.floor(l.byteLength/R);if(C!=1<<We(C))throw new Error("Invalid number of points");let G=1<<We(o.concurrency);C<=G*2&&(G=1);const O=C/G,Z=[];for(let I=0;I<G;I++){const D=[],z=i.mul(A,i.exp(p,I*O)),U=l.slice(I*O*R,(I+1)*O*R),N=m.slice(I*O*R,(I+1)*O*R);D.push({cmd:"ALLOCSET",var:0,buff:U}),D.push({cmd:"ALLOCSET",var:1,buff:N}),D.push({cmd:"ALLOCSET",var:2,buff:z}),D.push({cmd:"ALLOCSET",var:3,buff:p}),D.push({cmd:"CALL",fnName:P,params:[{var:0},{var:1},{val:O},{var:2},{var:3}]}),D.push({cmd:"GET",out:0,var:0,len:O*R}),D.push({cmd:"GET",out:1,var:1,len:O*R}),Z.push(o.queueAction(D))}const $=await Promise.all(Z);let Y,B;l instanceof Vt?(Y=new Vt(C*R),B=new Vt(C*R)):(Y=new Uint8Array(C*R),B=new Uint8Array(C*R));let g=0;for(let I=0;I<$.length;I++)Y.set($[I][0],g),B.set($[I][1],g),g+=$[I][0].byteLength;return[Y,B]},n.fftFinal=async function(l,m){const A=n.F.n8*3,p=n.F.n8*2;let R,P;if(t=="G1")R="g1m_fftFinal",P="g1m_batchToAffine";else if(t=="G2")R="g2m_fftFinal",P="g2m_batchToAffine";else throw new Error("Invalid group");const C=Math.floor(l.byteLength/A);if(C!=1<<We(C))throw new Error("Invalid number of points");const G=Math.floor(C/o.concurrency),O=[];for(let B=0;B<o.concurrency;B++){let g;if(B<o.concurrency-1?g=G:g=C-B*G,g==0)continue;const I=[],D=l.slice(B*G*A,(B*G+g)*A);I.push({cmd:"ALLOCSET",var:0,buff:D}),I.push({cmd:"ALLOCSET",var:1,buff:m}),I.push({cmd:"CALL",fnName:R,params:[{var:0},{val:g},{var:1}]}),I.push({cmd:"CALL",fnName:P,params:[{var:0},{val:g},{var:0}]}),I.push({cmd:"GET",out:0,var:0,len:g*p}),O.push(o.queueAction(I))}const Z=await Promise.all(O);let $;l instanceof Vt?$=new Vt(C*p):$=new Uint8Array(C*p);let Y=0;for(let B=Z.length-1;B>=0;B--)$.set(Z[B][0],Y),Y+=Z[B][0].byteLength;return $}}async function Wl(e){const t=await n1(e.wasm,e.singleThread),n={};return n.q=de(e.wasm.q),n.r=de(e.wasm.r),n.name=e.name,n.tm=t,n.prePSize=e.wasm.prePSize,n.preQSize=e.wasm.preQSize,n.Fr=new xl(t,"frm",e.n8r,e.r),n.F1=new xl(t,"f1m",e.n8q,e.q),n.F2=new Nl(t,"f2m",n.F1),n.G1=new Ml(t,"g1m",n.F1,e.wasm.pG1gen,e.wasm.pG1b,e.cofactorG1),n.G2=new Ml(t,"g2m",n.F2,e.wasm.pG2gen,e.wasm.pG2b,e.cofactorG2),n.F6=new Z0(t,"f6m",n.F2),n.F12=new Nl(t,"ftm",n.F6),n.Gt=n.F12,_a(n,"G1"),_a(n,"G2"),_a(n,"Fr"),kl(n,"G1"),kl(n,"G2"),pa(n,"G1"),pa(n,"G2"),pa(n,"Fr"),o1(n),n.array2buffer=function(i,o){const a=new Uint8Array(o*i.length);for(let s=0;s<i.length;s++)a.set(i[s],s*o);return a},n.buffer2array=function(i,o){const a=i.byteLength/o,s=new Array(a);for(let u=0;u<a;u++)s[u]=i.slice(u*o,u*o+o);return s},n}globalThis.curve_bn128=null;async function ql(e,t){const n=new cl;n.setMemory(25),Z_(n),t&&t(n);const i={};if(i.code=n.build(),i.pq=n.modules.f1m.pq,i.pr=n.modules.frm.pq,i.pG1gen=n.modules.bn128.pG1gen,i.pG1zero=n.modules.bn128.pG1zero,i.pG1b=n.modules.bn128.pG1b,i.pG2gen=n.modules.bn128.pG2gen,i.pG2zero=n.modules.bn128.pG2zero,i.pG2b=n.modules.bn128.pG2b,i.pOneT=n.modules.bn128.pOneT,i.prePSize=n.modules.bn128.prePSize,i.preQSize=n.modules.bn128.preQSize,i.n8q=32,i.n8r=32,i.q=n.modules.bn128.q,i.r=n.modules.bn128.r,!e&&globalThis.curve_bn128)return globalThis.curve_bn128;const o={name:"bn128",wasm:i,q:de("21888242871839275222246405745257275088696311157297823662689037894645226208583"),r:de("21888242871839275222246405745257275088548364400416034343698204186575808495617"),n8q:32,n8r:32,cofactorG2:de("30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d",16),singleThread:!!e},a=await Wl(o);return a.terminate=async function(){o.singleThread||(globalThis.curve_bn128=null,await this.tm.terminate())},e||(globalThis.curve_bn128=a),a}globalThis.curve_bls12381=null;async function Ql(e,t){const n=new cl;n.setMemory(25),X_(n),t&&t(n);const i={};if(i.code=n.build(),i.pq=n.modules.f1m.pq,i.pr=n.modules.frm.pq,i.pG1gen=n.modules.bls12381.pG1gen,i.pG1zero=n.modules.bls12381.pG1zero,i.pG1b=n.modules.bls12381.pG1b,i.pG2gen=n.modules.bls12381.pG2gen,i.pG2zero=n.modules.bls12381.pG2zero,i.pG2b=n.modules.bls12381.pG2b,i.pOneT=n.modules.bls12381.pOneT,i.prePSize=n.modules.bls12381.prePSize,i.preQSize=n.modules.bls12381.preQSize,i.n8q=48,i.n8r=32,i.q=n.modules.bn128.q,i.r=n.modules.bn128.r,!e&&globalThis.curve_bls12381)return globalThis.curve_bls12381;const o={name:"bls12381",wasm:i,q:de("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),r:de("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),n8q:48,n8r:32,cofactorG1:de("0x396c8c005555e1568c00aaab0000aaab",16),cofactorG2:de("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5",16),singleThread:!!e},a=await Wl(o);return a.terminate=async function(){o.singleThread||(globalThis.curve_bls12381=null,await this.tm.terminate())},e||(globalThis.curve_bls12381=a),a}const r1=de("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),a1=de("21888242871839275222246405745257275088548364400416034343698204186575808495617");de("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),de("21888242871839275222246405745257275088696311157297823662689037894645226208583");async function s1(e,t,n){let i;if(ia(e,a1))i=await ql(t,n);else if(ia(e,r1))i=await Ql(t,n);else throw new Error(`Curve not supported: ${Xr(e)}`);return i}const ee=v0,c1=K0;async function bo(e,t,n){const i={};return await xe(e,t,1),i.n8=await e.readULE32(),i.prime=await pi(e,i.n8),i.curve=await s1(i.prime,n),i.nVars=await e.readULE32(),i.nOutputs=await e.readULE32(),i.nPubInputs=await e.readULE32(),i.nPrvInputs=await e.readULE32(),i.nLabels=await e.readULE64(),i.nConstraints=await e.readULE32(),await Ne(e),i}var l1=`//
// Copyright 2017 Christian Reitwiessner
// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
//
// 2019 OKIMS
//      ported to solidity 0.6
//      fixed linter warnings
//      added requiere error messages
//
//
// SPDX-License-Identifier: GPL-3.0
pragma solidity ^0.6.11;
library Pairing {
    struct G1Point {
        uint X;
        uint Y;
    }
    // Encoding of field elements is: X[0] * z + X[1]
    struct G2Point {
        uint[2] X;
        uint[2] Y;
    }
    /// @return the generator of G1
    function P1() internal pure returns (G1Point memory) {
        return G1Point(1, 2);
    }
    /// @return the generator of G2
    function P2() internal pure returns (G2Point memory) {
        // Original code point
        return G2Point(
            [11559732032986387107991004021392285783925812861821192530917403151452391805634,
             10857046999023057135944570762232829481370756359578518086990519993285655852781],
            [4082367875863433681332203403145435568316851327593401208105741076214120093531,
             8495653923123431417604973247489272438418190587263600148770280649306958101930]
        );

/*
        // Changed by Jordi point
        return G2Point(
            [10857046999023057135944570762232829481370756359578518086990519993285655852781,
             11559732032986387107991004021392285783925812861821192530917403151452391805634],
            [8495653923123431417604973247489272438418190587263600148770280649306958101930,
             4082367875863433681332203403145435568316851327593401208105741076214120093531]
        );
*/
    }
    /// @return r the negation of p, i.e. p.addition(p.negate()) should be zero.
    function negate(G1Point memory p) internal pure returns (G1Point memory r) {
        // The prime q in the base field F_q for G1
        uint q = 21888242871839275222246405745257275088696311157297823662689037894645226208583;
        if (p.X == 0 && p.Y == 0)
            return G1Point(0, 0);
        return G1Point(p.X, q - (p.Y % q));
    }
    /// @return r the sum of two points of G1
    function addition(G1Point memory p1, G1Point memory p2) internal view returns (G1Point memory r) {
        uint[4] memory input;
        input[0] = p1.X;
        input[1] = p1.Y;
        input[2] = p2.X;
        input[3] = p2.Y;
        bool success;
        // solium-disable-next-line security/no-inline-assembly
        assembly {
            success := staticcall(sub(gas(), 2000), 6, input, 0xc0, r, 0x60)
            // Use "invalid" to make gas estimation work
            switch success case 0 { invalid() }
        }
        require(success,"pairing-add-failed");
    }
    /// @return r the product of a point on G1 and a scalar, i.e.
    /// p == p.scalar_mul(1) and p.addition(p) == p.scalar_mul(2) for all points p.
    function scalar_mul(G1Point memory p, uint s) internal view returns (G1Point memory r) {
        uint[3] memory input;
        input[0] = p.X;
        input[1] = p.Y;
        input[2] = s;
        bool success;
        // solium-disable-next-line security/no-inline-assembly
        assembly {
            success := staticcall(sub(gas(), 2000), 7, input, 0x80, r, 0x60)
            // Use "invalid" to make gas estimation work
            switch success case 0 { invalid() }
        }
        require (success,"pairing-mul-failed");
    }
    /// @return the result of computing the pairing check
    /// e(p1[0], p2[0]) *  .... * e(p1[n], p2[n]) == 1
    /// For example pairing([P1(), P1().negate()], [P2(), P2()]) should
    /// return true.
    function pairing(G1Point[] memory p1, G2Point[] memory p2) internal view returns (bool) {
        require(p1.length == p2.length,"pairing-lengths-failed");
        uint elements = p1.length;
        uint inputSize = elements * 6;
        uint[] memory input = new uint[](inputSize);
        for (uint i = 0; i < elements; i++)
        {
            input[i * 6 + 0] = p1[i].X;
            input[i * 6 + 1] = p1[i].Y;
            input[i * 6 + 2] = p2[i].X[0];
            input[i * 6 + 3] = p2[i].X[1];
            input[i * 6 + 4] = p2[i].Y[0];
            input[i * 6 + 5] = p2[i].Y[1];
        }
        uint[1] memory out;
        bool success;
        // solium-disable-next-line security/no-inline-assembly
        assembly {
            success := staticcall(sub(gas(), 2000), 8, add(input, 0x20), mul(inputSize, 0x20), out, 0x20)
            // Use "invalid" to make gas estimation work
            switch success case 0 { invalid() }
        }
        require(success,"pairing-opcode-failed");
        return out[0] != 0;
    }
    /// Convenience method for a pairing check for two pairs.
    function pairingProd2(G1Point memory a1, G2Point memory a2, G1Point memory b1, G2Point memory b2) internal view returns (bool) {
        G1Point[] memory p1 = new G1Point[](2);
        G2Point[] memory p2 = new G2Point[](2);
        p1[0] = a1;
        p1[1] = b1;
        p2[0] = a2;
        p2[1] = b2;
        return pairing(p1, p2);
    }
    /// Convenience method for a pairing check for three pairs.
    function pairingProd3(
            G1Point memory a1, G2Point memory a2,
            G1Point memory b1, G2Point memory b2,
            G1Point memory c1, G2Point memory c2
    ) internal view returns (bool) {
        G1Point[] memory p1 = new G1Point[](3);
        G2Point[] memory p2 = new G2Point[](3);
        p1[0] = a1;
        p1[1] = b1;
        p1[2] = c1;
        p2[0] = a2;
        p2[1] = b2;
        p2[2] = c2;
        return pairing(p1, p2);
    }
    /// Convenience method for a pairing check for four pairs.
    function pairingProd4(
            G1Point memory a1, G2Point memory a2,
            G1Point memory b1, G2Point memory b2,
            G1Point memory c1, G2Point memory c2,
            G1Point memory d1, G2Point memory d2
    ) internal view returns (bool) {
        G1Point[] memory p1 = new G1Point[](4);
        G2Point[] memory p2 = new G2Point[](4);
        p1[0] = a1;
        p1[1] = b1;
        p1[2] = c1;
        p1[3] = d1;
        p2[0] = a2;
        p2[1] = b2;
        p2[2] = c2;
        p2[3] = d2;
        return pairing(p1, p2);
    }
}
contract Verifier {
    using Pairing for *;
    struct VerifyingKey {
        Pairing.G1Point alfa1;
        Pairing.G2Point beta2;
        Pairing.G2Point gamma2;
        Pairing.G2Point delta2;
        Pairing.G1Point[] IC;
    }
    struct Proof {
        Pairing.G1Point A;
        Pairing.G2Point B;
        Pairing.G1Point C;
    }
    function verifyingKey() internal pure returns (VerifyingKey memory vk) {
        vk.alfa1 = Pairing.G1Point(
            <%=vk_alpha_1[0]%>,
            <%=vk_alpha_1[1]%>
        );

        vk.beta2 = Pairing.G2Point(
            [<%=vk_beta_2[0][1]%>,
             <%=vk_beta_2[0][0]%>],
            [<%=vk_beta_2[1][1]%>,
             <%=vk_beta_2[1][0]%>]
        );
        vk.gamma2 = Pairing.G2Point(
            [<%=vk_gamma_2[0][1]%>,
             <%=vk_gamma_2[0][0]%>],
            [<%=vk_gamma_2[1][1]%>,
             <%=vk_gamma_2[1][0]%>]
        );
        vk.delta2 = Pairing.G2Point(
            [<%=vk_delta_2[0][1]%>,
             <%=vk_delta_2[0][0]%>],
            [<%=vk_delta_2[1][1]%>,
             <%=vk_delta_2[1][0]%>]
        );
        vk.IC = new Pairing.G1Point[](<%=IC.length%>);
        <% for (let i=0; i<IC.length; i++) { %>
        vk.IC[<%=i%>] = Pairing.G1Point( 
            <%=IC[i][0]%>,
            <%=IC[i][1]%>
        );                                      
        <% } %>
    }
    function verify(uint[] memory input, Proof memory proof) internal view returns (uint) {
        uint256 snark_scalar_field = 21888242871839275222246405745257275088548364400416034343698204186575808495617;
        VerifyingKey memory vk = verifyingKey();
        require(input.length + 1 == vk.IC.length,"verifier-bad-input");
        // Compute the linear combination vk_x
        Pairing.G1Point memory vk_x = Pairing.G1Point(0, 0);
        for (uint i = 0; i < input.length; i++) {
            require(input[i] < snark_scalar_field,"verifier-gte-snark-scalar-field");
            vk_x = Pairing.addition(vk_x, Pairing.scalar_mul(vk.IC[i + 1], input[i]));
        }
        vk_x = Pairing.addition(vk_x, vk.IC[0]);
        if (!Pairing.pairingProd4(
            Pairing.negate(proof.A), proof.B,
            vk.alfa1, vk.beta2,
            vk_x, vk.gamma2,
            proof.C, vk.delta2
        )) return 1;
        return 0;
    }
    /// @return r  bool true if proof is valid
    function verifyProof(
            uint[2] memory a,
            uint[2][2] memory b,
            uint[2] memory c,
            uint[<%=IC.length-1%>] memory input
        ) public view returns (bool r) {
        Proof memory proof;
        proof.A = Pairing.G1Point(a[0], a[1]);
        proof.B = Pairing.G2Point([b[0][0], b[0][1]], [b[1][0], b[1][1]]);
        proof.C = Pairing.G1Point(c[0], c[1]);
        uint[] memory inputValues = new uint[](input.length);
        for(uint i = 0; i < input.length; i++){
            inputValues[i] = input[i];
        }
        if (verify(inputValues, proof) == 0) {
            return true;
        } else {
            return false;
        }
    }
}
`,u1=`// SPDX-License-Identifier: GPL-3.0
/*
    Copyright 2021 0KIMS association.

    This file is generated with [snarkJS](https://github.com/iden3/snarkjs).

    snarkJS is a free software: you can redistribute it and/or modify it
    under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    snarkJS is distributed in the hope that it will be useful, but WITHOUT
    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public
    License for more details.

    You should have received a copy of the GNU General Public License
    along with snarkJS. If not, see <https://www.gnu.org/licenses/>.
*/


pragma solidity >=0.7.0 <0.9.0;

contract PlonkVerifier {
    
    uint<%=2**Math.ceil(Math.log2(power))%> constant n =   <%=2**power%>;
    uint16 constant nPublic =  <%=nPublic%>;
    uint16 constant nLagrange = <%=Math.max(nPublic, 1)%>;
    
    uint256 constant Qmx = <%=Qm[0]%>;
    uint256 constant Qmy = <%=Qm[0] == "0" ? "0" : Qm[1]%>;
    uint256 constant Qlx = <%=Ql[0]%>;
    uint256 constant Qly = <%=Ql[0] == "0" ? "0" : Ql[1]%>;
    uint256 constant Qrx = <%=Qr[0]%>;
    uint256 constant Qry = <%=Qr[0] == "0" ? "0" : Qr[1]%>;
    uint256 constant Qox = <%=Qo[0]%>;
    uint256 constant Qoy = <%=Qo[0] == "0" ? "0" : Qo[1]%>;
    uint256 constant Qcx = <%=Qc[0]%>;
    uint256 constant Qcy = <%=Qc[0] == "0" ? "0" : Qc[1]%>;
    uint256 constant S1x = <%=S1[0]%>;
    uint256 constant S1y = <%=S1[0] == "0" ? "0" : S1[1]%>;
    uint256 constant S2x = <%=S2[0]%>;
    uint256 constant S2y = <%=S2[0] == "0" ? "0" : S2[1]%>;
    uint256 constant S3x = <%=S3[0]%>;
    uint256 constant S3y = <%=S3[0] == "0" ? "0" : S3[1]%>;
    uint256 constant k1 = 2;
    uint256 constant k2 = 3;
    uint256 constant X2x1 = <%=X_2[0][0]%>;
    uint256 constant X2x2 = <%=X_2[0][1]%>;
    uint256 constant X2y1 = <%=X_2[1][0]%>;
    uint256 constant X2y2 = <%=X_2[1][1]%>;
    
    uint256 constant q = 21888242871839275222246405745257275088548364400416034343698204186575808495617;
    uint256 constant qf = 21888242871839275222246405745257275088696311157297823662689037894645226208583;
    uint256 constant w1 = <%=w%>;    
    
    uint256 constant G1x = 1;
    uint256 constant G1y = 2;
    uint256 constant G2x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
    uint256 constant G2x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
    uint256 constant G2y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
    uint256 constant G2y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;
    uint16 constant pA = 32;
    uint16 constant pB = 96;
    uint16 constant pC = 160;
    uint16 constant pZ = 224;
    uint16 constant pT1 = 288;
    uint16 constant pT2 = 352;
    uint16 constant pT3 = 416;
    uint16 constant pWxi = 480;
    uint16 constant pWxiw = 544;
    uint16 constant pEval_a = 608;
    uint16 constant pEval_b = 640;
    uint16 constant pEval_c = 672;
    uint16 constant pEval_s1 = 704;
    uint16 constant pEval_s2 = 736;
    uint16 constant pEval_zw = 768;
    uint16 constant pEval_r = 800;
    
    uint16 constant pAlpha = 0;
    uint16 constant pBeta = 32;
    uint16 constant pGamma = 64;
    uint16 constant pXi = 96;
    uint16 constant pXin = 128;
    uint16 constant pBetaXi = 160;
    uint16 constant pV1 = 192;
    uint16 constant pV2 = 224;
    uint16 constant pV3 = 256;
    uint16 constant pV4 = 288;
    uint16 constant pV5 = 320;
    uint16 constant pV6 = 352;
    uint16 constant pU = 384;
    uint16 constant pPl = 416;
    uint16 constant pEval_t = 448;
    uint16 constant pA1 = 480;
    uint16 constant pB1 = 544;
    uint16 constant pZh = 608;
    uint16 constant pZhInv = 640;
    <% for (let i=1; i<=Math.max(nPublic, 1); i++) { %>
    uint16 constant pEval_l<%=i%> = <%=640+i*32%>;
    <% } %>
    
    
    uint16 constant lastMem = <%=672+32*Math.max(nPublic,1)%>;


    function verifyProof(bytes memory proof, uint[] memory pubSignals) public view returns (bool) {
        assembly {
            /////////
            // Computes the inverse using the extended euclidean algorithm
            /////////
            function inverse(a, q) -> inv {
                let t := 0     
                let newt := 1
                let r := q     
                let newr := a
                let quotient
                let aux
                
                for { } newr { } {
                    quotient := sdiv(r, newr)
                    aux := sub(t, mul(quotient, newt))
                    t:= newt
                    newt:= aux
                    
                    aux := sub(r,mul(quotient, newr))
                    r := newr
                    newr := aux
                }
                
                if gt(r, 1) { revert(0,0) }
                if slt(t, 0) { t:= add(t, q) }

                inv := t
            }
            
            ///////
            // Computes the inverse of an array of values
            // See https://vitalik.ca/general/2018/07/21/starks_part_3.html in section where explain fields operations
            //////
            function inverseArray(pVals, n) {
    
                let pAux := mload(0x40)     // Point to the next free position
                let pIn := pVals
                let lastPIn := add(pVals, mul(n, 32))  // Read n elemnts
                let acc := mload(pIn)       // Read the first element
                pIn := add(pIn, 32)         // Point to the second element
                let inv
    
                
                for { } lt(pIn, lastPIn) { 
                    pAux := add(pAux, 32) 
                    pIn := add(pIn, 32)
                } 
                {
                    mstore(pAux, acc)
                    acc := mulmod(acc, mload(pIn), q)
                }
                acc := inverse(acc, q)
                
                // At this point pAux pint to the next free position we substract 1 to point to the last used
                pAux := sub(pAux, 32)
                // pIn points to the n+1 element, we substract to point to n
                pIn := sub(pIn, 32)
                lastPIn := pVals  // We don't process the first element 
                for { } gt(pIn, lastPIn) { 
                    pAux := sub(pAux, 32) 
                    pIn := sub(pIn, 32)
                } 
                {
                    inv := mulmod(acc, mload(pAux), q)
                    acc := mulmod(acc, mload(pIn), q)
                    mstore(pIn, inv)
                }
                // pIn points to first element, we just set it.
                mstore(pIn, acc)
            }
            
            function checkField(v) {
                if iszero(lt(v, q)) {
                    mstore(0, 0)
                    return(0,0x20)
                }
            }
            
            function checkInput(pProof) {
                if iszero(eq(mload(pProof), 800 )) {
                    mstore(0, 0)
                    return(0,0x20)
                }
                checkField(mload(add(pProof, pEval_a)))
                checkField(mload(add(pProof, pEval_b)))
                checkField(mload(add(pProof, pEval_c)))
                checkField(mload(add(pProof, pEval_s1)))
                checkField(mload(add(pProof, pEval_s2)))
                checkField(mload(add(pProof, pEval_zw)))
                checkField(mload(add(pProof, pEval_r)))

                // Points are checked in the point operations precompiled smart contracts
            }
            
            function calculateChallanges(pProof, pMem) {
            
                let a
                let b
                
                b := mod(keccak256(add(pProof, pA), 192), q) 
                mstore( add(pMem, pBeta), b)
                mstore( add(pMem, pGamma), mod(keccak256(add(pMem, pBeta), 32), q))
                mstore( add(pMem, pAlpha), mod(keccak256(add(pProof, pZ), 64), q))
                
                a := mod(keccak256(add(pProof, pT1), 192), q)
                mstore( add(pMem, pXi), a)
                mstore( add(pMem, pBetaXi), mulmod(b, a, q))
                <%for (let i=0; i<power;i++) {%>
                a:= mulmod(a, a, q)
                <%}%>
                mstore( add(pMem, pXin), a)
                a:= mod(add(sub(a, 1),q), q)
                mstore( add(pMem, pZh), a)
                mstore( add(pMem, pZhInv), a)  // We will invert later together with lagrange pols
                
                let v1 := mod(keccak256(add(pProof, pEval_a), 224), q)
                mstore( add(pMem, pV1), v1)
                a := mulmod(v1, v1, q)
                mstore( add(pMem, pV2), a)
                a := mulmod(a, v1, q)
                mstore( add(pMem, pV3), a)
                a := mulmod(a, v1, q)
                mstore( add(pMem, pV4), a)
                a := mulmod(a, v1, q)
                mstore( add(pMem, pV5), a)
                a := mulmod(a, v1, q)
                mstore( add(pMem, pV6), a)
                
                mstore( add(pMem, pU), mod(keccak256(add(pProof, pWxi), 128), q))
            }
            
            function calculateLagrange(pMem) {

                let w := 1                
                <% for (let i=1; i<=Math.max(nPublic, 1); i++) { %>
                mstore(
                    add(pMem, pEval_l<%=i%>), 
                    mulmod(
                        n, 
                        mod(
                            add(
                                sub(
                                    mload(add(pMem, pXi)), 
                                    w
                                ), 
                                q
                            ),
                            q
                        ), 
                        q
                    )
                )
                <% if (i<Math.max(nPublic, 1)) { %>
                w := mulmod(w, w1, q)
                <% } %>
                <% } %>
                
                inverseArray(add(pMem, pZhInv), <%=Math.max(nPublic, 1)+1%> )
                
                let zh := mload(add(pMem, pZh))
                w := 1
                <% for (let i=1; i<=Math.max(nPublic, 1); i++) { %>
                <% if (i==1) { %>
                mstore(
                    add(pMem, pEval_l1 ), 
                    mulmod(
                        mload(add(pMem, pEval_l1 )),
                        zh,
                        q
                    )
                )
                <% } else { %>
                mstore(
                    add(pMem, pEval_l<%=i%>), 
                    mulmod(
                        w,
                        mulmod(
                            mload(add(pMem, pEval_l<%=i%>)),
                            zh,
                            q
                        ),
                        q
                    )
                )
                <% } %>
                <% if (i<Math.max(nPublic, 1)) { %>
                w := mulmod(w, w1, q)
                <% } %>
                <% } %>


            }
            
            function calculatePl(pMem, pPub) {
                let pl := 0
                
                <% for (let i=0; i<nPublic; i++) { %> 
                pl := mod(
                    add(
                        sub(
                            pl,  
                            mulmod(
                                mload(add(pMem, pEval_l<%=i+1%>)),
                                mload(add(pPub, <%=32+i*32%>)),
                                q
                            )
                        ),
                        q
                    ),
                    q
                )
                <% } %>
                
                mstore(add(pMem, pPl), pl)
                

            }

            function calculateT(pProof, pMem) {
                let t
                let t1
                let t2
                t := addmod(
                    mload(add(pProof, pEval_r)), 
                    mload(add(pMem, pPl)), 
                    q
                )
                
                t1 := mulmod(
                    mload(add(pProof, pEval_s1)),
                    mload(add(pMem, pBeta)),
                    q
                )

                t1 := addmod(
                    t1,
                    mload(add(pProof, pEval_a)),
                    q
                )
                
                t1 := addmod(
                    t1,
                    mload(add(pMem, pGamma)),
                    q
                )

                t2 := mulmod(
                    mload(add(pProof, pEval_s2)),
                    mload(add(pMem, pBeta)),
                    q
                )

                t2 := addmod(
                    t2,
                    mload(add(pProof, pEval_b)),
                    q
                )
                
                t2 := addmod(
                    t2,
                    mload(add(pMem, pGamma)),
                    q
                )
                
                t1 := mulmod(t1, t2, q)
                
                t2 := addmod(
                    mload(add(pProof, pEval_c)),
                    mload(add(pMem, pGamma)),
                    q
                )

                t1 := mulmod(t1, t2, q)
                t1 := mulmod(t1, mload(add(pProof, pEval_zw)), q)
                t1 := mulmod(t1, mload(add(pMem, pAlpha)), q)
                
                t2 := mulmod(
                    mload(add(pMem, pEval_l1)), 
                    mload(add(pMem, pAlpha)), 
                    q
                )

                t2 := mulmod(
                    t2, 
                    mload(add(pMem, pAlpha)), 
                    q
                )

                t1 := addmod(t1, t2, q)
                
                t := mod(sub(add(t, q), t1), q)
                t := mulmod(t, mload(add(pMem, pZhInv)), q)
                
                mstore( add(pMem, pEval_t) , t)

            }
            
            function g1_set(pR, pP) {
                mstore(pR, mload(pP))
                mstore(add(pR, 32), mload(add(pP,32)))
            }

            function g1_acc(pR, pP) {
                let mIn := mload(0x40)
                mstore(mIn, mload(pR))
                mstore(add(mIn,32), mload(add(pR, 32)))
                mstore(add(mIn,64), mload(pP))
                mstore(add(mIn,96), mload(add(pP, 32)))

                let success := staticcall(sub(gas(), 2000), 6, mIn, 128, pR, 64)
                
                if iszero(success) {
                    mstore(0, 0)
                    return(0,0x20)
                }
            }

            function g1_mulAcc(pR, pP, s) {
                let success
                let mIn := mload(0x40)
                mstore(mIn, mload(pP))
                mstore(add(mIn,32), mload(add(pP, 32)))
                mstore(add(mIn,64), s)

                success := staticcall(sub(gas(), 2000), 7, mIn, 96, mIn, 64)
                
                if iszero(success) {
                    mstore(0, 0)
                    return(0,0x20)
                }
                
                mstore(add(mIn,64), mload(pR))
                mstore(add(mIn,96), mload(add(pR, 32)))

                success := staticcall(sub(gas(), 2000), 6, mIn, 128, pR, 64)
                
                if iszero(success) {
                    mstore(0, 0)
                    return(0,0x20)
                }
                
            }

            function g1_mulAccC(pR, x, y, s) {
                let success
                let mIn := mload(0x40)
                mstore(mIn, x)
                mstore(add(mIn,32), y)
                mstore(add(mIn,64), s)

                success := staticcall(sub(gas(), 2000), 7, mIn, 96, mIn, 64)
                
                if iszero(success) {
                    mstore(0, 0)
                    return(0,0x20)
                }
                
                mstore(add(mIn,64), mload(pR))
                mstore(add(mIn,96), mload(add(pR, 32)))

                success := staticcall(sub(gas(), 2000), 6, mIn, 128, pR, 64)
                
                if iszero(success) {
                    mstore(0, 0)
                    return(0,0x20)
                }
            }

            function g1_mulSetC(pR, x, y, s) {
                let success
                let mIn := mload(0x40)
                mstore(mIn, x)
                mstore(add(mIn,32), y)
                mstore(add(mIn,64), s)

                success := staticcall(sub(gas(), 2000), 7, mIn, 96, pR, 64)
                
                if iszero(success) {
                    mstore(0, 0)
                    return(0,0x20)
                }
            }


            function calculateA1(pProof, pMem) {
                let p := add(pMem, pA1)
                g1_set(p, add(pProof, pWxi))
                g1_mulAcc(p, add(pProof, pWxiw), mload(add(pMem, pU)))
            }
            
            
            function calculateB1(pProof, pMem) {
                let s
                let s1
                let p := add(pMem, pB1)
                
                // Calculate D
                s := mulmod( mload(add(pProof, pEval_a)), mload(add(pMem, pV1)), q)
                g1_mulSetC(p, Qlx, Qly, s)

                s := mulmod( s, mload(add(pProof, pEval_b)), q)                
                g1_mulAccC(p, Qmx, Qmy, s)

                s := mulmod( mload(add(pProof, pEval_b)), mload(add(pMem, pV1)), q)
                g1_mulAccC(p, Qrx, Qry, s)
                
                s := mulmod( mload(add(pProof, pEval_c)), mload(add(pMem, pV1)), q)
                g1_mulAccC(p, Qox, Qoy, s)

                s :=mload(add(pMem, pV1))
                g1_mulAccC(p, Qcx, Qcy, s)

                s := addmod(mload(add(pProof, pEval_a)), mload(add(pMem, pBetaXi)), q)
                s := addmod(s, mload(add(pMem, pGamma)), q)
                s1 := mulmod(k1, mload(add(pMem, pBetaXi)), q)
                s1 := addmod(s1, mload(add(pProof, pEval_b)), q)
                s1 := addmod(s1, mload(add(pMem, pGamma)), q)
                s := mulmod(s, s1, q)
                s1 := mulmod(k2, mload(add(pMem, pBetaXi)), q)
                s1 := addmod(s1, mload(add(pProof, pEval_c)), q)
                s1 := addmod(s1, mload(add(pMem, pGamma)), q)
                s := mulmod(s, s1, q)
                s := mulmod(s, mload(add(pMem, pAlpha)), q)
                s := mulmod(s, mload(add(pMem, pV1)), q)
                s1 := mulmod(mload(add(pMem, pEval_l1)), mload(add(pMem, pAlpha)), q)
                s1 := mulmod(s1, mload(add(pMem, pAlpha)), q)
                s1 := mulmod(s1, mload(add(pMem, pV1)), q)
                s := addmod(s, s1, q)
                s := addmod(s, mload(add(pMem, pU)), q)
                g1_mulAcc(p, add(pProof, pZ), s)
                
                s := mulmod(mload(add(pMem, pBeta)), mload(add(pProof, pEval_s1)), q)
                s := addmod(s, mload(add(pProof, pEval_a)), q)
                s := addmod(s, mload(add(pMem, pGamma)), q)
                s1 := mulmod(mload(add(pMem, pBeta)), mload(add(pProof, pEval_s2)), q)
                s1 := addmod(s1, mload(add(pProof, pEval_b)), q)
                s1 := addmod(s1, mload(add(pMem, pGamma)), q)
                s := mulmod(s, s1, q)
                s := mulmod(s, mload(add(pMem, pAlpha)), q)
                s := mulmod(s, mload(add(pMem, pV1)), q)
                s := mulmod(s, mload(add(pMem, pBeta)), q)
                s := mulmod(s, mload(add(pProof, pEval_zw)), q)
                s := mod(sub(q, s), q)
                g1_mulAccC(p, S3x, S3y, s)


                // calculate F
                g1_acc(p , add(pProof, pT1))

                s := mload(add(pMem, pXin))
                g1_mulAcc(p, add(pProof, pT2), s)
                
                s := mulmod(s, s, q)
                g1_mulAcc(p, add(pProof, pT3), s)
                
                g1_mulAcc(p, add(pProof, pA), mload(add(pMem, pV2)))
                g1_mulAcc(p, add(pProof, pB), mload(add(pMem, pV3)))
                g1_mulAcc(p, add(pProof, pC), mload(add(pMem, pV4)))
                g1_mulAccC(p, S1x, S1y, mload(add(pMem, pV5)))
                g1_mulAccC(p, S2x, S2y, mload(add(pMem, pV6)))
                
                // calculate E
                s := mload(add(pMem, pEval_t))
                s := addmod(s, mulmod(mload(add(pProof, pEval_r)), mload(add(pMem, pV1)), q), q)
                s := addmod(s, mulmod(mload(add(pProof, pEval_a)), mload(add(pMem, pV2)), q), q)
                s := addmod(s, mulmod(mload(add(pProof, pEval_b)), mload(add(pMem, pV3)), q), q)
                s := addmod(s, mulmod(mload(add(pProof, pEval_c)), mload(add(pMem, pV4)), q), q)
                s := addmod(s, mulmod(mload(add(pProof, pEval_s1)), mload(add(pMem, pV5)), q), q)
                s := addmod(s, mulmod(mload(add(pProof, pEval_s2)), mload(add(pMem, pV6)), q), q)
                s := addmod(s, mulmod(mload(add(pProof, pEval_zw)), mload(add(pMem, pU)), q), q)
                s := mod(sub(q, s), q)
                g1_mulAccC(p, G1x, G1y, s)
                
                
                // Last part of B
                s := mload(add(pMem, pXi))
                g1_mulAcc(p, add(pProof, pWxi), s)

                s := mulmod(mload(add(pMem, pU)), mload(add(pMem, pXi)), q)
                s := mulmod(s, w1, q)
                g1_mulAcc(p, add(pProof, pWxiw), s)

            }
            
            function checkPairing(pMem) -> isOk {
                let mIn := mload(0x40)
                mstore(mIn, mload(add(pMem, pA1)))
                mstore(add(mIn,32), mload(add(add(pMem, pA1), 32)))
                mstore(add(mIn,64), X2x2)
                mstore(add(mIn,96), X2x1)
                mstore(add(mIn,128), X2y2)
                mstore(add(mIn,160), X2y1)
                mstore(add(mIn,192), mload(add(pMem, pB1)))
                let s := mload(add(add(pMem, pB1), 32))
                s := mod(sub(qf, s), qf)
                mstore(add(mIn,224), s)
                mstore(add(mIn,256), G2x2)
                mstore(add(mIn,288), G2x1)
                mstore(add(mIn,320), G2y2)
                mstore(add(mIn,352), G2y1)
                
                let success := staticcall(sub(gas(), 2000), 8, mIn, 384, mIn, 0x20)
                
                isOk := and(success, mload(mIn))
            }
            
            let pMem := mload(0x40)
            mstore(0x40, add(pMem, lastMem))
            
            checkInput(proof)
            calculateChallanges(proof, pMem)
            calculateLagrange(pMem)
            calculatePl(pMem, pubSignals)
            calculateT(proof, pMem)
            calculateA1(proof, pMem)
            calculateB1(proof, pMem)
            let isValid := checkPairing(pMem)
            
            mstore(0x40, sub(pMem, lastMem))
            mstore(0, isValid)
            return(0,0x20)
        }
        
    }
}`;ee.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),ee.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");const f1=ee.e("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),d1=ee.e("21888242871839275222246405745257275088696311157297823662689037894645226208583");async function Tn(e){let t;if(ee.eq(e,d1))t=await ql();else if(ee.eq(e,f1))t=await Ql();else throw new Error(`Curve not supported: ${ee.toString(e)}`);return t}var sn={exports:{}},h1=zl;class Hl extends Error{}Hl.prototype.name="AssertionError";function zl(e,t){if(!e){var n=new Hl(t);throw Error.captureStackTrace&&Error.captureStackTrace(n,zl),n}}function $l(e){return e.length}function _1(e){const t=e.byteLength;let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}function p1(e,t,n=0,i=$l(t)){const o=Math.min(i,e.byteLength-n);for(let a=0;a<o;a++)e[n+a]=t.charCodeAt(a);return o}var g1={byteLength:$l,toString:_1,write:p1};const mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$n=new Uint8Array(256);for(let e=0;e<mi.length;e++)$n[mi.charCodeAt(e)]=e;$n[45]=62,$n[95]=63;function jl(e){let t=e.length;return e.charCodeAt(t-1)===61&&t--,t>1&&e.charCodeAt(t-1)===61&&t--,t*3>>>2}function m1(e){const t=e.byteLength;let n="";for(let i=0;i<t;i+=3)n+=mi[e[i]>>2]+mi[(e[i]&3)<<4|e[i+1]>>4]+mi[(e[i+1]&15)<<2|e[i+2]>>6]+mi[e[i+2]&63];return t%3==2?n=n.substring(0,n.length-1)+"=":t%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function y1(e,t,n=0,i=jl(t)){const o=Math.min(i,e.byteLength-n);for(let a=0,s=0;a<o;a+=4){const u=$n[t.charCodeAt(a)],_=$n[t.charCodeAt(a+1)],d=$n[t.charCodeAt(a+2)],l=$n[t.charCodeAt(a+3)];e[s++]=u<<2|_>>4,e[s++]=(_&15)<<4|d>>2,e[s++]=(d&3)<<6|l&63}return o}var A1={byteLength:jl,toString:m1,write:y1};function Yl(e){return e.length>>>1}function I1(e){const t=e.byteLength;e=new DataView(e.buffer,e.byteOffset,t);let n="",i=0;for(let o=t-t%4;i<o;i+=4)n+=e.getUint32(i).toString(16).padStart(8,"0");for(;i<t;i++)n+=e.getUint8(i).toString(16).padStart(2,"0");return n}function L1(e,t,n=0,i=Yl(t)){const o=Math.min(i,e.byteLength-n);for(let a=0;a<o;a++){const s=Vl(t.charCodeAt(a*2)),u=Vl(t.charCodeAt(a*2+1));if(s===void 0||u===void 0)return e.subarray(0,a);e[n+a]=s<<4|u}return o}var E1={byteLength:Yl,toString:I1,write:L1};function Vl(e){if(e>=48&&e<=57)return e-48;if(e>=65&&e<=70)return e-65+10;if(e>=97&&e<=102)return e-97+10}function ga(e){let t=0;for(let n=0,i=e.length;n<i;n++){const o=e.charCodeAt(n);if(o>=55296&&o<=56319&&n+1<i){const a=e.charCodeAt(n+1);if(a>=56320&&a<=57343){t+=4,n++;continue}}o<=127?t+=1:o<=2047?t+=2:t+=3}return t}let ma;if(typeof TextDecoder!="undefined"){const e=new TextDecoder;ma=function(n){return e.decode(n)}}else ma=function(t){const n=t.byteLength;let i="",o=0;for(;o<n;){let a=t[o];if(a<=127){i+=String.fromCharCode(a),o++;continue}let s=0,u=0;if(a<=223?(s=1,u=a&31):a<=239?(s=2,u=a&15):a<=244&&(s=3,u=a&7),n-o-s>0){let _=0;for(;_<s;)a=t[o+_+1],u=u<<6|a&63,_+=1}else u=65533,s=n-o;i+=String.fromCodePoint(u),o+=s+1}return i};let ya;if(typeof TextEncoder!="undefined"){const e=new TextEncoder;ya=function(n,i,o=0,a=ga(i)){const s=Math.min(a,n.byteLength-o);return e.encodeInto(i,n.subarray(o,o+s)),s}}else ya=function(t,n,i=0,o=ga(n)){const a=Math.min(o,t.byteLength-i);t=t.subarray(i,i+a);let s=0,u=0;for(;s<n.length;){const _=n.codePointAt(s);if(_<=127){t[u++]=_,s++;continue}let d=0,l=0;for(_<=2047?(d=6,l=192):_<=65535?(d=12,l=224):_<=2097151&&(d=18,l=240),t[u++]=l|_>>d,d-=6;d>=0;)t[u++]=128|_>>d&63,d-=6;s+=_>=65536?2:1}return a};var w1={byteLength:ga,toString:ma,write:ya};function Kl(e){return e.length*2}function S1(e){const t=e.byteLength;let n="";for(let i=0;i<t-1;i+=2)n+=String.fromCharCode(e[i]+e[i+1]*256);return n}function v1(e,t,n=0,i=Kl(t)){const o=Math.min(i,e.byteLength-n);let a=o;for(let s=0;s<t.length&&!((a-=2)<0);++s){const u=t.charCodeAt(s),_=u>>8,d=u%256;e[n+s*2]=d,e[n+s*2+1]=_}return o}var C1={byteLength:Kl,toString:S1,write:v1};const b1=g1,F1=A1,B1=E1,T1=w1,R1=C1;function Fo(e){switch(e){case"ascii":return b1;case"base64":return F1;case"hex":return B1;case"utf8":case"utf-8":case void 0:return T1;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R1;default:throw new Error(`Unknown encoding: ${e}`)}}function Zl(e){return e instanceof Uint8Array}function O1(e,t,n){const i=new Uint8Array(e);return t!==void 0&&t(i,t,0,i.byteLength,n),i}function P1(e){return new Uint8Array(e)}function x1(e){return new Uint8Array(e)}function N1(e,t){return Fo(t).byteLength(e)}function M1(e,t){if(e===t)return 0;const n=Math.min(e.byteLength,t.byteLength);e=new DataView(e.buffer,e.byteOffset,e.byteLength),t=new DataView(t.buffer,t.byteOffset,t.byteLength);let i=0;for(let o=n-n%4;i<o;i+=4){const a=e.getUint32(i),s=t.getUint32(i);if(a<s)return-1;if(a>s)return 1}for(;i<n;i++){const o=e.getUint8(i),a=t.getUint8(i);if(o<a)return-1;if(o>a)return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}function U1(e,t){t===void 0&&(t=e.reduce((i,o)=>i+o.byteLength,0));const n=new Uint8Array(t);return e.reduce((i,o)=>(n.set(o,i),i+o.byteLength),0),n}function D1(e,t,n=0,i=0,o=e.byteLength){if(o>0&&o<i||o===i||e.byteLength===0||t.byteLength===0)return 0;if(n<0)throw new RangeError("targetStart is out of range");if(i<0||i>=e.byteLength)throw new RangeError("sourceStart is out of range");if(o<0)throw new RangeError("sourceEnd is out of range");n>=t.byteLength&&(n=t.byteLength),o>e.byteLength&&(o=e.byteLength),t.byteLength-n<o-i&&(o=t.length-n+i);const a=o-i;return e===t?t.copyWithin(n,i,o):t.set(e.subarray(i,o),n),a}function G1(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const n=e.byteLength;e=new DataView(e.buffer,e.byteOffset,e.byteLength),t=new DataView(t.buffer,t.byteOffset,t.byteLength);let i=0;for(let o=n-n%4;i<o;i+=4)if(e.getUint32(i)!==t.getUint32(i))return!1;for(;i<n;i++)if(e.getUint8(i)!==t.getUint8(i))return!1;return!0}function k1(e,t,n,i,o){if(typeof t=="string"?typeof n=="string"?(o=n,n=0,i=e.byteLength):typeof i=="string"&&(o=i,i=e.byteLength):typeof val=="number"?t=t&255:typeof val=="boolean"&&(t=+t),n<0||e.byteLength<n||e.byteLength<i)throw new RangeError("Out of range index");if(n===void 0&&(n=0),i===void 0&&(i=e.byteLength),i<=n)return e;if(t||(t=0),typeof t=="number")for(let a=n;a<i;++a)e[a]=t;else{t=Zl(t)?t:Xl(t,o);const a=t.byteLength;for(let s=0;s<i-n;++s)e[s+n]=t[s%a]}return e}function Xl(e,t,n){return typeof e=="string"?W1(e,t):Array.isArray(e)?q1(e):ArrayBuffer.isView(e)?Q1(e):H1(e,t,n)}function W1(e,t){const n=Fo(t),i=new Uint8Array(n.byteLength(e));return n.write(i,e,0,i.byteLength),i}function q1(e){const t=new Uint8Array(e.length);return t.set(e),t}function Q1(e){const t=new Uint8Array(e.byteLength);return t.set(e),t}function H1(e,t,n){return new Uint8Array(e,t,n)}function jn(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function z1(e){const t=e.byteLength;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)jn(e,n,n+1);return e}function $1(e){const t=e.byteLength;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)jn(e,n,n+3),jn(e,n+1,n+2);return e}function j1(e){const t=e.byteLength;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)jn(e,n,n+7),jn(e,n+1,n+6),jn(e,n+2,n+5),jn(e,n+3,n+4);return e}function Y1(e){return e}function V1(e,t,n=0,i=e.byteLength){const o=e.byteLength;return n>=o||i<=n?"":(n<0&&(n=0),i>o&&(i=o),(n!==0||i<o)&&(e=e.subarray(n,i)),Fo(t).toString(e))}function K1(e,t,n,i,o){return n===void 0?o="utf8":i===void 0&&typeof n=="string"?(o=n,n=void 0):o===void 0&&typeof i=="string"&&(o=i,i=void 0),Fo(o).write(e,t,n,i)}var Z1={isBuffer:Zl,alloc:O1,allocUnsafe:P1,allocUnsafeSlow:x1,byteLength:N1,compare:M1,concat:U1,copy:D1,equals:G1,fill:k1,from:Xl,swap16:z1,swap32:$1,swap64:j1,toBuffer:Y1,toString:V1,write:K1},X1=(e,t)=>function(){return t||(0,e[Object.keys(e)[0]])((t={exports:{}}).exports,t),t.exports},J1=(()=>{for(var e=new Uint8Array(128),t=0;t<64;t++)e[t<26?t+65:t<52?t+71:t<62?t-4:t*4-205]=t;return n=>{for(var i=n.length,o=new Uint8Array((i-(n[i-1]=="=")-(n[i-2]=="="))*3/4|0),a=0,s=0;a<i;){var u=e[n.charCodeAt(a++)],_=e[n.charCodeAt(a++)],d=e[n.charCodeAt(a++)],l=e[n.charCodeAt(a++)];o[s++]=u<<2|_>>4,o[s++]=_<<4|d>>2,o[s++]=d<<6|l}return o}})(),t3=X1({"wasm-binary:./blake2b.wat"(e,t){t.exports=J1("AGFzbQEAAAABEANgAn9/AGADf39/AGABfwADBQQAAQICBQUBAQroBwdNBQZtZW1vcnkCAAxibGFrZTJiX2luaXQAAA5ibGFrZTJiX3VwZGF0ZQABDWJsYWtlMmJfZmluYWwAAhBibGFrZTJiX2NvbXByZXNzAAMKvz8EwAIAIABCADcDACAAQgA3AwggAEIANwMQIABCADcDGCAAQgA3AyAgAEIANwMoIABCADcDMCAAQgA3AzggAEIANwNAIABCADcDSCAAQgA3A1AgAEIANwNYIABCADcDYCAAQgA3A2ggAEIANwNwIABCADcDeCAAQoiS853/zPmE6gBBACkDAIU3A4ABIABCu86qptjQ67O7f0EIKQMAhTcDiAEgAEKr8NP0r+68tzxBECkDAIU3A5ABIABC8e30+KWn/aelf0EYKQMAhTcDmAEgAELRhZrv+s+Uh9EAQSApAwCFNwOgASAAQp/Y+dnCkdqCm39BKCkDAIU3A6gBIABC6/qG2r+19sEfQTApAwCFNwOwASAAQvnC+JuRo7Pw2wBBOCkDAIU3A7gBIABCADcDwAEgAEIANwPIASAAQgA3A9ABC20BA38gAEHAAWohAyAAQcgBaiEEIAQpAwCnIQUCQANAIAEgAkYNASAFQYABRgRAIAMgAykDACAFrXw3AwBBACEFIAAQAwsgACAFaiABLQAAOgAAIAVBAWohBSABQQFqIQEMAAsLIAQgBa03AwALYQEDfyAAQcABaiEBIABByAFqIQIgASABKQMAIAIpAwB8NwMAIABCfzcD0AEgAikDAKchAwJAA0AgA0GAAUYNASAAIANqQQA6AAAgA0EBaiEDDAALCyACIAOtNwMAIAAQAwuqOwIgfgl/IABBgAFqISEgAEGIAWohIiAAQZABaiEjIABBmAFqISQgAEGgAWohJSAAQagBaiEmIABBsAFqIScgAEG4AWohKCAhKQMAIQEgIikDACECICMpAwAhAyAkKQMAIQQgJSkDACEFICYpAwAhBiAnKQMAIQcgKCkDACEIQoiS853/zPmE6gAhCUK7zqqm2NDrs7t/IQpCq/DT9K/uvLc8IQtC8e30+KWn/aelfyEMQtGFmu/6z5SH0QAhDUKf2PnZwpHagpt/IQ5C6/qG2r+19sEfIQ9C+cL4m5Gjs/DbACEQIAApAwAhESAAKQMIIRIgACkDECETIAApAxghFCAAKQMgIRUgACkDKCEWIAApAzAhFyAAKQM4IRggACkDQCEZIAApA0ghGiAAKQNQIRsgACkDWCEcIAApA2AhHSAAKQNoIR4gACkDcCEfIAApA3ghICANIAApA8ABhSENIA8gACkD0AGFIQ8gASAFIBF8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSASfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgE3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBR8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAVfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgFnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBd8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAYfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgGXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBp8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAbfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgHHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIB18fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAefHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgH3x8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFICB8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAffHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgG3x8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBV8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAZfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgGnx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHICB8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAefHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggF3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBJ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAdfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgEXx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBN8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAcfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGHx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBZ8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAUfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgHHx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBl8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAdfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgEXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBZ8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByATfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggIHx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIB58fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAbfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgH3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBR8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAXfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggGHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBJ8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAafHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFXx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBh8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAafHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgFHx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBJ8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAefHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHXx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBx8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAffHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgE3x8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBd8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAWfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgG3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBV8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCARfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgIHx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBl8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAafHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEXx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBZ8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAYfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgE3x8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBV8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAbfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggIHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIB98fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiASfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgHHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIB18fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAXfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBR8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAefHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgE3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIB18fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAXfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgG3x8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBF8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAcfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggGXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBR8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAVfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBh8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAWfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggIHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIB98fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSASfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgGnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIB18fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAWfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgEnx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGICB8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAffHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBV8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAbfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgEXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBh8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAXfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgFHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBp8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCATfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgGXx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBx8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAefHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgHHx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBh8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAffHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgHXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBJ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAUfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGnx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBZ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiARfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgIHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBV8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAZfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggF3x8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBN8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAbfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgF3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFICB8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAffHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGnx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBx8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAUfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggEXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBl8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAdfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgE3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIB58fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAYfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggEnx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBV8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAbfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBt8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSATfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgGXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBV8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAYfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgF3x8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBJ8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAWfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgIHx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBx8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAafHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgH3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBR8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAdfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgHnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBF8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSARfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBN8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAUfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgFXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBZ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAXfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBl8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAafHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgG3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBx8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAdfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHnx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB98fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAgfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgH3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBt8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAVfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBp8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAgfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggHnx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBd8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiASfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBF8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByATfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBh8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAWfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgISAhKQMAIAEgCYWFNwMAICIgIikDACACIAqFhTcDACAjICMpAwAgAyALhYU3AwAgJCAkKQMAIAQgDIWFNwMAICUgJSkDACAFIA2FhTcDACAmICYpAwAgBiAOhYU3AwAgJyAnKQMAIAcgD4WFNwMAICggKCkDACAIIBCFhTcDAAs=")}}),e3=t3(),n3=WebAssembly.compile(e3),i3=async e=>(await WebAssembly.instantiate(await n3,e)).exports,qe=h1,o3=Z1,In=null,Jl=typeof WebAssembly!="undefined"&&i3().then(e=>{In=e}),Ln=64,Bo=[];sn.exports=Te;var tu=sn.exports.BYTES_MIN=16,eu=sn.exports.BYTES_MAX=64;sn.exports.BYTES=32;var nu=sn.exports.KEYBYTES_MIN=16,iu=sn.exports.KEYBYTES_MAX=64;sn.exports.KEYBYTES=32;var ou=sn.exports.SALTBYTES=16,ru=sn.exports.PERSONALBYTES=16;function Te(e,t,n,i,o){if(!(this instanceof Te))return new Te(e,t,n,i,o);if(!In)throw new Error("WASM not loaded. Wait for Blake2b.ready(cb)");e||(e=32),o!==!0&&(qe(e>=tu,"digestLength must be at least "+tu+", was given "+e),qe(e<=eu,"digestLength must be at most "+eu+", was given "+e),t!=null&&(qe(t instanceof Uint8Array,"key must be Uint8Array or Buffer"),qe(t.length>=nu,"key must be at least "+nu+", was given "+t.length),qe(t.length<=iu,"key must be at least "+iu+", was given "+t.length)),n!=null&&(qe(n instanceof Uint8Array,"salt must be Uint8Array or Buffer"),qe(n.length===ou,"salt must be exactly "+ou+", was given "+n.length)),i!=null&&(qe(i instanceof Uint8Array,"personal must be Uint8Array or Buffer"),qe(i.length===ru,"personal must be exactly "+ru+", was given "+i.length))),Bo.length||(Bo.push(Ln),Ln+=216),this.digestLength=e,this.finalized=!1,this.pointer=Bo.pop(),this._memory=new Uint8Array(In.memory.buffer),this._memory.fill(0,0,64),this._memory[0]=this.digestLength,this._memory[1]=t?t.length:0,this._memory[2]=1,this._memory[3]=1,n&&this._memory.set(n,32),i&&this._memory.set(i,48),this.pointer+216>this._memory.length&&this._realloc(this.pointer+216),In.blake2b_init(this.pointer,this.digestLength),t&&(this.update(t),this._memory.fill(0,Ln,Ln+t.length),this._memory[this.pointer+200]=128)}Te.prototype._realloc=function(e){In.memory.grow(Math.max(0,Math.ceil(Math.abs(e-this._memory.length)/65536))),this._memory=new Uint8Array(In.memory.buffer)},Te.prototype.update=function(e){return qe(this.finalized===!1,"Hash instance finalized"),qe(e instanceof Uint8Array,"input must be Uint8Array or Buffer"),Ln+e.length>this._memory.length&&this._realloc(Ln+e.length),this._memory.set(e,Ln),In.blake2b_update(this.pointer,Ln,Ln+e.length),this},Te.prototype.digest=function(e){if(qe(this.finalized===!1,"Hash instance finalized"),this.finalized=!0,Bo.push(this.pointer),In.blake2b_final(this.pointer),!e||e==="binary")return this._memory.slice(this.pointer+128,this.pointer+128+this.digestLength);if(typeof e=="string")return o3.toString(this._memory,e,this.pointer+128,this.pointer+128+this.digestLength);qe(e instanceof Uint8Array&&e.length>=this.digestLength,"input must be Uint8Array or Buffer");for(var t=0;t<this.digestLength;t++)e[t]=this._memory[this.pointer+128+t];return e},Te.prototype.final=Te.prototype.digest,Te.WASM=In,Te.SUPPORTED=typeof WebAssembly!="undefined",Te.ready=function(e){return e||(e=r3),Jl?Jl.then(()=>e(),e):e(new Error("WebAssembly not supported"))},Te.prototype.ready=Te.ready,Te.prototype.getPartialHash=function(){return this._memory.slice(this.pointer,this.pointer+216)},Te.prototype.setPartialHash=function(e){this._memory.set(e,this.pointer)};function r3(){}var Ve=sn.exports;const a3=[];for(let e=0;e<256;e++)a3[e]=s3(e,8);function s3(e,t){let n=0,i=e;for(let o=0;o<t;o++)n<<=1,n=n|i&1,i>>=1;return n}function To(e){return((e&4294901760)!=0?(e&=4294901760,16):0)|((e&4278255360)!=0?(e&=4278255360,8):0)|((e&4042322160)!=0?(e&=4042322160,4):0)|((e&3435973836)!=0?(e&=3435973836,2):0)|(e&2863311530)!=0}function Yi(e,t){const n=new DataView(e.buffer,e.byteOffset,e.byteLength);let i="";for(let o=0;o<4;o++){o>0&&(i+=`
`),i+="		";for(let a=0;a<4;a++)a>0&&(i+=" "),i+=n.getUint32(o*16+a*4).toString(16).padStart(8,"0")}return t&&(i=t+`
`+i),i}function au(e,t){if(e.byteLength!=t.byteLength)return!1;for(var n=new Int8Array(e),i=new Int8Array(t),o=0;o!=e.byteLength;o++)if(n[o]!=i[o])return!1;return!0}function c3(e){const t=e.getPartialHash(),n=Ve(64);return n.setPartialHash(t),n}async function l3(e,t,n,i,o){return e.G1.isZero(t)||e.G1.isZero(n)||e.G2.isZero(i)||e.G2.isZero(o)?!1:await e.pairingEq(t,o,e.G1.neg(n),i)}function u3(){return window.prompt("Enter a random text. (Entropy): ","")}async function f3(e){for(;!e;)e=await u3();const t=Ve(64);t.update(mo.randomBytes(64));const n=new TextEncoder;t.update(n.encode(e));const i=Buffer.from(t.digest()),o=[];for(let s=0;s<8;s++)o[s]=i.readUInt32BE(s*4);return new $i(o)}function d3(e,t){let n,i;t<32?(n=1<<t>>>0,i=1):(n=4294967296,i=1<<t-32>>>0);let o=e;for(let _=0;_<i;_++)for(let d=0;d<n;d++)o=mo.createHash("sha256").update(o).digest();const a=new DataView(o.buffer,o.byteOffset,o.byteLength),s=[];for(let _=0;_<8;_++)s[_]=a.getUint32(_*4,!1);return new $i(s)}function h3(e){return Array.prototype.map.call(e,function(t){return("0"+(t&255).toString(16)).slice(-2)}).join("")}async function _3(e,t){await ue(e,1),await e.writeULE32(1),await fe(e);const n=await Tn(t.q);await ue(e,2);const i=n.q,o=(Math.floor((ee.bitLength(i)-1)/64)+1)*8,a=n.r,s=(Math.floor((ee.bitLength(a)-1)/64)+1)*8;await e.writeULE32(o),await _i(e,i,o),await e.writeULE32(s),await _i(e,a,s),await e.writeULE32(t.nVars),await e.writeULE32(t.nPublic),await e.writeULE32(t.domainSize),await yi(e,n,t.vk_alpha_1),await yi(e,n,t.vk_beta_1),await Ro(e,n,t.vk_beta_2),await Ro(e,n,t.vk_gamma_2),await yi(e,n,t.vk_delta_1),await Ro(e,n,t.vk_delta_2),await fe(e)}async function yi(e,t,n){const i=new Uint8Array(t.G1.F.n8*2);t.G1.toRprLEM(i,0,n),await e.write(i)}async function Ro(e,t,n){const i=new Uint8Array(t.G2.F.n8*2);t.G2.toRprLEM(i,0,n),await e.write(i)}async function Me(e,t,n){const i=await e.read(t.G1.F.n8*2),o=t.G1.fromRprLEM(i,0);return n?t.G1.toObject(o):o}async function Vi(e,t,n){const i=await e.read(t.G2.F.n8*2),o=t.G2.fromRprLEM(i,0);return n?t.G2.toObject(o):o}async function Oo(e,t,n){await xe(e,t,1);const i=await e.readULE32();if(await Ne(e),i==1)return await p3(e,t,n);if(i==2)return await g3(e,t);throw new Error("Protocol not supported: ")}async function p3(e,t,n){const i={};i.protocol="groth16",await xe(e,t,2);const o=await e.readULE32();i.n8q=o,i.q=await pi(e,o);const a=await e.readULE32();i.n8r=a,i.r=await pi(e,a);let s=await Tn(i.q);return i.nVars=await e.readULE32(),i.nPublic=await e.readULE32(),i.domainSize=await e.readULE32(),i.power=To(i.domainSize),i.vk_alpha_1=await Me(e,s,n),i.vk_beta_1=await Me(e,s,n),i.vk_beta_2=await Vi(e,s,n),i.vk_gamma_2=await Vi(e,s,n),i.vk_delta_1=await Me(e,s,n),i.vk_delta_2=await Vi(e,s,n),await Ne(e),i}async function g3(e,t,n,i){const o={};o.protocol="plonk",await xe(e,t,2);const a=await e.readULE32();o.n8q=a,o.q=await pi(e,a);const s=await e.readULE32();o.n8r=s,o.r=await pi(e,s);let u=await Tn(o.q);return o.nVars=await e.readULE32(),o.nPublic=await e.readULE32(),o.domainSize=await e.readULE32(),o.power=To(o.domainSize),o.nAdditions=await e.readULE32(),o.nConstrains=await e.readULE32(),o.k1=await e.read(s),o.k2=await e.read(s),o.Qm=await Me(e,u,i),o.Ql=await Me(e,u,i),o.Qr=await Me(e,u,i),o.Qo=await Me(e,u,i),o.Qc=await Me(e,u,i),o.S1=await Me(e,u,i),o.S2=await Me(e,u,i),o.S3=await Me(e,u,i),o.X_2=await Vi(e,u,i),await Ne(e),o}async function m3(e,t,n){const i={delta:{}};i.deltaAfter=await Me(e,t,n),i.delta.g1_s=await Me(e,t,n),i.delta.g1_sx=await Me(e,t,n),i.delta.g2_spx=await Vi(e,t,n),i.transcript=await e.read(64),i.type=await e.readULE32();const o=await e.readULE32(),a=e.pos;let s=0;for(;e.pos-a<o;){const u=await e.read(1);if(u[0]<=s)throw new Error("Parameters in the contribution must be sorted");if(s=u[0],u[0]==1){const _=await e.read(1),d=await e.read(_[0]);i.name=new TextDecoder().decode(d)}else if(u[0]==2){const _=await e.read(1);i.numIterationsExp=_[0]}else if(u[0]==3){const _=await e.read(1);i.beaconHash=await e.read(_[0])}else throw new Error("Parameter not recognized")}if(e.pos!=a+o)throw new Error("Parametes do not match");return i}async function Aa(e,t,n){await xe(e,n,10);const i={contributions:[]};i.csHash=await e.read(64);const o=await e.readULE32();for(let a=0;a<o;a++){const s=await m3(e,t);i.contributions.push(s)}return await Ne(e),i}async function y3(e,t,n){await yi(e,t,n.deltaAfter),await yi(e,t,n.delta.g1_s),await yi(e,t,n.delta.g1_sx),await Ro(e,t,n.delta.g2_spx),await e.write(n.transcript),await e.writeULE32(n.type||0);const i=[];if(n.name){i.push(1);const o=new TextEncoder("utf-8").encode(n.name.substring(0,64));i.push(o.byteLength);for(let a=0;a<o.byteLength;a++)i.push(o[a])}if(n.type==1){i.push(2),i.push(n.numIterationsExp),i.push(3),i.push(n.beaconHash.byteLength);for(let o=0;o<n.beaconHash.byteLength;o++)i.push(n.beaconHash[o])}if(i.length>0){const o=new Uint8Array(i);await e.writeULE32(o.byteLength),await e.write(o)}else await e.writeULE32(0)}async function A3(e,t,n){await ue(e,10),await e.write(n.csHash),await e.writeULE32(n.contributions.length);for(let i=0;i<n.contributions.length;i++)await y3(e,t,n.contributions[i]);await fe(e)}function Yn(e,t,n){const i=new Uint8Array(t.G1.F.n8*2);t.G1.toRprUncompressed(i,0,n),e.update(i)}function I3(e,t,n){const i=new Uint8Array(t.G2.F.n8*2);t.G2.toRprUncompressed(i,0,n),e.update(i)}function Po(e,t,n){Yn(e,t,n.deltaAfter),Yn(e,t,n.delta.g1_s),Yn(e,t,n.delta.g1_sx),I3(e,t,n.delta.g2_spx),e.update(n.transcript)}function su(e,t){const n=new DataView(t.buffer,t.byteOffset,t.byteLength),i=[];for(let s=0;s<8;s++)i[s]=n.getUint32(s*4);const o=new $i(i);return e.G2.fromRng(o)}async function cu(e,t){if(!t[1])throw new Error(e.fileName+": File has no  header");if(t[1].length>1)throw new Error(e.fileName+": File has more than one header");e.pos=t[1][0].p;const n=await e.readULE32(),i=await e.read(n),o=ee.fromRprLE(i),a=await Tn(o);if(a.F1.n64*8!=n)throw new Error(e.fileName+": Invalid size");const s=await e.readULE32(),u=await e.readULE32();if(e.pos-t[1][0].p!=t[1][0].size)throw new Error("Invalid PTau header size");return{curve:a,power:s,ceremonyPower:u}}async function lu(e,t,n,i,o,a,s,u,_,d){const l=1<<16,m=o[a],A=m.F.n8*2,p=t[i][0].size/A;await xe(e,t,i),await ue(n,i);let R=s;for(let P=0;P<p;P+=l){d&&d.debug(`Applying key: ${_}: ${P}/${p}`);const C=Math.min(p-P,l);let G;G=await e.read(C*A),G=await m.batchApplyKey(G,R,u),await n.write(G),R=o.Fr.mul(R,o.Fr.exp(u,C))}await fe(n),await Ne(e)}ee.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),ee.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");const cn=262144,L3={get:function(e,t){return isNaN(t)?e[t]:e.getElement(t)},set:function(e,t,n){return isNaN(t)?(e[t]=n,!0):e.setElement(t,n)}};class E3{constructor(t){this.length=t||0,this.arr=new Array(cn);for(let n=0;n<t;n+=cn)this.arr[n/cn]=new Array(Math.min(cn,t-n));return this}push(){for(let t=0;t<arguments.length;t++)this.setElement(this.length,arguments[t])}slice(t,n){const i=new Array(n-t);for(let o=t;o<n;o++)i[o-t]=this.getElement(o);return i}getElement(t){t=parseInt(t);const n=Math.floor(t/cn),i=t%cn;return this.arr[n]?this.arr[n][i]:void 0}setElement(t,n){t=parseInt(t);const i=Math.floor(t/cn);this.arr[i]||(this.arr[i]=new Array(cn));const o=t%cn;return this.arr[i][o]=n,t>=this.length&&(this.length=t+1),!0}getKeys(){const t=new ln;for(let n=0;n<this.arr.length;n++)if(this.arr[n])for(let i=0;i<this.arr[n].length;i++)typeof this.arr[n][i]!="undefined"&&t.push(n*cn+i);return t}}class ln{constructor(t){const n=new E3(t);return new Proxy(n,L3)}}async function uu(e,t,n,i){const o=0,a=1,s=2,u=3;await Ve.ready();const _=Ve(64),{fd:d,sections:l}=await ke(t,"ptau",1),{curve:m,power:A}=await cu(d,l),{fd:p,sections:R}=await ke(e,"r1cs",1),P=await bo(p,R,!1),C=await Kr(n,"zkey",1,10,1<<22,1<<24),G=m.G1.F.n8*2,O=m.G2.F.n8*2;if(P.prime!=m.r)return i&&i.error("r1cs curve does not match powers of tau ceremony curve"),-1;const Z=To(P.nConstraints+P.nPubInputs+P.nOutputs+1-1)+1;if(Z>A)return i&&i.error(`circuit too big for this power of tau ceremony. ${P.nConstraints}*2 > 2**${A}`),-1;if(!l[12])return i&&i.error("Powers of tau is not prepared."),-1;const $=P.nOutputs+P.nPubInputs,Y=2**Z;await ue(C,1),await C.writeULE32(1),await fe(C),await ue(C,2);const B=m.q,g=(Math.floor((ee.bitLength(B)-1)/64)+1)*8,I=m.r,D=(Math.floor((ee.bitLength(I)-1)/64)+1)*8,z=ee.mod(ee.shl(1,D*8),I),U=m.Fr.e(ee.mod(ee.mul(z,z),I));await C.writeULE32(g),await _i(C,B,g),await C.writeULE32(D),await _i(C,I,D),await C.writeULE32(P.nVars),await C.writeULE32($),await C.writeULE32(Y);let N;N=await d.read(G,l[4][0].p),await C.write(N),N=await m.G1.batchLEMtoU(N),_.update(N);let S;S=await d.read(G,l[5][0].p),await C.write(S),S=await m.G1.batchLEMtoU(S),_.update(S);let W;W=await d.read(O,l[6][0].p),await C.write(W),W=await m.G2.batchLEMtoU(W),_.update(W);const J=new Uint8Array(G);m.G1.toRprLEM(J,0,m.G1.g);const it=new Uint8Array(O);m.G2.toRprLEM(it,0,m.G2.g);const ot=new Uint8Array(G);m.G1.toRprUncompressed(ot,0,m.G1.g);const et=new Uint8Array(O);m.G2.toRprUncompressed(et,0,m.G2.g),await C.write(it),await C.write(J),await C.write(it),_.update(et),_.update(ot),_.update(et),await fe(C),i&&i.info("Reading r1cs");let at=await An(p,R,2);const rt=new ln(P.nVars),gt=new ln(P.nVars),Rt=new ln(P.nVars),yt=new ln(P.nVars-$-1),wt=new Array($+1);i&&i.info("Reading tauG1");let L=await An(d,l,12,(Y-1)*G,Y*G);i&&i.info("Reading tauG2");let f=await An(d,l,13,(Y-1)*O,Y*O);i&&i.info("Reading alphatauG1");let F=await An(d,l,14,(Y-1)*G,Y*G);i&&i.info("Reading betatauG1");let h=await An(d,l,15,(Y-1)*G,Y*G);await E(),await K(3,"G1",wt,"IC"),await M(),await ct(),await K(8,"G1",yt,"C"),await K(5,"G1",rt,"A"),await K(6,"G1",gt,"B1"),await K(7,"G2",Rt,"B2");const H=_.digest();return await ue(C,10),await C.write(H),await C.writeULE32(0),await fe(C),i&&i.info(Yi(H,"Circuit hash: ")),await C.close(),await p.close(),await d.close(),H;async function M(){await ue(C,9);const bt=new Vt(Y*G);if(Z<m.Fr.s){let St=await An(d,l,12,(Y*2-1)*G,Y*2*G);for(let mt=0;mt<Y;mt++){i&&mt%1e4==0&&i.debug(`spliting buffer: ${mt}/${Y}`);const Et=St.slice((mt*2+1)*G,(mt*2+1)*G+G);bt.set(Et,mt*G)}}else if(Z==m.Fr.s){const St=l[12][0].p+(2**(Z+1)-1)*G;await d.readToBuffer(bt,0,Y*G,St+Y*G)}else throw i&&i.error("Circuit too big"),new Error("Circuit too big for this curve");await C.write(bt),await fe(C)}async function E(){const bt=new Uint8Array(12+m.Fr.n8),St=new DataView(bt.buffer),mt=new Uint8Array(m.Fr.n8);m.Fr.toRprLE(mt,0,m.Fr.e(1));let Et=0;function Bt(){const Q=at.slice(Et,Et+4);return Et+=4,new DataView(Q.buffer).getUint32(0,!0)}const Pt=new ln;for(let Q=0;Q<P.nConstraints;Q++){i&&Q%1e4==0&&i.debug(`processing constraints: ${Q}/${P.nConstraints}`);const tt=Bt();for(let w=0;w<tt;w++){const r=Bt(),c=Et;Et+=m.Fr.n8;const y=o,v=G*Q,T=u,k=G*Q;typeof rt[r]=="undefined"&&(rt[r]=[]),rt[r].push([y,v,c]),r<=$?(typeof wt[r]=="undefined"&&(wt[r]=[]),wt[r].push([T,k,c])):(typeof yt[r-$-1]=="undefined"&&(yt[r-$-1]=[]),yt[r-$-1].push([T,k,c])),Pt.push([0,Q,r,c])}const X=Bt();for(let w=0;w<X;w++){const r=Bt(),c=Et;Et+=m.Fr.n8;const y=o,v=G*Q,T=a,k=O*Q,V=s,nt=G*Q;typeof gt[r]=="undefined"&&(gt[r]=[]),gt[r].push([y,v,c]),typeof Rt[r]=="undefined"&&(Rt[r]=[]),Rt[r].push([T,k,c]),r<=$?(typeof wt[r]=="undefined"&&(wt[r]=[]),wt[r].push([V,nt,c])):(typeof yt[r-$-1]=="undefined"&&(yt[r-$-1]=[]),yt[r-$-1].push([V,nt,c])),Pt.push([1,Q,r,c])}const st=Bt();for(let w=0;w<st;w++){const r=Bt(),c=Et;Et+=m.Fr.n8;const y=o,v=G*Q;r<=$?(typeof wt[r]=="undefined"&&(wt[r]=[]),wt[r].push([y,v,c])):(typeof yt[r-$-1]=="undefined"&&(yt[r-$-1]=[]),yt[r-$-1].push([y,v,c]))}}for(let Q=0;Q<=$;Q++){const tt=o,X=G*(P.nConstraints+Q),st=u,w=G*(P.nConstraints+Q);typeof rt[Q]=="undefined"&&(rt[Q]=[]),rt[Q].push([tt,X,-1]),typeof wt[Q]=="undefined"&&(wt[Q]=[]),wt[Q].push([st,w,-1]),Pt.push([0,P.nConstraints+Q,Q,-1])}await ue(C,4);const Ct=new Vt(Pt.length*(12+m.Fr.n8)+4),Ht=new Uint8Array(4);new DataView(Ht.buffer).setUint32(0,Pt.length,!0),Ct.set(Ht);let x=4;for(let Q=0;Q<Pt.length;Q++)i&&Q%1e5==0&&i.debug(`writing coeffs: ${Q}/${Pt.length}`),q(Pt[Q]);await C.write(Ct),await fe(C);function q(Q){St.setUint32(0,Q[0],!0),St.setUint32(4,Q[1],!0),St.setUint32(8,Q[2],!0);let tt;Q[3]>=0?tt=m.Fr.fromRprLE(at.slice(Q[3],Q[3]+m.Fr.n8),0):tt=m.Fr.fromRprLE(mt,0);const X=m.Fr.mul(tt,U);m.Fr.toRprLE(bt,12,X),Ct.set(bt,x),x+=bt.length}}async function K(bt,St,mt,Et){const Bt=1<<15,Pt=m[St];Tt(mt.length),await ue(C,bt);let Ct=[],Ht=0;for(;Ht<mt.length;){let b=0;for(;Ht<mt.length&&b<m.tm.concurrency;){i&&i.debug(`Writing points start ${Et}: ${Ht}/${mt.length}`);let q=1,Q=mt[Ht]?mt[Ht].length:0;for(;Ht+q<mt.length&&Q+(mt[Ht+q]?mt[Ht+q].length:0)<Bt&&q<Bt;)Q+=mt[Ht+q]?mt[Ht+q].length:0,q++;const tt=mt.slice(Ht,Ht+q),X=Ht;Ct.push(ft(St,tt,i,Et).then(st=>(i&&i.debug(`Writing points end ${Et}: ${X}/${mt.length}`),st))),Ht+=q,b++}const x=await Promise.all(Ct);for(let q=0;q<x.length;q++){await C.write(x[q][0]);const Q=await Pt.batchLEMtoU(x[q][0]);_.update(Q)}Ct=[]}await fe(C)}async function ft(bt,St,mt,Et){const Bt=m[bt],Pt=Bt.F.n8*2,Ct=Bt.F.n8*3,Ht=Bt.F.n8*2;let b,x,q,Q;if(bt=="G1")b="g1m_timesScalarAffine",x="g1m_multiexpAffine",q="g1m_batchToAffine",Q="g1m_zero";else if(bt=="G2")b="g2m_timesScalarAffine",x="g2m_multiexpAffine",q="g2m_batchToAffine",Q="g2m_zero";else throw new Error("Invalid group");let tt=0;for(let T=0;T<St.length;T++)tt+=St[T]?St[T].length:0;let X,st;tt>2<<14?(X=new Vt(tt*Pt),st=new Vt(tt*m.Fr.n8)):(X=new Uint8Array(tt*Pt),st=new Uint8Array(tt*m.Fr.n8));let w=0,r=0;const c=[L,f,F,h],y=new Uint8Array(m.Fr.n8);m.Fr.toRprLE(y,0,m.Fr.e(1));let v=0;for(let T=0;T<St.length;T++)if(!!St[T])for(let k=0;k<St[T].length;k++)mt&&k&&k%1e4==0&&mt.debug(`Configuring big array ${Et}: ${k}/${St[T].length}`),X.set(c[St[T][k][0]].slice(St[T][k][1],St[T][k][1]+Pt),v*Pt),St[T][k][2]>=0?st.set(at.slice(St[T][k][2],St[T][k][2]+m.Fr.n8),v*m.Fr.n8):st.set(y,v*m.Fr.n8),v++;if(St.length>1){const T=[];T.push({cmd:"ALLOCSET",var:0,buff:X}),T.push({cmd:"ALLOCSET",var:1,buff:st}),T.push({cmd:"ALLOC",var:2,len:St.length*Ct}),w=0,r=0;let k=0;for(let nt=0;nt<St.length;nt++){if(!St[nt]){T.push({cmd:"CALL",fnName:Q,params:[{var:2,offset:k}]}),k+=Ct;continue}St[nt].length==1?T.push({cmd:"CALL",fnName:b,params:[{var:0,offset:w},{var:1,offset:r},{val:m.Fr.n8},{var:2,offset:k}]}):T.push({cmd:"CALL",fnName:x,params:[{var:0,offset:w},{var:1,offset:r},{val:m.Fr.n8},{val:St[nt].length},{var:2,offset:k}]}),w+=Pt*St[nt].length,r+=m.Fr.n8*St[nt].length,k+=Ct}return T.push({cmd:"CALL",fnName:q,params:[{var:2},{val:St.length},{var:2}]}),T.push({cmd:"GET",out:0,var:2,len:St.length*Ht}),await m.tm.queueAction(T)}else{let T=await Bt.multiExpAffine(X,st,mt,Et);return T=[Bt.toAffine(T)],T}}async function ct(){const bt=1<<14;Tt(Y-1);for(let St=0;St<Y-1;St+=bt){i&&i.debug(`HashingHPoints: ${St}/${Y}`);const mt=Math.min(Y-1,bt);await Lt(St,mt)}}async function Lt(bt,St){const mt=await d.read(St*G,l[2][0].p+(bt+Y)*G),Et=await d.read(St*G,l[2][0].p+bt*G),Bt=m.tm.concurrency,Pt=Math.floor(St/Bt),Ct=[];for(let b=0;b<Bt;b++){let x;if(b<Bt-1?x=Pt:x=St-b*Pt,x==0)continue;const q=mt.slice(b*Pt*G,(b*Pt+x)*G),Q=Et.slice(b*Pt*G,(b*Pt+x)*G);Ct.push(Nt(q,Q))}const Ht=await Promise.all(Ct);for(let b=0;b<Ht.length;b++)_.update(Ht[b][0])}async function Nt(bt,St){const mt=bt.byteLength/G,Et=m.G1.F.n8*3,Bt=[];Bt.push({cmd:"ALLOCSET",var:0,buff:bt}),Bt.push({cmd:"ALLOCSET",var:1,buff:St}),Bt.push({cmd:"ALLOC",var:2,len:mt*Et});for(let Ct=0;Ct<mt;Ct++)Bt.push({cmd:"CALL",fnName:"g1m_subAffine",params:[{var:0,offset:Ct*G},{var:1,offset:Ct*G},{var:2,offset:Ct*Et}]});return Bt.push({cmd:"CALL",fnName:"g1m_batchToAffine",params:[{var:2},{val:mt},{var:2}]}),Bt.push({cmd:"CALL",fnName:"g1m_batchLEMtoU",params:[{var:2},{val:mt},{var:2}]}),Bt.push({cmd:"GET",out:0,var:2,len:mt*G}),await m.tm.queueAction(Bt)}function Tt(bt){const St=new Uint8Array(4);new DataView(St.buffer,St.byteOffset,St.byteLength).setUint32(0,bt,!1),_.update(St)}}const Ki=l3;async function w3(e,t,n,i){let o;await Ve.ready();const{fd:a,sections:s}=await ke(n,"zkey",2),u=await Oo(a,s,!1);if(u.protocol!="groth16")throw new Error("zkey file is not groth16");const _=await Tn(u.q),d=_.G1.F.n8*2,l=await Aa(a,_,s),m=Ve(64);m.update(l.csHash);let A=_.G1.g;for(let B=0;B<l.contributions.length;B++){const g=l.contributions[B],I=c3(m);if(Yn(I,_,g.delta.g1_s),Yn(I,_,g.delta.g1_sx),!au(I.digest(),g.transcript))return console.log(`INVALID(${B}): Inconsistent transcript `),!1;const D=su(_,g.transcript);if(o=await Ki(_,g.delta.g1_s,g.delta.g1_sx,D,g.delta.g2_spx),o!==!0)return console.log(`INVALID(${B}): public key G1 and G2 do not have the same ration `),!1;if(o=await Ki(_,A,g.deltaAfter,D,g.delta.g2_spx),o!==!0)return console.log(`INVALID(${B}): deltaAfter does not fillow the public key `),!1;if(g.type==1){const U=d3(g.beaconHash,g.numIterationsExp),N=_.Fr.fromRng(U),S=_.G1.toAffine(_.G1.fromRng(U)),W=_.G1.toAffine(_.G1.timesFr(S,N));if(_.G1.eq(S,g.delta.g1_s)!==!0)return console.log(`INVALID(${B}): Key of the beacon does not match. g1_s `),!1;if(_.G1.eq(W,g.delta.g1_sx)!==!0)return console.log(`INVALID(${B}): Key of the beacon does not match. g1_sx `),!1}Po(m,_,g);const z=Ve(64);Po(z,_,g),g.contributionHash=z.digest(),A=g.deltaAfter}const{fd:p,sections:R}=await ke(e,"zkey",2),P=await Oo(p,R,!1);if(P.protocol!="groth16")throw new Error("zkeyinit file is not groth16");if(!ee.eq(P.q,u.q)||!ee.eq(P.r,u.r)||P.n8q!=u.n8q||P.n8r!=u.n8r)return i&&i.error("INVALID:  Different curves"),!1;if(P.nVars!=u.nVars||P.nPublic!=u.nPublic||P.domainSize!=u.domainSize)return i&&i.error("INVALID:  Different circuit parameters"),!1;if(!_.G1.eq(u.vk_alpha_1,P.vk_alpha_1))return i&&i.error("INVALID:  Invalid alpha1"),!1;if(!_.G1.eq(u.vk_beta_1,P.vk_beta_1))return i&&i.error("INVALID:  Invalid beta1"),!1;if(!_.G2.eq(u.vk_beta_2,P.vk_beta_2))return i&&i.error("INVALID:  Invalid beta2"),!1;if(!_.G2.eq(u.vk_gamma_2,P.vk_gamma_2))return i&&i.error("INVALID:  Invalid gamma2"),!1;if(!_.G1.eq(u.vk_delta_1,A))return i&&i.error("INVALID:  Invalid delta1"),!1;if(o=await Ki(_,_.G1.g,A,_.G2.g,u.vk_delta_2),o!==!0)return i&&i.error("INVALID:  Invalid delta2"),!1;const C=await Aa(p,_,R);if(!au(l.csHash,C.csHash))return i&&i.error("INVALID:  Circuit does not match"),!1;if(s[8][0].size!=d*(u.nVars-u.nPublic-1))return i&&i.error("INVALID:  Invalid L section size"),!1;if(s[9][0].size!=d*u.domainSize)return i&&i.error("INVALID:  Invalid H section size"),!1;let G;if(G=await zi(a,s,p,R,3),!G)return i&&i.error("INVALID:  IC section is not identical"),!1;if(G=await zi(a,s,p,R,4),!G)return i&&i.error("Coeffs section is not identical"),!1;if(G=await zi(a,s,p,R,5),!G)return i&&i.error("A section is not identical"),!1;if(G=await zi(a,s,p,R,6),!G)return i&&i.error("B1 section is not identical"),!1;if(G=await zi(a,s,p,R,7),!G)return i&&i.error("B2 section is not identical"),!1;if(o=await O("G1",p,R,a,s,8,u.vk_delta_2,P.vk_delta_2,"L section"),o!==!0)return i&&i.error("L section does not match"),!1;if(o=await Z(),o!==!0)return i&&i.error("H section does not match"),!1;i&&i.info(Yi(l.csHash,"Circuit Hash: ")),await a.close(),await p.close();for(let B=l.contributions.length-1;B>=0;B--){const g=l.contributions[B];i&&i.info("-------------------------"),i&&i.info(Yi(g.contributionHash,`contribution #${B+1} ${g.name?g.name:""}:`)),g.type==1&&(i&&i.info(`Beacon generator: ${h3(g.beaconHash)}`),i&&i.info(`Beacon iterations Exp: ${g.numIterationsExp}`))}return i&&i.info("-------------------------"),i&&i.info("ZKey Ok!"),!0;async function O(B,g,I,D,z,U,N,S,W){const J=1<<20,it=_[B],ot=it.F.n8*2;await xe(g,I,U),await xe(D,z,U);let et=it.zero,at=it.zero;const rt=I[U][0].size/ot;for(let gt=0;gt<rt;gt+=J){i&&i.debug(`Same ratio check ${W}:  ${gt}/${rt}`);const Rt=Math.min(rt-gt,J),yt=await g.read(Rt*ot),wt=await D.read(Rt*ot),L=new Uint8Array(4*Rt);mo.randomFillSync(L);const f=await it.multiExpAffine(yt,L),F=await it.multiExpAffine(wt,L);et=it.add(et,f),at=it.add(at,F)}return await Ne(g),await Ne(D),rt==0?!0:(o=await Ki(_,et,at,N,S),o===!0)}async function Z(){const B=1<<20,g=_.G1,I=_.Fr,D=g.F.n8*2,{fd:z,sections:U}=await ke(t,"ptau",1);let N=new Vt(u.domainSize*u.n8r);const S=new Array(8);for(let at=0;at<8;at++)S[at]=mo.randomBytes(4).readUInt32BE(0,!0);const W=new $i(S);for(let at=0;at<u.domainSize-1;at++){const rt=I.fromRng(W);I.toRprLE(N,at*u.n8r,rt)}I.toRprLE(N,(u.domainSize-1)*u.n8r,I.zero);let J=g.zero;for(let at=0;at<u.domainSize;at+=B){i&&i.debug(`H Verificaition(tau):  ${at}/${u.domainSize}`);const rt=Math.min(u.domainSize-at,B),gt=await z.read(D*rt,U[2][0].p+u.domainSize*D+at*D),Rt=await z.read(D*rt,U[2][0].p+at*D),yt=await $(gt,Rt),wt=N.slice(at*u.n8r,(at+rt)*u.n8r),L=await g.multiExpAffine(yt,wt);J=g.add(J,L)}N=await I.batchToMontgomery(N);let it;if(u.power<I.s)it=I.neg(I.e(2));else{const at=2**I.s,rt=I.exp(I.shift,at);it=I.sub(rt,I.one)}const ot=u.power<I.s?I.w[u.power+1]:I.shift;N=await I.batchApplyKey(N,it,ot),N=await I.fft(N),N=await I.batchFromMontgomery(N),await xe(a,s,9);let et=g.zero;for(let at=0;at<u.domainSize;at+=B){i&&i.debug(`H Verificaition(lagrange):  ${at}/${u.domainSize}`);const rt=Math.min(u.domainSize-at,B),gt=await a.read(D*rt),Rt=N.slice(at*u.n8r,(at+rt)*u.n8r),yt=await g.multiExpAffine(gt,Rt);et=g.add(et,yt)}return await Ne(a),o=await Ki(_,J,et,u.vk_delta_2,P.vk_delta_2),o===!0}async function $(B,g){const I=_.G1.F.n8*2,D=B.byteLength/I,z=_.tm.concurrency,U=Math.floor(D/z),N=[];for(let it=0;it<z;it++){let ot;if(it<z-1?ot=U:ot=D-it*U,ot==0)continue;const et=B.slice(it*U*d,(it*U+ot)*d),at=g.slice(it*U*d,(it*U+ot)*d);N.push(Y(et,at))}const S=await Promise.all(N),W=new Uint8Array(D*I);let J=0;for(let it=0;it<S.length;it++)W.set(S[it][0],J),J+=S[it][0].byteLength;return W}async function Y(B,g){const I=_.G1.F.n8*2,D=_.G1.F.n8*3,z=B.byteLength/I,U=[];U.push({cmd:"ALLOCSET",var:0,buff:B}),U.push({cmd:"ALLOCSET",var:1,buff:g}),U.push({cmd:"ALLOC",var:2,len:z*D});for(let S=0;S<z;S++)U.push({cmd:"CALL",fnName:"g1m_subAffine",params:[{var:0,offset:S*I},{var:1,offset:S*I},{var:2,offset:S*D}]});return U.push({cmd:"CALL",fnName:"g1m_batchToAffine",params:[{var:2},{val:z},{var:2}]}),U.push({cmd:"GET",out:0,var:2,len:z*I}),await _.tm.queueAction(U)}}async function S3(e,t,n,i,o){await Ve.ready();const{fd:a,sections:s}=await ke(e,"zkey",2),u=await Oo(a,s);if(u.protocol!="groth16")throw new Error("zkey file is not groth16");const _=await Tn(u.q),d=await Aa(a,_,s),l=await Kr(t,"zkey",1,10),m=await f3(i),A=Ve(64);A.update(d.csHash);for(let G=0;G<d.contributions.length;G++)Po(A,_,d.contributions[G]);const p={};p.delta={},p.delta.prvKey=_.Fr.fromRng(m),p.delta.g1_s=_.G1.toAffine(_.G1.fromRng(m)),p.delta.g1_sx=_.G1.toAffine(_.G1.timesFr(p.delta.g1_s,p.delta.prvKey)),Yn(A,_,p.delta.g1_s),Yn(A,_,p.delta.g1_sx),p.transcript=A.digest(),p.delta.g2_sp=su(_,p.transcript),p.delta.g2_spx=_.G2.toAffine(_.G2.timesFr(p.delta.g2_sp,p.delta.prvKey)),u.vk_delta_1=_.G1.timesFr(u.vk_delta_1,p.delta.prvKey),u.vk_delta_2=_.G2.timesFr(u.vk_delta_2,p.delta.prvKey),p.deltaAfter=u.vk_delta_1,p.type=0,n&&(p.name=n),d.contributions.push(p),await _3(l,u),await Hi(a,s,l,3),await Hi(a,s,l,4),await Hi(a,s,l,5),await Hi(a,s,l,6),await Hi(a,s,l,7);const R=_.Fr.inv(p.delta.prvKey);await lu(a,s,l,8,_,"G1",R,_.Fr.e(1),"L Section",o),await lu(a,s,l,9,_,"G1",R,_.Fr.e(1),"H Section",o),await A3(l,_,d),await a.close(),await l.close();const P=Ve(64);Po(P,_,p);const C=P.digest();return o&&o.info(Yi(d.csHash,"Circuit Hash: ")),o&&o.info(Yi(C,"Contribution Hash: ")),C}const{stringifyBigInts:fu}=c1;async function Ia(e){const{fd:t,sections:n}=await ke(e,"zkey",2),i=await Oo(t,n);let o;if(i.protocol=="groth16")o=await v3(i,t,n);else if(i.protocol=="plonk")o=await C3(i);else throw new Error("zkey file is not groth16");return await t.close(),o}async function v3(e,t,n){const i=await Tn(e.q),o=i.G1.F.n8*2,a=await i.pairing(e.vk_alpha_1,e.vk_beta_2);let s={protocol:e.protocol,curve:i.name,nPublic:e.nPublic,vk_alpha_1:i.G1.toObject(e.vk_alpha_1),vk_beta_2:i.G2.toObject(e.vk_beta_2),vk_gamma_2:i.G2.toObject(e.vk_gamma_2),vk_delta_2:i.G2.toObject(e.vk_delta_2),vk_alphabeta_12:i.Gt.toObject(a)};await xe(t,n,3),s.IC=[];for(let u=0;u<=e.nPublic;u++){const _=await t.read(o),d=i.G1.toObject(_);s.IC.push(d)}return await Ne(t),s=fu(s),s}async function C3(e){const t=await Tn(e.q);let n={protocol:e.protocol,curve:t.name,nPublic:e.nPublic,power:e.power,k1:t.Fr.toObject(e.k1),k2:t.Fr.toObject(e.k2),Qm:t.G1.toObject(e.Qm),Ql:t.G1.toObject(e.Ql),Qr:t.G1.toObject(e.Qr),Qo:t.G1.toObject(e.Qo),Qc:t.G1.toObject(e.Qc),S1:t.G1.toObject(e.S1),S2:t.G1.toObject(e.S2),S3:t.G1.toObject(e.S3),X_2:t.G2.toObject(e.X_2),w:t.Fr.toObject(t.Fr.w[e.power])};return n=fu(n),n}var du={},hu=Ha(fp),_u={};(function(e){var t=/[|\\{}()[\]^$+*?.]/g;e.escapeRegExpChars=function(s){return s?String(s).replace(t,"\\$&"):""};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},i=/[&<>'"]/g;function o(s){return n[s]||s}var a=`var _ENCODE_HTML_RULES = {
      "&": "&amp;"
    , "<": "&lt;"
    , ">": "&gt;"
    , '"': "&#34;"
    , "'": "&#39;"
    }
  , _MATCH_HTML = /[&<>'"]/g;
function encode_char(c) {
  return _ENCODE_HTML_RULES[c] || c;
};
`;e.escapeXML=function(s){return s==null?"":String(s).replace(i,o)},e.escapeXML.toString=function(){return Function.prototype.toString.call(this)+`;
`+a},e.shallowCopy=function(s,u){if(u=u||{},s!=null)for(var _ in u)s[_]=u[_];return s},e.shallowCopyFromList=function(s,u,_){if(_=_||[],u=u||{},s!=null)for(var d=0;d<_.length;d++){var l=_[d];typeof u[l]!="undefined"&&(s[l]=u[l])}return s},e.cache={_data:{},set:function(s,u){this._data[s]=u},get:function(s){return this._data[s]},remove:function(s){delete this._data[s]},reset:function(){this._data={}}},e.hyphenToCamel=function(s){return s.replace(/-[a-z]/g,function(u){return u[1].toUpperCase()})},e.createNullProtoObjWherePossible=function(){return typeof Object.create=="function"?function(){return Object.create(null)}:{__proto__:null}instanceof Object?function(){return{}}:function(){return{__proto__:null}}}()})(_u);var b3={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"3.1.7",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",license:"Apache-2.0",bin:{ejs:"./bin/cli.js"},main:"./lib/ejs.js",jsdelivr:"ejs.min.js",unpkg:"ejs.min.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{jake:"^10.8.5"},devDependencies:{browserify:"^16.5.1",eslint:"^6.8.0","git-directory-deploy":"^1.5.1",jsdoc:"^3.6.7","lru-cache":"^4.0.1",mocha:"^7.1.1","uglify-js":"^3.3.16"},engines:{node:">=0.10.0"},scripts:{test:"mocha"}};(function(e){/**
 * @file Embedded JavaScript templating engine. {@link http://ejs.co}
 * @author Matthew Eernisse <mde@fleegix.org>
 * @author Tiancheng "Timothy" Gu <timothygu99@gmail.com>
 * @project EJS
 * @license {@link http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0}
 */var t=hu,n=hu,i=_u,o=!1,a=b3.version,s="<",u=">",_="%",d="locals",l="ejs",m="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",A=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],p=A.concat("cache"),R=/^\uFEFF/,P=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/;e.cache=i.cache,e.fileLoader=t.readFileSync,e.localsName=d,e.promiseImpl=new Function("return this;")().Promise,e.resolveInclude=function(D,z,U){var N=n.dirname,S=n.extname,W=n.resolve,J=W(U?z:N(z),D),it=S(D);return it||(J+=".ejs"),J};function C(D,z){var U;if(z.some(function(N){return U=e.resolveInclude(D,N,!0),t.existsSync(U)}))return U}function G(D,z){var U,N,S=z.views,W=/^[A-Za-z]+:\\|^\//.exec(D);if(W&&W.length)D=D.replace(/^\/*/,""),Array.isArray(z.root)?U=C(D,z.root):U=e.resolveInclude(D,z.root||"/",!0);else if(z.filename&&(N=e.resolveInclude(D,z.filename),t.existsSync(N)&&(U=N)),!U&&Array.isArray(S)&&(U=C(D,S)),!U&&typeof z.includer!="function")throw new Error('Could not find the include file "'+z.escapeFunction(D)+'"');return U}function O(D,z){var U,N=D.filename,S=arguments.length>1;if(D.cache){if(!N)throw new Error("cache option requires a filename");if(U=e.cache.get(N),U)return U;S||(z=$(N).toString().replace(R,""))}else if(!S){if(!N)throw new Error("Internal EJS error: no file name or template provided");z=$(N).toString().replace(R,"")}return U=e.compile(z,D),D.cache&&e.cache.set(N,U),U}function Z(D,z,U){var N;if(U){try{N=O(D)(z)}catch(S){return U(S)}U(null,N)}else{if(typeof e.promiseImpl=="function")return new e.promiseImpl(function(S,W){try{N=O(D)(z),S(N)}catch(J){W(J)}});throw new Error("Please provide a callback function")}}function $(D){return e.fileLoader(D)}function Y(D,z){var U=i.shallowCopy(i.createNullProtoObjWherePossible(),z);if(U.filename=G(D,U),typeof z.includer=="function"){var N=z.includer(D,U.filename);if(N&&(N.filename&&(U.filename=N.filename),N.template))return O(U,N.template)}return O(U)}function B(D,z,U,N,S){var W=z.split(`
`),J=Math.max(N-3,0),it=Math.min(W.length,N+3),ot=S(U),et=W.slice(J,it).map(function(at,rt){var gt=rt+J+1;return(gt==N?" >> ":"    ")+gt+"| "+at}).join(`
`);throw D.path=ot,D.message=(ot||"ejs")+":"+N+`
`+et+`

`+D.message,D}function g(D){return D.replace(/;(\s*$)/,"$1")}e.compile=function(z,U){var N;return U&&U.scope&&(o||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),o=!0),U.context||(U.context=U.scope),delete U.scope),N=new I(z,U),N.compile()},e.render=function(D,z,U){var N=z||i.createNullProtoObjWherePossible(),S=U||i.createNullProtoObjWherePossible();return arguments.length==2&&i.shallowCopyFromList(S,N,A),O(S,D)(N)},e.renderFile=function(){var D=Array.prototype.slice.call(arguments),z=D.shift(),U,N={filename:z},S,W;return typeof arguments[arguments.length-1]=="function"&&(U=D.pop()),D.length?(S=D.shift(),D.length?i.shallowCopy(N,D.pop()):(S.settings&&(S.settings.views&&(N.views=S.settings.views),S.settings["view cache"]&&(N.cache=!0),W=S.settings["view options"],W&&i.shallowCopy(N,W)),i.shallowCopyFromList(N,S,p)),N.filename=z):S=i.createNullProtoObjWherePossible(),Z(N,S,U)},e.Template=I,e.clearCache=function(){e.cache.reset()};function I(D,z){z=z||i.createNullProtoObjWherePossible();var U=i.createNullProtoObjWherePossible();this.templateText=D,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",U.client=z.client||!1,U.escapeFunction=z.escape||z.escapeFunction||i.escapeXML,U.compileDebug=z.compileDebug!==!1,U.debug=!!z.debug,U.filename=z.filename,U.openDelimiter=z.openDelimiter||e.openDelimiter||s,U.closeDelimiter=z.closeDelimiter||e.closeDelimiter||u,U.delimiter=z.delimiter||e.delimiter||_,U.strict=z.strict||!1,U.context=z.context,U.cache=z.cache||!1,U.rmWhitespace=z.rmWhitespace,U.root=z.root,U.includer=z.includer,U.outputFunctionName=z.outputFunctionName,U.localsName=z.localsName||e.localsName||d,U.views=z.views,U.async=z.async,U.destructuredLocals=z.destructuredLocals,U.legacyInclude=typeof z.legacyInclude!="undefined"?!!z.legacyInclude:!0,U.strict?U._with=!1:U._with=typeof z._with!="undefined"?z._with:!0,this.opts=U,this.regex=this.createRegex()}I.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},I.prototype={createRegex:function(){var D=m,z=i.escapeRegExpChars(this.opts.delimiter),U=i.escapeRegExpChars(this.opts.openDelimiter),N=i.escapeRegExpChars(this.opts.closeDelimiter);return D=D.replace(/%/g,z).replace(/</g,U).replace(/>/g,N),new RegExp(D)},compile:function(){var D,z,U=this.opts,N="",S="",W=U.escapeFunction,J,it=U.filename?JSON.stringify(U.filename):"undefined";if(!this.source){if(this.generateSource(),N+=`  var __output = "";
  function __append(s) { if (s !== undefined && s !== null) __output += s }
`,U.outputFunctionName){if(!P.test(U.outputFunctionName))throw new Error("outputFunctionName is not a valid JS identifier.");N+="  var "+U.outputFunctionName+` = __append;
`}if(U.localsName&&!P.test(U.localsName))throw new Error("localsName is not a valid JS identifier.");if(U.destructuredLocals&&U.destructuredLocals.length){for(var ot="  var __locals = ("+U.localsName+` || {}),
`,et=0;et<U.destructuredLocals.length;et++){var at=U.destructuredLocals[et];if(!P.test(at))throw new Error("destructuredLocals["+et+"] is not a valid JS identifier.");et>0&&(ot+=`,
  `),ot+=at+" = __locals."+at}N+=ot+`;
`}U._with!==!1&&(N+="  with ("+U.localsName+` || {}) {
`,S+=`  }
`),S+=`  return __output;
`,this.source=N+this.source+S}U.compileDebug?D=`var __line = 1
  , __lines = `+JSON.stringify(this.templateText)+`
  , __filename = `+it+`;
try {
`+this.source+`} catch (e) {
  rethrow(e, __lines, __filename, __line, escapeFn);
}
`:D=this.source,U.client&&(D="escapeFn = escapeFn || "+W.toString()+`;
`+D,U.compileDebug&&(D="rethrow = rethrow || "+B.toString()+`;
`+D)),U.strict&&(D=`"use strict";
`+D),U.debug&&console.log(D),U.compileDebug&&U.filename&&(D=D+`
//# sourceURL=`+it+`
`);try{if(U.async)try{J=new Function("return (async function(){}).constructor;")()}catch(yt){throw yt instanceof SyntaxError?new Error("This environment does not support async/await"):yt}else J=Function;z=new J(U.localsName+", escapeFn, include, rethrow",D)}catch(yt){throw yt instanceof SyntaxError&&(U.filename&&(yt.message+=" in "+U.filename),yt.message+=` while compiling ejs

`,yt.message+=`If the above error is not helpful, you may want to try EJS-Lint:
`,yt.message+="https://github.com/RyanZim/EJS-Lint",U.async||(yt.message+=`
`,yt.message+="Or, if you meant to create an async function, pass `async: true` as an option.")),yt}var rt=U.client?z:function(wt){var L=function(f,F){var h=i.shallowCopy(i.createNullProtoObjWherePossible(),wt);return F&&(h=i.shallowCopy(h,F)),Y(f,U)(h)};return z.apply(U.context,[wt||i.createNullProtoObjWherePossible(),W,L,B])};if(U.filename&&typeof Object.defineProperty=="function"){var gt=U.filename,Rt=n.basename(gt,n.extname(gt));try{Object.defineProperty(rt,"name",{value:Rt,writable:!1,enumerable:!1,configurable:!0})}catch{}}return rt},generateSource:function(){var D=this.opts;D.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,`
`).replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var z=this,U=this.parseTemplateText(),N=this.opts.delimiter,S=this.opts.openDelimiter,W=this.opts.closeDelimiter;U&&U.length&&U.forEach(function(J,it){var ot;if(J.indexOf(S+N)===0&&J.indexOf(S+N+N)!==0&&(ot=U[it+2],!(ot==N+W||ot=="-"+N+W||ot=="_"+N+W)))throw new Error('Could not find matching close tag for "'+J+'".');z.scanLine(J)})},parseTemplateText:function(){for(var D=this.templateText,z=this.regex,U=z.exec(D),N=[],S;U;)S=U.index,S!==0&&(N.push(D.substring(0,S)),D=D.slice(S)),N.push(U[0]),D=D.slice(U[0].length),U=z.exec(D);return D&&N.push(D),N},_addOutput:function(D){if(this.truncate&&(D=D.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!D)return D;D=D.replace(/\\/g,"\\\\"),D=D.replace(/\n/g,"\\n"),D=D.replace(/\r/g,"\\r"),D=D.replace(/"/g,'\\"'),this.source+='    ; __append("'+D+`")
`},scanLine:function(D){var z=this,U=this.opts.delimiter,N=this.opts.openDelimiter,S=this.opts.closeDelimiter,W=0;switch(W=D.split(`
`).length-1,D){case N+U:case N+U+"_":this.mode=I.modes.EVAL;break;case N+U+"=":this.mode=I.modes.ESCAPED;break;case N+U+"-":this.mode=I.modes.RAW;break;case N+U+"#":this.mode=I.modes.COMMENT;break;case N+U+U:this.mode=I.modes.LITERAL,this.source+='    ; __append("'+D.replace(N+U+U,N+U)+`")
`;break;case U+U+S:this.mode=I.modes.LITERAL,this.source+='    ; __append("'+D.replace(U+U+S,U+S)+`")
`;break;case U+S:case"-"+U+S:case"_"+U+S:this.mode==I.modes.LITERAL&&this._addOutput(D),this.mode=null,this.truncate=D.indexOf("-")===0||D.indexOf("_")===0;break;default:if(this.mode){switch(this.mode){case I.modes.EVAL:case I.modes.ESCAPED:case I.modes.RAW:D.lastIndexOf("//")>D.lastIndexOf(`
`)&&(D+=`
`)}switch(this.mode){case I.modes.EVAL:this.source+="    ; "+D+`
`;break;case I.modes.ESCAPED:this.source+="    ; __append(escapeFn("+g(D)+`))
`;break;case I.modes.RAW:this.source+="    ; __append("+g(D)+`)
`;break;case I.modes.COMMENT:break;case I.modes.LITERAL:this._addOutput(D);break}}else this._addOutput(D)}z.opts.compileDebug&&W&&(this.currentLine+=W,this.source+="    ; __line = "+this.currentLine+`
`)}},e.escapeXML=i.escapeXML,e.__express=e.renderFile,e.VERSION=a,e.name=l,typeof window!="undefined"&&(window.ejs=e)})(du);async function pu(e,t,n){const i=await Ia(e);let o=t[i.protocol];return du.render(o,i)}async function F3(e,t,n,i){globalThis.gc&&globalThis.gc(),await Ve.ready();const{fd:o,sections:a}=await ke(t,"ptau",1),{curve:s,power:u}=await cu(o,a),{fd:_,sections:d}=await ke(e,"r1cs",1),l=await bo(_,d,!1),m=s.G1.F.n8*2,A=s.G1,p=s.G2.F.n8*2,R=s.Fr,P=s.Fr.n8;i&&i.info("Reading r1cs");let C=await An(_,d,2);const G=new ln,O=new ln;let Z=l.nVars;const $=l.nOutputs+l.nPubInputs;await W(),globalThis.gc&&globalThis.gc();const Y=await Kr(n,"zkey",1,14,1<<22,1<<24);if(l.prime!=s.r)return i&&i.error("r1cs curve does not match powers of tau ceremony curve"),-1;let B=To(G.length-1)+1;B<3&&(B=3);const g=2**B;if(i&&i.info("Plonk constraints: "+G.length),B>u)return i&&i.error(`circuit too big for this power of tau ceremony. ${G.length} > 2**${u}`),-1;if(!a[12])return i&&i.error("Powers of tau is not prepared."),-1;const I=new Vt(g*m),D=a[12][0].p+(2**B-1)*m;await o.readToBuffer(I,0,g*m,D);const[z,U]=Rt(),N={};await et(3,"Additions"),globalThis.gc&&globalThis.gc(),await J(4,0,"Amap"),globalThis.gc&&globalThis.gc(),await J(5,1,"Bmap"),globalThis.gc&&globalThis.gc(),await J(6,2,"Cmap"),globalThis.gc&&globalThis.gc(),await it(7,3,"Qm"),globalThis.gc&&globalThis.gc(),await it(8,4,"Ql"),globalThis.gc&&globalThis.gc(),await it(9,5,"Qr"),globalThis.gc&&globalThis.gc(),await it(10,6,"Qo"),globalThis.gc&&globalThis.gc(),await it(11,7,"Qc"),globalThis.gc&&globalThis.gc(),await at(12,"sigma"),globalThis.gc&&globalThis.gc(),await rt(13,"lagrange polynomials"),globalThis.gc&&globalThis.gc(),await ue(Y,14);const S=new Vt((g+6)*m);await o.readToBuffer(S,0,(g+6)*m,a[2][0].p),await Y.write(S),await fe(Y),globalThis.gc&&globalThis.gc(),await gt(),await Y.close(),await _.close(),await o.close(),i&&i.info("Setup Finished");return;async function W(){let yt=0;function wt(){const h=C.slice(yt,yt+4);return yt+=4,new DataView(h.buffer).getUint32(0,!0)}function L(){const h=R.fromRprLE(C.slice(yt,yt+s.Fr.n8));return yt+=s.Fr.n8,h}function f(){const h=[],H={k:s.Fr.zero},M=wt();for(let K=0;K<M;K++){const ft=wt(),ct=L();ft==0?H.k=ct:h.push([ft,ct])}const E=F(h);return H.s=E[0],H.coef=E[1],H}function F(h){if(h.length==0)return[0,s.Fr.zero];if(h.length==1)return h[0];const H=h.slice(0,h.length>>1),M=h.slice(h.length>>1),E=F(H),K=F(M),ft=E[0],ct=K[0],Lt=Z++,Nt=s.Fr.zero,Tt=R.neg(E[1]),bt=R.neg(K[1]),St=s.Fr.one,mt=s.Fr.zero;return G.push([ft,ct,Lt,Nt,Tt,bt,St,mt]),O.push([ft,ct,E[1],K[1]]),[Lt,s.Fr.one]}for(let h=1;h<=$;h++){const H=h,M=0,E=0,K=s.Fr.zero,ft=s.Fr.one,ct=s.Fr.zero,Lt=s.Fr.zero,Nt=s.Fr.zero;G.push([H,M,E,K,ft,ct,Lt,Nt])}for(let h=0;h<l.nConstraints;h++){i&&h%1e4==0&&i.debug(`processing constraints: ${h}/${l.nConstraints}`);const H=f(),M=f(),E=f(),K=H.s,ft=M.s,ct=E.s,Lt=s.Fr.mul(H.coef,M.coef),Nt=s.Fr.mul(H.coef,M.k),Tt=s.Fr.mul(H.k,M.coef),bt=s.Fr.neg(E.coef),St=s.Fr.sub(s.Fr.mul(H.k,M.k),E.k);G.push([K,ft,ct,Lt,Nt,Tt,bt,St])}}async function J(yt,wt,L){await ue(Y,yt);for(let f=0;f<G.length;f++)await Y.writeULE32(G[f][wt]),i&&f%1e6==0&&i.debug(`writing ${L}: ${f}/${G.length}`);await fe(Y)}async function it(yt,wt,L){let f=new Vt(g*P);for(let F=0;F<G.length;F++)f.set(G[F][wt],F*P),i&&F%1e6==0&&i.debug(`writing ${L}: ${F}/${G.length}`);await ue(Y,yt),await ot(f),await fe(Y),f=await R.batchFromMontgomery(f),N[L]=await s.G1.multiExpAffine(I,f,i,"multiexp "+L)}async function ot(yt){const wt=await R.ifft(yt),L=new Vt(g*P*4);L.set(wt,0);const f=await R.fft(L);await Y.write(wt),await Y.write(f)}async function et(yt,wt){await ue(Y,yt);const L=new Uint8Array(2*4+2*P),f=new DataView(L.buffer);for(let F=0;F<O.length;F++){const h=O[F];let H=0;f.setUint32(H,h[0],!0),H+=4,f.setUint32(H,h[1],!0),H+=4,L.set(h[2],H),H+=P,L.set(h[3],H),H+=P,await Y.write(L),i&&F%1e6==0&&i.debug(`writing ${wt}: ${F}/${O.length}`)}await fe(Y)}async function at(yt,wt){const L=new Vt(P*g*3),f=new ln(Z),F=new ln(Z);let h=R.one;for(let ft=0;ft<g;ft++)ft<G.length?(K(G[ft][0],ft),K(G[ft][1],g+ft),K(G[ft][2],g*2+ft)):(K(0,ft),K(0,g+ft),K(0,g*2+ft)),h=R.mul(h,R.w[B]),i&&ft%1e6==0&&i.debug(`writing ${wt} phase1: ${ft}/${G.length}`);for(let ft=0;ft<Z;ft++)typeof F[ft]!="undefined"?L.set(f[ft],F[ft]*P):console.log("Variable not used"),i&&ft%1e6==0&&i.debug(`writing ${wt} phase2: ${ft}/${Z}`);globalThis.gc&&globalThis.gc(),await ue(Y,yt);let H=L.slice(0,g*P);await ot(H),globalThis.gc&&globalThis.gc();let M=L.slice(g*P,g*P*2);await ot(M),globalThis.gc&&globalThis.gc();let E=L.slice(g*P*2,g*P*3);await ot(E),globalThis.gc&&globalThis.gc(),await fe(Y),H=await R.batchFromMontgomery(H),M=await R.batchFromMontgomery(M),E=await R.batchFromMontgomery(E),N.S1=await s.G1.multiExpAffine(I,H,i,"multiexp S1"),globalThis.gc&&globalThis.gc(),N.S2=await s.G1.multiExpAffine(I,M,i,"multiexp S2"),globalThis.gc&&globalThis.gc(),N.S3=await s.G1.multiExpAffine(I,E,i,"multiexp S3"),globalThis.gc&&globalThis.gc();function K(ft,ct){typeof f[ft]=="undefined"?F[ft]=ct:L.set(f[ft],ct*P);let Lt;ct<g?Lt=h:ct<2*g?Lt=R.mul(h,z):Lt=R.mul(h,U),f[ft]=Lt}}async function rt(yt,wt){await ue(Y,yt);const L=Math.max($,1);for(let f=0;f<L;f++){let F=new Vt(g*P);F.set(R.one,f*P),await ot(F),i&&i.debug(`writing ${wt} ${f}/${L}`)}await fe(Y)}async function gt(){await ue(Y,1),await Y.writeULE32(2),await fe(Y),await ue(Y,2);const yt=s.q,wt=(Math.floor((ee.bitLength(yt)-1)/64)+1)*8,L=s.r,f=(Math.floor((ee.bitLength(L)-1)/64)+1)*8;await Y.writeULE32(wt),await _i(Y,yt,wt),await Y.writeULE32(f),await _i(Y,L,f),await Y.writeULE32(Z),await Y.writeULE32($),await Y.writeULE32(g),await Y.writeULE32(O.length),await Y.writeULE32(G.length),await Y.write(z),await Y.write(U),await Y.write(A.toAffine(N.Qm)),await Y.write(A.toAffine(N.Ql)),await Y.write(A.toAffine(N.Qr)),await Y.write(A.toAffine(N.Qo)),await Y.write(A.toAffine(N.Qc)),await Y.write(A.toAffine(N.S1)),await Y.write(A.toAffine(N.S2)),await Y.write(A.toAffine(N.S3));let F;F=await o.read(p,a[3][0].p+p),await Y.write(F),await fe(Y)}function Rt(){let yt=R.two;for(;L(yt,[],B);)R.add(yt,R.one);let wt=R.add(yt,R.one);for(;L(wt,[yt],B);)R.add(wt,R.one);return[yt,wt];function L(f,F,h){const H=2**h;let M=R.one;for(let E=0;E<H;E++){if(R.eq(f,M))return!0;for(let K=0;K<F.length;K++)if(R.eq(f,R.mul(F[K],M)))return!0;M=R.mul(M,R.w[h])}return!1}}}var B3={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(e){(function(){var t="input is invalid type",n="finalize already called",i=typeof window=="object",o=i?window:{};o.JS_SHA3_NO_WINDOW&&(i=!1);var a=!i&&typeof self=="object",s=!o.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?o=Qo:a&&(o=self);var u=!o.JS_SHA3_NO_COMMON_JS&&!0&&e.exports,_=!o.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",d="0123456789abcdef".split(""),l=[31,7936,2031616,520093696],m=[4,1024,262144,67108864],A=[1,256,65536,16777216],p=[6,1536,393216,100663296],R=[0,8,16,24],P=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],C=[224,256,384,512],G=[128,256],O=["hex","buffer","arrayBuffer","array","digest"],Z={"128":168,"256":136};(o.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(L){return Object.prototype.toString.call(L)==="[object Array]"}),_&&(o.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(L){return typeof L=="object"&&L.buffer&&L.buffer.constructor===ArrayBuffer});for(var $=function(L,f,F){return function(h){return new Rt(L,f,L).update(h)[F]()}},Y=function(L,f,F){return function(h,H){return new Rt(L,f,H).update(h)[F]()}},B=function(L,f,F){return function(h,H,M,E){return W["cshake"+L].update(h,H,M,E)[F]()}},g=function(L,f,F){return function(h,H,M,E){return W["kmac"+L].update(h,H,M,E)[F]()}},I=function(L,f,F,h){for(var H=0;H<O.length;++H){var M=O[H];L[M]=f(F,h,M)}return L},D=function(L,f){var F=$(L,f,"hex");return F.create=function(){return new Rt(L,f,L)},F.update=function(h){return F.create().update(h)},I(F,$,L,f)},z=function(L,f){var F=Y(L,f,"hex");return F.create=function(h){return new Rt(L,f,h)},F.update=function(h,H){return F.create(H).update(h)},I(F,Y,L,f)},U=function(L,f){var F=Z[L],h=B(L,f,"hex");return h.create=function(H,M,E){return!M&&!E?W["shake"+L].create(H):new Rt(L,f,H).bytepad([M,E],F)},h.update=function(H,M,E,K){return h.create(M,E,K).update(H)},I(h,B,L,f)},N=function(L,f){var F=Z[L],h=g(L,f,"hex");return h.create=function(H,M,E){return new yt(L,f,M).bytepad(["KMAC",E],F).bytepad([H],F)},h.update=function(H,M,E,K){return h.create(H,E,K).update(M)},I(h,g,L,f)},S=[{name:"keccak",padding:A,bits:C,createMethod:D},{name:"sha3",padding:p,bits:C,createMethod:D},{name:"shake",padding:l,bits:G,createMethod:z},{name:"cshake",padding:m,bits:G,createMethod:U},{name:"kmac",padding:m,bits:G,createMethod:N}],W={},J=[],it=0;it<S.length;++it)for(var ot=S[it],et=ot.bits,at=0;at<et.length;++at){var rt=ot.name+"_"+et[at];if(J.push(rt),W[rt]=ot.createMethod(et[at],ot.padding),ot.name!=="sha3"){var gt=ot.name+et[at];J.push(gt),W[gt]=W[rt]}}function Rt(L,f,F){this.blocks=[],this.s=[],this.padding=f,this.outputBits=F,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(L<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=F>>5,this.extraBytes=(F&31)>>3;for(var h=0;h<50;++h)this.s[h]=0}Rt.prototype.update=function(L){if(this.finalized)throw new Error(n);var f,F=typeof L;if(F!=="string"){if(F==="object"){if(L===null)throw new Error(t);if(_&&L.constructor===ArrayBuffer)L=new Uint8Array(L);else if(!Array.isArray(L)&&(!_||!ArrayBuffer.isView(L)))throw new Error(t)}else throw new Error(t);f=!0}for(var h=this.blocks,H=this.byteCount,M=L.length,E=this.blockCount,K=0,ft=this.s,ct,Lt;K<M;){if(this.reset)for(this.reset=!1,h[0]=this.block,ct=1;ct<E+1;++ct)h[ct]=0;if(f)for(ct=this.start;K<M&&ct<H;++K)h[ct>>2]|=L[K]<<R[ct++&3];else for(ct=this.start;K<M&&ct<H;++K)Lt=L.charCodeAt(K),Lt<128?h[ct>>2]|=Lt<<R[ct++&3]:Lt<2048?(h[ct>>2]|=(192|Lt>>6)<<R[ct++&3],h[ct>>2]|=(128|Lt&63)<<R[ct++&3]):Lt<55296||Lt>=57344?(h[ct>>2]|=(224|Lt>>12)<<R[ct++&3],h[ct>>2]|=(128|Lt>>6&63)<<R[ct++&3],h[ct>>2]|=(128|Lt&63)<<R[ct++&3]):(Lt=65536+((Lt&1023)<<10|L.charCodeAt(++K)&1023),h[ct>>2]|=(240|Lt>>18)<<R[ct++&3],h[ct>>2]|=(128|Lt>>12&63)<<R[ct++&3],h[ct>>2]|=(128|Lt>>6&63)<<R[ct++&3],h[ct>>2]|=(128|Lt&63)<<R[ct++&3]);if(this.lastByteIndex=ct,ct>=H){for(this.start=ct-H,this.block=h[E],ct=0;ct<E;++ct)ft[ct]^=h[ct];wt(ft),this.reset=!0}else this.start=ct}return this},Rt.prototype.encode=function(L,f){var F=L&255,h=1,H=[F];for(L=L>>8,F=L&255;F>0;)H.unshift(F),L=L>>8,F=L&255,++h;return f?H.push(h):H.unshift(h),this.update(H),H.length},Rt.prototype.encodeString=function(L){var f,F=typeof L;if(F!=="string"){if(F==="object"){if(L===null)throw new Error(t);if(_&&L.constructor===ArrayBuffer)L=new Uint8Array(L);else if(!Array.isArray(L)&&(!_||!ArrayBuffer.isView(L)))throw new Error(t)}else throw new Error(t);f=!0}var h=0,H=L.length;if(f)h=H;else for(var M=0;M<L.length;++M){var E=L.charCodeAt(M);E<128?h+=1:E<2048?h+=2:E<55296||E>=57344?h+=3:(E=65536+((E&1023)<<10|L.charCodeAt(++M)&1023),h+=4)}return h+=this.encode(h*8),this.update(L),h},Rt.prototype.bytepad=function(L,f){for(var F=this.encode(f),h=0;h<L.length;++h)F+=this.encodeString(L[h]);var H=f-F%f,M=[];return M.length=H,this.update(M),this},Rt.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var L=this.blocks,f=this.lastByteIndex,F=this.blockCount,h=this.s;if(L[f>>2]|=this.padding[f&3],this.lastByteIndex===this.byteCount)for(L[0]=L[F],f=1;f<F+1;++f)L[f]=0;for(L[F-1]|=2147483648,f=0;f<F;++f)h[f]^=L[f];wt(h)}},Rt.prototype.toString=Rt.prototype.hex=function(){this.finalize();for(var L=this.blockCount,f=this.s,F=this.outputBlocks,h=this.extraBytes,H=0,M=0,E="",K;M<F;){for(H=0;H<L&&M<F;++H,++M)K=f[H],E+=d[K>>4&15]+d[K&15]+d[K>>12&15]+d[K>>8&15]+d[K>>20&15]+d[K>>16&15]+d[K>>28&15]+d[K>>24&15];M%L==0&&(wt(f),H=0)}return h&&(K=f[H],E+=d[K>>4&15]+d[K&15],h>1&&(E+=d[K>>12&15]+d[K>>8&15]),h>2&&(E+=d[K>>20&15]+d[K>>16&15])),E},Rt.prototype.arrayBuffer=function(){this.finalize();var L=this.blockCount,f=this.s,F=this.outputBlocks,h=this.extraBytes,H=0,M=0,E=this.outputBits>>3,K;h?K=new ArrayBuffer(F+1<<2):K=new ArrayBuffer(E);for(var ft=new Uint32Array(K);M<F;){for(H=0;H<L&&M<F;++H,++M)ft[M]=f[H];M%L==0&&wt(f)}return h&&(ft[H]=f[H],K=K.slice(0,E)),K},Rt.prototype.buffer=Rt.prototype.arrayBuffer,Rt.prototype.digest=Rt.prototype.array=function(){this.finalize();for(var L=this.blockCount,f=this.s,F=this.outputBlocks,h=this.extraBytes,H=0,M=0,E=[],K,ft;M<F;){for(H=0;H<L&&M<F;++H,++M)K=M<<2,ft=f[H],E[K]=ft&255,E[K+1]=ft>>8&255,E[K+2]=ft>>16&255,E[K+3]=ft>>24&255;M%L==0&&wt(f)}return h&&(K=M<<2,ft=f[H],E[K]=ft&255,h>1&&(E[K+1]=ft>>8&255),h>2&&(E[K+2]=ft>>16&255)),E};function yt(L,f,F){Rt.call(this,L,f,F)}yt.prototype=new Rt,yt.prototype.finalize=function(){return this.encode(this.outputBits,!0),Rt.prototype.finalize.call(this)};var wt=function(L){var f,F,h,H,M,E,K,ft,ct,Lt,Nt,Tt,bt,St,mt,Et,Bt,Pt,Ct,Ht,b,x,q,Q,tt,X,st,w,r,c,y,v,T,k,V,nt,dt,_t,ut,It,xt,Ot,Ft,Ut,Dt,$t,Gt,kt,Mt,Kt,Le,Qe,Ai,Rn,On,Ii,Pn,xn,Li,En,un,Vn,No;for(h=0;h<48;h+=2)H=L[0]^L[10]^L[20]^L[30]^L[40],M=L[1]^L[11]^L[21]^L[31]^L[41],E=L[2]^L[12]^L[22]^L[32]^L[42],K=L[3]^L[13]^L[23]^L[33]^L[43],ft=L[4]^L[14]^L[24]^L[34]^L[44],ct=L[5]^L[15]^L[25]^L[35]^L[45],Lt=L[6]^L[16]^L[26]^L[36]^L[46],Nt=L[7]^L[17]^L[27]^L[37]^L[47],Tt=L[8]^L[18]^L[28]^L[38]^L[48],bt=L[9]^L[19]^L[29]^L[39]^L[49],f=Tt^(E<<1|K>>>31),F=bt^(K<<1|E>>>31),L[0]^=f,L[1]^=F,L[10]^=f,L[11]^=F,L[20]^=f,L[21]^=F,L[30]^=f,L[31]^=F,L[40]^=f,L[41]^=F,f=H^(ft<<1|ct>>>31),F=M^(ct<<1|ft>>>31),L[2]^=f,L[3]^=F,L[12]^=f,L[13]^=F,L[22]^=f,L[23]^=F,L[32]^=f,L[33]^=F,L[42]^=f,L[43]^=F,f=E^(Lt<<1|Nt>>>31),F=K^(Nt<<1|Lt>>>31),L[4]^=f,L[5]^=F,L[14]^=f,L[15]^=F,L[24]^=f,L[25]^=F,L[34]^=f,L[35]^=F,L[44]^=f,L[45]^=F,f=ft^(Tt<<1|bt>>>31),F=ct^(bt<<1|Tt>>>31),L[6]^=f,L[7]^=F,L[16]^=f,L[17]^=F,L[26]^=f,L[27]^=F,L[36]^=f,L[37]^=F,L[46]^=f,L[47]^=F,f=Lt^(H<<1|M>>>31),F=Nt^(M<<1|H>>>31),L[8]^=f,L[9]^=F,L[18]^=f,L[19]^=F,L[28]^=f,L[29]^=F,L[38]^=f,L[39]^=F,L[48]^=f,L[49]^=F,St=L[0],mt=L[1],$t=L[11]<<4|L[10]>>>28,Gt=L[10]<<4|L[11]>>>28,w=L[20]<<3|L[21]>>>29,r=L[21]<<3|L[20]>>>29,En=L[31]<<9|L[30]>>>23,un=L[30]<<9|L[31]>>>23,Ot=L[40]<<18|L[41]>>>14,Ft=L[41]<<18|L[40]>>>14,k=L[2]<<1|L[3]>>>31,V=L[3]<<1|L[2]>>>31,Et=L[13]<<12|L[12]>>>20,Bt=L[12]<<12|L[13]>>>20,kt=L[22]<<10|L[23]>>>22,Mt=L[23]<<10|L[22]>>>22,c=L[33]<<13|L[32]>>>19,y=L[32]<<13|L[33]>>>19,Vn=L[42]<<2|L[43]>>>30,No=L[43]<<2|L[42]>>>30,Rn=L[5]<<30|L[4]>>>2,On=L[4]<<30|L[5]>>>2,nt=L[14]<<6|L[15]>>>26,dt=L[15]<<6|L[14]>>>26,Pt=L[25]<<11|L[24]>>>21,Ct=L[24]<<11|L[25]>>>21,Kt=L[34]<<15|L[35]>>>17,Le=L[35]<<15|L[34]>>>17,v=L[45]<<29|L[44]>>>3,T=L[44]<<29|L[45]>>>3,Q=L[6]<<28|L[7]>>>4,tt=L[7]<<28|L[6]>>>4,Ii=L[17]<<23|L[16]>>>9,Pn=L[16]<<23|L[17]>>>9,_t=L[26]<<25|L[27]>>>7,ut=L[27]<<25|L[26]>>>7,Ht=L[36]<<21|L[37]>>>11,b=L[37]<<21|L[36]>>>11,Qe=L[47]<<24|L[46]>>>8,Ai=L[46]<<24|L[47]>>>8,Ut=L[8]<<27|L[9]>>>5,Dt=L[9]<<27|L[8]>>>5,X=L[18]<<20|L[19]>>>12,st=L[19]<<20|L[18]>>>12,xn=L[29]<<7|L[28]>>>25,Li=L[28]<<7|L[29]>>>25,It=L[38]<<8|L[39]>>>24,xt=L[39]<<8|L[38]>>>24,x=L[48]<<14|L[49]>>>18,q=L[49]<<14|L[48]>>>18,L[0]=St^~Et&Pt,L[1]=mt^~Bt&Ct,L[10]=Q^~X&w,L[11]=tt^~st&r,L[20]=k^~nt&_t,L[21]=V^~dt&ut,L[30]=Ut^~$t&kt,L[31]=Dt^~Gt&Mt,L[40]=Rn^~Ii&xn,L[41]=On^~Pn&Li,L[2]=Et^~Pt&Ht,L[3]=Bt^~Ct&b,L[12]=X^~w&c,L[13]=st^~r&y,L[22]=nt^~_t&It,L[23]=dt^~ut&xt,L[32]=$t^~kt&Kt,L[33]=Gt^~Mt&Le,L[42]=Ii^~xn&En,L[43]=Pn^~Li&un,L[4]=Pt^~Ht&x,L[5]=Ct^~b&q,L[14]=w^~c&v,L[15]=r^~y&T,L[24]=_t^~It&Ot,L[25]=ut^~xt&Ft,L[34]=kt^~Kt&Qe,L[35]=Mt^~Le&Ai,L[44]=xn^~En&Vn,L[45]=Li^~un&No,L[6]=Ht^~x&St,L[7]=b^~q&mt,L[16]=c^~v&Q,L[17]=y^~T&tt,L[26]=It^~Ot&k,L[27]=xt^~Ft&V,L[36]=Kt^~Qe&Ut,L[37]=Le^~Ai&Dt,L[46]=En^~Vn&Rn,L[47]=un^~No&On,L[8]=x^~St&Et,L[9]=q^~mt&Bt,L[18]=v^~Q&X,L[19]=T^~tt&st,L[28]=Ot^~k&nt,L[29]=Ft^~V&dt,L[38]=Qe^~Ut&$t,L[39]=Ai^~Dt&Gt,L[48]=Vn^~Rn&Ii,L[49]=No^~On&Pn,L[0]^=P[h],L[1]^=P[h+1]};if(u)e.exports=W;else for(it=0;it<J.length;++it)o[J[it]]=W[J[it]]})()})(B3);let xo,le;async function T3(e){var Z,$,Y;const t=await go,n=performance.now();for(var i of e)t.fs.writeFileSync(i.name,Oc(i.value));const o=((Z=e.find(B=>B.active&&B.value.includes("component main")))==null?void 0:Z.name)||(($=e.find(B=>B.name==="main.circom"))==null?void 0:$.name)||((Y=e.find(B=>B.value.includes("component main")))==null?void 0:Y.name)||"main.circom";le=o.replace(/\..*$/,"");const a=e.find(B=>B.name===o).value,s=/\/\/\s*zkrepl:\s*(.*)/i.exec(a),u=s?s[1].split(/[\s,]+/):[],_={nowasm:u.includes("nowasm"),nor1cs:u.includes("nor1cs"),nosym:u.includes("nosym"),nowtns:u.includes("nowtns")};await ch(o,_);const d=t.fs.readFileSync("/dev/stderr","utf8");d&&postMessage({type:"stderr",text:d});let l=await t.getStdOut();postMessage({type:"stdout",text:l+`Compiled in ${((performance.now()-n)/1e3).toFixed(2)}s`});let m,A=[],p,R;_.nowasm||(p=t.fs.readFileSync(`${le}_js/${le}.wasm`),_.nowtns||(m=await we(p,{log(B){A.push(B.toString())}})));let P;if(!_.nor1cs){R=t.fs.readFileSync(`${le}.r1cs`);const{fd:B,sections:g}=await ke(R,"r1cs",1);P=await bo(B,g,!0),await B.close()}const C=/\/*\s*INPUT\s*=\s*(\{[\s\S]+\})\s*\*\//.exec(a);let G={};if(C?G=JSON.parse(C[1]):P&&P.nPrvInputs+P.nPubInputs>0&&postMessage({type:"stderr",text:`To specify inputs, add to your circuit: 

INPUT = { "a": "1234" }`}),m&&(xo=await m.calculateWTNSBin(G,!0)),A.length>0&&postMessage({type:"log",text:A.join(`
`)}),P&&P.nOutputs>0){const{fd:B,sections:g}=await ke(xo,"wtns",2),I=await Sa(B,g),D=await An(B,g,2);let z={};if(!_.nosym){const N=t.fs.readFileSync(`${le}.sym`);let S=0,W=new TextDecoder("utf-8");for(let J=0;J<N.length;J++)if(N[J]===10){let it=W.decode(N.slice(S,J)),ot=+it.split(",")[0];ot<=P.nOutputs&&(z[ot]=it.split(",")[3].replace("main.","")+" = "),S=J}}let U=[];for(let N=1;N<=P.nOutputs;N++){const S=D.slice(N*I.n8,N*I.n8+I.n8),W=z[N]||"";U.push(W+ee.fromRprLE(S).toString())}postMessage({type:"Output",text:U.join(`
`)}),await B.close()}postMessage({type:"Artifacts",text:"",files:Object.fromEntries(Object.entries({[`${le}.wasm`]:p,[`${le}.js`]:p&&t.fs.readFileSync(`${le}_js/witness_calculator.js`),[`${le}.wtns`]:!_.nowtns&&!_.nowasm&&xo,[`${le}.r1cs`]:R,[`${le}.sym`]:!_.nosym&&t.fs.readFileSync(`${le}.sym`)}).filter(([B,g])=>g))});const O=performance.now()-n;postMessage({type:"done",time:O,text:`Finished in ${(O/1e3).toFixed(2)}s`})}function R3(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}async function O3(e){const t=await go;let n=new RegExp("\\b"+R3(e)+"(\\b|$)"),i=_=>n.test(_),o=[];const a=t.fs.readFileSync(`${le}.sym`);let s=0,u=new TextDecoder("utf-8");for(let _=0;_<a.length;_++){if(a[_]!==10)continue;const l=u.decode(a.slice(s,_)).split(",");if(l[3]&&i(l[3])){const{fd:m,sections:A}=await ke(xo,"wtns",2),p=await Sa(m,A),R=await An(m,A,2),P=parseInt(l[1]);if(P!==-1){const C=R.slice(P*p.n8,P*p.n8+p.n8);o.push("*"+l[3].replace("main.","")+" =* "+ee.fromRprLE(C).toString())}if(await m.close(),o.length>3){o.push("...");break}}s=_+1}postMessage({type:"hover",text:o.join(`

`)})}onmessage=e=>{const t=e.data;t.type==="run"?T3(t.files).catch(n=>{postMessage({type:"fail",text:n.message})}):t.type==="hover"?O3(t.symbol).catch(n=>{console.log("hover err",n),postMessage({type:"hover",text:""})}):t.type==="groth16"?N3().catch(n=>{postMessage({type:"fail",text:n.message})}):t.type==="plonk"?x3().catch(n=>{postMessage({type:"fail",text:n.message})}):t.type==="verify"&&P3(t.data).catch(n=>{postMessage({type:"fail",text:n.message})})};async function P3(e){const{r1cs:t,r1csFile:n}=await La(),i=await wa(t.nConstraints),[o,a]=Ea(),s={type:"bigMem"};for(await uu(n,i,s,o);a.pop(););const u=await w3(s,i,new Uint8Array(e),o);postMessage({type:"verified",text:u?"Successfully verified zkey matches circuit":"Circuit does not match zkey"}),a.length>0&&postMessage({type:"log",text:a.join(`
`)})}async function La(){const t=(await go).fs.readFileSync(`${le}.r1cs`),{fd:n,sections:i}=await ke(t,"r1cs",1),o=await bo(n,i,!0);return await n.close(),{r1cs:o,r1csFile:t}}async function x3(){const{r1cs:e,r1csFile:t}=await La(),n=await wa(4*3*e.nConstraints+e.nPubInputs+e.nOutputs),i={type:"mem",data:null},[o,a]=Ea();await F3(t,n,i,o);const s=JSON.stringify(await Ia(i.data),null,"  "),u=await pu(i.data,{plonk:u1});postMessage({type:"keys",files:{[le+".plonk.zkey"]:i.data,[le+".plonk.vkey.json"]:s,[le+".plonk.sol"]:u}})}function Ea(){const e=[];return[{info(n){e.push(n),console.log("INFO",n)},warn(n){console.log("WARN",n)},debug(n){},error(n){console.log("ERROR",n)}},e]}async function N3(){const{r1cs:e,r1csFile:t}=await La(),n=await wa(e.nConstraints),i={type:"mem",data:null},[o,a]=Ea(),s=await uu(t,n,i,o),u={type:"mem",data:null},_=globalThis.crypto.getRandomValues(new Uint8Array(512)),d=await S3(i.data,u,"zkrepl",_);console.log("ZKEY",s,u,d);const l=JSON.stringify(await Ia(u.data),null,"  "),m=await pu(u.data,{groth16:l1});postMessage({type:"keys",files:{[le+".groth16.zkey"]:u.data,[le+".groth16.vkey.json"]:l,[le+".groth16.sol"]:m}})}async function wa(e){const n=[{url:"https://cloudflare-ipfs.com/ipfs/bafybeierwc3pmc2id2zfpgb42njkzvvvj4s333dcq4gr5ri2ixa6vuxi6a",name:"powersOfTau28_hez_final_11.ptau",maxConstraints:1<<11,size:2442392},{url:"https://cloudflare-ipfs.com/ipfs/bafybeibyoizq4sfp7sfomoofgczak3lgispbvviljjgdpchsxjrb4p6qsi",name:"powersOfTau28_hez_final_12.ptau",maxConstraints:1<<12,size:4801688},{url:"https://cloudflare-ipfs.com/ipfs/bafybeiderqjodw2mc6m5fqnc7edsun5eu4niupyw3cdsiruospa66y5vam",name:"powersOfTau28_hez_final_13.ptau",maxConstraints:1<<13,size:9520280},{url:"https://cloudflare-ipfs.com/ipfs/bafybeihuh2cuustfaraum3txs2scrl5vaukkc6u5ztf27jlyx5xhtsz5ti",name:"powersOfTau28_hez_final_14.ptau",maxConstraints:1<<14,size:18957464},{url:"https://dweb.link/ipfs/bafybeihfv3pmjkfmefpwdxwmxxqtsax4ljshnhl3qai4v62q5r2wszix34",name:"powersOfTau28_hez_final_15.ptau",maxConstraints:1<<15,size:37831832},{url:"https://cloudflare-ipfs.com/ipfs/bafybeiajy6lpqym5fvszu4klbzoqzljwhv4ocxvqmwvlwrg6pd6rieggd4",name:"powersOfTau28_hez_final_16.ptau",maxConstraints:1<<16,size:75580568},{url:"https://dweb.link/ipfs/bafybeib6a55iwy4666wxcwo7vy756sn36cwyx7u2u5idqcjxopwa7wpb3m",name:"powersOfTau28_hez_final_17.ptau",maxConstraints:1<<17,size:151078040},{url:"https://dweb.link/ipfs/bafybeidmnn4gwlirvok6vllpu4b7hkgheyemmptmeqgmhk3ony6aanv77e",name:"powersOfTau28_hez_final_18.ptau",maxConstraints:1<<18,size:302072984}].find(u=>u.maxConstraints>=e);if(!n)throw new Error("No powers of tau supported for "+e+" constraints");console.log(e,n),postMessage({type:"progress",fraction:null});const i=await fetch(n.url);let o=0;const a=new Response(new ReadableStream({async start(u){const _=i.body.getReader();for(;;){const{done:d,value:l}=await _.read();if(d)break;o+=l.byteLength,postMessage({type:"progress",fraction:o/n.size}),u.enqueue(l)}u.close()}}));return new Uint8Array(await a.arrayBuffer())}async function Sa(e,t){await xe(e,t,1);const n=await e.readULE32(),i=await pi(e,n),o=await e.readULE32();return await Ne(e),{n8:n,q:i,nWitness:o}}return Ee.readWtnsHeader=Sa,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee})({});
