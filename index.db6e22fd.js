import{l as f,R as S,w as $,a as t,e as C,K as v,b as y,_ as N,c as R}from"./vendor.bfb6eff5.js";const L=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function m(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerpolicy&&(e.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?e.credentials="include":o.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(o){if(o.ep)return;o.ep=!0;const e=m(o);fetch(o.href,e)}};L();f.register({id:"circom"});let E=d=>{};f.registerHoverProvider("circom",{provideHover:async function(d,r){if(x.running)return null;const m=d.getLineContent(r.lineNumber),l=/([a-z$_][a-z0-9$_]*)(\.[a-z$_][a-z0-9$_]*)*(\[\d+\])?/g,o=r.column;let e;if(e=/(include\s+)"([^"]+)"/g.exec(m),e){let a=[];return e[2].startsWith("circomlib/")?a.push({value:`[View Source](https://github.com/iden3/circomlib/blob/master/circuits/${e[2].replace("circomlib/","")})`}):e[2].startsWith("gist:")&&a.push({value:`[View Source](https://gist.github.com/${e[2].replace("gist:","")})`}),{range:new S(r.lineNumber,1+e.index+e[1].length,r.lineNumber,1+e.index+e[0].length),contents:a}}for(;(e=l.exec(m))&&!(e.index>o);){if(e.index+e[0].length<o)continue;const a=e[0],s=await new Promise(u=>{E=g=>{u(g.text),E=()=>{}},x.postMessage({type:"hover",symbol:a})});return{range:new S(r.lineNumber,1+e.index,r.lineNumber,1+e.index+e[0].length),contents:[{value:s}]}}return null}});f.setLanguageConfiguration("circom",{wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:f.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:f.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|(\ \ ))*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:f.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|(\ \ ))*\ \*\/\s*$/,action:{indentAction:f.IndentAction.None,removeText:1}}],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/**",close:" */",notIn:["string"]}],folding:{markers:{start:new RegExp("^\\s*//\\s*#?region\\b"),end:new RegExp("^\\s*//\\s*#?endregion\\b")}}});f.setMonarchTokensProvider("circom",{keywords:["signal","input","output","public","template","component","var","function","return","if","else","for","while","do","log","assert","include","pragma"],typeKeywords:["input","output","public"],operators:["!","~","-","||","&&","==","!=","<",">","<=",">=","|","&","<<",">>","+","-","*","/","\\","%","**","^","=","<--","<=="],escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/@\s*[a-zA-Z_\$][\w\$]*/,{token:"annotation",log:"annotation token: $0"}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[[/[^\/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[\/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]}});var T=`pragma circom 2.0.1;

include "circomlib/poseidon.circom";

template Example () {
    signal input a;
    signal input b;
    signal output c;
    
    c <== a * b;

    assert(a > 2);
    
    component hash = Poseidon(2);
    hash.inputs[0] <== a;
    hash.inputs[1] <== b;

    log(hash.out);
}

component main { public [ a ] } = Example();

/* INPUT = {
    "a": "5",
    "b": "77"
} */`;function I(){return new Worker("worker.d6c1c469.js",{type:"module"})}var P="circomlib.acbc52cb.zip";console.log(P,$);var x;function z(){const[d,r]=t.useState(!1),[m,l]=t.useState([]),[o,e]=t.useState(null),a=t.useRef(null),s=t.useRef(null);return t.useEffect(()=>{if(a&&!o){const u=new URLSearchParams(location.search).get("code");u&&(history.replaceState(null,"","/"),fetch("https://kikks470wl.execute-api.us-west-1.amazonaws.com/access_token?code="+u,{method:"POST"}).then(n=>n.formData()).then(n=>{n.get("access_token")?(localStorage.GithubAccessToken=n.get("access_token"),c.getModel().setValue(localStorage.GithubNavigationCodeSnapshot),w()):alert("Failed to get access token")}));const g=new URLSearchParams(location.search).get("gist");g&&fetch("https://api.github.com/gists/"+g).then(n=>n.json()).then(n=>{var i,p;c.getModel().setValue(((p=(i=n==null?void 0:n.files)==null?void 0:i["main.circom"])==null?void 0:p.content)||"// Unable to load gist"),h()});const c=C.create(a.current,{value:g?"// Loading from Github...":T,language:"circom",theme:"vs",automaticLayout:!0,hover:{enabled:!0}}),h=()=>{(!s.current||s.current.running)&&(s.current&&(s.current.terminate(),s.current=null),s.current=new I,x=s.current,s.current.onmessage=n=>{const i=n.data;if(i.type==="fail")r(!1),s.current.running=!1;else if(i.type==="done")r(!1),s.current.running=!1;else{if(i.type==="hover")return E(i);i.type==="debug"&&console.log(i.text)}l(p=>[...p,i])},s.current.onerror=n=>{console.error(n),l(i=>[...i,{type:"error",text:n.message}])}),s.current.running=!0,r(Math.random()+1),l([]),s.current.postMessage({type:"run",code:c.getValue()})},w=()=>{const n=new URLSearchParams(location.search).get("gist"),i=()=>{localStorage.GithubNavigationCodeSnapshot=c.getValue(),location.href="https://github.com/login/oauth/authorize?client_id=85123c5a3a8a8f73f015&scope=gist"},p=c.getValue();if(history.state===p)console.log("Already saved!");else if(localStorage.GithubAccessToken){r(Math.random()+1);const k={"main.circom":{content:p}};n&&(k["about.md"]={content:`Open this in [zkREPL \u2192](https://zkrepl.dev/?gist=${n})

This file can be included into other zkREPLs with \`\`\`include "gist:`+n+'";```'}),fetch(n?"https://api.github.com/gists/"+n:"https://api.github.com/gists",{method:"POST",body:JSON.stringify({files:k}),headers:{Authorization:"token "+localStorage.GithubAccessToken}}).then(b=>b.json()).then(b=>{b.id?(history.replaceState(p,"","/?gist="+b.id),l(A=>[...A,{type:"save",url:`https://gist.github.com/${b.id}`,text:"Saved to Github"}])):b.message==="Bad credentials"?i():b.message==="Not Found"&&n&&(history.replaceState(null,"","/"),w()),r(!1)})}else i()};c.addCommand(v.CtrlCmd|y.KeyS,w),c.addCommand(v.CtrlCmd|y.Enter,h),c.addCommand(v.Shift|y.Enter,h),c.addCommand(v.CtrlCmd|y.Period,function(){console.log("Abort kernel!"),r(!1),l(n=>[...n,{type:"abort",text:"Execution manually interrupted"}]),s.current&&(s.current.terminate(),s.current=null)}),g||h(),e(c)}return()=>o==null?void 0:o.dispose()},[a.current]),t.createElement("div",{className:"layout"},t.createElement("div",{className:"editor",ref:a}),t.createElement("div",{className:"sidebar"},t.createElement("div",{className:"output"},t.createElement("div",{className:"label"},"Shift-Enter to run. Cmd-S to save to Github Gists."),t.createElement("br",null),m.map((u,g)=>t.createElement("div",{key:g},t.createElement("div",{className:"label"},u.type,": "),u.url?t.createElement("a",{href:u.url},t.createElement(N,null,u.text)):t.createElement(N,null,u.text),u.files&&t.createElement("div",{className:"files"},Object.entries(u.files).map(([c,h])=>t.createElement("li",{key:c},t.createElement("a",{href:URL.createObjectURL(new Blob([h],{type:"application/octet-stream"})),download:c},c)," ","(",(h.length/1e3).toFixed(2),"KB)"))))),d?t.createElement(O,{key:d}):null)))}function O(){const[d,r]=t.useState(0);return t.useEffect(()=>{const m=Date.now(),l=setInterval(()=>{r(Date.now()-m)},16);return()=>clearInterval(l)},[]),t.createElement("div",{className:"loading"},t.createElement("div",{className:"lds-ellipsis"},t.createElement("div",null),t.createElement("div",null),t.createElement("div",null),t.createElement("div",null)),d>200&&t.createElement("div",{className:"time"},(d/1e3).toFixed(2),"s"))}R.createRoot(document.getElementById("root")).render(t.createElement(z,null));
